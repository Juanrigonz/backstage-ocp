{"version":3,"file":"index-f5981b27.esm.js","sources":["../../src/homePageComponents/StarredEntities/Content.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  catalogApiRef,\n  useStarredEntities,\n  entityRouteParams,\n  entityRouteRef,\n} from '@backstage/plugin-catalog-react';\nimport { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport { Link, Progress, ResponseErrorPanel } from '@backstage/core-components';\nimport {\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  IconButton,\n  ListItemText,\n  Tooltip,\n  Typography,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\n/**\n * A component to display a list of starred entities for the user.\n *\n * @public\n */\n\nexport const Content = (props: {\n  noStarredEntitiesMessage?: React.ReactNode | undefined;\n}) => {\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { starredEntities, toggleStarredEntity } = useStarredEntities();\n\n  // Grab starred entities from catalog to ensure they still exist and also retrieve display titles\n  const entities = useAsync(async () => {\n    if (!starredEntities.size) {\n      return [];\n    }\n\n    const filter = [...starredEntities]\n      .map(ent => parseEntityRef(ent))\n      .map(ref => ({\n        kind: ref.kind,\n        'metadata.namespace': ref.namespace,\n        'metadata.name': ref.name,\n      }));\n\n    return (\n      await catalogApi.getEntities({\n        filter,\n        fields: [\n          'kind',\n          'metadata.namespace',\n          'metadata.name',\n          'metadata.title',\n        ],\n      })\n    ).items;\n  }, [catalogApi, starredEntities]);\n\n  if (starredEntities.size === 0)\n    return (\n      <Typography variant=\"body1\">\n        {props.noStarredEntitiesMessage ||\n          'Click the star beside an entity name to add it to this list!'}\n      </Typography>\n    );\n\n  if (entities.loading) {\n    return <Progress />;\n  }\n\n  return entities.error ? (\n    <ResponseErrorPanel error={entities.error} />\n  ) : (\n    <List>\n      {entities.value\n        ?.sort((a, b) =>\n          (a.metadata.title ?? a.metadata.name).localeCompare(\n            b.metadata.title ?? b.metadata.name,\n          ),\n        )\n        .map(entity => (\n          <ListItem key={stringifyEntityRef(entity)}>\n            <Link to={catalogEntityRoute(entityRouteParams(entity))}>\n              <ListItemText\n                primary={entity.metadata.title ?? entity.metadata.name}\n              />\n            </Link>\n            <ListItemSecondaryAction>\n              <Tooltip title=\"Remove from starred\">\n                <IconButton\n                  edge=\"end\"\n                  aria-label=\"unstar\"\n                  onClick={() => toggleStarredEntity(entity)}\n                >\n                  <StarIcon style={{ color: '#f3ba37' }} />\n                </IconButton>\n              </Tooltip>\n            </ListItemSecondaryAction>\n          </ListItem>\n        ))}\n    </List>\n  );\n};\n"],"names":["_a"],"mappings":"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"}