(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(fn,Ut,e){"use strict";e.d(Ut,{r:function(){return he}});var l=e(53907),y=e(30705),g=e(56563),d=e(2784),m=e(77277),A=e(80236),H=e(73557),je=e(39857),r=e(43642),be=e(80079),ne=e(90941),ie=e(32915),ve=e(40562),Y=e(21853),Ee=e(60744),fe=e(66569),_=e(30254),Ce=e(13384),I=e(15933),Pt=e(58838),Oe=e(86737),pe=e(4989),Se=e(44407),F=e(18628),Je=e(84219),Ct=e(98685),it=e(39781),Bt=e(39412),Ue=e(73689),tt=e(12536),lt=e(19219),Yt=e(41547),ot=e(47591),rn=e(93606),C=e(3493),At=e(81887),en=e(68542),tn=e(87561);const K=S=>(...h)=>{const c=h.length===0?[1]:h,b=(L,D)=>typeof L=="string"?L:D*L;return c.map(L=>{const D=b(L,S);return typeof D=="number"?`${D}px`:D}).join(" ")};function ct(S,h){if(!h||typeof h=="string")return;const c=typeof h=="function"?h(S):h;if(c)return{"@global":c}}function dt(S,h){if(!(!h||typeof h=="string")){if(typeof h=="object"){const c={...S},b=S.spacing(1);return typeof b=="number"&&(c.spacing=K(b)),Object.fromEntries(Object.entries(h).map(([L,D])=>typeof D=="function"?[L,D({theme:c})]:[L,D]))}return h}}const Ye=/^&.Mui-([\w-]+)$/;function ut(S){let h=S;if(!S||typeof S!="object")return h;for(const c of Object.keys(S)){const b=S[c];if(!(!b||typeof b!="object"))for(const L of Object.keys(b)){const D=L,R=D.match(Ye);if(R){const[,W]=R,{[D]:k,...ye}=b;k&&(h={...h,[c]:ye,[W]:k})}}}return h}function Rt(S,h={}){const c={},b={};for(const L of Object.keys(h)){const D=h[L];D&&("styleOverrides"in D&&(L==="MuiCssBaseline"?c[L]=ct(S,D.styleOverrides):c[L]=ut(dt(S,D.styleOverrides))),"defaultProps"in D&&(b[L]=D.defaultProps))}return{overrides:c,props:b}}const St={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ft={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function Mt(S){var h;const{colors:c,shape:b,options:L}=S,R=`linear-gradient(90deg, ${(c.length===1?[c[0],c[0]]:c).join(", ")})`,W=`${b},  ${R}`,k=(h=L==null?void 0:L.fontColor)!=null?h:"#FFFFFF";return{colors:c,shape:b,backgroundImage:W,fontColor:k}}const mt={home:Mt({colors:ft.teal,shape:St.wave}),documentation:Mt({colors:ft.pinkSea,shape:St.wave2}),tool:Mt({colors:ft.purpleSky,shape:St.round}),service:Mt({colors:ft.marineBlue,shape:St.wave}),website:Mt({colors:ft.veryBlue,shape:St.wave}),library:Mt({colors:ft.rubyRed,shape:St.wave}),other:Mt({colors:ft.darkGrey,shape:St.wave}),app:Mt({colors:ft.toastyOrange,shape:St.wave}),apis:Mt({colors:ft.teal,shape:St.wave2}),card:Mt({colors:ft.greens,shape:St.wave})},xt=16,Wt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',Lt="home";function Nt(S){const{palette:h,htmlFontSize:c=xt,fontFamily:b=Wt,defaultPageTheme:L=Lt,pageTheme:D=mt,typography:R}=S;if(!D[L])throw new Error(`${L} is not defined in pageTheme.`);const W={htmlFontSize:c,fontFamily:b,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:h,typography:R!=null?R:W,page:D[L],getPageTheme:({themeId:k})=>{var ye;return(ye=D[k])!=null?ye:D[L]}}}const ge={MuiCssBaseline:{styleOverrides:S=>({html:{height:"100%",fontFamily:S.typography.fontFamily},body:{height:"100%",fontFamily:S.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:S})=>({"&:nth-of-type(odd)":{backgroundColor:S.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:S})=>({"&:nth-of-type(odd)":{backgroundColor:S.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:S})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:S.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:S})=>({padding:S.spacing(1.5,2,1.5,2.5)}),head:({theme:S})=>({wordBreak:"break-word",overflow:"hidden",color:S.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:S})=>({color:S.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,ot._j)(S.palette.link,.3),background:(0,ot.$n)(S.palette.link,.95)},[S.breakpoints.up("md")]:{minWidth:120,fontSize:S.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:S})=>({color:S.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:S})=>({marginRight:S.spacing(1),marginBottom:S.spacing(1)}),label:({theme:S})=>({lineHeight:S.spacing(2.5),fontWeight:S.typography.fontWeightMedium,fontSize:S.spacing(1.75)}),labelSmall:({theme:S})=>({fontSize:S.spacing(1.5)}),deleteIcon:({theme:S})=>({width:S.spacing(3),height:S.spacing(3),margin:S.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:S})=>({width:S.spacing(2),height:S.spacing(2),margin:S.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}}};var Fe=(S,h,c)=>{if(!h.has(S))throw TypeError("Cannot "+c)},Xe=(S,h,c)=>(Fe(S,h,"read from private field"),c?c.call(S):h.get(S)),Ke=(S,h,c)=>{if(h.has(S))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(S):h.set(S,c)},ht=(S,h,c,b)=>(Fe(S,h,"write to private field"),b?b.call(S,c):h.set(S,c),c),pt;class $t{constructor(h,c){Ke(this,pt,new Map),ht(this,pt,new Map),h&&Xe(this,pt).set("v4",h),c&&Xe(this,pt).set("v5",c)}getTheme(h){return Xe(this,pt).get(h)}}pt=new WeakMap;function Xt(S){const h=Nt(S),c={...ge,...S.components},b=(0,rn.Z)({...h,components:c}),L=Rt(b,c),D={...(0,Ue.Z)(h),...L};return new $t(D,b)}function Ft(S){const h=adaptV4Theme(S),c=createTheme$2(S);return new $t(c,h)}const j={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},ce={light:Xt({palette:j.light}),dark:Xt({palette:j.dark})};en.Z.configure(S=>`v5-${S}`);const Te=(0,tt.Z)({productionPrefix:"jss4-"});function $e(S){const{children:h,theme:c,noCssBaseline:b=!1}=S,L=c.getTheme("v4"),D=c.getTheme("v5");let R;b||(R=d.createElement(tn.ZP,null));let W=d.createElement(d.Fragment,null,R,h);return L&&(W=d.createElement(lt.ZP,{generateClassName:Te},d.createElement(Yt.Z,{theme:L},W))),D&&(W=d.createElement(C.Z,{injectFirst:!0},d.createElement(At.Z,{theme:D},W))),W}function Le(S){var h,c,b,L;return{props:{MuiGrid:(c=(h=ge)==null?void 0:h.MuiGrid)==null?void 0:c.defaultProps,MuiSwitch:(L=(b=ge)==null?void 0:b.MuiSwitch)==null?void 0:L.defaultProps},...Nt(S)}}function G(S){return Rt(S,ge).overrides}function Ae(S){const h=Le(S),c=(0,Ue.Z)(h),b=G(c);return{...c,overrides:b}}const Re=Ae({palette:j.light}),xe=Ae({palette:j.dark});var J=e(98192),q=e(15222);const Me=[(0,y.ni)({api:y.NW,deps:{configApi:y.Ds},factory:({configApi:S})=>l.pM.compile(`${S.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,y.ni)({api:y.$v,deps:{},factory:()=>new l.CX}),(0,y.ni)({api:y.v_,deps:{},factory:()=>new l.gN}),(0,y.ni)({api:y.VE,deps:{alertApi:y.$v},factory:({alertApi:S})=>{const h=new l.KN(S,new l.gr);return l.Jv.forward(h,{hidden:!1}),h}}),(0,y.ni)({api:y.E6,deps:{errorApi:y.VE},factory:({errorApi:S})=>l.CJ.create({errorApi:S})}),(0,y.ni)({api:y.gP,deps:{configApi:y.Ds,identityApi:y.$4,discoveryApi:y.NW},factory:({configApi:S,identityApi:h,discoveryApi:c})=>(0,l.jJ)({middleware:[l.II.resolvePluginProtocol({discoveryApi:c}),l.II.injectIdentityAuth({identityApi:h,config:S})]})}),(0,y.ni)({api:y.ZM,deps:{},factory:()=>new l.YM}),(0,y.ni)({api:y.Kp,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.eE.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.p_,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l._i.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.F4,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.Td.create({configApi:c,discoveryApi:S,oauthRequestApi:h,defaultScopes:["read:user"],environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.D,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.sn.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.ux,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.aq.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.gW,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.$_.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.bq,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.xP.create({configApi:c,discoveryApi:S,oauthRequestApi:h,defaultScopes:["team"],environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:y.Km,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.C4.create({configApi:c,discoveryApi:S,oauthRequestApi:h,defaultScopes:["REPO_READ"]})}),(0,y.ni)({api:y.uB,deps:{discoveryApi:y.NW,oauthRequestApi:y.ZM,configApi:y.Ds},factory:({discoveryApi:S,oauthRequestApi:h,configApi:c})=>l.uC.create({configApi:c,discoveryApi:S,oauthRequestApi:h,environment:c.getOptionalString("auth.environment")})}),(0,y.ni)({api:g.RV,deps:{discovery:y.NW,identity:y.$4,config:y.Ds},factory:({config:S,discovery:h,identity:c})=>g.iM.create({config:S,discovery:h,identity:c})})];function Ge({children:S}){return(0,H.GV)()?d.createElement(d.Fragment,null,S):d.createElement(H.VA,null,S)}const we=()=>d.createElement(A.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Ve=({step:S,error:h})=>{let c="";return S==="load-config"?c=`The configuration failed to load, someone should have a look at this error: ${h.message}`:S==="load-chunk"&&(c=`Lazy loaded chunk failed to load, try to reload the page: ${h.message}`),d.createElement(Ge,null,d.createElement(A.mf,{status:"501",statusMessage:c}))},rt=({error:S,resetError:h,plugin:c})=>d.createElement(A.yu,{title:`Error in ${c==null?void 0:c.getId()}`,defaultExpanded:!0,error:S},d.createElement(m.Z,{variant:"outlined",onClick:h},"Retry")),oe={Progress:A.Ex,Router:je.VK,NotFoundErrorPage:we,BootErrorPage:Ve,ErrorBoundaryFallback:rt},X={brokenImage:be.Z,catalog:F.Z,scaffolder:ie.Z,techdocs:ve.Z,search:Y.Z,chat:Ee.Z,dashboard:fe.Z,docs:_.Z,email:Ce.Z,github:Pt.Z,group:Je.Z,help:Oe.Z,"kind:api":I.Z,"kind:component":Se.Z,"kind:domain":r.Z,"kind:group":Je.Z,"kind:location":pe.Z,"kind:system":ne.Z,"kind:user":Ct.Z,"kind:resource":Bt.Z,user:Ct.Z,warning:it.Z},de=[{id:"light",title:"Light Theme",variant:"light",icon:d.createElement(q.Z,null),Provider:({children:S})=>d.createElement($e,{theme:ce.light,children:S})},{id:"dark",title:"Dark Theme",variant:"dark",icon:d.createElement(J.Z,null),Provider:({children:S})=>d.createElement($e,{theme:ce.dark,children:S})}];function he(S){var h,c,b,L;return(0,l.bg)({...S,apis:(h=S==null?void 0:S.apis)!=null?h:[],bindRoutes:S==null?void 0:S.bindRoutes,components:{...oe,...S==null?void 0:S.components},configLoader:S==null?void 0:S.configLoader,defaultApis:Me,icons:{...X,...S==null?void 0:S.icons},plugins:(c=S==null?void 0:S.plugins)!=null?c:[],featureFlags:(b=S==null?void 0:S.featureFlags)!=null?b:[],themes:(L=S==null?void 0:S.themes)!=null?L:de})}},88285:function(fn,Ut,e){"use strict";e.d(Ut,{MS:function(){return be},mk:function(){return ne},n3:function(){return m}});var l=e(34520),y=e(32272),g=e(96279),d=e.n(g);const m=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function A(ie){return!ie.cursor}var H=Object.defineProperty,je=(ie,ve,Y)=>ve in ie?H(ie,ve,{enumerable:!0,configurable:!0,writable:!0,value:Y}):ie[ve]=Y,r=(ie,ve,Y)=>(je(ie,typeof ve!="symbol"?ve+"":ve,Y),Y);class be{constructor(ve){r(this,"discoveryApi"),r(this,"fetchApi"),this.discoveryApi=ve.discoveryApi,this.fetchApi=ve.fetchApi||{fetch:d()}}async getEntityAncestors(ve,Y){const{kind:Ee,namespace:fe,name:_}=(0,l.of)(ve.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(Ee)}/${encodeURIComponent(fe)}/${encodeURIComponent(_)}/ancestry`,Y)}async getLocationById(ve,Y){return await this.requestOptional("GET",`/locations/${encodeURIComponent(ve)}`,Y)}async getEntities(ve,Y){const{filter:Ee=[],fields:fe=[],order:_,offset:Ce,limit:I,after:Pt}=ve!=null?ve:{},Oe=this.getParams(Ee);if(fe.length&&Oe.push(`fields=${fe.map(encodeURIComponent).join(",")}`),_)for(const Je of[_].flat())Je&&Oe.push(`order=${encodeURIComponent(Je.order)}:${encodeURIComponent(Je.field)}`);Ce!==void 0&&Oe.push(`offset=${Ce}`),I!==void 0&&Oe.push(`limit=${I}`),Pt!==void 0&&Oe.push(`after=${encodeURIComponent(Pt)}`);const pe=Oe.length?`?${Oe.join("&")}`:"",Se=await this.requestRequired("GET",`/entities${pe}`,Y),F=(Je,Ct)=>{var it,Bt;if(((it=Je.metadata)==null?void 0:it.name)===void 0||Je.kind===void 0||((Bt=Ct.metadata)==null?void 0:Bt.name)===void 0||Ct.kind===void 0)return 0;const Ue=(0,l.eE)(Je),tt=(0,l.eE)(Ct);return Ue<tt?-1:Ue>tt?1:0};return{items:Se.sort(F)}}async getEntitiesByRefs(ve,Y){var Ee;const fe={entityRefs:ve.entityRefs};(Ee=ve.fields)!=null&&Ee.length&&(fe.fields=ve.fields);const Ce=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,I=await this.fetchApi.fetch(Ce,{headers:{"Content-Type":"application/json",...(Y==null?void 0:Y.token)&&{Authorization:`Bearer ${Y==null?void 0:Y.token}`}},method:"POST",body:JSON.stringify(fe)});if(!I.ok)throw await y.VL.fromResponse(I);const{items:Pt}=await I.json();return{items:Pt.map(Oe=>Oe!=null?Oe:void 0)}}async queryEntities(ve={},Y){var Ee,fe;const _=[];if(A(ve)){const{fields:I=[],filter:Pt,limit:Oe,orderFields:pe,fullTextFilter:Se}=ve;_.push(...this.getParams(Pt)),Oe!==void 0&&_.push(`limit=${Oe}`),pe!==void 0&&(Array.isArray(pe)?pe:[pe]).forEach(({field:Je,order:Ct})=>_.push(`orderField=${Je},${Ct}`)),I.length&&_.push(`fields=${I.map(encodeURIComponent).join(",")}`);const F=(Ee=Se==null?void 0:Se.term)==null?void 0:Ee.trim();F&&_.push(`fullTextFilterTerm=${F}`),(fe=Se==null?void 0:Se.fields)!=null&&fe.length&&_.push(`fullTextFilterFields=${Se.fields.join(",")}`)}else{const{fields:I=[],limit:Pt,cursor:Oe}=ve;_.push(`cursor=${Oe}`),Pt!==void 0&&_.push(`limit=${Pt}`),I.length&&_.push(`fields=${I.map(encodeURIComponent).join(",")}`)}const Ce=_.length?`?${_.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${Ce}`,Y)}async getEntityByRef(ve,Y){const{kind:Ee,namespace:fe,name:_}=(0,l.of)(ve);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(Ee)}/${encodeURIComponent(fe)}/${encodeURIComponent(_)}`,Y)}async getEntityByName(ve,Y){const{kind:Ee,namespace:fe="default",name:_}=ve;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(Ee)}/${encodeURIComponent(fe)}/${encodeURIComponent(_)}`,Y)}async refreshEntity(ve,Y){const Ee=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(Y==null?void 0:Y.token)&&{Authorization:`Bearer ${Y==null?void 0:Y.token}`}},method:"POST",body:JSON.stringify({entityRef:ve})});if(Ee.status!==200)throw new Error(await Ee.text())}async getEntityFacets(ve,Y){const{filter:Ee=[],facets:fe}=ve,_=this.getParams(Ee);for(const I of fe)_.push(`facet=${encodeURIComponent(I)}`);const Ce=_.length?`?${_.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${Ce}`,Y)}async addLocation(ve,Y){const{type:Ee="url",target:fe,dryRun:_}=ve,Ce=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${_?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(Y==null?void 0:Y.token)&&{Authorization:`Bearer ${Y==null?void 0:Y.token}`}},method:"POST",body:JSON.stringify({type:Ee,target:fe})});if(Ce.status!==201)throw new Error(await Ce.text());const{location:I,entities:Pt,exists:Oe}=await Ce.json();if(!I)throw new Error(`Location wasn't added: ${fe}`);return{location:I,entities:Pt,exists:Oe}}async getLocationByRef(ve,Y){return(await this.requestRequired("GET","/locations",Y)).map(fe=>fe.data).find(fe=>ve===(0,l.NZ)(fe))}async removeLocationById(ve,Y){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(ve)}`,Y)}async removeEntityByUid(ve,Y){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(ve)}`,Y)}async validateEntity(ve,Y,Ee){const fe=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(Ee==null?void 0:Ee.token)&&{Authorization:`Bearer ${Ee==null?void 0:Ee.token}`}},method:"POST",body:JSON.stringify({entity:ve,location:Y})});if(fe.ok)return{valid:!0};if(fe.status!==400)throw await y.VL.fromResponse(fe);const{errors:_=[]}=await fe.json();return{valid:!1,errors:_}}async requestIgnored(ve,Y,Ee){const fe=`${await this.discoveryApi.getBaseUrl("catalog")}${Y}`,_=Ee!=null&&Ee.token?{Authorization:`Bearer ${Ee.token}`}:{},Ce=await this.fetchApi.fetch(fe,{method:ve,headers:_});if(!Ce.ok)throw await y.VL.fromResponse(Ce)}async requestRequired(ve,Y,Ee){const fe=`${await this.discoveryApi.getBaseUrl("catalog")}${Y}`,_=Ee!=null&&Ee.token?{Authorization:`Bearer ${Ee.token}`}:{},Ce=await this.fetchApi.fetch(fe,{method:ve,headers:_});if(!Ce.ok)throw await y.VL.fromResponse(Ce);return Ce.json()}async requestOptional(ve,Y,Ee){const fe=`${await this.discoveryApi.getBaseUrl("catalog")}${Y}`,_=Ee!=null&&Ee.token?{Authorization:`Bearer ${Ee.token}`}:{},Ce=await this.fetchApi.fetch(fe,{method:ve,headers:_});if(!Ce.ok){if(Ce.status===404)return;throw await y.VL.fromResponse(Ce)}return await Ce.json()}getParams(ve=[]){const Y=[];for(const Ee of[ve].flat()){const fe=[];for(const[_,Ce]of Object.entries(Ee))for(const I of[Ce].flat())I===m?fe.push(encodeURIComponent(_)):typeof I=="string"&&fe.push(`${encodeURIComponent(_)}=${encodeURIComponent(I)}`);fe.length&&Y.push(`filter=${fe.join(",")}`)}return Y}}const ne="backstage.io/catalog-processing"},34520:function(fn,Ut,e){"use strict";e.d(Ut,{$1:function(){return Mr},CV:function(){return kn},Dg:function(){return wr},In:function(){return Ve},KS:function(){return kr},M6:function(){return Hn},M_:function(){return vr},NZ:function(){return Pr},Ou:function(){return tr},P1:function(){return jn},S4:function(){return br},Tf:function(){return Ee},X9:function(){return Ar},Zj:function(){return Lr},_b:function(){return Rr},aS:function(){return Br},cz:function(){return Nr},eE:function(){return Ct},hr:function(){return jr},iB:function(){return F},l2:function(){return Y},nP:function(){return hr},of:function(){return Je},q1:function(){return Fn},w$:function(){return Nn},wI:function(){return q},wP:function(){return xr},y$:function(){return Ge},zG:function(){return ve}});var l=e(76635),y=e.n(l),g=e(27991),d=e.n(g);function m(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="API"}function A(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function H(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function je(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="GROUP"}function r(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="LOCATION"}function be(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function ne(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function ie(Ze){return Ze.kind.toLocaleUpperCase("en-US")==="USER"}const ve="default",Y="backstage.io/view-url",Ee="backstage.io/edit-url",fe="kubernetes.io/api-server",_="kubernetes.io/api-server-certificate-authority",Ce="kubernetes.io/auth-provider";var I=Object.defineProperty,Pt=(Ze,u,s)=>u in Ze?I(Ze,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):Ze[u]=s,Oe=(Ze,u,s)=>(Pt(Ze,typeof u!="symbol"?u+"":u,s),s);class pe{constructor(u=ve){Oe(this,"namespace"),this.namespace=u}async enforce(u){return u.metadata.namespace?u:lodash.merge({metadata:{namespace:this.namespace}},u)}}function Se(Ze){let u=Ze.indexOf(":");const s=Ze.indexOf("/");s!==-1&&s<u&&(u=-1);const i=u===-1?void 0:Ze.slice(0,u),p=s===-1?void 0:Ze.slice(u+1,s),P=Ze.slice(Math.max(u+1,s+1));if(i===""||p===""||P==="")throw new TypeError(`Entity reference "${Ze}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:i,namespace:p,name:P}}function F(Ze){return{kind:Ze.kind,namespace:Ze.metadata.namespace||ve,name:Ze.metadata.name}}function Je(Ze,u){var s,i,p,P;if(!Ze)throw new Error("Entity reference must not be empty");const $=u==null?void 0:u.defaultKind,re=(u==null?void 0:u.defaultNamespace)||ve;let ue,Ne,vt;if(typeof Ze=="string"){const Ht=Se(Ze);ue=(s=Ht.kind)!=null?s:$,Ne=(i=Ht.namespace)!=null?i:re,vt=Ht.name}else ue=(p=Ze.kind)!=null?p:$,Ne=(P=Ze.namespace)!=null?P:re,vt=Ze.name;if(ue)if(Ne){if(!vt){const Ht=JSON.stringify(Ze);throw new Error(`Entity reference ${Ht} had missing or empty name`)}}else{const Ht=JSON.stringify(Ze);throw new Error(`Entity reference ${Ht} had missing or empty namespace`)}else{const Ht=JSON.stringify(Ze);throw new Error(`Entity reference ${Ht} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:ue,namespace:Ne,name:vt}}function Ct(Ze){var u,s;let i,p,P;return"metadata"in Ze?(i=Ze.kind,p=(u=Ze.metadata.namespace)!=null?u:ve,P=Ze.metadata.name):(i=Ze.kind,p=(s=Ze.namespace)!=null?s:ve,P=Ze.name),`${i.toLocaleLowerCase("en-US")}:${p.toLocaleLowerCase("en-US")}/${P.toLocaleLowerCase("en-US")}`}var it=Object.defineProperty,Bt=(Ze,u,s)=>u in Ze?it(Ze,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):Ze[u]=s,Ue=(Ze,u,s)=>(Bt(Ze,typeof u!="symbol"?u+"":u,s),s);class tt{constructor(u){Ue(this,"parentRef");const{kind:s,namespace:i,name:p}=Je(u,{defaultKind:"Group",defaultNamespace:ve});if(s.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Ct({kind:s,namespace:i,name:p})}async enforce(u){if(u.kind!=="Group")return u;const s=u;return s.spec.parent||Ct(s)!==this.parentRef&&(s.spec.parent=this.parentRef),s}}class lt{static isValidPrefixAndOrSuffix(u,s,i,p){if(typeof u!="string")return!1;const P=u.split(s);return P.length===1?p(P[0]):P.length===2?i(P[0])&&p(P[1]):!1}static isJsonSafe(u){try{return y().isEqual(u,JSON.parse(JSON.stringify(u)))}catch{return!1}}static isValidDnsSubdomain(u){return typeof u=="string"&&u.length>=1&&u.length<=253&&u.split(".").every(lt.isValidDnsLabel)}static isValidDnsLabel(u){return typeof u=="string"&&u.length>=1&&u.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(u)}static isValidTag(u){return typeof u=="string"&&u.length>=1&&u.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(u)}static isValidUrl(u){if(typeof u!="string")return!1;try{return new URL(u),!0}catch{return!1}}static isValidString(u){var s;return typeof u=="string"&&((s=u==null?void 0:u.trim())==null?void 0:s.length)>=1}static isNonEmptyString(u){var s;return typeof u=="string"&&((s=u==null?void 0:u.trim())==null?void 0:s.length)>=1}}var Yt="http://json-schema.org/draft-07/schema",ot="EntityEnvelope",rn="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",C=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],At="object",en=["apiVersion","kind","metadata"],tn=!0,K={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},ct={$schema:Yt,$id:ot,description:rn,examples:C,type:At,required:en,additionalProperties:tn,properties:K},dt="http://json-schema.org/draft-07/schema",Ye="Entity",ut="The parts of the format that's common to all versions/kinds of entity.",Rt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],St="object",ft=["apiVersion","kind","metadata"],Mt=!1,mt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},xt={$schema:dt,$id:Ye,description:ut,examples:Rt,type:St,required:ft,additionalProperties:Mt,properties:mt},Wt="http://json-schema.org/draft-07/schema",Lt="EntityMeta",Nt="Metadata fields common to all versions/kinds of entity.",ge=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],Fe="object",Xe=["name"],Ke=!0,ht={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},pt={$schema:Wt,$id:Lt,description:Nt,examples:ge,type:Fe,required:Xe,additionalProperties:Ke,properties:ht},$t="http://json-schema.org/draft-07/schema",Xt="common",Ft="object",j="Common definitions to import from other schemas",ce={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Te={$schema:$t,$id:Xt,type:Ft,description:j,definitions:ce};const $e=new Map,Le=[ct,xt,pt,Te];function G(Ze){if(!(Ze!=null&&Ze.length))throw new TypeError("Unknown error");const u=Ze[0];throw new TypeError(`${u.instancePath||"<root>"} ${u.message}${u.params?` - ${Object.entries(u.params).map(([s,i])=>`${s}: ${i}`).join(", ")}`:""}`)}function Ae(Ze,u={}){var s;const i=(s=u==null?void 0:u.disableCache)!=null?s:!1,p=i?"":JSON.stringify(Ze);if(!i){const ue=$e.get(p);if(ue)return ue}const P=Re(Ze),$=new(d())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});P.length&&$.addSchema(P,void 0,void 0,!0);const re=$.compile(Ze);return i||$e.set(p,re),re}function Re(Ze){if(typeof Ze!="object")return[];const u=new Set;Ze.$id&&u.add(Ze.$id);const s=new Array,i=[Ze];for(;i.length;){const p=i.pop();for(const P of xe(p))if(!u.has(P)){u.add(P);const $=Le.find(re=>re.$id===P);$&&(s.push($),i.push($))}}return s}function*xe(Ze){const u=[Ze];for(;u.length;){const s=u.pop();if(typeof s=="object"&&s)for(const[i,p]of Object.entries(s))i==="$ref"&&typeof p=="string"?yield p.split("#")[0]:u.push(p)}}function J(Ze){const u=Ae(Ze||ct);return s=>{if(u(s)===!0)return s;throw G(u.errors)}}function q(Ze){const u=Ae(Ze);return s=>{var i;if(u(s)===!0)return s;const P=(i=u.errors)==null?void 0:i.filter($=>["/kind","/apiVersion"].includes($.instancePath));if(P!=null&&P.length&&P.every($=>$.keyword==="enum"))return!1;throw G(u.errors)}}function Me(Ze){const u=Ae(Ze||xt);return s=>{if(u(s)===!0)return s;throw G(u.errors)}}class Ge{static isValidApiVersion(u){return lt.isValidPrefixAndOrSuffix(u,"/",lt.isValidDnsSubdomain,s=>s.length>=1&&s.length<=63&&/^[a-z0-9A-Z]+$/.test(s))}static isValidKind(u){return typeof u=="string"&&u.length>=1&&u.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(u)}static isValidObjectName(u){return typeof u=="string"&&u.length>=1&&u.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(u)}static isValidNamespace(u){return lt.isValidDnsLabel(u)}static isValidLabelKey(u){return lt.isValidPrefixAndOrSuffix(u,"/",lt.isValidDnsSubdomain,Ge.isValidObjectName)}static isValidLabelValue(u){return u===""||Ge.isValidObjectName(u)}static isValidAnnotationKey(u){return lt.isValidPrefixAndOrSuffix(u,"/",lt.isValidDnsSubdomain,Ge.isValidObjectName)}static isValidAnnotationValue(u){return typeof u=="string"}}const we={isValidApiVersion:Ge.isValidApiVersion,isValidKind:Ge.isValidKind,isValidEntityName:Ge.isValidObjectName,isValidNamespace:Ge.isValidNamespace,isValidLabelKey:Ge.isValidLabelKey,isValidLabelValue:Ge.isValidLabelValue,isValidAnnotationKey:Ge.isValidAnnotationKey,isValidAnnotationValue:Ge.isValidAnnotationValue,isValidTag:Ze=>typeof Ze=="string"&&Ze.length>=1&&Ze.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Ze)};function Ve(Ze={}){return{...we,...Ze}}var rt=Object.defineProperty,oe=(Ze,u,s)=>u in Ze?rt(Ze,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):Ze[u]=s,X=(Ze,u,s)=>(oe(Ze,typeof u!="symbol"?u+"":u,s),s);class de{constructor(u=Ve()){X(this,"validators"),this.validators=u}async enforce(u){var s,i,p,P,$,re,ue;function Ne(Jt,vn,nn){if(vn==null)throw new Error(`${Jt} must have a value`);let Zn;try{Zn=nn(vn)}catch(Mn){throw new Error(`${Jt} could not be validated, ${Mn}`)}if(!Zn){let Mn;switch(nn.name){case"isValidLabelValue":case"isValidObjectName":Mn="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Mn="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Mn="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Mn="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Mn="a string";break;case"isValidKind":Mn="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Mn="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Mn="a non empty string";break;default:Mn=void 0;break}const lr=Mn?` expected ${Mn} but found "${vn}".`:"";throw new Error(`"${Jt}" is not valid;${lr} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function vt(Jt,vn,nn){return vn===void 0||Ne(Jt,vn,nn)}Ne("apiVersion",u.apiVersion,this.validators.isValidApiVersion),Ne("kind",u.kind,this.validators.isValidKind),Ne("metadata.name",u.metadata.name,this.validators.isValidEntityName),vt("metadata.namespace",u.metadata.namespace,this.validators.isValidNamespace);for(const[Jt,vn]of Object.entries((s=u.metadata.labels)!=null?s:[]))Ne(`labels.${Jt}`,Jt,this.validators.isValidLabelKey),Ne(`labels.${Jt}`,vn,this.validators.isValidLabelValue);for(const[Jt,vn]of Object.entries((i=u.metadata.annotations)!=null?i:[]))Ne(`annotations.${Jt}`,Jt,this.validators.isValidAnnotationKey),Ne(`annotations.${Jt}`,vn,this.validators.isValidAnnotationValue);const Ht=(p=u.metadata.tags)!=null?p:[];for(let Jt=0;Jt<Ht.length;++Jt)Ne(`tags.${Jt}`,Ht[Jt],this.validators.isValidTag);const pn=(P=u.metadata.links)!=null?P:[];for(let Jt=0;Jt<pn.length;++Jt)Ne(`links.${Jt}.url`,($=pn[Jt])==null?void 0:$.url,lt.isValidUrl),vt(`links.${Jt}.title`,(re=pn[Jt])==null?void 0:re.title,lt.isNonEmptyString),vt(`links.${Jt}.icon`,(ue=pn[Jt])==null?void 0:ue.icon,Ge.isValidObjectName);return u}}var he=Object.defineProperty,S=(Ze,u,s)=>u in Ze?he(Ze,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):Ze[u]=s,h=(Ze,u,s)=>(S(Ze,typeof u!="symbol"?u+"":u,s),s);const c=null;class b{constructor(u=c){h(this,"knownFields"),this.knownFields=u}async enforce(u){for(const s of Object.keys(u))if(!this.knownFields.includes(s))throw new Error(`Unknown field ${s}`);return u}}var L=Object.defineProperty,D=(Ze,u,s)=>u in Ze?L(Ze,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):Ze[u]=s,R=(Ze,u,s)=>(D(Ze,typeof u!="symbol"?u+"":u,s),s);class W{constructor(){R(this,"validate")}async enforce(u){if(!this.validate){const p=new Ajv({allowUnionTypes:!0});this.validate=p.addSchema([Te,pt],void 0,void 0,!0).compile(xt)}if(this.validate(u)===!0)return u;const[i]=this.validate.errors||[];throw i?new Error(`Malformed envelope, ${i.instancePath||"<root>"} ${i.message}`):new Error("Malformed envelope, Unknown error")}}class k{constructor(u){this.policies=u}async enforce(u){let s=u;for(const i of this.policies){const p=await i.enforce(s);if(!p)throw new Error(`Policy ${i.constructor.name} did not return a result`);s=p}return s}}class ye{constructor(u){this.policies=u}async enforce(u){for(const s of this.policies){const i=await s.enforce(u);if(i)return i}throw new Error("The entity did not match any known policy")}}const et={allOf(Ze){return new k(Ze)},oneOf(Ze){return new ye(Ze)}};var U="http://json-schema.org/draft-07/schema",Z="ApiV1alpha1",te="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",T=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],B=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],V={$schema:U,$id:Z,description:te,examples:T,allOf:B};function me(Ze){let u;return{async check(s){return u||(u=q(Ze)),u(s)===s}}}const _e=me(V);var at="http://json-schema.org/draft-07/schema",He="ComponentV1alpha1",Ot='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',yt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Tt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Kt={$schema:at,$id:He,description:Ot,examples:yt,allOf:Tt};const ln=me(Kt);var on="http://json-schema.org/draft-07/schema",Gt="DomainV1alpha1",wt="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",It=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],dn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],hn={$schema:on,$id:Gt,description:wt,examples:It,allOf:dn};const yn=me(hn);var bn="http://json-schema.org/draft-07/schema",Ln="GroupV1alpha1",In="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",On=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Rn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],xn={$schema:bn,$id:Ln,description:In,examples:On,allOf:Rn};const er=me(xn);var Kn="http://json-schema.org/draft-07/schema",Zr="LocationV1alpha1",ur="A location is a marker that references other places to look for catalog data.",$r=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Ir=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Wr={$schema:Kn,$id:Zr,description:ur,examples:$r,allOf:Ir};const Jn=me(Wr),br="ownedBy",Mr="ownerOf",wr="consumesApi",Ar="apiConsumedBy",vr="providesApi",Lr="apiProvidedBy",hr="dependsOn",Nn="dependencyOf",Rr="parentOf",xr="childOf",jr="memberOf",kr="hasMember",Nr="partOf",Br="hasPart";var se="http://json-schema.org/draft-07/schema",ze="ResourceV1alpha1",nt="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Et=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Qt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],zt={$schema:se,$id:ze,description:nt,examples:Et,allOf:Qt};const qt=me(zt);var mn="http://json-schema.org/draft-07/schema",cn="SystemV1alpha1",an="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",An=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],_n=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Cn={$schema:mn,$id:cn,description:an,examples:An,allOf:_n};const Un=me(Cn);var Tn="http://json-schema.org/draft-07/schema",Bn="UserV1alpha1",Sn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",or=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Wn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],zn={$schema:Tn,$id:Bn,description:Sn,examples:or,allOf:Wn};const sr=me(zn),jn="backstage.io/managed-by-location",Fn="backstage.io/managed-by-origin-location",Hn="backstage.io/source-location",dr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function tr(Ze){if(typeof Ze!="string")throw new TypeError(`Unable to parse location ref '${Ze}', unexpected argument ${typeof Ze}`);const u=Ze.indexOf(":");if(u<0)throw new TypeError(`Unable to parse location ref '${Ze}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const s=Ze.substring(0,u).trim(),i=Ze.substring(u+1).trim();if(!s||!i)throw new TypeError(`Unable to parse location ref '${Ze}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(s==="http"||s==="https")throw new TypeError(`Invalid location ref '${Ze}', please prefix it with 'url:', e.g. 'url:${Ze}'`);if(dr.test(i))throw new TypeError(`Invalid location ref '${Ze}', target is a javascript: URL`);return{type:s,target:i}}function Pr(Ze){const{type:u,target:s}=Ze;if(u){if(!s)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(dr.test(s))throw new TypeError(`Invalid location ref '${u}:${s}', target is a javascript: URL`);return`${u}:${s}`}function kn(Ze){var u,s,i,p,P;const $=(P=(s=(u=Ze.metadata)==null?void 0:u.annotations)==null?void 0:s[Hn])!=null?P:(p=(i=Ze.metadata)==null?void 0:i.annotations)==null?void 0:p[jn];if(!$)throw new Error(`Entity '${Ct(Ze)}' is missing location`);return tr($)}},53907:function(fn,Ut,e){"use strict";e.d(Ut,{CX:function(){return Gt},WY:function(){return sr},uC:function(){return Tt},xP:function(){return at},C4:function(){return Ot},KN:function(){return xn},gr:function(){return ur},II:function(){return xr},wQ:function(){return gt},Td:function(){return rt},aq:function(){return X},eE:function(){return S},_i:function(){return te},gN:function(){return It},YM:function(){return zt},sn:function(){return L},$_:function(){return me},Jv:function(){return $r},pM:function(){return On},CJ:function(){return _n},jJ:function(){return wr},bg:function(){return Qe}});var l=e(2784),y=e(13980),g=e.n(y),d=e(18473),m=e(82394),A=e.n(m),H=e(30705),je=e(30195),r=e(9850),be=e.n(r),ne=e(12782),ie=e.n(ne);const ve=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function Y(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Ee(f){if(f===null)return"null";if(Array.isArray(f))return"array";const n=typeof f;return n==="number"&&isNaN(f)?"nan":n==="string"&&f===""?"empty-string":n}const fe={type(f,n,o,v){return`Invalid type in config for key '${f}' in '${n}', got ${o}, wanted ${v}`},missing(f){return`Missing required config value at '${f}'`},convert(f,n,o){return`Unable to convert config value for key '${f}' in '${n}' to a ${o}`}};class _{constructor(n,o="mock-config",v,w=""){this.data=n,this.context=o,this.fallback=v,this.prefix=w,this.notifiedFilteredKeys=new Set}static fromConfigs(n){return n.length===0?new _(void 0):n.reduce((o,{data:v,context:w,filteredKeys:le,deprecatedKeys:Ie})=>{const De=new _(v,w,o);if(De.filteredKeys=le,Ie)for(const{key:st,description:Dt}of Ie)console.warn(`The configuration key '${st}' of ${w} is deprecated and may be removed soon. ${Dt||""}`);return De},void 0)}has(n){var o,v;return this.readValue(n)!==void 0?!0:(v=(o=this.fallback)==null?void 0:o.has(n))!=null?v:!1}keys(){var n,o;const v=this.data?Object.keys(this.data):[],w=(o=(n=this.fallback)==null?void 0:n.keys())!=null?o:[];return[...new Set([...v,...w])]}get(n){const o=this.getOptional(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n!=null?n:"")));return o}getOptional(n){var o,v;const w=be()(this.readValue(n)),le=(o=this.fallback)==null?void 0:o.getOptional(n);return w===void 0?le:le===void 0?w:ie()({},{value:le},{value:w},(Ie,De)=>!Y(De)||!Y(Ie)?De:void 0).value}getConfig(n){const o=this.getOptionalConfig(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalConfig(n){var o;const v=this.readValue(n),w=(o=this.fallback)==null?void 0:o.getOptionalConfig(n);if(Y(v))return this.copy(v,n,w);if(v!==void 0)throw new TypeError(fe.type(this.fullKey(n),this.context,Ee(v),"object"));return w}getConfigArray(n){const o=this.getOptionalConfigArray(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalConfigArray(n){var o;const v=this.readConfigValue(n,w=>{if(!Array.isArray(w))return{expected:"object-array"};for(const[le,Ie]of w.entries())if(!Y(Ie))return{expected:"object-array",value:Ie,key:`${n}[${le}]`};return!0});if(v)return v.map((w,le)=>this.copy(w,`${n}[${le}]`))}getNumber(n){const o=this.getOptionalNumber(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalNumber(n){const o=this.readConfigValue(n,w=>typeof w=="number"||typeof w=="string"||{expected:"number"});if(typeof o=="number"||o===void 0)return o;const v=Number(o);if(!Number.isFinite(v))throw new Error(fe.convert(this.fullKey(n),this.context,"number"));return v}getBoolean(n){const o=this.getOptionalBoolean(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalBoolean(n){const o=this.readConfigValue(n,w=>typeof w=="boolean"||typeof w=="number"||typeof w=="string"||{expected:"boolean"});if(typeof o=="boolean"||o===void 0)return o;const v=String(o).trim();if(/^(?:y|yes|true|1|on)$/i.test(v))return!0;if(/^(?:n|no|false|0|off)$/i.test(v))return!1;throw new Error(fe.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const o=this.getOptionalString(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalString(n){return this.readConfigValue(n,o=>typeof o=="string"&&o!==""||{expected:"string"})}getStringArray(n){const o=this.getOptionalStringArray(n);if(o===void 0)throw new Error(fe.missing(this.fullKey(n)));return o}getOptionalStringArray(n){return this.readConfigValue(n,o=>{if(!Array.isArray(o))return{expected:"string-array"};for(const[v,w]of o.entries())if(typeof w!="string"||w==="")return{expected:"string-array",value:w,key:`${n}[${v}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,o,v){const w=new _(n,this.context,v,this.fullKey(o));return w.filteredKeys=this.filteredKeys,w}readConfigValue(n,o){var v,w;const le=this.readValue(n);if(le===void 0)return(w=this.fallback)==null?void 0:w.readConfigValue(n,o);const Ie=o(le);if(Ie!==!0){const{key:De=n,value:st=le,expected:Dt}=Ie;throw new TypeError(fe.type(this.fullKey(De),this.context,Ee(st),Dt))}return le}readValue(n){const o=n?n.split("."):[];for(const w of o)if(!ve.test(w))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let v=this.data;for(const[w,le]of o.entries())if(Y(v))v=v[le];else if(v!==void 0){const Ie=this.fullKey(o.slice(0,w).join("."));throw new TypeError(fe.type(Ie,this.context,Ee(v),"object"))}return v}}var Ce=e(73557),I=e(16060),Pt=e(64279),Oe=e(72164),pe=Object.defineProperty,Se=(f,n,o)=>n in f?pe(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,F=(f,n,o)=>(Se(f,typeof n!="symbol"?n+"":n,o),o);class Je{constructor(...n){F(this,"holders"),this.holders=n}get(n){for(const o of this.holders){const v=o.get(n);if(v)return v}}}const Ct=(0,d.CT)("api-context"),it=f=>{var n;const{apis:o,children:v}=f,w=(n=(0,l.useContext)(Ct))==null?void 0:n.atVersion(1),le=w?new Je(o,w):o;return l.createElement(Ct.Provider,{value:(0,d.EI)({1:le}),children:v})};it.propTypes={apis:g().shape({get:g().func.isRequired}).isRequired,children:g().node};var Bt=Object.defineProperty,Ue=(f,n,o)=>n in f?Bt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,tt=(f,n,o)=>(Ue(f,typeof n!="symbol"?n+"":n,o),o);class lt{constructor(n){this.factories=n,tt(this,"apis",new Map)}static validateFactories(n,o){for(const v of o){const w=[v],le=new Set;for(;w.length;){const Ie=w.shift(),De=n.get(Ie);if(De)for(const st of Object.values(De.deps)){if(st.id===v.id)throw new Error(`Circular dependency of api factory for ${v}`);le.has(st)||(le.add(st),w.push(st))}}}}get(n){return this.load(n)}load(n,o=[]){const v=this.apis.get(n.id);if(v)return v;const w=this.factories.get(n);if(!w)return;if(o.includes(w.api))throw new Error(`Circular dependency of api factory for ${w.api}`);const le=this.loadDeps(n,w.deps,[...o,w.api]),Ie=w.factory(le);return this.apis.set(n.id,Ie),Ie}loadDeps(n,o,v){const w={};for(const le in o)if(o.hasOwnProperty(le)){const Ie=o[le],De=this.load(Ie,v);if(!De)throw new Error(`No API factory available for dependency ${Ie} of dependent ${n}`);w[le]=De}return w}}var Yt=Object.defineProperty,ot=(f,n,o)=>n in f?Yt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,rn=(f,n,o)=>(ot(f,typeof n!="symbol"?n+"":n,o),o),C=(f=>(f[f.default=10]="default",f[f.app=50]="app",f[f.static=100]="static",f))(C||{});class At{constructor(){rn(this,"factories",new Map)}register(n,o){const v=C[n],w=this.factories.get(o.api.id);return w&&w.priority>=v?!1:(this.factories.set(o.api.id,{priority:v,factory:o}),!0)}get(n){const o=this.factories.get(n.id);if(o)return o.factory}getAllApis(){const n=new Set;for(const{factory:o}of this.factories.values())n.add(o.api);return n}}function en(f){return new Promise((n,o)=>{const v=f.width||500,w=f.height||700,le=window.screen.width/2-v/2,Ie=window.screen.height/2-w/2,De=window.open(f.url,f.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${v},height=${w},top=${Ie},left=${le}`);let st="";if(!De||typeof De.closed=="undefined"||De.closed){const Vt=new Error("Failed to open auth popup.");Vt.name="PopupRejectedError",o(Vt);return}const Dt=Vt=>{if(Vt.source!==De||Vt.origin!==f.origin)return;const{data:gn}=Vt;if(gn.type==="config_info"){st=gn.targetOrigin;return}if(gn.type!=="authorization_response")return;const En=gn;if("error"in En){const Yn=new Error(En.error.message);Yn.name=En.error.name,o(Yn)}else n(En.response);kt()},un=setInterval(()=>{if(De.closed){const Vt=`Login failed, ${st&&st!==window.location.origin?`Incorrect app origin, expected ${st}`:"popup was closed"}`,gn=new Error(Vt);gn.name="PopupClosedError",o(gn),kt()}},100);function kt(){window.removeEventListener("message",Dt),clearInterval(un)}window.addEventListener("message",Dt)})}var tn=Object.defineProperty,K=(f,n,o)=>n in f?tn(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,ct=(f,n,o)=>(K(f,typeof n!="symbol"?n+"":n,o),o);let dt=!1;function Ye(f){return[...f].join(" ")}class ut{constructor(n){ct(this,"discoveryApi"),ct(this,"environment"),ct(this,"provider"),ct(this,"joinScopesFunc"),ct(this,"authRequester"),ct(this,"sessionTransform"),ct(this,"enableExperimentalRedirectFlow"),ct(this,"popupOptions");var o;const{configApi:v,discoveryApi:w,environment:le,provider:Ie,joinScopes:De=Ye,oauthRequestApi:st,sessionTransform:Dt=kt=>kt,popupOptions:un}=n;!dt&&!v&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),dt=!0),this.enableExperimentalRedirectFlow=v&&(o=v.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?o:!1,this.authRequester=st.createAuthRequester({provider:Ie,onAuthRequest:async kt=>this.enableExperimentalRedirectFlow?this.executeRedirect(kt):this.showPopup(kt)}),this.discoveryApi=w,this.environment=le,this.provider=Ie,this.joinScopesFunc=De,this.sessionTransform=Dt,this.popupOptions=un}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const o=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(w=>{throw new Error(`Auth refresh request failed, ${w}`)});if(!o.ok){const w=new Error(`Auth refresh request failed, ${o.statusText}`);throw w.status=o.status,w}const v=await o.json();if(v.error){const w=new Error(v.error.message);throw v.error.name&&(w.name=v.error.name),w}return await this.sessionTransform(v)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(o=>{throw new Error(`Logout request failed, ${o}`)});if(!n.ok){const o=new Error(`Logout request failed, ${n.statusText}`);throw o.status=n.status,o}}async showPopup(n){var o,v,w,le,Ie,De,st,Dt;const un=this.joinScopesFunc(n),kt=await this.buildUrl("/start",{scope:un,origin:window.location.origin,flow:"popup"}),Vt=(v=(o=this.popupOptions)==null?void 0:o.size)!=null&&v.fullscreen?window.screen.width:((le=(w=this.popupOptions)==null?void 0:w.size)==null?void 0:le.width)||450,gn=(De=(Ie=this.popupOptions)==null?void 0:Ie.size)!=null&&De.fullscreen?window.screen.height:((Dt=(st=this.popupOptions)==null?void 0:st.size)==null?void 0:Dt.height)||730,En=await en({url:kt,name:`${this.provider.title} Login`,origin:new URL(kt).origin,width:Vt,height:gn});return await this.sessionTransform(En)}async executeRedirect(n){const o=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:o,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,o){const v=await this.discoveryApi.getBaseUrl("auth"),w=this.buildQueryString({...o,env:this.environment});return`${v}/${this.provider.id}${n}${w}`}buildQueryString(n){if(!n)return"";const o=Object.entries(n).map(([v,w])=>{if(typeof w=="string")return`${encodeURIComponent(v)}=${encodeURIComponent(w)}`;if(w)return encodeURIComponent(v)}).filter(Boolean).join("&");return o?`?${o}`:""}}var Rt=Object.defineProperty,St=(f,n,o)=>n in f?Rt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,ft=(f,n,o)=>(St(f,typeof n!="symbol"?n+"":n,o),o);class Mt{constructor(n){ft(this,"discoveryApi"),ft(this,"environment"),ft(this,"provider");const{discoveryApi:o,environment:v,provider:w}=n;this.discoveryApi=o,this.environment=v,this.provider=w}async createSession(){const n=await this.buildUrl("/start"),o=await en({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...o,id:o.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(o=>{throw new Error(`Logout request failed, ${o}`)});if(!n.ok){const o=new Error(`Logout request failed, ${n.statusText}`);throw o.status=n.status,o}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function mt(f,n){for(const o of n)if(!f.has(o))return!1;return!0}class xt{constructor(n){this.options=n}sessionExistsAndHasScope(n,o){if(!n)return!1;if(!o||this.options.sessionScopes===void 0)return!0;const v=this.options.sessionScopes(n);return mt(v,o)}getExtendedScope(n,o){const v=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const w=this.options.sessionScopes(n);for(const le of w)v.add(le)}if(o)for(const w of o)v.add(w);return v}}var Wt=Object.defineProperty,Lt=(f,n,o)=>n in f?Wt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Nt=(f,n,o)=>(Lt(f,typeof n!="symbol"?n+"":n,o),o);class ge{constructor(){Nt(this,"isClosed",!1),Nt(this,"terminatingError"),Nt(this,"observable",new(A())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),Nt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(o=>o.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(o=>o.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,o,v){const w=typeof n=="function"?{next:n,error:o,complete:v}:n;return this.observable.subscribe(w)}}class Fe{constructor(n){Nt(this,"isClosed"),Nt(this,"currentValue"),Nt(this,"terminatingError"),Nt(this,"observable"),Nt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(A())(o=>this.isClosed?(this.terminatingError?o.error(this.terminatingError):o.complete(),()=>{}):(o.next(this.currentValue),this.subscribers.add(o),()=>{this.subscribers.delete(o)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(o=>o.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(o=>o.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,o,v){const w=typeof n=="function"?{next:n,error:o,complete:v}:n;return this.observable.subscribe(w)}}var Xe=Object.defineProperty,Ke=(f,n,o)=>n in f?Xe(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,ht=(f,n,o)=>(Ke(f,typeof n!="symbol"?n+"":n,o),o);class pt{constructor(){ht(this,"subject",new Fe(H.sM.SignedOut)),ht(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?H.sM.SignedIn:H.sM.SignedOut))}sessionState$(){return this.subject}}var $t=Object.defineProperty,Xt=(f,n,o)=>n in f?$t(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Ft=(f,n,o)=>(Xt(f,typeof n!="symbol"?n+"":n,o),o);class j{constructor(n){Ft(this,"connector"),Ft(this,"helper"),Ft(this,"sessionScopesFunc"),Ft(this,"sessionShouldRefreshFunc"),Ft(this,"stateTracker",new pt),Ft(this,"refreshPromise"),Ft(this,"currentSession");const{connector:o,defaultScopes:v=new Set,sessionScopes:w,sessionShouldRefresh:le}=n;this.connector=o,this.sessionScopesFunc=w,this.sessionShouldRefreshFunc=le,this.helper=new xt({sessionScopes:w,defaultScopes:v})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const v=await this.collapsedSessionRefresh(n.scopes),w=this.sessionScopesFunc(this.currentSession),le=this.sessionScopesFunc(v);return mt(le,w)&&(this.currentSession=v),v}catch(v){if(n.optional)return;throw v}}if(!this.currentSession&&!n.instantPopup)try{const o=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=o,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(n);try{const o=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),o}finally{delete this.refreshPromise}}}var ce=Object.defineProperty,Te=(f,n,o)=>n in f?ce(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,$e=(f,n,o)=>(Te(f,typeof n!="symbol"?n+"":n,o),o);class Le{constructor(n){$e(this,"connector"),$e(this,"helper"),$e(this,"stateTracker",new pt),$e(this,"currentSession");const{connector:o,defaultScopes:v=new Set,sessionScopes:w}=n;this.connector=o,this.helper=new xt({sessionScopes:w,defaultScopes:v})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var G=Object.defineProperty,Ae=(f,n,o)=>n in f?G(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Re=(f,n,o)=>(Ae(f,typeof n!="symbol"?n+"":n,o),o);class xe{constructor(n){Re(this,"manager"),Re(this,"storageKey"),Re(this,"schema"),Re(this,"sessionShouldRefreshFunc"),Re(this,"helper");const{manager:o,storageKey:v,schema:w,sessionScopes:le,sessionShouldRefresh:Ie=()=>!1}=n;this.manager=o,this.storageKey=v,this.schema=w,this.sessionShouldRefreshFunc=Ie,this.helper=new xt({sessionScopes:le,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:o}=n,v=this.loadSession();if(this.helper.sessionExistsAndHasScope(v,o)&&!this.sessionShouldRefreshFunc(v))return this.manager.setSession(v),v;const w=await this.manager.getSession(n);return this.saveSession(w),w}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const o=JSON.parse(n,(v,w)=>(w==null?void 0:w.__type)==="Set"?new Set(w.__value):w);try{return this.schema.parse(o)}catch(v){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${v}`),v}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(o){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${o}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(o,v)=>v instanceof Set?{__type:"Set",__value:Array.from(v)}:v))}}var J=Object.defineProperty,q=(f,n,o)=>n in f?J(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Me=(f,n,o)=>(q(f,typeof n!="symbol"?n+"":n,o),o);const Ge={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class we{constructor(n){Me(this,"sessionManager"),Me(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=Ge,oauthRequestApi:Ie,defaultScopes:De=[],scopeTransform:st=Vt=>Vt,popupOptions:Dt}=n,un=new ut({configApi:o,discoveryApi:v,environment:w,provider:le,oauthRequestApi:Ie,sessionTransform(Vt){return{...Vt,providerInfo:{idToken:Vt.providerInfo.idToken,accessToken:Vt.providerInfo.accessToken,scopes:we.normalizeScopes(st,Vt.providerInfo.scope),expiresAt:new Date(Date.now()+Vt.providerInfo.expiresInSeconds*1e3)}}},popupOptions:Dt}),kt=new j({connector:un,defaultScopes:new Set(De),sessionScopes:Vt=>Vt.providerInfo.scopes,sessionShouldRefresh:Vt=>(Vt.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new we({sessionManager:kt,scopeTransform:st})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,o){var v;const w=we.normalizeScopes(this.scopeTransform,n),le=await this.sessionManager.getSession({...o,scopes:w});return(v=le==null?void 0:le.providerInfo.accessToken)!=null?v:""}async getIdToken(n={}){var o;const v=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(o=v==null?void 0:v.providerInfo.idToken)!=null?o:""}async getBackstageIdentity(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.backstageIdentity}async getProfile(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.profile}static normalizeScopes(n,o){if(!o)return new Set;const v=Array.isArray(o)?o:o.split(/[\s|,]/).filter(Boolean);return new Set(n(v))}}const Ve={id:"github",title:"GitHub",icon:()=>null};class rt{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=Ve,oauthRequestApi:Ie,defaultScopes:De=["read:user"]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:De})}}const oe={id:"gitlab",title:"GitLab",icon:()=>null};class X{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=oe,oauthRequestApi:Ie,defaultScopes:De=["read_user"]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:De})}}const de={id:"google",title:"Google",icon:()=>null},he="https://www.googleapis.com/auth/";class S{static create(n){const{configApi:o,discoveryApi:v,oauthRequestApi:w,environment:le="development",provider:Ie=de,defaultScopes:De=["openid",`${he}userinfo.email`,`${he}userinfo.profile`]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:w,provider:Ie,environment:le,defaultScopes:De,scopeTransform(st){return st.map(Dt=>Dt==="openid"?Dt:Dt==="profile"||Dt==="email"?`${he}userinfo.${Dt}`:Dt.startsWith(he)?Dt:`${he}${Dt}`)}})}}const h={id:"okta",title:"Okta",icon:()=>null},c=new Set(["openid","profile","email","phone","address","groups","offline_access"]),b="okta.";class L{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=h,oauthRequestApi:Ie,defaultScopes:De=["openid","email","profile","offline_access"]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:De,scopeTransform(st){return st.map(Dt=>c.has(Dt)||Dt.startsWith(b)?Dt:`${b}${Dt}`)}})}}const D=je.z.object({profile:je.z.object({email:je.z.string().optional(),displayName:je.z.string().optional(),picture:je.z.string().optional()}),backstageIdentity:je.z.object({token:je.z.string(),identity:je.z.object({type:je.z.literal("user"),userEntityRef:je.z.string(),ownershipEntityRefs:je.z.array(je.z.string())})})}),R={id:"saml",title:"SAML",icon:()=>null};class W{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:o,environment:v="development",provider:w=R}=n,le=new Mt({discoveryApi:o,environment:v,provider:w}),Ie=new Le({connector:le}),De=new xe({manager:Ie,storageKey:`${w.id}Session`,schema:D});return new W(De)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.backstageIdentity}async getProfile(n={}){const o=await this.sessionManager.getSession(n);return o==null?void 0:o.profile}}var k=Object.defineProperty,ye=(f,n,o)=>n in f?k(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,et=(f,n,o)=>(ye(f,typeof n!="symbol"?n+"":n,o),o);const U={id:"microsoft",title:"Microsoft",icon:()=>null},Z=class ca{constructor(n){et(this,"oauth2"),et(this,"configApi"),et(this,"environment"),et(this,"provider"),et(this,"oauthRequestApi"),et(this,"discoveryApi"),et(this,"scopeTransform");const{configApi:o,environment:v="development",provider:w=U,oauthRequestApi:le,discoveryApi:Ie,defaultScopes:De=["openid","offline_access","profile","email","User.Read"],scopeTransform:st=Dt=>Dt.concat("offline_access")}=n;this.configApi=o,this.environment=v,this.provider=w,this.oauthRequestApi=le,this.discoveryApi=Ie,this.scopeTransform=st,this.oauth2={[ca.MicrosoftGraphID]:we.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:De})}}static create(n){return new ca(n)}microsoftGraph(){return this.oauth2[ca.MicrosoftGraphID]}static resourceForScopes(n){var o;const v=[...new Set(n.split(" ").map(ca.resourceForScope).filter(le=>le!=="openid"))];if(v.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${v.join(", ")}. Access tokens can only have a single audience.`));const w=(o=v[0])!=null?o:ca.MicrosoftGraphID;return Promise.resolve(w)}static resourceForScope(n){var o;const v=(o=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:o.groups;if(v){const{resourceURI:w}=v;return w.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return ca.MicrosoftGraphID}}async getAccessToken(n,o){const v=n===void 0?ca.MicrosoftGraphID:await ca.resourceForScopes(Array.isArray(n)?n.join(" "):n);return v in this.oauth2||(this.oauth2[v]=we.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[v].getAccessToken(n,o)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};et(Z,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let te=Z;const T={id:"onelogin",title:"onelogin",icon:()=>null},B=new Set(["openid","profile","email","phone","address","groups","offline_access"]),V="onelogin.";class me{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=T,oauthRequestApi:Ie}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(De){return De.map(st=>B.has(st)||st.startsWith(V)?st:`${V}${st}`)}})}}const _e={id:"bitbucket",title:"Bitbucket",icon:()=>null};class at{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=_e,oauthRequestApi:Ie,defaultScopes:De=["team"]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:De})}}const He={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Ot{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=He,oauthRequestApi:Ie,defaultScopes:De=["PROJECT_ADMIN"]}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w,defaultScopes:De})}}const yt={id:"atlassian",title:"Atlassian",icon:()=>null};class Tt{static create(n){const{configApi:o,discoveryApi:v,environment:w="development",provider:le=yt,oauthRequestApi:Ie}=n;return we.create({configApi:o,discoveryApi:v,oauthRequestApi:Ie,provider:le,environment:w})}}var Kt=Object.defineProperty,ln=(f,n,o)=>n in f?Kt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,on=(f,n,o)=>(ln(f,typeof n!="symbol"?n+"":n,o),o);class Gt{constructor(){on(this,"subject",new ge)}post(n){this.subject.next(n)}alert$(){return this.subject}}class wt{constructor(n){this.actualApis=n}static fromApis(n){return new wt(n)}captureEvent(n){this.actualApis.forEach(o=>{try{o.captureEvent(n)}catch{}})}}class It{captureEvent(n){}}var dn=Object.defineProperty,hn=(f,n,o)=>n in f?dn(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,yn=(f,n,o)=>(hn(f,typeof n!="symbol"?n+"":n,o),o);const bn="theme";class Ln{constructor(n){this.themes=n,yn(this,"activeThemeId"),yn(this,"subject",new Fe(void 0))}static createWithStorage(n){var o;const v=new Ln(n);if(!window.localStorage)return v;const w=(o=window.localStorage.getItem(bn))!=null?o:void 0;return v.setActiveThemeId(w),v.activeThemeId$().subscribe(le=>{le?window.localStorage.setItem(bn,le):window.localStorage.removeItem(bn)}),window.addEventListener("storage",le=>{var Ie;if(le.key===bn){const De=(Ie=localStorage.getItem(bn))!=null?Ie:void 0;v.setActiveThemeId(De)}}),v}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const In="Invalid discovery URL pattern,";class On{constructor(n){this.parts=n}static compile(n){const o=n.split(/\{\{\s*pluginId\s*\}\}/),v=o.join("pluginId");let w;try{w=new URL(v)}catch{throw new Error(`${In} URL '${v}' is invalid`)}if(w.hash)throw new Error(`${In} URL must not have a hash`);if(w.search)throw new Error(`${In} URL must not have a query`);if(v.endsWith("/"))throw new Error(`${In} URL must not end with a slash`);return new On(o)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class Rn{constructor(n,o){this.endpoints=n,this.defaultEndpoint=o}static fromConfig(n,o){var v,w;const le=(v=o==null?void 0:o.pathPattern)!=null?v:"/api/{{ pluginId }}",Ie=n.getString("backend.baseUrl"),De=(w=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:w.flatMap(st=>{const Dt=typeof st.get("target")=="object"?st.getString("target.external"):st.getString("target"),un=On.compile(Dt);return st.getStringArray("plugins").map(kt=>[kt,un])});return new Rn(new Map(De),On.compile(`${Ie}${le}`))}async getBaseUrl(n){const o=this.endpoints.get(n);return o?o.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class xn{constructor(n,o){this.alertApi=n,this.errorApi=o}post(n,o){return o!=null&&o.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,o)}error$(){return this.errorApi.error$()}}var er=Object.defineProperty,Kn=(f,n,o)=>n in f?er(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Zr=(f,n,o)=>(Kn(f,typeof n!="symbol"?n+"":n,o),o);class ur{constructor(){Zr(this,"subject",new ge)}post(n,o){this.subject.next({error:n,context:o})}error$(){return this.subject}}class $r{static forward(n,o){window.addEventListener("unhandledrejection",v=>{n.post(v.reason,o)})}}var Ir=Object.defineProperty,Wr=(f,n,o)=>n in f?Ir(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Jn=(f,n,o)=>(Wr(f,typeof n!="symbol"?n+"":n,o),o);function br(f){if(f.length<3)throw new Error(`The '${f}' feature flag must have a minimum length of three characters.`);if(f.length>150)throw new Error(`The '${f}' feature flag must not exceed 150 characters.`);if(!f.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${f}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Mr{constructor(){Jn(this,"registeredFeatureFlags",[]),Jn(this,"flags")}registerFlag(n){br(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===H.CL.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[v,w]of Object.entries(n.states))this.flags.set(v,w);const o=Array.from(this.flags.entries()).filter(([,v])=>v===H.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(o)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const o=JSON.parse(n);if(typeof o!="object"||o===null||Array.isArray(o))return new Map;const v=Object.entries(o).filter(([w,le])=>(br(w),le===H.CL.Active));return new Map(v)}catch{return new Map}}}function wr(f){var n;let o=f.baseImplementation||e.g.fetch;const v=[(n=f.middleware)!=null?n:[]].flat().reverse();for(const w of v)o=w.apply(o);return{fetch:o}}class Ar{constructor(n,o,v,w){this.identityApi=n,this.allowUrl=o,this.headerName=v,this.headerValue=w}static create(n){var o,v;const w=vr(n),le=((o=n.header)==null?void 0:o.name)||"authorization",Ie=((v=n.header)==null?void 0:v.value)||(De=>`Bearer ${De}`);return new Ar(n.identityApi,w,le,Ie)}apply(n){return async(o,v)=>{const w=new Request(o,v),{token:le}=await this.identityApi.getCredentials();return w.headers.get(this.headerName)||typeof le!="string"||!le||!this.allowUrl(w.url)?n(o,v):(w.headers.set(this.headerName,this.headerValue(le)),n(w))}}}function vr(f){return f.allowUrl?f.allowUrl:f.urlPrefixAllowlist?Lr(f.urlPrefixAllowlist):f.config?Lr([f.config.getString("backend.baseUrl")]):()=>!1}function Lr(f){const n=f.map(o=>o.replace(/\/$/,""));return o=>n.some(v=>o===v||o.startsWith(`${v}/`))}function hr(f,n){return!n||n==="/"?f:`${f.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class Nn{constructor(n){this.discoveryApi=n}apply(n){return async(o,v)=>{const w=new Request(o,v),le="plugin://";if(!w.url.startsWith(le))return n(o,v);const{hostname:Ie,pathname:De,search:st,hash:Dt,username:un,password:kt}=new URL(`http://${w.url.substring(le.length)}`);let Vt=await this.discoveryApi.getBaseUrl(Ie);if(un||kt){const En=new URL(Vt),Yn=`${un}${kt?`:${kt}`:""}@`;Vt=`${En.protocol}//${Yn}${En.host}${En.pathname}`}const gn=`${hr(Vt,De)}${st}${Dt}`;return n(gn,typeof o=="string"||Rr(o)?v:o)}}}function Rr(f){return typeof f=="object"&&(f==null?void 0:f.constructor)===URL}class xr{static resolvePluginProtocol(n){return new Nn(n.discoveryApi)}static injectIdentityAuth(n){return Ar.create(n)}constructor(){}}var jr=Object.defineProperty,kr=(f,n,o)=>n in f?jr(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Nr=(f,n,o)=>(kr(f,typeof n!="symbol"?n+"":n,o),o);function Br(f,n){for(const o of n)if(!f.has(o))return!1;return!0}function se(f,...n){const o=new Set(f);for(const v of n)for(const w of v)o.add(w);return o}class ze{constructor(){Nr(this,"requests",[]),Nr(this,"subject",new Fe(this.getCurrentPending()))}request(n){return new Promise((o,v)=>{this.requests.push({scopes:n,resolve:o,reject:v}),this.subject.next(this.getCurrentPending())})}resolve(n,o){this.requests=this.requests.filter(v=>Br(n,v.scopes)?(v.resolve(o),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(o=>o.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((o,v)=>se(o,v.scopes),this.requests[0].scopes);return{scopes:n,resolve:o=>{n&&this.resolve(n,o)},reject:o=>{n&&this.reject(o)}}}}var nt=Object.defineProperty,Et=(f,n,o)=>n in f?nt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Qt=(f,n,o)=>(Et(f,typeof n!="symbol"?n+"":n,o),o);class zt{constructor(){Qt(this,"subject",new Fe([])),Qt(this,"currentRequests",[]),Qt(this,"handlerCount",0)}createAuthRequester(n){const o=new ze,v=this.handlerCount;return this.handlerCount++,o.pending().subscribe({next:w=>{const le=this.currentRequests.slice(),Ie=this.makeAuthRequest(w,n);Ie?le[v]=Ie:delete le[v],this.currentRequests=le,this.subject.next(le.filter(Boolean))}}),w=>o.request(w)}makeAuthRequest(n,o){const{scopes:v}=n;if(v)return{provider:o.provider,trigger:async()=>{const w=await o.onAuthRequest(v);n.resolve(w)},reject:()=>{const w=new Error("Login failed, rejected by user");w.name="RejectedError",n.reject(w)}}}authRequest$(){return this.subject}}var qt=Object.defineProperty,mn=(f,n,o)=>n in f?qt(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,cn=(f,n,o)=>(mn(f,typeof n!="symbol"?n+"":n,o),o);const an=new Map,An=class Ca{constructor(n,o){this.namespace=n,this.errorApi=o,cn(this,"subscribers",new Set),cn(this,"observable",new(A())(v=>(this.subscribers.add(v),()=>{this.subscribers.delete(v)})))}static create(n){var o;return new Ca((o=n.namespace)!=null?o:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var o;for(const[v,w]of an.entries())(o=n.key)!=null&&o.startsWith(v)&&w.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let o,v="absent";try{const w=localStorage.getItem(this.getKeyName(n));w&&(o=JSON.parse(w,(le,Ie)=>(typeof Ie=="object"&&Ie!==null&&Object.freeze(Ie),Ie)),v="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:o,presence:v}}forBucket(n){const o=`${this.namespace}/${n}`;return an.has(o)||an.set(o,new Ca(o,this.errorApi)),an.get(o)}async set(n,o){localStorage.setItem(this.getKeyName(n),JSON.stringify(o)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return Ca.hasSubscribed||(Ca.addStorageEventListener(),Ca.hasSubscribed=!0),this.observable.filter(({key:o})=>o===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const o=n==null?void 0:n.slice(`${this.namespace}/`.length);o.includes("/")||this.notifyChanges(decodeURIComponent(o))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const o=this.snapshot(n);for(const v of this.subscribers)v.next(o)}};cn(An,"hasSubscribed",!1);let _n=An;const Cn=(0,l.createContext)(void 0);function Un(){const[f]=(0,Ce.is)(l.createElement(Ce.AW,{index:!0,element:l.createElement("div",null)}));return!f.index}const Tn=(f,n)=>{try{const o=(0,I.fp)(n,{pathname:f}),v=o==null?void 0:o.filter(st=>{var Dt;return((Dt=st==null?void 0:st.route.routeRefs)==null?void 0:Dt.size)>0}).pop(),w=v==null?void 0:v.route;if(!w)return;let le;w.routeRefs.size===1&&(le=w.routeRefs.values().next().value);let Ie;w.plugins.size===1&&(Ie=w.plugins.values().next().value);const De=Object.entries((v==null?void 0:v.params)||{}).reduce((st,[Dt,un])=>(un!==void 0&&(st[Dt]=un),st),{});return{extension:"App",pluginId:(Ie==null?void 0:Ie.getId())||"root",...le?{routeRef:le.id}:{},_routeNodeType:w.element,params:De}}catch{return}},Bn=({pathname:f,search:n,hash:o,attributes:v})=>{const w=(0,H.z$)();return(0,l.useEffect)(()=>{w.captureEvent("navigate",`${f}${n}${o}`,{attributes:v})},[w,f,n,o,v]),null},Sn=({routeObjects:f})=>{const{pathname:n,search:o,hash:v}=(0,Ce.TH)(),{params:w,...le}=Tn(n,f)||{params:{}};return l.createElement(H.fC,{attributes:le},l.createElement(Bn,{pathname:n,search:o,hash:v,attributes:w}))};function or(f){return Un()?Wn(f):""}function Wn(f){var n;let{pathname:o}=new URL((n=f.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return o=o.replace(/\/*$/,""),o}function zn({component:f,appIdentityProxy:n,children:o}){const[v,w]=(0,l.useState)(),le=(0,H.h_)(H.Ds),Ie=or(le);return v?(n.setTarget(v,{signOutTargetUrl:Ie||"/"}),l.createElement(l.Fragment,null,o)):l.createElement(f,{onSignInSuccess:w})}function sr(f){const{Router:n,SignInPage:o}=(0,H.qD)().getComponents(),v=(0,H.h_)(H.Ds),w=Wn(v),le=`${w}/*`,Ie=(0,l.useContext)(Cn);if(!Ie)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:De,appIdentityProxy:st}=Ie;return o?Un()?l.createElement(n,null,l.createElement(Sn,{routeObjects:De}),l.createElement(zn,{component:o,appIdentityProxy:st},l.createElement(Ce.Z5,null,l.createElement(Ce.AW,{path:le,element:l.createElement(l.Fragment,null,f.children)})))):l.createElement(n,{basename:w},l.createElement(Sn,{routeObjects:De}),l.createElement(zn,{component:o,appIdentityProxy:st},f.children)):(st.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:w||"/"}),Un()?l.createElement(n,null,l.createElement(Sn,{routeObjects:De}),l.createElement(Ce.Z5,null,l.createElement(Ce.AW,{path:le,element:l.createElement(l.Fragment,null,f.children)}))):l.createElement(n,{basename:w},l.createElement(Sn,{routeObjects:De}),f.children))}function jn(f){const n={};for(const v in f.collectors)f.collectors.hasOwnProperty(v)&&(n[v]=f.collectors[v]());const o=[{node:l.Children.toArray(f.root),parent:void 0,contexts:{}}];for(;o.length!==0;){const{node:v,parent:w,contexts:le}=o.shift();l.Children.forEach(v,Ie=>{if(!(0,l.isValidElement)(Ie))return;const De={};for(const st in n)if(n.hasOwnProperty(st)){const Dt=n[st];De[st]=Dt.visit(Dt.accumulator,Ie,w,le[st])}for(const st of f.discoverers){const Dt=st(Ie);Dt&&o.push({node:Dt,parent:Ie,contexts:De})}})}return Object.fromEntries(Object.entries(n).map(([v,w])=>[v,w.accumulator]))}function Fn(f,n){return()=>({accumulator:f(),visit:n})}function Hn(f){var n;return(n=f.props)==null?void 0:n.children}function dr(f){var n,o,v;if((n=f.props)!=null&&n.path&&((o=f.props)!=null&&o.element))return(v=f.props)==null?void 0:v.element}const tr=Fn(()=>new Set,(f,n)=>{const o=(0,H.IY)(n,"core.plugin");o&&f.add(o)}),Pr=f=>{const{children:n}=f,o=(0,H.h_)(H.W0),v="with"in f?o.isActive(f.with):!o.isActive(f.without);return l.createElement(l.Fragment,null,v?n:null)};(0,H.R5)(Pr,"core.featureFlagged",!0);const kn={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ze(f){var n,o;const v=f;return v!=null&&v.type?(o=(n=v.type.displayName)!=null?n:v.type.name)!=null?o:String(v.type):String(v)}const u=f=>{const n=new Set;return f&&n.add(f),n};function s(f,n=new Array){return l.Children.forEach(f,o=>{if(!(0,l.isValidElement)(o))return;const v=(0,H.IY)(o,"core.mountPoint");if(v){const w=(0,H.IY)(o,"core.plugin");n.push({routeRef:v,plugin:w})}s(o.props.children,n)}),n}const i=Fn(()=>({paths:new Map,parents:new Map,objects:new Array}),(f,n,o,v)=>{var w,le,Ie,De,st,Dt,un;if(v!=null&&v.isElementAncestor)return v;if((o==null?void 0:o.props.element)===n)return{...v,isElementAncestor:!0};const kt=(w=n.props)==null?void 0:w.path,Vt=(0,H.IY)(n,"core.mountPoint");if(Vt&&kt)throw new Error(`Path property may not be set directly on a routable extension "${Ze(n)}"`);const gn=(Ie=(le=v==null?void 0:v.obj)==null?void 0:le.children)!=null?Ie:f.objects;if(kt!==void 0){if(typeof kt!="string")throw new Error(`Element path must be a string at "${Ze(n)}"`);const En=kt.startsWith("/")?kt.slice(1):kt,Yn=n.props.element;if((0,H.IY)(n,"core.gatherMountPoints")){if(Yn)throw new Error(`Mount point gatherers may not have an element prop "${Ze(n)}"`);const $n={path:En,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((De=n.props)==null?void 0:De.caseSensitive),children:[kn],plugins:new Set};return gn.push($n),{obj:$n,gatherPath:En,routeRef:v==null?void 0:v.routeRef,gatherRouteRef:v==null?void 0:v.routeRef}}if(Yn){const[$n,...Xn]=s(Yn);if(Xn.length>0)throw new Error(`Route element with path "${kt}" may not contain multiple routable extensions`);if(!$n)return v;const{routeRef:cr,plugin:mr}=$n,Vr={path:En,element:"mounted",routeRefs:new Set([cr]),caseSensitive:Boolean((st=n.props)==null?void 0:st.caseSensitive),children:[kn],plugins:u(mr)};return gn.push(Vr),f.paths.set(cr,En),f.parents.set(cr,v==null?void 0:v.routeRef),{obj:Vr,routeRef:cr!=null?cr:v==null?void 0:v.routeRef,gatherPath:En,gatherRouteRef:v==null?void 0:v.gatherRouteRef}}}if(Vt){if((v==null?void 0:v.gatherPath)===void 0)throw new Error(`Routable extension "${Ze(n)}" with mount point "${Vt}" must be assigned a path`);(Dt=v==null?void 0:v.obj)==null||Dt.routeRefs.add(Vt);const En=(0,H.IY)(n,"core.plugin");return En&&((un=v==null?void 0:v.obj)==null||un.plugins.add(En)),f.paths.set(Vt,v.gatherPath),f.parents.set(Vt,v==null?void 0:v.gatherRouteRef),{...v,routeRef:Vt}}return v}),p=Fn(()=>({paths:new Map,parents:new Map,objects:new Array}),(f,n,o,v)=>{var w,le,Ie,De,st;if((o==null?void 0:o.props.element)===n)return v;let Dt=v==null?void 0:v.obj,un=v==null?void 0:v.routeRef,kt=v==null?void 0:v.sticky;const Vt=(w=n.props)==null?void 0:w.path,gn=(le=Dt==null?void 0:Dt.children)!=null?le:f.objects,En=Boolean((Ie=n.props)==null?void 0:Ie.caseSensitive);let Yn=v==null?void 0:v.path;if((0,H.IY)(n,"core.gatherMountPoints")){if(!Vt)throw new Error("Mount point gatherer must have a path");Yn=Vt}const $n=(De=n.props)==null?void 0:De.element;let Xn=(0,H.IY)(n,"core.mountPoint");if(!Xn&&(0,l.isValidElement)($n)&&(Xn=(0,H.IY)($n,"core.mountPoint")),Xn){let mr=Vt;if(Yn&&(mr?Yn=void 0:mr=Yn),!mr)throw new Error("Mounted routable extension must have a path");f.paths.set(Xn,mr),un&&kt?(f.parents.set(Xn,un),Vt&&(un=Xn,kt=!1)):(f.parents.set(Xn,un),un=Xn),Vt?(Dt={caseSensitive:En,path:Vt,element:"mounted",routeRefs:new Set([Xn]),children:[kn],plugins:u((0,H.IY)(n.props.element,"core.plugin"))},gn.push(Dt)):Dt==null||Dt.routeRefs.add(Xn)}if((0,H.IY)(n,"core.gatherMountPoints")&&(kt=!0),(0,H.IY)(n,"core.gatherMountPoints")){if(!Vt)throw new Error("Mount point gatherer must have a path");Xn||(Dt={caseSensitive:En,path:Vt,element:"gathered",routeRefs:new Set,children:[kn],plugins:((st=v==null?void 0:v.obj)==null?void 0:st.plugins)||new Set},gn.push(Dt))}return{obj:Dt,path:Yn,routeRef:un,sticky:kt}}),P=Fn(()=>new Set,(f,n)=>{if(n.type===Pr){const o=n.props;f.add("with"in o?o.with:o.without)}}),$=(0,d.uW)("route-ref-type",()=>Symbol("route-ref-type"));function re(f){return f[$]==="absolute"}function ue(f){return f[$]==="sub"}function Ne(f){return f[$]==="external"}function vt(...f){const n=f.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Ht(f,n,o){let v,w="";if(re(f))v=f;else if(ue(f))v=f.parent,w=f.path;else if(Ne(f)){const De=o.get(f);if(!De)return[void 0,""];if(re(De))v=De;else if(ue(De))v=De.parent,w=De.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${De}`)}else throw f[$]?new Error(`Unknown or invalid route ref type, ${f[$]}`):new Error(`Unknown object passed to useRouteRef, got ${f}`);if(!v)return[void 0,""];const le=n.get(v);if(le===void 0)return[void 0,""];const Ie=vt(le,w);return[v,Ie]}function pn(f,n,o,v,w){var le;const Ie=(le=(0,I.fp)(w,n))!=null?le:[],De=Array();let st=-1;for(let kt=f;kt&&(st=Ie.findIndex(Vt=>Vt.route.routeRefs.has(kt)),st===-1);kt=v.get(kt))De.unshift(kt);De.length===0&&(st-=1);const Dt=st===-1?"":Ie[st].pathname,un=De.slice(0,-1).map(kt=>{const Vt=o.get(kt);if(Vt===void 0)throw new Error(`No path for ${kt}`);if(Vt.includes(":"))throw new Error(`Cannot route to ${f} with parent ${kt} as it has parameters`);return Vt});return`${vt(Dt,...un)}/`}class Jt{constructor(n,o,v,w,le){this.routePaths=n,this.routeParents=o,this.routeObjects=v,this.routeBindings=w,this.appBasePath=le}resolve(n,o){const[v,w]=Ht(n,this.routePaths,this.routeBindings);if(!v)return;let le;typeof o=="string"?le=this.trimPath(o):o.pathname?le={...o,pathname:this.trimPath(o.pathname)}:le=o;const Ie=this.appBasePath+pn(v,le,this.routePaths,this.routeParents,this.routeObjects);return(...[st])=>vt(Ie,(0,I.Gn)(w,st))}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const vn=(0,d.CT)("routing-context"),nn=({routePaths:f,routeParents:n,routeObjects:o,routeBindings:v,basePath:w="",children:le})=>{const Ie=new Jt(f,n,o,v,w),De=(0,d.EI)({1:Ie});return l.createElement(vn.Provider,{value:De},le)};function Zn(f,n){const o=new Set(n.values());o.delete(void 0);for(const v of n.keys()){if(o.has(v))continue;let w=v,le="";for(;w;){const De=f.get(w);if(De===void 0)throw new Error(`No path for ${w}`);le=vt(De,le),w=n.get(w)}const Ie=le.match(/:(\w+)/g);if(Ie){for(let De=0;De<Ie.length;De++)for(let st=De+1;st<Ie.length;st++)if(Ie[st]===Ie[De])throw new Error(`Parameter ${Ie[st]} is duplicated in path ${le}`)}}}function Mn(f,n){for(const o of n)if(o.externalRoutes){for(const[v,w]of Object.entries(o.externalRoutes))if(!w.optional&&!f.has(w))throw new Error(`External route '${v}' of the '${o.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const lr=(0,d.CT)("app-context"),Gn=({appContext:f,children:n})=>{const o=(0,d.EI)({1:f});return l.createElement(lr.Provider,{value:o,children:n})};var yr=Object.defineProperty,Fr=(f,n,o)=>n in f?yr(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Qn=(f,n,o)=>(Fr(f,typeof n!="symbol"?n+"":n,o),o);function Vn(f){return new Error(`Tried to access IdentityApi ${f} before app was loaded`)}function nr(f){console.warn(`WARNING: Call to ${f} is deprecated and will break in the future`)}class Ur{constructor(){Qn(this,"target"),Qn(this,"waitForTarget"),Qn(this,"resolveTarget",()=>{}),Qn(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,o){this.target=n,this.signOutTargetUrl=o.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw Vn("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return nr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Vn("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return nr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(o=>o.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return nr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function Sr(f,n,o){if(f!==void 0){const w=o.find(le=>le.id===f);if(w)return w}if(n){const w=o.find(le=>le.variant==="dark");if(w)return w}const v=o.find(w=>w.variant==="light");return v||o[0]}const fr=()=>{const f=(0,l.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,o]=(0,l.useState)(f.matches);return(0,l.useEffect)(()=>{const v=w=>{o(w.matches)};return f.addListener(v),()=>{f.removeListener(v)}},[f]),n};function Gr({children:f}){const n=(0,H.h_)(H.hg),o=(0,Oe.Z)(n.activeThemeId$(),n.getActiveThemeId()),v=Boolean(window.matchMedia)?fr():!1,w=Sr(o,v,n.getInstalledThemes());if(!w)throw new Error("App has no themes");return l.createElement(w.Provider,{children:f})}const Hr=async(f=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage Santander\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"gitlab\":[{\"host\":\"pdmtdagap01.cl.bsch\",\"apiBaseUrl\":\"http://pdmtdagap01.cl.bsch/api/v4\",\"baseUrl\":\"http://pdmtdagap01.cl.bsch\"}]},\"techdocs\":{\"builder\":\"local\"},\"auth\":{\"environment\":\"development\",\"providers\":{\"guest\":{}}},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/)=>{const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"Santander Chile"},backend:{baseUrl:"http://localhost:7007"},integrations:{gitlab:[{host:"pdmtdagap01.cl.bsch",apiBaseUrl:"http://pdmtdagap01.cl.bsch/api/v4",baseUrl:"http://pdmtdagap01.cl.bsch"}]},techdocs:{builder:"local"},auth:{environment:"development",providers:{guest:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const o=n.slice();if(f!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const w=JSON.parse(f);Array.isArray(w)?o.push(...w):o.push({data:w,context:"env"})}catch(w){throw new Error(`Failed to load runtime configuration, ${w}`)}const v=window.__APP_CONFIG__;return v&&o.push({context:"window",data:v}),o};var Jr=Object.defineProperty,pa=(f,n,o)=>n in f?Jr(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Oa=(f,n,o)=>(pa(f,typeof n!="symbol"?n+"":n,o),o);class oa{constructor(){Oa(this,"apis",[])}add(n,o){return this.apis.push([n.id,o]),o}build(){return new ra(new Map(this.apis))}}class ra{constructor(n){this.apis=n}static builder(){return new oa}static from(n){return new ra(new Map(n.map(([o,v])=>[o.id,v])))}static with(n,o){return new ra(new Map([[n.id,o]]))}with(n,o){return new ra(new Map([...this.apis,[n.id,o]]))}get(n){return this.apis.get(n.id)}}function Aa(f){const n=new Map;return f&&f({bind:(v,w)=>{for(const[le,Ie]of Object.entries(w)){const De=v[le];if(!De)throw new Error(`Key ${le} is not an existing external route`);if(!Ie&&!De.optional)throw new Error(`External route ${le} is required but was undefined`);Ie&&n.set(De,Ie)}}}),n}var Ra=Object.defineProperty,Sa=(f,n,o)=>n in f?Ra(f,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[n]=o,Or=(f,n,o)=>(Sa(f,typeof n!="symbol"?n+"":n,o),o),ua=(f,n,o)=>{if(!n.has(f))throw TypeError("Cannot "+o)},Da=(f,n,o)=>(ua(f,n,"read from private field"),o?o.call(f):n.get(f)),Ta=(f,n,o)=>{if(n.has(f))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(f):n.set(f,o)},xa=(f,n,o,v)=>(ua(f,n,"write to private field"),v?v.call(f,o):n.set(f,o),o),x;function N(f){const n=new URL(f);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function ee(f,n,o){var v;const w=Boolean(f),le=(0,Pt.default)(f||(()=>Promise.resolve([])));let Ie;if(w&&le.loading){const{Progress:Dt}=n;Ie=l.createElement(Dt,null)}else if(le.error){const{BootErrorPage:Dt}=n;Ie=l.createElement(Dt,{step:"load-config",error:le.error})}const{ThemeProvider:De=Gr}=n;if(Ie)return{node:l.createElement(it,{apis:ra.with(H.hg,o)},l.createElement(De,null,Ie))};let st;if((v=le.value)!=null&&v.length){const Dt=_.fromConfigs(le.value),un=Dt.getOptionalString("app.baseUrl"),kt=Dt.getOptionalString("backend.baseUrl");let Vt=le.value;const gn={data:{},context:"relative-resolver"};if(un&&kt){const En=new URL(un).origin,Yn=new URL(kt).origin;if(En===Yn){const $n=N(kt);kt!==$n&&(gn.data.backend={baseUrl:$n})}}if(un){const En=N(un);un!==En&&(gn.data.app={baseUrl:En})}Object.keys(gn.data).length&&(Vt=Vt.concat([gn])),st=_.fromConfigs(Vt)}else st=_.fromConfigs([]);return{api:st}}class ae{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class We{constructor(n){Or(this,"apiHolder"),Or(this,"configApi"),Or(this,"apis"),Or(this,"icons"),Or(this,"plugins"),Or(this,"featureFlags"),Or(this,"components"),Or(this,"themes"),Or(this,"configLoader"),Or(this,"defaultApis"),Or(this,"bindRoutes"),Or(this,"appIdentityProxy",new Ur),Or(this,"apiFactoryRegistry"),Ta(this,x,!1);var o,v,w,le,Ie;this.apis=(o=n.apis)!=null?o:[],this.icons=n.icons,this.plugins=new Set((v=n.plugins)!=null?v:[]),this.featureFlags=(w=n.featureFlags)!=null?w:[],this.components=n.components,this.themes=n.themes,this.configLoader=(le=n.configLoader)!=null?le:Hr,this.defaultApis=(Ie=n.defaultApis)!=null?Ie:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new At}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const o=this.getProvider();return()=>l.createElement(o,null,n)}getProvider(){if(Da(this,x))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");xa(this,x,!0);const n=new ae(this);let o=!1;return({children:w})=>{const le=(0,l.useRef)(!0),Ie=(0,l.useMemo)(()=>Ln.createWithStorage(this.themes),[]),{routing:De,featureFlags:st,routeBindings:Dt}=(0,l.useMemo)(()=>{const gn=jn({root:w,discoverers:[Hn,dr],collectors:{routing:Un()?p:i,collectedPlugins:tr,featureFlags:P}});return gn.collectedPlugins.forEach(En=>this.plugins.add(En)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...gn,routeBindings:Aa(this.bindRoutes)}},[w]);o||(o=!0,Zn(De.paths,De.parents),Mn(Dt,this.plugins));const un=ee(this.configLoader,this.components,Ie),kt="api"in un;if(kt){const{api:gn}=un;this.configApi=gn}if("node"in un)return un.node;if(kt&&le.current){le.current=!1;const gn=this.getApiHolder().get(H.W0);if(gn){for(const $n of this.featureFlags)gn.registerFlag({...$n,pluginId:""});for(const $n of this.plugins.values())if("getFeatureFlags"in $n)for(const Xn of $n.getFeatureFlags())gn.registerFlag({name:Xn.name,pluginId:$n.getId()});else for(const Xn of $n.output())Xn.type==="feature-flag"&&gn.registerFlag({name:Xn.name,pluginId:$n.getId()});const En=gn.getRegisteredFlags(),Yn=new Set(En.map($n=>$n.name));for(const $n of st)Yn.has($n)||gn.registerFlag({name:$n,pluginId:""})}}const{ThemeProvider:Vt=Gr}=this.components;return l.createElement(it,{apis:this.getApiHolder()},l.createElement(Gn,{appContext:n},l.createElement(Vt,null,l.createElement(nn,{routePaths:De.paths,routeParents:De.parents,routeObjects:De.objects,routeBindings:Dt,basePath:or(un.api)},l.createElement(Cn.Provider,{value:{routeObjects:De.objects,appIdentityProxy:this.appIdentityProxy}},w)))))}}getRouter(){return sr}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const o of n.getApis())this.apiFactoryRegistry.get(o.api)||this.apiFactoryRegistry.register("default",o);return lt.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:H.hg,deps:{},factory:()=>Ln.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:H.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:H.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:H.W0,deps:{},factory:()=>new Mr});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const o of n.getApis())if(!this.apiFactoryRegistry.register("default",o))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${o.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return lt.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new lt(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const o=new Set;for(const v of n){const w=v.getId();if(o.has(w))throw new Error(`Duplicate plugin found '${w}'`);o.add(w)}}}x=new WeakMap;function Qe(f){return new We(f)}let qe=!1;const gt=f=>{const n=(0,H.qD)(),{NotFoundErrorPage:o}=n.getComponents(),v=(0,l.useMemo)(()=>Un(),[]),le=[...(0,H.vJ)(f.children,Ie=>Ie.getElements().flatMap(De=>{var st;let Dt=De.props.path;if(Dt==="")return[];Dt=(st=Dt==null?void 0:Dt.replace(/\/\*$/,""))!=null?st:"/";let un=v?De:De.props.element;return!v&&!un&&(un=De,qe||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),qe=!0)),[{path:Dt,element:un,children:De.props.children?[{path:Dt==="/"?"/":"*",element:De.props.children}]:void 0}]}).sort((De,st)=>st.path.localeCompare(De.path)).map(De=>({...De,path:De.path==="/"?"/":`${De.path}/*`}))),{path:"*",element:l.createElement(o,null)}];return(0,Ce.V$)(le)}},80236:function(fn,Ut,e){"use strict";e.d(Ut,{BT:function(){return Ks},BV:function(){return tl},Ex:function(){return Vr},Fw:function(){return Ie},GB:function(){return Jr},Gk:function(){return Aa},Hz:function(){return qa},J3:function(){return Xn},Kq:function(){return Ri},M6:function(){return Qe},NX:function(){return zn},Oh:function(){return _l},Oi:function(){return or},Oo:function(){return xo},Or:function(){return mr},Pd:function(){return Si},Pf:function(){return Wa},Ph:function(){return go},Qj:function(){return Tn},R6:function(){return Qo},SA:function(){return gn},SV:function(){return Va},SX:function(){return Ne},T3:function(){return Ka},VC:function(){return Ii},VY:function(){return Za},XF:function(){return Wn},YE:function(){return ks},aR:function(){return Ao},db:function(){return Yi},dh:function(){return Mi},fy:function(){return Qi},g9:function(){return Pl},h4:function(){return Fa},hB:function(){return jl},hu:function(){return ti},i9:function(){return hl},iA:function(){return wo},in:function(){return Nr},k2:function(){return Yo},mZ:function(){return Ia},mf:function(){return As},mn:function(){return re},nU:function(){return st},oZ:function(){return Kl},oz:function(){return rl},qE:function(){return nt},qt:function(){return as},r0:function(){return eo},rJ:function(){return Ea},rU:function(){return Cn},sidebarConfig:function(){return ia},sk:function(){return Qn},tB:function(){return qi},tR:function(){return $s},tn:function(){return Ro},ub:function(){return Jt},uw:function(){return us},v7:function(){return qo},vK:function(){return Di},wA:function(){return Ti},xT:function(){return Gi},yW:function(){return Lo},yu:function(){return oa},zG:function(){return Xi}});var l=e(30705),y=e(61837),g=e(37265),d=e(90436),m=e(87685),A=e(99688),H=e(19928),je=e.n(H),r=e(2784),be=e(43434),ne=e(79692),ie=e(60364),ve=e(41128),Y=e(15459),Ee=e(12420),fe=e(76600),_=e(41547),Ce=e(77277),I=e(86689),Pt=e(72779),Oe=e.n(Pt),pe=e(76635),Se=e.n(pe),F=e(73557),Je=e(39857),Ct=e(16060),it=e(95544),Bt=e(56553),Ue=e(26639),tt=e(39595),lt=e(80030),Yt=e(19353),ot=e(95074),rn=e(41156),C=e(88188),At=e(13725),en=e(11105),tn=e(97963),K=e(46506),ct=e.n(K),dt=e(54073),Ye=e.n(dt),ut=e(10368),Rt=e(76985),St=e(39829),ft=e(19574),Mt=e.n(ft),mt=e(72164),xt=e(93657),Wt=e(60905),Lt=e(79265),Nt=e(85910),ge=e(52059),Fe=e(38225),Xe=e(11776),Ke=e(38402),ht=e(49378),pt=e(27616),$t=e(8284),Xt=e(70660),Ft=e(91750),j=e(38016),ce=e(85256),Te=e(28316),$e=e(35292),Le=e(48049),G=e(51209),Ae=e(32407),Re=e(28156),xe=e(8629),J=e(49429),q=e(38724),Me=e(79249),Ge=e(3806),we=e(32272),Ve=e(15277),rt=e.n(Ve),oe=e(29862),X=e(67358),de=e(94339),he=e(14503),S=e(24579),h=e(32552),c=e(27597),b=e(39307),L=e(21324),D=e(7089),R=e(42494),W=e(74603),k=e(56939),ye=e(12231),et=e(73698),U=e(72379),Z=e(74600),te=e.n(Z),T=e(37390),B=e(97485),V=e(15584),me=e(89571),_e=e(86136),at=e(50758),He=e(79784),Ot=e(19126),yt=e.n(Ot),Tt=e(80079),Kt=e(18671),ln=e(6487),on=e(99152),Gt=e(67222),wt=e(21070),It=e(90324),dn=e(98281),hn=e(33375),yn=e(44233),bn=e(27604),Ln=e(36444),In=e(37971),On=e(59709),Rn=e(17373),xn=e(3702),er=e(93111),Kn=e(44311),Zr=e.n(Kn),ur=e(53305),$r=e(16173),Ir=e(50023),Wr=e(4190),Jn=e(44882),br=e(18473),Mr=e(57998),wr=e(83543),Ar=e(59797),vr=e(26739),Lr=e(86619),hr=e(98989),Nn=e(30195),Rr=e(63955),xr=e(74828),jr=e(45455),kr=e.n(jr);function Nr(t){const[a,E]=(0,r.useState)([]),O=(0,l.h_)(l.$v),{anchorOrigin:M={vertical:"top",horizontal:"center"},transientTimeoutMs:z}=t,Q=z!=null?z:5e3;(0,r.useEffect)(()=>{const Be=O.alert$().subscribe(bt=>E(_t=>_t.concat(bt)));return()=>{Be.unsubscribe()}},[O]);const[Pe]=a;if((0,r.useEffect)(()=>{if(Pe&&Pe.display==="transient"){const Be=setTimeout(()=>{E(bt=>{const _t=bt.filter(jt=>jt!==Pe);return _t.length===bt.length?bt:_t})},Q);return()=>clearTimeout(Be)}},[Pe,Q]),a.length===0)return null;const ke=()=>{E(Be=>Be.filter(bt=>bt!==Pe))};return r.createElement(g.Z,{open:!0,anchorOrigin:M},r.createElement(A.Z,{action:r.createElement(y.Z,{color:"inherit",size:"small",onClick:ke,"data-testid":"error-button-close"},r.createElement(m.Z,null)),severity:Pe.severity},r.createElement(d.Z,{component:"span"},String(Pe.message),a.length>1&&r.createElement("em",null,` (${a.length-1} older ${je()("message",a.length-1)})`))))}function Br(t){let a=0;for(let O=0;O<t.length;O++)a=t.charCodeAt(O)+((a<<5)-a);let E="#";for(let O=0;O<3;O++){const M=a>>O*8&255;E+=`00${M.toString(16)}`.slice(-2)}return E}function se(t){var a;return(a=t.match(/(?<!\p{L})\p{L}/gu))==null?void 0:a.join("").slice(0,2)}const ze=(0,ne.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function nt(t){const{displayName:a,picture:E,customStyles:O}=t,M=ze();let z={...O};const Q={fontFamily:z.fontFamily,fontSize:z.fontSize,fontWeight:z.fontWeight};return E||(z={backgroundColor:Br(a||""),...O}),r.createElement(be.Z,{alt:a,src:E,className:M.avatar,style:z},a&&r.createElement(d.Z,{variant:"h6",component:"span",className:M.avatarText,style:Q},se(a)))}function Et(){const[t]=(0,F.is)(r.createElement(F.AW,{index:!0,element:r.createElement("div",null)}));return!t.index}const Qt=(0,ne.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),zt=t=>/^([a-z+.-]+):/.test(t),qt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,mn=window.open;if(mn&&!mn.__backstage){const t=function(...E){const O=String(E[0]);if(qt.test(O))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return mn.apply(this,E)};t.__backstage=!0,window.open=t}const cn=()=>{try{return(0,l.h_)(l.Ds).getOptionalString("app.baseUrl")}catch{return}},an=()=>{var t;const a="http://sample.dev",E=(t=cn())!=null?t:"/",{pathname:O}=new URL(E,a);return(0,pe.trimEnd)(O,"/")},An=t=>{let a=String(t);const E=an(),O=zt(a),M=a.startsWith(E);return!O&&!M&&(a=E.concat(a)),a},_n=t=>{var a;return t instanceof Array?t.map(_n).join(" ").trim():typeof t=="object"&&t?_n((a=t==null?void 0:t.props)==null?void 0:a.children):["string","number"].includes(typeof t)?String(t):""},Cn=r.forwardRef(({onClick:t,noTrack:a,...E},O)=>{const M=Qt(),z=(0,l.z$)(),Q=Et()?An(E.to):E.to,Pe=_n(E.children)||Q,ke=zt(Q),Be=ke&&!!/^https?:/.exec(Q);if(qt.test(Q))throw new Error("Link component rejected javascript: URL as a security precaution");const bt=_t=>{t==null||t(_t),a||z.captureEvent("click",Pe,{attributes:{to:Q}})};return ke?r.createElement(I.Z,{...Be?{target:"_blank",rel:"noopener"}:{},...E,...E["aria-label"]?{"aria-label":`${E["aria-label"]}, Opens in a new window`}:{},ref:O,href:Q,onClick:bt,className:Oe()(M.externalLink,E.className)},E.children,r.createElement(d.Z,{component:"span",className:M.visuallyHidden},", Opens in a new window")):r.createElement(I.Z,{...E,ref:O,component:Je.rU,to:Q,onClick:bt})}),Un=r.forwardRef((t,a)=>r.createElement(Cn,{ref:a,...t,color:"initial"})),Tn=r.forwardRef((t,a)=>r.createElement(Ce.Z,{ref:a,component:Un,...t})),Bn=null;function Sn(t){const{text:a,tooltipDelay:E=1e3,tooltipText:O="Text copied to clipboard","aria-label":M="Copy text"}=t,z=(0,l.h_)(l.VE),[Q,Pe]=(0,r.useState)(!1),[{error:ke},Be]=(0,ot.Z)();(0,r.useEffect)(()=>{ke&&z.post(ke)},[ke,z]);const bt=_t=>{_t.stopPropagation(),Pe(!0),Be(a)};return r.createElement(r.Fragment,null,r.createElement(lt.ZP,{id:"copy-test-tooltip",title:O,placement:"top",leaveDelay:E,onClose:()=>Pe(!1),open:Q},r.createElement(y.Z,{onClick:bt,"aria-label":M},r.createElement(Yt.Z,null))))}function or(t){const{text:a,language:E,showLineNumbers:O=!1,highlightedNumbers:M,customStyle:z,showCopyCodeButton:Q=!1}=t,Pe=(0,ie.Z)(),ke=Pe.palette.type==="dark"?Ue.Z:tt.Z,Be=Pe.palette.type==="dark"?"#256bf3":"#e6ffed";return r.createElement(it.Z,{position:"relative"},r.createElement(Bt.Z,{customStyle:z,language:E,style:ke,showLineNumbers:O,wrapLines:!0,lineNumberStyle:{color:Pe.palette.textVerySubtle},lineProps:bt=>M!=null&&M.includes(bt)?{style:{backgroundColor:Be}}:{}},a),Q&&r.createElement(it.Z,{position:"absolute",top:0,right:0},r.createElement(Sn,{text:a})))}function Wn(t){const{title:a,to:E}=t,O=(0,rn.Z)(M=>M.breakpoints.down("xs"));return E?O?r.createElement(y.Z,{component:Je.rU,color:"primary",title:a,size:"small",to:E},r.createElement(C.Z,null)):r.createElement(Ce.Z,{component:Je.rU,variant:"contained",color:"primary",to:E},a):null}var zn;(t=>{(a=>{a.TOP_BOTTOM="TB",a.BOTTOM_TOP="BT",a.LEFT_RIGHT="LR",a.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(a=>{a.UP_LEFT="UL",a.UP_RIGHT="UR",a.DOWN_LEFT="DL",a.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(a=>{a.NETWORK_SIMPLEX="network-simplex",a.TIGHT_TREE="tight-tree",a.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(a=>{a.LEFT="l",a.RIGHT="r",a.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(zn||(zn={}));const sr=(0,ne.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function jn({node:{id:t}}){const a=sr(),[E,O]=r.useState(0),[M,z]=r.useState(0),Q=r.useRef(null);r.useLayoutEffect(()=>{if(Q.current){let{height:bt,width:_t}=Q.current.getBBox();bt=Math.round(bt),_t=Math.round(_t),(bt!==M||_t!==E)&&(O(_t),z(bt))}},[E,M]);const Pe=10,ke=E+Pe*2,Be=M+Pe*2;return r.createElement("g",null,r.createElement("rect",{className:a.node,width:ke,height:Be,rx:10}),r.createElement("text",{ref:Q,className:a.text,y:Be/2,x:ke/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const Fn="arrow-marker",Hn="node",dr="edge",tr="label",Pr=(0,ut.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),kn=t=>r.createElement(jn,{...t});function Ze({render:t=kn,setNode:a,node:E}){const{width:O,height:M,x:z=0,y:Q=0}=E,Pe=E,ke=Pr(),Be=r.useRef(null);return r.useLayoutEffect(()=>{if(Be.current){let{height:bt,width:_t}=Be.current.getBBox();bt=Math.round(bt),_t=Math.round(_t),(bt!==M||_t!==O)&&a(E.id,{...E,height:bt,width:_t})}},[E,O,M,a]),r.createElement("g",{ref:Be,"data-testid":Hn,className:ke.node,transform:`translate(${z-O/2},${Q-M/2})`},t({node:Pe}))}const u=(0,ut.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function s({edge:{label:t}}){const a=u();return r.createElement("text",{className:a.text,textAnchor:"middle"},t)}const i=(0,ut.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),p=t=>r.createElement(s,{...t});function P({render:t=p,setEdge:a,id:E,edge:O,curve:M}){const{x:z=0,y:Q=0,width:Pe,height:ke,points:Be}=O,bt=O,_t=i(),jt=r.useRef(null);r.useLayoutEffect(()=>{if(jt.current){let{height:Pn,width:Dn}=jt.current.getBBox();Pn=Math.round(Pn),Dn=Math.round(Dn),(Pn!==ke||Dn!==Pe)&&a(E,{...O,height:Pn,width:Dn})}},[O,ke,Pe,a,E]);let Zt="";const sn=r.useMemo(()=>Rt.Z().x(Pn=>Pn.x).y(Pn=>Pn.y).curve(St[M]),[M]);if(Be){const Pn=Be.filter(Dn=>Mt()(Dn.x)&&Mt()(Dn.y));Zt=sn(Pn)||""}return r.createElement(r.Fragment,null,Zt&&r.createElement("path",{"data-testid":dr,className:_t.path,d:Zt}),bt.label?r.createElement("g",{ref:jt,"data-testid":tr,className:_t.label,transform:`translate(${z},${Q})`},t({edge:bt})):null)}const $="workspace";function re(t){var a,E;const{edges:O,nodes:M,renderNode:z,direction:Q=zn.Direction.TOP_BOTTOM,align:Pe,nodeMargin:ke=50,edgeMargin:Be=10,rankMargin:bt=50,paddingX:_t=0,paddingY:jt=0,acyclicer:Zt,ranker:sn=zn.Ranker.NETWORK_SIMPLEX,labelPosition:Pn=zn.LabelPosition.RIGHT,labelOffset:Dn=10,edgeRanks:rr=1,edgeWeight:Cr=1,renderLabel:zr,defs:wn,zoom:ir="enabled",curve:ar="curveMonotoneX",fit:Xr="grow",...aa}=t,Qr=(0,tn.Z)(),[qr,Ma]=r.useState(100),[da,so]=r.useState(100),qn=r.useRef(new(ct()).graphlib.Graph),[ba,ja]=r.useState(((a=qn.current.graph())==null?void 0:a.width)||0),[ma,lo]=r.useState(((E=qn.current.graph())==null?void 0:E.height)||0),[Dr,sa]=r.useState([]),[ga,ha]=r.useState([]),pr=Math.max(ba,qr),_r=Math.max(ma,da),Pa=Math.min(ma,da),fa=Xr==="grow"?_r:Pa,wa=r.useMemo(()=>Ye()(Er=>{if(!Er)return;const Tr=en.Z(Er),gr=en.Z(Er.getElementById($));function ea(){Tr.call(At.sP().scaleExtent([1,1/0]).on("zoom",la=>{la.transform.x=Math.min(0,Math.max(la.transform.x,pr-pr*la.transform.k)),la.transform.y=Math.min(0,Math.max(la.transform.y,_r-_r*la.transform.k)),gr.attr("transform",la.transform)}))}ir==="enabled"?ea():ir==="enable-on-click"&&Tr.on("click",()=>ea());const{width:ta,height:Ga}=Er.getBoundingClientRect();qr!==ta&&Ma(ta),da!==Ga&&so(Ga)},100),[da,qr,pr,_r,ir]),ii=r.useCallback(()=>{const Er=qn.current.nodes(),Tr=qn.current.edges();Er.forEach(gr=>{M.some(ta=>ta.id===gr)||qn.current.removeNode(gr)}),Tr.forEach(gr=>{O.some(ta=>ta.from===gr.v&&ta.to===gr.w)||qn.current.removeEdge(gr.v,gr.w)}),M.forEach(gr=>{const ea=qn.current.nodes().find(ta=>gr.id===ta);if(ea&&qn.current.node(ea)){const{width:ta,height:Ga,x:la,y:Hl}=qn.current.node(ea);qn.current.setNode(ea,{...gr,width:ta,height:Ga,x:la,y:Hl})}else qn.current.setNode(gr.id,{...gr,width:0,height:0})}),O.forEach(gr=>{qn.current.setEdge(gr.from,gr.to,{...gr,label:gr.label,width:0,height:0,labelpos:Pn,labeloffset:Dn,weight:Cr,minlen:rr})})},[O,M,Pn,Dn,Cr,rr]),La=r.useMemo(()=>Ye()(()=>{ct().layout(qn.current);const{height:Er,width:Tr}=qn.current.graph(),gr=Math.max(0,Er||0),ea=Math.max(0,Tr||0);ja(ea),lo(gr),sa(qn.current.nodes()),ha(qn.current.edges())},250,{leading:!0}),[]);r.useEffect(()=>(qn.current.setGraph({rankdir:Q,align:Pe,nodesep:ke,edgesep:Be,ranksep:bt,marginx:_t,marginy:jt,acyclicer:Zt,ranker:sn}),ii(),La(),La.cancel),[Zt,Pe,Q,Be,_t,jt,ke,bt,sn,ii,La]);function Gl(Er,Tr){return qn.current.setNode(Er,Tr),La(),qn.current}function Vl(Er,Tr){return qn.current.setEdge(Er,Tr),La(),qn.current}return r.createElement("svg",{ref:wa,...aa,width:"100%",height:fa,viewBox:`0 0 ${pr} ${_r}`},r.createElement("defs",null,r.createElement("marker",{id:Fn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},r.createElement("path",{fill:Qr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),wn),r.createElement("g",{id:$},r.createElement("svg",{width:ba,height:ma,y:_r/2-ma/2,x:pr/2-ba/2,viewBox:`0 0 ${ba} ${ma}`},ga.map(Er=>{const Tr=qn.current.edge(Er);return Tr?r.createElement(P,{key:`${Er.v}-${Er.w}`,id:Er,setEdge:Vl,render:zr,edge:Tr,curve:ar}):null}),Dr.map(Er=>{const Tr=qn.current.node(Er);return Tr?r.createElement(Ze,{key:Er,setNode:Gl,render:z,node:Tr}):null}))))}const ue=(0,ne.Z)(t=>{var a,E;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(a=t.palette.banner.closeButtonColor)!=null?a:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(E=t.palette.banner.warning)!=null?E:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Ne=t=>{var a;const{variant:E,message:O,id:M,fixed:z=!1}=t,Q=ue(),ke=(0,l.h_)(l.E6).forBucket("notifications"),Be=(a=ke.snapshot("dismissedBanners").value)!=null?a:[],[bt,_t]=(0,r.useState)(new Set(Be)),jt=(0,mt.Z)(ke.observe$("dismissedBanners"));(0,r.useEffect)(()=>{var sn;if(jt!=null&&jt.value){const Pn=(sn=jt==null?void 0:jt.value)!=null?sn:[];_t(new Set(Pn))}},[jt==null?void 0:jt.value]);const Zt=()=>{ke.set("dismissedBanners",[...bt,M])};return r.createElement(g.Z,{anchorOrigin:z?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!bt.has(M),classes:{root:Oe()(Q.root,!z&&Q.topPosition)}},r.createElement(xt.Z,{classes:{root:Oe()(Q.content,Q[E]),message:Q.message},message:O,action:[r.createElement(y.Z,{key:"dismiss",title:"Permanently dismiss this message",className:Q.button,onClick:Zt},r.createElement(m.Z,{className:Q.icon}))]}))},vt=(0,ne.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Ht=({missing:t})=>{const a=vt();switch(t){case"field":return r.createElement("img",{src:Lt,className:a.generalImg,alt:"annotation is missing"});case"info":return r.createElement("img",{src:Nt,alt:"no Information",className:a.generalImg});case"content":return r.createElement("img",{src:ge,alt:"create Component",className:a.generalImg});case"data":return r.createElement("img",{src:Fe,alt:"no Build",className:a.generalImg});default:return null}},pn=(0,ne.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Jt(t){const{title:a,description:E,missing:O,action:M}=t,z=pn();return r.createElement(Wt.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:z.root,spacing:2},r.createElement(Wt.Z,{item:!0,xs:12,md:6},r.createElement(Wt.Z,{container:!0,direction:"column"},r.createElement(Wt.Z,{item:!0,xs:!0},r.createElement(d.Z,{variant:"h5"},a)),r.createElement(Wt.Z,{item:!0,xs:!0},r.createElement(d.Z,{variant:"body1"},E)),r.createElement(Wt.Z,{item:!0,xs:!0,className:z.action},M))),r.createElement(Wt.Z,{item:!0,xs:12,md:6,className:z.imageContainer},typeof O=="string"?r.createElement(Ht,{missing:O}):O.customImage))}const vn=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,nn=/^.*ANNOTATION.*$/m,Zn=vn.match(nn)[0],Mn=vn.split(`
`).findIndex(t=>nn.test(t)),lr=(0,ne.Z)(t=>({code:{borderRadius:6,margin:`${t.spacing(2)}px 0px`,background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Gn(t){return Array.from(Array(t+1).keys(),a=>a+Mn)}function yr(t){const a=t.map(E=>Zn.replace("ANNOTATION",E)).join(`
`);return vn.replace(Zn,a)}function Fr(t){const a=t.length<=1;return r.createElement(r.Fragment,null,"The ",a?"annotation":"annotations"," ",t.map(E=>r.createElement("code",null,E)).reduce((E,O)=>r.createElement(r.Fragment,null,E,", ",O))," ",a?"is":"are"," missing. You need to add the"," ",a?"annotation":"annotations"," to your component if you want to enable this tool.")}function Qn(t){const{annotation:a,readMoreUrl:E}=t,O=Array.isArray(a)?a:[a],M=E||"https://backstage.io/docs/features/software-catalog/well-known-annotations",z=lr();return r.createElement(Jt,{missing:"field",title:"Missing Annotation",description:Fr(O),action:r.createElement(r.Fragment,null,r.createElement(d.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),r.createElement(it.Z,{className:z.code},r.createElement(or,{text:yr(O),language:"yaml",showLineNumbers:!0,highlightedNumbers:Gn(O.length),customStyle:{background:"inherit",fontSize:"115%"}})),r.createElement(Ce.Z,{color:"primary",component:Cn,to:M},"Read more"))})}const Vn=(t,a)=>(a.palette.type==="light"?ve._j:ve.$n)(a.palette[t].light,.6),nr=(t,a)=>(a.palette.type==="light"?ve.$n:ve._j)(a.palette[t].light,.9),Ur=(0,ne.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:a})=>Vn(a,t)}})),Sr=({severity:t})=>{const a=Ur({severity:t});return r.createElement(Ft.Z,{classes:a})},fr=({severity:t})=>{const a=Ur({severity:t});return r.createElement(j.Z,{classes:a})},Gr=(0,ne.Z)(t=>({panel:{backgroundColor:({severity:a})=>nr(a,t),color:({severity:a})=>Vn(a,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:a})=>Vn(a,t),fontWeight:t.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:a})=>Vn(a,t),backgroundColor:({severity:a})=>nr(a,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Hr=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Jr(t){const{severity:a="warning",title:E,message:O,children:M,defaultExpanded:z}=t,Q=Gr({severity:a}),Pe=Hr(a)+(E?`: ${E}`:"");return r.createElement(pt.Z,{defaultExpanded:z!=null?z:!1,className:Q.panel,role:"alert"},r.createElement($t.Z,{expandIcon:r.createElement(fr,{severity:a}),className:Q.summary},r.createElement(Sr,{severity:a}),r.createElement(d.Z,{className:Q.summaryText,variant:"subtitle1"},Pe)),(O||M)&&r.createElement(Xt.Z,null,r.createElement(Wt.Z,{container:!0},O&&r.createElement(Wt.Z,{item:!0,xs:12},r.createElement(d.Z,{className:Q.message,variant:"body1"},O)),M&&r.createElement(Wt.Z,{item:!0,xs:12,className:Q.details},M))))}const pa=(0,ne.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Oa=({error:t,message:a,stack:E,children:O})=>{const M=pa();return r.createElement(Xe.Z,{dense:!0},r.createElement(Ke.Z,{alignItems:"flex-start"},r.createElement(ht.Z,{classes:{secondary:M.text},primary:"Error",secondary:t}),r.createElement(Sn,{text:t})),r.createElement(Ke.Z,{alignItems:"flex-start"},r.createElement(ht.Z,{classes:{secondary:M.text},primary:"Message",secondary:a}),r.createElement(Sn,{text:a})),E&&r.createElement(Ke.Z,{alignItems:"flex-start"},r.createElement(ht.Z,{classes:{secondary:M.text},primary:"Stack Trace",secondary:E}),r.createElement(Sn,{text:E})),O)};function oa(t){const{title:a,error:E,defaultExpanded:O,children:M}=t;return r.createElement(Jr,{severity:"error",title:a!=null?a:E.message,defaultExpanded:O},r.createElement(Oa,{error:E.name,message:E.message,stack:E.stack,children:M}))}const ra=(0,ne.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Aa(t){var a;const{title:E,error:O,defaultExpanded:M}=t,z=ra();if(O.name!=="ResponseError")return r.createElement(oa,{title:E!=null?E:O.message,defaultExpanded:M,error:O});const{body:Q,cause:Pe}=O,{request:ke,response:Be}=Q,bt=`${Be.statusCode}: ${Pe.name}`,_t=ke&&`${ke.method} ${ke.url}`,jt=Pe.message.replace(/\\n/g,`
`),Zt=(a=Pe.stack)==null?void 0:a.replace(/\\n/g,`
`),sn=JSON.stringify(Q,void 0,2);return r.createElement(oa,{title:E!=null?E:O.message,defaultExpanded:M,error:{name:bt,message:jt,stack:Zt}},_t&&r.createElement(Ke.Z,{alignItems:"flex-start"},r.createElement(ht.Z,{classes:{secondary:z.text},primary:"Request",secondary:ke?`${_t}`:void 0}),r.createElement(Sn,{text:_t})),r.createElement(r.Fragment,null,r.createElement(ce.Z,{component:"li",className:z.divider}),r.createElement(Ke.Z,{alignItems:"flex-start"},r.createElement(ht.Z,{classes:{secondary:z.text},primary:"Full Error as JSON"})),r.createElement(or,{language:"json",text:sn,showCopyCodeButton:!0})))}function Ra(t){const a=document.createElement("div");return a.setAttribute("id",t),a}function Sa(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Or(t){const a=useRef(null);useEffect(function(){const M=document.querySelector(`#${t}`),z=M||Ra(t);return M||Sa(z),z.appendChild(a.current),function(){a.current.remove(),z.childNodes.length===-1&&z.remove()}},[t]);function E(){return a.current||(a.current=document.createElement("div")),a.current}return E()}const ua="core.calloutSeen";function Da(){const[t,a]=useState(()=>{const O=localStorage.getItem(ua);return O?JSON.parse(O):{}}),E=useCallback((O,M)=>{const z=localStorage.getItem(ua),Pe={...z?JSON.parse(z):{},[O]:M};a(Pe),localStorage.setItem(ua,JSON.stringify(Pe))},[]);return{states:t,setState:E}}function Ta(t){const{states:a,setState:E}=Da(),O=useCallback(()=>{E(t,!0)},[E,t]);return{seen:a[t]===!0,markSeen:O}}function xa(t){const{seen:a,markSeen:E}=Ta(t);return{show:a===!1,hide:E}}const x=(0,ne.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function N(t){const{featureId:a,title:E,description:O,children:M}=t,{show:z,hide:Q}=xa(a),Pe=Or("core.callout"),ke=useRef(null),[Be,bt]=useState(),_t=x(),jt=useCallback(()=>{if(ke.current){const Zt=ke.current.getBoundingClientRect(),sn=Math.max(Zt.width,Zt.height),Pn=800,Dn=Zt.x-(sn-Zt.width)/2-Pn,rr=Zt.y-(sn-Zt.height)/2-Pn,Cr=sn+2*Pn,zr=450,wn=Zt.x+Zt.width/2-zr,ir=Zt.y-(sn-Zt.height)/2+sn+20;bt({dotLeft:Dn,dotTop:rr,dotSize:Cr,borderWidth:Pn,textTop:ir,textLeft:wn,textWidth:zr})}},[]);return useEffect(()=>(window.addEventListener("resize",jt),window.addEventListener("scroll",jt),()=>{window.removeEventListener("resize",jt),window.removeEventListener("scroll",jt)}),[jt]),useLayoutEffect(jt,[ke.current,jt]),z?React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.featureWrapper,ref:ke},M),createPortal(React.createElement(Box,{className:_t.backdrop},React.createElement(ClickAwayListener,{onClickAway:Q},React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.dot,"data-testid":"dot",style:{left:Be==null?void 0:Be.dotLeft,top:Be==null?void 0:Be.dotTop,width:Be==null?void 0:Be.dotSize,height:Be==null?void 0:Be.dotSize,borderWidth:Be==null?void 0:Be.borderWidth},onClick:Q,onKeyDown:Q,role:"button",tabIndex:0},React.createElement(Box,{className:_t.pulseCircle})),React.createElement(Box,{className:_t.text,"data-testid":"text",style:{left:Be==null?void 0:Be.textLeft,top:Be==null?void 0:Be.textTop,width:Be==null?void 0:Be.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},E),React.createElement(Typography,null,O))))),Pe)):React.createElement(React.Fragment,null,M)}const ee=(0,ne.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function ae({color:t="primary",disabled:a=!1,href:E="#",icon:O=r.createElement($e.Z,null),label:M,onClick:z,title:Q}){const Pe=ee();return a?r.createElement(it.Z,{title:Q,className:Oe()(Pe.link,Pe.disabled)},O,r.createElement(d.Z,{variant:"caption",component:"span",className:Pe.label},M)):r.createElement(Cn,{title:Q,className:Oe()(Pe.link,Pe[t]),to:E,onClick:z},O,r.createElement(d.Z,{variant:"caption",component:"span",className:Pe.label},M))}const We=(0,ne.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Qe(t){const{links:a}=t,E=We();return r.createElement("nav",{className:E.links},a.map((O,M)=>r.createElement(ae,{key:M+1,...O})))}const qe=t=>{const a=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${a}) 0%,
    hsla(0, 0%, ${a}, 0.987) 8.1%,
    hsla(0, 0%, ${a}, 0.951) 15.5%,
    hsla(0, 0%, ${a}, 0.896) 22.5%,
    hsla(0, 0%, ${a}, 0.825) 29%,
    hsla(0, 0%, ${a}, 0.741) 35.3%,
    hsla(0, 0%, ${a}, 0.648) 41.2%,
    hsla(0, 0%, ${a}, 0.55) 47.1%,
    hsla(0, 0%, ${a}, 0.45) 52.9%,
    hsla(0, 0%, ${a}, 0.352) 58.8%,
    hsla(0, 0%, ${a}, 0.259) 64.7%,
    hsla(0, 0%, ${a}, 0.175) 71%,
    hsla(0, 0%, ${a}, 0.104) 77.5%,
    hsla(0, 0%, ${a}, 0.049) 84.5%,
    hsla(0, 0%, ${a}, 0.013) 91.9%,
    hsla(0, 0%, ${a}, 0) 100%
  `},gt=100,f=10,n=(0,ne.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:gt,height:`calc(100% + ${f}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-f,background:`linear-gradient(90deg, ${qe(t.palette.type)})`},fadeRight:{right:-f,background:`linear-gradient(270deg, ${qe(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function o(t){const[[a,E],O]=React.useState([0,0]);return React.useLayoutEffect(()=>{const M=t.current;if(!M){O([0,0]);return}const z=()=>{const Q=M.scrollLeft,Pe=M.scrollWidth-M.offsetWidth-M.scrollLeft;O([Q,Pe])};return z(),M.addEventListener("scroll",z),window.addEventListener("resize",z),()=>{M.removeEventListener("scroll",z),window.removeEventListener("resize",z)}},[t]),[a,E]}function v(t,a,E){const[O,M]=React.useState(0);return React.useLayoutEffect(()=>{if(O===0)return;const z=window.performance.now(),Q=requestAnimationFrame(Pe=>{if(!t.current)return;const ke=Pe-z,Be=Math.abs(O)*ke/a,_t=Math.max(E,Be)*Math.sign(O);t.current.scrollBy({left:_t});const jt=O-_t;Math.sign(O)!==Math.sign(jt)?M(0):M(jt)});return()=>cancelAnimationFrame(Q)},[t,O,a,E]),M}function w(t){const{scrollStep:a=100,scrollSpeed:E=50,minScrollDistance:O=5,children:M,...z}=t,Q=n(t),Pe=React.useRef(),[ke,Be]=o(Pe),bt=v(Pe,E,O),_t=jt=>{Pe.current&&bt(jt?a:-a)};return React.createElement(Box,{...z,className:Q.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:Q.container,ref:Pe},M),React.createElement(Box,{className:classNames(Q.fade,Q.fadeLeft,{[Q.fadeHidden]:ke===0})}),React.createElement(Box,{className:classNames(Q.fade,Q.fadeRight,{[Q.fadeHidden]:Be===0})}),ke>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>_t(!1),className:classNames(Q.button,Q.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Be>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>_t(!0),className:classNames(Q.button,Q.buttonRight,{})},React.createElement(ChevronRight,null)))}const le=(0,ne.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Ie(t){const a=le(t),{shorthand:E,alpha:O}=t;return E?r.createElement(d.Z,{component:"span",className:a[O?"alpha":"beta"],style:{fontSize:"120%"}},O?r.createElement(r.Fragment,null,"\u03B1"):r.createElement(r.Fragment,null,"\u03B2")):r.createElement(d.Z,{component:"span",className:a[O?"alpha":"beta"]},O?"Alpha":"Beta")}const De=(0,r.lazy)(()=>Promise.all([e.e(7757),e.e(5593)]).then(e.bind(e,35593)).then(t=>({default:t.RealLogViewer})));function st(t){const{Progress:a}=(0,l.qD)().getComponents();return r.createElement(r.Suspense,{fallback:r.createElement(a,null)},r.createElement(De,{...t}))}const Dt=(0,ne.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),un=(t,a)=>a?typeof a=="string"?t+a:r.Children.toArray(a.props.children).reduce(un,t):t,kt=({level:t,children:a})=>{const M=r.Children.toArray(a).reduce(un,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return r.createElement(`h${t}`,{id:M},a)},Vt={code:({inline:t,className:a,children:E,...O})=>{const M=String(E).replace(/\n+$/,""),z=/language-(\w+)/.exec(a||"");return!t&&z?r.createElement(or,{language:z[1],text:M}):r.createElement("code",{className:a,...O},E)},h1:kt,h2:kt,h3:kt,h4:kt,h5:kt,h6:kt};function gn(t){const{content:a,dialect:E="gfm",linkTarget:O,transformLinkUri:M,transformImageUri:z,className:Q}=t,Pe=Dt();return r.createElement(Ae.D,{remarkPlugins:E==="gfm"?[Re.Z]:[],className:`${Pe.markdown} ${Q}`,children:a,components:Vt,linkTarget:O,transformLinkUri:M,transformImageUri:z})}const En=(0,ne.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Yn=({request:t,busy:a,setBusy:E})=>{const O=En(),[M,z]=(0,r.useState)(),Q=async()=>{E(!0);try{await t.trigger()}catch(ke){z((0,we.VZ)(ke)?ke.message:"An unspecified error occurred")}finally{E(!1)}},Pe=t.provider.icon;return r.createElement(Ke.Z,{disabled:a,classes:{root:O.root}},r.createElement(Ge.Z,null,r.createElement(Pe,{fontSize:"large"})),r.createElement(ht.Z,{primary:t.provider.title,secondary:M&&r.createElement(d.Z,{color:"error"},M)}),r.createElement(Ce.Z,{color:"primary",variant:"contained",onClick:Q},"Log in"))},$n=(0,ne.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Xn(t){var a;const E=$n(),[O,M]=(0,r.useState)(!1),z=(0,l.h_)(l.ZM),Pe=(a=(0,l.h_)(l.Ds).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?a:!1,ke=(0,mt.Z)((0,r.useMemo)(()=>z.authRequest$(),[z]),[]),Be=()=>{ke.forEach(bt=>bt.reject())};return r.createElement(xe.Z,{open:Boolean(ke.length),fullWidth:!0,maxWidth:"xs",classes:{paper:E.dialog},"aria-labelledby":"oauth-req-dialog-title"},r.createElement("main",null,r.createElement(Me.Z,{classes:{root:E.title},id:"oauth-req-dialog-title"},r.createElement(d.Z,{className:E.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),Pe?r.createElement(d.Z,null,"This will trigger a http redirect to OAuth Login."):null),r.createElement(q.Z,{dividers:!0,classes:{root:E.contentList}},r.createElement(Xe.Z,null,ke.map(bt=>r.createElement(Yn,{key:bt.provider.title,request:bt,busy:O,setBusy:M}))))),r.createElement(J.Z,{classes:{root:E.actionButtons}},r.createElement(Ce.Z,{onClick:Be},"Reject All")))}const cr=(0,ne.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function mr(t){var a;const[E,O]=(0,r.useState)(!1),M=(0,oe.t)(),z=cr(),Q=Pe=>{M()&&O(Pe)};return r.createElement(lt.ZP,{title:(a=t.title)!=null?a:t.text||"",placement:t.placement,disableHoverListener:!E},r.createElement(rt(),{text:t.text,line:t.line,onToggled:Q,containerClassName:z.container}))}function Vr(t){const a=(0,ie.Z)(),[E,O]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const M=setTimeout(()=>O(!0),a.transitions.duration.short);return()=>clearTimeout(M)},[a.transitions.duration.short]),E?r.createElement(X.Z,{...t,"data-testid":"progress"}):r.createElement(it.Z,{display:"none"})}const Ba=(0,ne.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function co(t){const{link:a,title:E,onClick:O}=t,M=Ba();return r.createElement(it.Z,null,r.createElement(ce.Z,null),r.createElement(Cn,{to:a,onClick:O,underline:"none"},r.createElement(it.Z,{display:"flex",alignItems:"center",className:M.root},r.createElement(it.Z,{className:M.boxTitle,fontWeight:"fontWeightBold",m:1},r.createElement(d.Z,null,r.createElement("strong",null,E))),r.createElement(c.Z,{className:M.arrow}))))}const li=t=>{const{slackChannel:a}=t;if(a){if(typeof a=="string")return r.createElement(d.Z,null,"Please contact ",a," for help.");if(!a.href)return r.createElement(d.Z,null,"Please contact ",a.name," for help.")}else return null;return r.createElement(Tn,{to:a.href,variant:"contained"},a.name)},Va=class extends r.Component{constructor(a){super(a),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(a,E){console.error(`ErrorBoundary, error: ${a}, info: ${E}`),this.setState({error:a,errorInfo:E})}render(){const{slackChannel:a,children:E}=this.props,{error:O}=this.state;return O?r.createElement(oa,{title:"Something Went Wrong",error:O},r.createElement(li,{slackChannel:a})):E}},ci=(0,ne.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),ui=(0,Y.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(he.Z),uo={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Ea(t){const{title:a,subheader:E,divider:O=!0,deepLink:M,slackChannel:z,errorBoundaryProps:Q,variant:Pe,children:ke,headerStyle:Be,headerProps:bt,icon:_t,action:jt,actionsClassName:Zt,actions:sn,cardClassName:Pn,actionsTopRight:Dn,className:rr,noPadding:Cr,titleTypographyProps:zr}=t,wn=ci();let ir={},ar={};Pe&&Pe.split(/[\s]+/g).forEach(qr=>{ir={...ir,...uo.card[qr]},ar={...ar,...uo.cardContent[qr]}});const Xr=()=>!E&&!_t?null:r.createElement("div",{className:wn.headerSubheader,"data-testid":"info-card-subheader"},E&&r.createElement("div",{className:wn.subheader},E),_t),aa=Q||(z?{slackChannel:z}:{});return r.createElement(de.Z,{style:ir,className:rr},r.createElement(Va,{...aa},a&&r.createElement(h.Z,{classes:{root:wn.header,title:wn.headerTitle,subheader:wn.headerSubheader,avatar:wn.headerAvatar,action:wn.headerAction,content:wn.headerContent},title:a,subheader:Xr(),action:jt,style:{...Be},titleTypographyProps:zr,...bt}),Dn&&r.createElement(ui,null,Dn),O&&r.createElement(ce.Z,null),r.createElement(S.Z,{className:Oe()(Pn,{[wn.noPadding]:Cr}),style:ar},ke),sn&&r.createElement(he.Z,{className:Zt},sn),M&&r.createElement(co,{...M})))}const di=(0,ne.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),mo={fractional:!0,inverse:!1,unit:"%",max:100},po=({palette:t,value:a,inverse:E,max:O})=>{if(isNaN(a))return"#ddd";const M=O||mo.max,z=E?M-a:a;return z<M/3?t.status.error:z<M*(2/3)?t.status.warning:t.status.ok};function mi(t){const[a,E]=useState(null),{getColor:O=po}=t,M=di(t),{palette:z}=useTheme(),{value:Q,fractional:Pe,inverse:ke,unit:Be,max:bt,description:_t}={...mo,...t},jt=Pe?Math.round(Q*bt):Q,Zt=bt!==100?Math.round(Q):jt,[sn,Pn]=useState(!1);return useEffect(()=>{const Dn=a,rr=()=>Pn(!0),Cr=()=>Pn(!1);return Dn&&_t?(Dn.addEventListener("mouseenter",rr),Dn.addEventListener("mouseleave",Cr),()=>{Dn.removeEventListener("mouseenter",rr),Dn.removeEventListener("mouseleave",Cr)}):()=>{Pn(!1)}},[_t,a]),React.createElement(Box,{ref:E,className:M.root},React.createElement(Circle,{strokeLinecap:"butt",percent:jt,strokeWidth:12,trailWidth:12,strokeColor:O({palette:z,value:Zt,inverse:ke,max:bt}),className:M.circle}),_t&&sn?React.createElement(Box,{className:M.description},_t):React.createElement(Box,{className:M.overlay},isNaN(Q)?"N/A":`${Zt}${Be}`))}const pi=(0,ne.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Jl(t){const a=pi(t),{title:E,subheader:O,progress:M,inverse:z,deepLink:Q,description:Pe,icon:ke,variant:Be,getColor:bt}=t,_t={inverse:z,description:Pe,getColor:bt,value:M};return React.createElement(Box,{className:a.root},React.createElement(Ea,{title:E,subheader:O,deepLink:Q,variant:Be,icon:ke},React.createElement(mi,{..._t})))}function Yl(t){const{value:a,getColor:E=po,width:O="thick"}=t,{palette:M}=useTheme();if(isNaN(a))return null;let z=Math.round(a*100*100)/100;z>100&&(z=100);const Q=O==="thick"?4:1,Pe=E({palette:M,value:z,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${z}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:z,strokeWidth:Q,trailWidth:Q,strokeColor:Pe})))}const gi=(0,ne.Z)(t=>(0,Ee.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),hi=()=>{const t=gi();return r.createElement(U.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},fi=(0,ne.Z)(t=>(0,Ee.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Ei=()=>{const t=fi();return r.createElement(U.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},vi=(0,Y.Z)(t=>(0,Ee.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(W.Z),yi=(0,ne.Z)(t=>(0,Ee.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function go(t){const{multiple:a,items:E,label:O,placeholder:M,selected:z,onChange:Q,triggerReset:Pe,native:ke=!1,disabled:Be=!1,margin:bt}=t,_t=yi(),[jt,Zt]=(0,r.useState)(z||(a?[]:"")),[sn,Pn]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Zt(a?[]:"")},[Pe,a]),(0,r.useEffect)(()=>{Zt(z||(a?[]:""))},[z,a]);const Dn=wn=>{Zt(wn.target.value),Q(wn.target.value)},rr=wn=>{if(Be){wn.preventDefault();return}Pn(ir=>a&&!(wn.target instanceof HTMLElement)?!0:!ir)},Cr=()=>{Pn(!1)},zr=wn=>()=>{const ir=jt.filter(ar=>ar!==wn);Zt(ir),Q(ir)};return r.createElement(it.Z,{className:_t.root},r.createElement(R.Z,{className:_t.formControl},r.createElement(k.Z,{className:_t.formLabel},O),r.createElement(et.Z,{"aria-label":O,value:jt,native:ke,disabled:Be,"data-testid":"select",displayEmpty:!0,multiple:a,margin:bt,onChange:Dn,open:sn,onOpen:rr,onClose:Cr,input:r.createElement(vi,null),label:O,renderValue:wn=>{var ir;return a&&jt.length!==0?r.createElement(it.Z,{className:_t.chips},wn.map(ar=>{var Xr,aa;return r.createElement(D.Z,{key:(Xr=E.find(Qr=>Qr.value===ar))==null?void 0:Xr.value,label:(aa=E.find(Qr=>Qr.value===ar))==null?void 0:aa.label,clickable:!0,onDelete:zr(ar),className:_t.chip})})):r.createElement(d.Z,null,jt.length===0?M||"":(ir=E.find(ar=>ar.value===wn))==null?void 0:ir.label)},IconComponent:()=>sn?r.createElement(Ei,null):r.createElement(hi,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},M&&!a&&r.createElement(ye.Z,{value:[]},M),ke?E&&E.map(wn=>r.createElement("option",{value:wn.value,key:wn.value},wn.label)):E&&E.map(wn=>r.createElement(ye.Z,{key:wn.value,value:wn.value},a&&r.createElement(L.Z,{color:"primary",checked:jt.includes(wn.value)||!1,className:_t.checkbox}),wn.label)))))}const Ha=()=>{},ho=r.createContext({stepperLength:0,stepIndex:0,setStepIndex:Ha,stepHistory:[],setStepHistory:Ha,onStepChange:Ha});function Xl(t){const{children:a,elevated:E,onStepChange:O,activeStep:M=0}=t,[z,Q]=useState(M),[Pe,ke]=useState([0]);useEffect(()=>{Q(M)},[M]);const Be=[];let bt;return Children.forEach(a,_t=>{isValidElement(_t)&&(_t.props.end?bt=_t:Be.push(_t))}),React.createElement(React.Fragment,null,React.createElement(ho.Provider,{value:{stepIndex:z,setStepIndex:Q,stepHistory:Pe,setStepHistory:ke,onStepChange:O,stepperLength:Children.count(a)}},React.createElement(MuiStepper,{activeStep:z,orientation:"vertical",elevation:E?2:0},Be)),z>=Children.count(a)-1&&bt)}const _i=(0,ne.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),bi=({text:t,handleClick:a})=>React.createElement(Button$1,{onClick:a},t||"Reset"),Pi=({text:t,handleClick:a,disabled:E,last:O,stepIndex:M})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:E,"data-testid":`nextButton-${M}`,onClick:a},t||(O?"Finish":"Next")),Ci=({text:t,handleClick:a,disabled:E,stepIndex:O})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:E,"data-testid":`skipButton-${O}`,onClick:a},t||"Skip"),Oi=({text:t,handleClick:a,disabled:E,stepIndex:O})=>React.createElement(Button$1,{onClick:a,"data-testid":`backButton-${O}`,disabled:E},t||"Back"),fo=({actions:t={},children:a})=>{const E=_i(),{stepperLength:O,stepIndex:M,setStepIndex:z,stepHistory:Q,setStepHistory:Pe,onStepChange:ke}=useContext(ho),Be=(Zt,sn)=>{sn&&sn(),ke&&ke(M,Zt),z(Zt)},bt=()=>{const Zt=t.nextStep?t.nextStep(M,O-1):M+1;Be(Zt,t.onNext),Pe([...Q,Zt])},_t=()=>{Q.pop(),Be(Q[Q.length-1],t.onBack),Pe([...Q])},jt=()=>{Be(0,t.onRestart),Pe([0])};return React.createElement(Box,{className:E.root},[void 0,!0].includes(t.showBack)&&M!==0&&React.createElement(Oi,{text:t.backText,handleClick:_t,disabled:M===0,stepIndex:M}),t.showSkip&&React.createElement(Ci,{text:t.skipText,handleClick:bt,disabled:!!O&&M>=O||!!t.canSkip&&!t.canSkip(),stepIndex:M}),[void 0,!0].includes(t.showNext)&&React.createElement(Pi,{text:t.nextText,handleClick:bt,disabled:!!O&&M>=O||!!t.canNext&&!t.canNext(),stepIndex:M}),t.showRestart&&M!==0&&React.createElement(bi,{text:t.restartText,handleClick:jt,stepIndex:M}),a)},Ai=(0,ne.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function Ql(t){const{title:a,children:E,end:O,actions:M,...z}=t,Q=Ai();return O?React.createElement(Box,{className:Q.end},React.createElement(Typography,{variant:"h6"},a),E,React.createElement(fo,{actions:{...M||{},showNext:!1}})):React.createElement(MuiStep,{...z},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},a)),React.createElement(StepContent,null,E,React.createElement(fo,{actions:M})))}const va=(0,ne.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function Ri(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function Si(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function Di(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.error),"aria-label":"Status error","aria-hidden":"true",...t})}function Ti(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Ii(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.running),"aria-label":"Status running","aria-hidden":"true",...t})}function Mi(t){const a=va(t);return r.createElement(d.Z,{component:"span",className:Oe()(a.status,a.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const wi=t=>(0,Ee.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Li={root:{border:"0",verticalAlign:"top"}},xi=t=>(0,Ee.Z)({root:{margin:t.spacing(0,0,-1,0)}}),Bi=t=>(0,Ee.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Ui=(0,Y.Z)(wi,{name:"BackstageMetadataTableTitleCell"})(V.Z),Zi=(0,Y.Z)(Li,{name:"BackstageMetadataTableCell"})(V.Z),$i=({dense:t,children:a})=>r.createElement(T.Z,{size:t?"small":"medium"},r.createElement(B.Z,null,a)),Wi=({title:t,children:a,...E})=>r.createElement(me.Z,null,t&&r.createElement(Ui,null,t),r.createElement(Zi,{colSpan:t?1:2,...E},a)),Eo=(0,Y.Z)(xi,{name:"BackstageMetadataTableList"})(({classes:t,children:a})=>r.createElement(Xe.Z,{disablePadding:!0,className:t.root},a)),vo=(0,Y.Z)(Bi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:a})=>r.createElement(Ke.Z,{className:t.root},a)),yo=(0,Ee.Z)({root:{margin:"0 0",listStyleType:"none"}}),ki=t=>(0,Ee.Z)({root:{...yo.root,paddingLeft:t.spacing(1)}}),_o=(0,Y.Z)(yo,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:a})=>r.createElement(Eo,{classes:t},a)),bo=(0,Y.Z)(ki,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:a})=>r.createElement(Eo,{classes:t},a));function Ni(t,a){const E=t.map((O,M)=>r.createElement(vo,{key:M},Ja(O)));return a?r.createElement(bo,null,E):r.createElement(_o,null,E)}function Fi(t,a,E){const O=Object.keys(t).map(M=>{const z=Ja(t[M],!0),Q=E&&E.titleFormat?E.titleFormat(M):te()(M);return r.createElement(vo,{key:M},r.createElement(d.Z,{variant:"body2",component:"span"},`${Q}: `),z)});return a?r.createElement(bo,null,O):r.createElement(_o,null,O)}function Ja(t,a,E){return r.isValidElement(t)?r.createElement(r.Fragment,null,t):typeof t=="object"&&!Array.isArray(t)?Fi(t,a,E):Array.isArray(t)?Ni(t,E):typeof t=="boolean"?r.createElement(r.Fragment,null,t?"\u2705":"\u274C"):r.createElement(d.Z,{variant:"body2",component:"span"},t)}const Ki=({value:t,options:a})=>r.createElement(r.Fragment,null,Ja(t,a)),zi=({title:t,value:a,options:E})=>r.createElement(Wi,{title:E&&E.titleFormat?E.titleFormat(t):te()(t)},r.createElement(Ki,{value:a,options:E}));function ji(t,a){return Object.keys(t).map(E=>r.createElement(zi,{key:E,title:E,value:t[E],options:a}))}function Gi(t){const{metadata:a,dense:E=!0,options:O}=t,M=ji(a,O||{});return r.createElement($i,{dense:E},M)}function Vi(t){return qs.stringify(t,{strictNullHandling:!0})}function Po(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Co(t,a){return Po(t)[a]}function Hi(t,a,E){const O={...Po(t),[a]:E};return Vi(O)}function ql(t,a=250){const[E,O]=useSearchParams(),M=E.toString(),[z,Q]=useState(Co(M,t));return useEffect(()=>{const Pe=Co(M,t);Q(ke=>isEqual(Pe,ke)?ke:Pe)},[M,Q,t]),useDebouncedEffect(()=>{const Pe=Hi(M,t,z);M!==Pe&&O(Pe,{replace:!0})},[O,z,M,t],a),[z,Q]}const Ji={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Oo(){const a=(0,l.I_)().get(l.Ds),E=a==null?void 0:a.getOptionalConfig("app.support");return E?{url:E.getString("url"),items:E.getConfigArray("items").flatMap(O=>{var M;return{title:O.getString("title"),icon:O.getOptionalString("icon"),links:((M=O.getOptionalConfigArray("links"))!=null?M:[]).flatMap(z=>({url:z.getString("url"),title:z.getString("title")}))}})}:Ji}function Yr(t,a){const O=(0,l.qD)().getSystemIcon(t);return O?r.createElement(O,{...a}):r.createElement(Tt.Z,{...a})}function ec(t){return Yr("brokenImage",t)}function Yi(t){return Yr("catalog",t)}function tc(t){return Yr("chat",t)}function nc(t){return Yr("dashboard",t)}function Xi(t){return Yr("docs",t)}function rc(t){return Yr("email",t)}function Qi(t){return Yr("github",t)}function ac(t){return Yr("group",t)}function Ua(t){return Yr("help",t)}function qi(t){return Yr("user",t)}function oc(t){return Yr("warning",t)}const es=(0,ne.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),ts=({icon:t})=>{var a;const E=(0,l.qD)(),O=t&&(a=E.getSystemIcon(t))!=null?a:Ua;return r.createElement(O,null)},ns=({link:t})=>{var a;return r.createElement(Cn,{to:t.url},(a=t.title)!=null?a:t.url)},rs=({item:t})=>{var a;return r.createElement(ye.Z,null,r.createElement(_e.Z,null,r.createElement(ts,{icon:t.icon})),r.createElement(ht.Z,{primary:t.title,secondary:(a=t.links)==null?void 0:a.reduce((E,O,M)=>[...E,M>0&&r.createElement("br",{key:M}),r.createElement(ns,{link:O,key:O.url})],[])}))};function as(t){const{title:a,items:E,children:O}=t,{items:M}=Oo(),[z,Q]=(0,r.useState)(!1),[Pe,ke]=(0,r.useState)(null),Be=es(),bt=(0,rn.Z)(Zt=>Zt.breakpoints.down("sm")),_t=Zt=>{ke(Zt.currentTarget),Q(!0)},jt=()=>{Q(!1)};return r.createElement(r.Fragment,null,r.createElement(it.Z,{display:"flex",ml:1},bt?r.createElement(y.Z,{color:"primary",size:"small",onClick:_t,"data-testid":"support-button","aria-label":"Support"},r.createElement(Ua,null)):r.createElement(Ce.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:_t,startIcon:r.createElement(Ua,null)},"Support")),r.createElement(He.ZP,{"data-testid":"support-button-popover",open:z,anchorEl:Pe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:jt},r.createElement(at.Z,{className:Be.popoverList,autoFocusItem:Boolean(Pe)},a&&r.createElement(ye.Z,{alignItems:"flex-start"},r.createElement(d.Z,{variant:"subtitle1"},a)),r.Children.map(O,(Zt,sn)=>r.createElement(ye.Z,{alignItems:"flex-start",key:`child-${sn}`},Zt)),(E!=null?E:M).map((Zt,sn)=>r.createElement(rs,{item:Zt,key:`item-${sn}`}))),r.createElement(J.Z,null,r.createElement(Ce.Z,{color:"primary",onClick:jt,"aria-label":"Close"},"Close"))))}const os=(0,ne.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Za(t){const{className:a,stretch:E,noPadding:O,children:M,...z}=t,Q=os();return r.createElement("article",{...z,className:Oe()(Q.root,a,{[Q.stretch]:E,[Q.noPadding]:O})},M)}const is=(0,ne.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function Ao(t){const{tabs:a,onChange:E,selectedIndex:O}=t,[M,z]=(0,r.useState)(O!=null?O:0),Q=is(),Pe=(0,r.useCallback)((ke,Be)=>{O===void 0&&z(Be),E&&O!==Be&&E(Be)},[O,E]);return(0,r.useEffect)(()=>{O!==void 0&&z(O)},[O]),r.createElement(it.Z,{className:Q.tabsWrapper},r.createElement(on.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Pe,value:M},a.map((ke,Be)=>r.createElement(ln.Z,{...ke.tabProps,"data-testid":`header-tab-${Be}`,label:ke.label,key:ke.id,value:Be,className:Q.defaultTab,classes:{selected:Q.selected,root:Q.tabRoot}}))))}function ss(t){var a,E,O,M;const z=(0,F.UO)(),Pe=t.map(({path:jt,children:Zt})=>({caseSensitive:!1,path:`${jt}/*`,element:Zt})).sort((jt,Zt)=>Zt.path.replace(/\/\*$/,"").localeCompare(jt.path.replace(/\/\*$/,""))),ke=(a=(0,F.V$)(Pe))!=null?a:t[0].children;let Be=(E=z["*"])!=null?E:"";Be.startsWith("/")||(Be=`/${Be}`);const[bt]=(O=(0,Ct.fp)(Pe,Be))!=null?O:[],_t=bt?t.findIndex(jt=>`${jt.path}/*`===bt.route.path):0;return{index:_t===-1?0:_t,element:ke,route:(M=t[_t])!=null?M:t[0]}}function Ro(t){const{routes:a}=t,E=(0,F.s0)(),{index:O,route:M,element:z}=ss(a),Q=(0,r.useMemo)(()=>a.map(ke=>({id:ke.path,label:ke.title,tabProps:ke.tabProps})),[a]),Pe=ke=>{let{path:Be}=a[ke];Be=Be.replace(/\/\*$/,""),Be=Be.replace(/^\//,""),E(Be)};return r.createElement(r.Fragment,null,r.createElement(Ao,{tabs:Q,selectedIndex:O,onChange:Pe}),r.createElement(Za,null,r.createElement(Kt.q,{title:M.title}),z))}const Ya=()=>null;(0,l.R5)(Ya,"core.gatherMountPoints",!0);function So(t){const a=r.createElement(Ya,{path:"",title:""},r.createElement("div",null)).type;return r.Children.toArray(t).flatMap(E=>{if(!(0,r.isValidElement)(E))return[];if(E.type===r.Fragment)return So(E.props.children);if(E.type!==a)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:O,title:M,children:z,tabProps:Q}=E.props;return[{path:O,title:M,children:z,tabProps:Q}]})}function ls(t){const a=So(t.children);return r.createElement(Ro,{routes:a})}ls.Route=Ya;const cs=(0,ne.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function us(t){const{value:a,subvalue:E}=t,O=cs();return r.createElement(r.Fragment,null,r.createElement(it.Z,{className:O.value},a),r.createElement(it.Z,{className:O.subvalue},E))}const ds=(0,ne.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),ms=t=>{var a;const E=ds(),{onChangeFilters:O}=t,[M,z]=(0,r.useState)({...t.selectedFilters}),[Q,Pe]=(0,r.useState)(!1),ke=()=>{z({}),Pe(Be=>!Be)};return(0,r.useEffect)(()=>{O(M)},[M,O]),r.createElement(it.Z,{className:E.root},r.createElement(it.Z,{className:E.header},r.createElement(it.Z,{className:E.value},"Filters"),r.createElement(Ce.Z,{color:"primary",onClick:ke},"Clear all")),r.createElement(it.Z,{className:E.filters},((a=t.filters)==null?void 0:a.length)&&t.filters.map(Be=>r.createElement(go,{triggerReset:Q,key:Be.element.label,...Be.element,selected:M[Be.element.label],onChange:bt=>z({...M,[Be.element.label]:bt})}))))},Do={Add:(0,r.forwardRef)((t,a)=>r.createElement(wt.Z,{...t,ref:a})),Check:(0,r.forwardRef)((t,a)=>r.createElement(dn.Z,{...t,ref:a})),Clear:(0,r.forwardRef)((t,a)=>r.createElement(hn.Z,{...t,ref:a})),Delete:(0,r.forwardRef)((t,a)=>r.createElement(yn.Z,{...t,ref:a})),DetailPanel:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),Edit:(0,r.forwardRef)((t,a)=>r.createElement(bn.Z,{...t,ref:a})),Export:(0,r.forwardRef)((t,a)=>r.createElement(xn.Z,{...t,ref:a})),Filter:(0,r.forwardRef)((t,a)=>r.createElement(Ln.Z,{...t,ref:a})),FirstPage:(0,r.forwardRef)((t,a)=>r.createElement(In.Z,{...t,ref:a})),LastPage:(0,r.forwardRef)((t,a)=>r.createElement(On.Z,{...t,ref:a})),NextPage:(0,r.forwardRef)((t,a)=>r.createElement(G.Z,{...t,ref:a})),PreviousPage:(0,r.forwardRef)((t,a)=>r.createElement(Le.Z,{...t,ref:a})),ResetSearch:(0,r.forwardRef)((t,a)=>r.createElement(hn.Z,{...t,ref:a})),Search:(0,r.forwardRef)((t,a)=>r.createElement(Ln.Z,{...t,ref:a})),SortArrow:(0,r.forwardRef)((t,a)=>r.createElement(It.Z,{...t,ref:a})),ThirdStateCheck:(0,r.forwardRef)((t,a)=>r.createElement(Rn.Z,{...t,ref:a})),ViewColumn:(0,r.forwardRef)((t,a)=>r.createElement(er.Z,{...t,ref:a}))};function To(t,a){const E=a.split(".");let O=t[E[0]];for(let M=1;M<E.length;++M){if(O===void 0)return O;const z=E[M];O=O[z]}return O}const ps=(0,Y.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Gt.W$),Io=(0,Y.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(Gt.UW),gs=(0,ne.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),hs=(0,ne.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function fs(t,a){return t.map(E=>{var O;const M=(O=E.headerStyle)!=null?O:{};let z=E.cellStyle||{};if(E.highlight)if(M.color=a.palette.textContrast,typeof z=="object")z.fontWeight=a.typography.fontWeightBold;else{const Q=z;z=(Pe,ke,Be)=>({...Q(Pe,ke,Be),fontWeight:a.typography.fontWeightBold})}return{...E,headerStyle:M,cellStyle:z}})}function Es(t,a){return(0,pe.transform)(t,(E,O,M)=>{(0,pe.isEqual)(O,a[M])||(E[M]=O)})}const Mo={search:"",filtersOpen:!1,filters:{}};function vs(t){const{toolbarRef:a,setSearch:E,hasFilters:O,selectedFiltersLength:M,toggleFilters:z}=t,Q=gs(),Pe=(0,r.useCallback)(ke=>{t.onSearchChanged(ke),E(ke)},[t,E]);return O?r.createElement(it.Z,{className:Q.root},r.createElement(it.Z,{className:Q.root},r.createElement(y.Z,{onClick:z,"aria-label":"filter list"},r.createElement(Ln.Z,null)),r.createElement(d.Z,{className:Q.title},"Filters (",M,")")),r.createElement(Io,{...t,ref:a,onSearchChanged:Pe})):r.createElement(Io,{...t,ref:a,onSearchChanged:Pe})}function wo(t){const{data:a,columns:E,options:O,title:M,subtitle:z,filters:Q,initialState:Pe,emptyContent:ke,onStateChange:Be,components:bt,..._t}=t,jt=hs(),Zt=(0,ie.Z)(),sn={...Mo,...Pe},[Pn,Dn]=(0,r.useState)(sn.filtersOpen),rr=(0,r.useCallback)(()=>Dn(Dr=>!Dr),[Dn]),[Cr,zr]=(0,r.useState)(0),[wn,ir]=(0,r.useState)(a),[ar,Xr]=(0,r.useState)(sn.filters),aa=fs(E,Zt),[Qr,qr]=(0,r.useState)(sn.search);(0,r.useEffect)(()=>{if(Be){const Dr=Es({search:Qr,filtersOpen:Pn,filters:ar},Mo);Be(Dr)}},[Qr,Pn,ar,Be]);const Ma={headerStyle:{textTransform:"uppercase"}},da=(0,r.useCallback)(Dr=>{var sa;return(sa=E.find(ga=>ga.title===Dr))==null?void 0:sa.field},[E]);(0,r.useEffect)(()=>{if(typeof a=="function")return;if(!ar){ir(a);return}const Dr=Object.values(ar);if(a&&Dr.flat().length){const sa=a.filter(ga=>!!Object.entries(ar).filter(([,ha])=>!!ha.length).every(([ha,pr])=>{const _r=To(ga,da(ha));return Array.isArray(_r)&&Array.isArray(pr)?_r.some(Pa=>pr.includes(Pa)):Array.isArray(_r)?_r.includes(pr):Array.isArray(pr)?pr.includes(_r):_r===pr}));ir(sa)}else ir(a);zr(Dr.flat().length)},[a,ar,da]);const so=(Dr,sa)=>{const ga=pr=>{const _r=new Set,Pa=fa=>{fa!=null&&_r.add(fa)};return sa&&sa.forEach(fa=>{const wa=To(fa,da(pr));Array.isArray(wa)?wa.forEach(Pa):Pa(wa)}),_r},ha=pr=>({placeholder:"All results",label:pr.column,multiple:pr.type==="multiple-select",items:[...ga(pr.column)].sort().map(_r=>({label:_r,value:_r}))});return Dr.map(pr=>({type:pr.type,element:ha(pr)}))},qn=!!(Q!=null&&Q.length),ba=(0,r.useCallback)(Dr=>r.createElement(vs,{setSearch:qr,hasFilters:qn,selectedFiltersLength:Cr,toggleFilters:rr,...Dr}),[rr,qn,Cr,qr]),ja=typeof a!="function"&&a.length===0,ma=E.length,lo=(0,r.useCallback)(Dr=>ke&&ja?r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{colSpan:ma},ke))):r.createElement(Gt.os,{...Dr}),[ja,ke,ma]);return r.createElement(it.Z,{className:jt.root},Pn&&a&&typeof a!="function"&&(Q==null?void 0:Q.length)&&r.createElement(ms,{filters:so(Q,a),selectedFilters:ar,onChangeFilters:Xr}),r.createElement(Gt.ZP,{components:{Header:ps,Toolbar:ba,Body:lo,...bt},options:{...Ma,...O},columns:aa,icons:Do,title:r.createElement(r.Fragment,null,r.createElement(d.Z,{variant:"h5",component:"h2"},M),z&&r.createElement(d.Z,{color:"textSecondary",variant:"body1"},z)),data:typeof a=="function"?a:wn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},..._t}))}wo.icons=Object.freeze(Do);function ys(t,a){const E=t[t.length-1];if(E)return E>=.9?a.palette.status.ok:E>=.5?a.palette.status.warning:a.palette.status.error}function ic(t){var a;const E=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(a=t.color)!=null?a:ys(t.data,E)})):null}const _s=t=>(0,ne.Z)(a=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:a.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:a.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),bs=({title:t="Unknown page",className:a})=>r.createElement(d.Z,{variant:"h4",component:"h2",className:a,"data-testid":"header-title"},t);function Lo(t){const{description:a,title:E,titleComponent:O=void 0,children:M,textAlign:z="left"}=t,Q=_s({textAlign:z})(),Pe=O||r.createElement(bs,{title:E,className:Q.title});return r.createElement(r.Fragment,null,r.createElement(Kt.q,{title:E}),r.createElement(it.Z,{className:Q.container},r.createElement(it.Z,{className:Q.leftItemsBox},Pe,a&&r.createElement(d.Z,{className:Q.description,variant:"body2"},a)),r.createElement(it.Z,{className:Q.rightItemsBox},M)))}const Ps=(0,ne.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${t.spacing(10)}px auto ${t.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Cs=()=>{const t=Ps();return r.createElement("img",{src:ur,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Os=(0,ne.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function As(t){const{status:a,statusMessage:E,additionalInfo:O,supportUrl:M}=t,z=Os(),Q=(0,F.s0)(),Pe=Oo();return r.createElement(Wt.Z,{container:!0,spacing:0,className:z.container},r.createElement(Wt.Z,{item:!0,xs:12,sm:8,md:4},r.createElement(d.Z,{"data-testid":"error",variant:"body1",className:z.subtitle},"ERROR ",a,": ",E),r.createElement(d.Z,{variant:"body1",className:z.subtitle},O),r.createElement(d.Z,{variant:"h2",className:z.title},"Looks like someone dropped the mic!"),r.createElement(d.Z,{variant:"h6"},r.createElement(Cn,{to:"#","data-testid":"go-back-link",onClick:()=>Q(-1)},"Go back"),"... or please"," ",r.createElement(Cn,{to:M||Pe.url},"contact support")," if you think this is a bug.")),r.createElement(Cs,null))}const Rs=(0,Y.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(d.Z),Xa=(0,Y.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(it.Z);function xo(t){const{children:a,...E}=t,[O,M]=r.useState(null),z=r.Children.toArray(a),[Q,Pe,...ke]=z,Be=ke.length?ke.pop():z[z.length-1],bt=z.length>3,_t=sn=>{M(sn.currentTarget)},jt=()=>{M(null)},Zt=Boolean(O);return r.createElement(r.Fragment,null,r.createElement($r.Z,{"aria-label":"breadcrumb",...E},z.length>1&&r.createElement(Xa,{clone:!0},Q),z.length>2&&r.createElement(Xa,{clone:!0},Pe),bt&&r.createElement(Rs,{onClick:_t},"..."),r.createElement(it.Z,{style:{fontStyle:"italic"}},Be)),r.createElement(He.ZP,{open:Zt,anchorEl:O,onClose:jt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.createElement(Xe.Z,null,ke.map((sn,Pn)=>r.createElement(Ke.Z,{key:Pn,button:!0},r.createElement(Xa,{clone:!0},sn))))))}const $a=72,Bo=24,Uo=18,ia={drawerWidthClosed:$a,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:$a,iconSize:$a-Bo*2,iconPadding:Bo,selectedIndicatorWidth:3,userBadgePadding:Uo,userBadgeDiameter:$a-Uo*2,mobileSidebarHeight:56},Ss=t=>({...ia,...t,iconContainerWidth:ia.drawerWidthClosed,iconSize:ia.drawerWidthClosed-ia.iconPadding*2,userBadgeDiameter:ia.drawerWidthClosed-ia.userBadgePadding*2}),Zo={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:ia.defaultOpenDelayMs+200},Ds=t=>({...Zo,...t}),Ts="@backstage/core/sidebar-intro-dismissed",Kr=(0,r.createContext)({sidebarConfig:ia,submenuConfig:Zo}),Qa=(0,r.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),$o={isOpen:!1,setOpen:()=>{}},Wo=(0,r.createContext)($o),ko=(0,br.CT)("sidebar-open-state-context");function No(t){const{children:a,value:E}=t;return r.createElement(Wo.Provider,{value:E},r.createElement(ko.Provider,{value:(0,br.EI)({1:E})},a))}const Ia=()=>{const t=(0,r.useContext)(ko),a=(0,r.useContext)(Wo);if(t===void 0)return a||$o;const E=t.atVersion(1);if(E===void 0)throw new Error("No context found for version 1.");return E},Fo={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Ko=(0,r.createContext)(Fo),zo=(0,br.CT)("sidebar-pin-state-context");function Is(t){const{children:a,value:E}=t;return r.createElement(Ko.Provider,{value:E},r.createElement(zo.Provider,{value:(0,br.EI)({1:E})},a))}const Wa=()=>{const t=(0,r.useContext)(zo),a=(0,r.useContext)(Ko);if(t===void 0)return a||Fo;const E=t.atVersion(1);if(E===void 0)throw new Error("No context found for version 1.");return E},Ms=(0,ne.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:a=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${a.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),ws=t=>{const{to:a,label:E,icon:O,value:M}=t,{sidebarConfig:z}=(0,r.useContext)(Kr),Q=Ms({sidebarConfig:z}),Pe=(0,F.TH)(),{selectedMenuItemIndex:ke,setSelectedMenuItemIndex:Be}=(0,r.useContext)(Go),bt=(jt,Zt)=>{Be(Zt===ke?-1:Zt)},_t=M===ke&&ke>=0||M!==ke&&!(ke>=0)&&a===Pe.pathname;return r.createElement(Mr.Z,{"aria-label":E,label:E,icon:O,component:Cn,to:a||Pe.pathname,onChange:bt,value:M,selected:_t,classes:Q})},qa=t=>{const{children:a,to:E,label:O,icon:M,value:z}=t,{isMobile:Q}=Wa();return Q?r.createElement(ws,{to:E,label:O,icon:M,value:z}):r.createElement(r.Fragment,null,a)},jo=(0,ne.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:a=>({background:t.palette.navigation.background,width:"100%",bottom:`${a.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${a.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.text.primary},marginMobileSidebar:a=>({marginBottom:`${a.sidebarConfig.mobileSidebarHeight}px`})})),Ls=t=>(0,pe.orderBy)(t,({props:{priority:a}})=>Number.isInteger(a)?a:-1,"desc"),xs=r.createElement(qa).type,Bs=({children:t,label:a="Menu",open:E,onClose:O})=>{const{sidebarConfig:M}=(0,r.useContext)(Kr),z=jo({sidebarConfig:M});return r.createElement(Wr.ZP,{anchor:"bottom",open:E,onClose:O,ModalProps:{BackdropProps:{classes:{root:z.marginMobileSidebar}}},classes:{root:z.marginMobileSidebar,paperAnchorBottom:z.overlay}},r.createElement(it.Z,{className:z.overlayHeader},r.createElement(d.Z,{variant:"h3"},a),r.createElement(y.Z,{onClick:O,classes:{root:z.overlayHeaderClose}},r.createElement(m.Z,null))),r.createElement(it.Z,{component:"nav"},t))},Go=(0,r.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Us=t=>{const{sidebarConfig:a}=(0,r.useContext)(Kr),{children:E}=t,O=jo({sidebarConfig:a}),M=(0,F.TH)(),[z,Q]=(0,r.useState)(-1);(0,r.useEffect)(()=>{Q(-1)},[M.pathname]);let Pe=(0,l.vJ)(E,Be=>Be.getElements().filter(bt=>bt.type===xs));if(E)Pe.length?Pe=Ls(Pe):Pe.push(r.createElement(qa,{key:"default_menu",icon:r.createElement(Jn.Z,null)},E));else return null;const ke=z>=0&&!Pe[z].props.to;return r.createElement(No,{value:{isOpen:!0,setOpen:()=>{}}},r.createElement(Go.Provider,{value:{selectedMenuItemIndex:z,setSelectedMenuItemIndex:Q}},r.createElement(Bs,{label:Pe[z]&&Pe[z].props.label,open:ke,onClose:()=>Q(-1)},Pe[z]&&Pe[z].props.children),r.createElement(Ir.Z,{className:O.root,"data-testid":"mobile-sidebar-root",component:"nav"},Pe)))},Vo={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},Zs=(0,ne.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:a=>a.isPinned?a.sidebarConfig.drawerWidthOpen:a.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:a=>a.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Ho=(0,r.createContext)({content:{contentRef:void 0}});function $s(t){const[a,E]=(0,r.useState)(()=>Vo.getSidebarPinState()),{sidebarConfig:O}=(0,r.useContext)(Kr),M=(0,r.useRef)(null),z=(0,r.useMemo)(()=>({content:{contentRef:M}}),[M]);(0,r.useEffect)(()=>{Vo.setSidebarPinState(a)},[a]);const Q=(0,rn.Z)(Be=>Be.breakpoints.down("xs"),{noSsr:!0}),Pe=()=>E(!a),ke=Zs({isPinned:a,sidebarConfig:O});return r.createElement(Is,{value:{isPinned:a,toggleSidebarPinState:Pe,isMobile:Q}},r.createElement(Ho.Provider,{value:z},r.createElement(it.Z,{className:ke.root},t.children)))}function eo(){const{content:t}=(0,r.useContext)(Ho);return{focusContent:(0,r.useCallback)(()=>{var E,O;(O=(E=t==null?void 0:t.contentRef)==null?void 0:E.current)==null||O.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Jo=(0,ne.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:a=>({width:a.sidebarConfig.drawerWidthClosed}),drawerOpen:a=>({width:a.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),Ws=t=>{const{sidebarConfig:a}=(0,r.useContext)(Kr),{openDelayMs:E=a.defaultOpenDelayMs,closeDelayMs:O=a.defaultCloseDelayMs,disableExpandOnHover:M,children:z}=t,Q=Jo({sidebarConfig:a}),Pe=(0,rn.Z)(rr=>rr.breakpoints.down("md"),{noSsr:!0}),[ke,Be]=(0,r.useState)(0),bt=(0,r.useRef)(),{isPinned:_t,toggleSidebarPinState:jt}=Wa(),Zt=()=>{_t||M||(bt.current&&(clearTimeout(bt.current),bt.current=void 0),ke!==2&&!Pe&&(bt.current=window.setTimeout(()=>{bt.current=void 0,Be(2)},E),Be(1)))},sn=()=>{_t||M||(bt.current&&(clearTimeout(bt.current),bt.current=void 0),ke===1?Be(0):ke===2&&(bt.current=window.setTimeout(()=>{bt.current=void 0,Be(0)},O)))},Pn=ke===2&&!Pe||_t,Dn=rr=>{rr?(Be(2),jt()):(Be(0),jt())};return r.createElement("nav",{style:{},"aria-label":"sidebar nav"},r.createElement(Ns,null),r.createElement(No,{value:{isOpen:Pn,setOpen:Dn}},r.createElement(it.Z,{className:Q.root,"data-testid":"sidebar-root",onMouseEnter:M?()=>{}:Zt,onFocus:M?()=>{}:Zt,onMouseLeave:M?()=>{}:sn,onBlur:M?()=>{}:sn},r.createElement(it.Z,{className:Oe()(Q.drawer,Q.drawerWidth,{[Q.drawerOpen]:Pn})},z))))},ks=t=>{var a,E;const O=Ss((a=t.sidebarOptions)!=null?a:{}),M=Ds((E=t.submenuOptions)!=null?E:{}),{children:z,disableExpandOnHover:Q,openDelayMs:Pe,closeDelayMs:ke}=t,{isMobile:Be}=Wa();return Be?r.createElement(Us,null,z):r.createElement(Kr.Provider,{value:{sidebarConfig:O,submenuConfig:M}},r.createElement(Ws,{openDelayMs:Pe,closeDelayMs:ke,disableExpandOnHover:Q},z))};function Ns(){const{sidebarConfig:t}=(0,r.useContext)(Kr),{focusContent:a,contentRef:E}=eo(),O=Jo({sidebarConfig:t});return E!=null&&E.current?r.createElement(Ce.Z,{onClick:a,variant:"contained",className:Oe()(O.visuallyHidden)},"Skip to content"):null}function ka(t,a,E=!1){const O=new URLSearchParams(a.search).toString(),M=yt().parse(O),z=new URLSearchParams(t.search).toString(),Q=yt().parse(z),Pe=E?pe.isEqual:pe.isMatch;return(0,pe.isEqual)(a.pathname,t.pathname)&&Pe(Q,M)}const Fs=(0,ne.Z)(t=>{var a,E;return{item:{height:48,width:"100%","&:hover":{background:((a=t.palette.navigation.navItem)==null?void 0:a.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((E=t.palette.navigation.navItem)==null?void 0:E.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),Ks=t=>{const{title:a,subtitle:E,to:O,icon:M,dropdownItems:z,exact:Q}=t,Pe=Fs(),{setIsHoveredOn:ke}=(0,r.useContext)(Qa),Be=()=>{ke(!1)},bt=(0,F.WU)(O!=null?O:""),_t=(0,F.TH)();let jt=ka(_t,bt,Q);const[Zt,sn]=(0,r.useState)(!1),Pn=()=>{sn(!Zt)};return z!==void 0?(z.some(Dn=>{const rr=(0,Ct.i3)(Dn.to);return jt=ka(_t,rr,Q),jt}),r.createElement(it.Z,{className:Pe.itemContainer},r.createElement(lt.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(Ce.Z,{role:"button",onClick:Pn,onTouchStart:Dn=>Dn.stopPropagation(),className:Oe()(Pe.item,jt?Pe.selected:void 0)},M&&r.createElement(M,{fontSize:"small"}),r.createElement(d.Z,{variant:"subtitle1",component:"span",className:Pe.label},a,r.createElement("br",null),E&&r.createElement(d.Z,{variant:"caption",component:"span",className:Pe.subtitle},E)),Zt?r.createElement(Ar.Z,{className:Pe.dropdownArrow}):r.createElement(wr.Z,{className:Pe.dropdownArrow}))),z&&Zt&&r.createElement(it.Z,{className:Pe.dropdown},z.map((Dn,rr)=>r.createElement(lt.ZP,{key:rr,title:Dn.title,enterDelay:500,enterNextDelay:500},r.createElement(Cn,{to:Dn.to,underline:"none",className:Pe.dropdownItem,onClick:Be,onTouchStart:Cr=>Cr.stopPropagation()},r.createElement(d.Z,{component:"span",className:Pe.textContent},Dn.title))))))):r.createElement(it.Z,{className:Pe.itemContainer},r.createElement(lt.ZP,{title:a,enterDelay:500,enterNextDelay:500},r.createElement(Cn,{to:O,underline:"none",className:Oe()(Pe.item,jt?Pe.selected:void 0),onClick:Be,onTouchStart:Dn=>Dn.stopPropagation()},M&&r.createElement(M,{fontSize:"small"}),r.createElement(d.Z,{variant:"subtitle1",component:"span",className:Pe.label},a,r.createElement("br",null),E&&r.createElement(d.Z,{variant:"caption",component:"span",className:Pe.subtitle},E)))))},zs=(0,ne.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:a=>{var E,O;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:a.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(O=(E=t.palette.navigation.submenu)==null?void 0:E.background)!=null?O:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:a.submenuConfig.drawerWidthClosed,transitionDelay:`${a.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:a=>({width:a.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Yo=t=>{const{isOpen:a}=Ia(),{sidebarConfig:E,submenuConfig:O}=(0,r.useContext)(Kr),M=a?E.drawerWidthOpen:E.drawerWidthClosed,z=zs({left:M,submenuConfig:O}),{isHoveredOn:Q}=(0,r.useContext)(Qa),[Pe,ke]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{ke(Q)},[Q]),r.createElement(it.Z,{className:Oe()(z.drawer,{[z.drawerOpen]:Pe})},r.createElement(d.Z,{variant:"h5",component:"span",className:z.title},t.title),t.children)},js=(0,ne.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Gs=()=>{const t=js();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},Vs=(0,ne.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Hs=()=>{const t=Vs();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Js=t=>(0,ne.Z)(a=>{var E,O,M,z;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(O=(E=a.palette.navigation.navItem)==null?void 0:E.hoverBackground)!=null?O:"#404040"}},highlighted:{background:(z=(M=a.palette.navigation.navItem)==null?void 0:M.hoverBackground)!=null?z:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Na(t){return(0,r.useMemo)(()=>Js(t),[t])()}const Ys=(t,a)=>(0,l.vJ)(t.props.children,E=>{let O=!1;return E.getElements().forEach(({props:{to:M,dropdownItems:z}})=>{if(!O){if(z!=null&&z.length){z.forEach(({to:Q})=>O=O||ka(a,(0,Ct.i3)(Q)));return}M&&(O=ka(a,(0,Ct.i3)(M)))}}),O},[a.pathname]);function to(t){return t.to===void 0}const Xs=r.createElement(Yo).type,Qs=r.forwardRef(function({to:a,end:E,style:O,className:M,activeStyle:z,caseSensitive:Q,activeClassName:Pe="active","aria-current":ke="page",...Be},bt){let{pathname:_t}=(0,F.TH)(),{pathname:jt}=(0,F.WU)(a);Q||(_t=_t.toLocaleLowerCase("en-US"),jt=jt.toLocaleLowerCase("en-US"));let Zt=_t===jt;!Zt&&!E&&(Zt=_t.startsWith(`${jt}/`));const sn=Zt?ke:void 0;return r.createElement(Je.rU,{...Be,to:a,ref:bt,"aria-current":sn,style:{...O,...Zt?z:void 0},className:Oe()([M,Zt?Pe:void 0])})}),Xo=(0,r.forwardRef)((t,a)=>{const{icon:E,text:O,hasNotifications:M=!1,hasSubmenu:z=!1,disableHighlight:Q=!1,onClick:Pe,noTrack:ke,children:Be,className:bt,..._t}=t,{sidebarConfig:jt}=(0,r.useContext)(Kr),Zt=Na(jt),{isOpen:sn}=Ia(),Pn=!sn&&z?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Dn=r.createElement(it.Z,{style:Pn},r.createElement(E,{fontSize:"small"}),!sn&&z?r.createElement(hr.Z,{fontSize:"small"}):r.createElement(r.Fragment,null)),rr=r.createElement(vr.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!M,className:Oe()({[Zt.closedItemIcon]:!sn})},Dn),Cr=r.createElement(r.Fragment,null,r.createElement(it.Z,{"data-testid":"login-button",className:Zt.iconContainer},rr),O&&r.createElement(d.Z,{variant:"subtitle2",component:"span",className:Zt.label},O),r.createElement("div",{className:Zt.secondaryAction},Be)),zr=sn?Cr:rr,wn={onClick:Pe,className:Oe()(bt,Zt.root,sn?Zt.open:Zt.closed,to(t)&&Zt.buttonItem,{[Zt.highlightable]:!Q})},ir=(0,l.z$)(),{pathname:ar}=(0,F.WU)(!to(t)&&t.to?t.to:""),Xr=(0,r.useCallback)(aa=>{if(!ke){const Qr="click",qr=O!=null?O:"Sidebar Item",Ma=ar?{attributes:{to:ar}}:void 0;ir.captureEvent(Qr,qr,Ma)}Pe==null||Pe(aa)},[ir,O,ar,ke,Pe]);return to(t)?r.createElement(Ce.Z,{role:"button","aria-label":O,...wn,ref:a,onClick:Xr},zr):r.createElement(Qs,{...wn,activeClassName:Zt.selected,to:t.to?t.to:"",ref:a,"aria-label":O||t.to,..._t,onClick:Xr},zr)}),el=({children:t,...a})=>{const{sidebarConfig:E}=(0,r.useContext)(Kr),O=Na(E),[M,z]=(0,r.useState)(!1),Q=(0,F.TH)(),Pe=Ys(t,Q),ke=(0,rn.Z)(jt=>jt.breakpoints.down("sm")),Be=()=>{z(!0)},bt=()=>{z(!1)},_t=()=>ke?M?r.createElement(Ar.Z,{fontSize:"small",className:O.submenuArrow}):r.createElement(wr.Z,{fontSize:"small",className:O.submenuArrow}):!M&&r.createElement(hr.Z,{fontSize:"small",className:O.submenuArrow});return r.createElement(Qa.Provider,{value:{isHoveredOn:M,setIsHoveredOn:z}},r.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:bt,onTouchStart:M?bt:Be,onMouseEnter:Be,className:Oe()(M&&O.highlighted)},r.createElement(Xo,{hasSubmenu:!0,className:Pe?O.selected:"",...a},_t()),M&&t))},Qo=(0,r.forwardRef)((t,a)=>{const[E]=(0,l.vJ)(t.children,O=>O.getElements().filter(M=>M.type===Xs));return E?r.createElement(el,{...t},E):r.createElement(Xo,{...t,ref:a})});function sc(t){const{sidebarConfig:a}=useContext(Kr),[E,O]=useState(""),M=Na(a),z=t.icon?t.icon:SearchIcon,Q=()=>{t.onSearch(E),O("")},Pe=_t=>{_t.key==="Enter"&&(_t.preventDefault(),Q())},ke=_t=>{O(_t.target.value)},Be=_t=>{_t.preventDefault(),_t.stopPropagation()},bt=_t=>{Q(),_t.preventDefault()};return React.createElement(Box,{className:M.searchRoot},React.createElement(Qo,{icon:z,to:t.to,onClick:bt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:E,onClick:Be,onChange:ke,onKeyDown:Pe,className:M.searchContainer,InputProps:{disableUnderline:!0,className:M.searchField},inputProps:{className:M.searchFieldHTMLInput}})))}const tl=(0,fe.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),lc=(0,fe.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),qo=(0,fe.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),nl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),rl=(0,fe.Z)("div")(({theme:t})=>{const a=nl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":a,"&:hover":a}}),cc=()=>{const{sidebarConfig:t}=useContext(Kr),a=Na(t),{isOpen:E,setOpen:O}=Ia();if(useMediaQuery(Q=>Q.breakpoints.down("md"),{noSsr:!0}))return null;const z=()=>{O(!E)};return React.createElement(Button$1,{role:"button",onClick:z,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:a.arrows},E?React.createElement(Gs,null):React.createElement(Hs,null)))},al=(0,ne.Z)(t=>({introCard:a=>({color:"#b5b5b5",fontSize:12,width:a.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:a.sidebarConfig.iconPadding,paddingRight:a.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function ol(t){const{sidebarConfig:a}=useContext(Kr),E=al({sidebarConfig:a}),{text:O,onClose:M}=t,z=()=>M();return React.createElement(Box,{className:E.introCard},React.createElement(Typography,{variant:"subtitle2"},O),React.createElement(Box,{className:E.introDismiss},React.createElement(IconButton,{onClick:z,className:E.introDismissLink},React.createElement(CloseIcon,{className:E.introDismissIcon}),React.createElement(Typography,{component:"span",className:E.introDismissText},"Dismiss"))))}const ei=t=>{const{text:a,onDismiss:E}=t,[O,M]=useState(!1),z=()=>{M(!0)};return React.createElement(Collapse,{in:!O,onExited:E},React.createElement(ol,{text:a,onClose:z}))},il=null,sl="And your recently viewed plugins will pop up here!";function uc(t){const{isOpen:a}=Ia(),E={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:O,set:M}=useLocalStorageValue(Ts),{starredItemsDismissed:z,recentlyViewedItemsDismissed:Q}=O!=null?O:{},Pe=()=>{M(Be=>({...E,...Be,starredItemsDismissed:!0}))},ke=()=>{M(Be=>({...E,...Be,recentlyViewedItemsDismissed:!0}))};return a?React.createElement(React.Fragment,null,!z&&React.createElement(React.Fragment,null,React.createElement(ei,{text:il,onDismiss:Pe}),React.createElement(qo,null)),!Q&&React.createElement(ei,{text:sl,onDismiss:ke})):null}const ll=(0,ne.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),cl=({type:t,typeLink:a,classes:E,pageTitle:O})=>t?a?r.createElement(xo,{className:E.breadcrumb},r.createElement(Cn,{to:a},t),r.createElement(d.Z,null,O)):r.createElement(d.Z,{className:E.type},t):null,ul=({pageTitle:t,classes:a,tooltip:E})=>{const{contentRef:O}=eo(),M=r.createElement(d.Z,{ref:O,tabIndex:-1,className:a.title,variant:"h1"},t);return E?r.createElement(lt.ZP,{title:E,placement:"top-start"},M):M},dl=({classes:t,subtitle:a})=>a?typeof a!="string"?r.createElement(r.Fragment,null,a):r.createElement(d.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},a):null;function Fa(t){const{children:a,pageTitleOverride:E,style:O,subtitle:M,title:z,tooltip:Q,type:Pe,typeLink:ke}=t,Be=ll(),_t=(0,l.h_)(l.Ds).getOptionalString("app.title")||"Backstage",jt=E||z,Zt=z||E,sn=`${jt} | %s | ${_t}`,Pn=`${jt} | ${_t}`;return r.createElement(r.Fragment,null,r.createElement(Kt.q,{titleTemplate:sn,defaultTitle:Pn}),r.createElement("header",{style:O,className:Be.header},r.createElement(it.Z,{className:Be.leftItemsBox},r.createElement(cl,{classes:Be,type:Pe,typeLink:ke,pageTitle:Zt}),r.createElement(ul,{classes:Be,pageTitle:Zt,tooltip:Q}),r.createElement(dl,{classes:Be,subtitle:M})),r.createElement(Wt.Z,{container:!0,className:Be.rightItemsBox,spacing:4},a)))}const ml=({label:t,secondaryLabel:a,icon:E,disabled:O=!1,onClick:M})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:O,button:!0,onClick:z=>{M&&M(z)}},E&&React.createElement(ListItemIcon,null,E),React.createElement(ListItemText,{primary:t,secondary:a})));function dc(t){const{palette:{common:{white:a}}}=useTheme(),{actionItems:E}=t,[O,M]=React.useState(!1),z=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>M(!0),"data-testid":"header-action-menu",ref:z,style:{color:a,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:O,anchorEl:z.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>M(!1)},React.createElement(List,null,E.map((Q,Pe)=>React.createElement(ml,{key:`header-action-menu-${Pe}`,...Q})))))}const pl=(0,ne.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,ve.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),gl=({value:t,className:a})=>r.createElement(d.Z,{component:typeof t=="string"?"p":"span",className:a},t);function hl(t){const{label:a,value:E,url:O}=t,M=pl(),z=r.createElement(gl,{className:M.value,value:E||"<Unknown>"});return r.createElement(Wt.Z,{item:!0},r.createElement(d.Z,{component:"span",className:M.root},r.createElement(d.Z,{className:M.label},a),O?r.createElement(Cn,{to:O},z):z))}const fl=t=>(0,Ee.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),El=(0,ne.Z)(fl,{name:"BackstageItemCardHeader"});function ti(t){const{title:a,subtitle:E,children:O}=t,M=El(t);return r.createElement(it.Z,{className:M.root},E&&r.createElement(d.Z,{variant:"subtitle2",component:"h3"},E),a&&r.createElement(d.Z,{variant:"h6",component:"h4"},a),O)}function mc(t){const{description:a,tags:E,title:O,type:M,subtitle:z,label:Q,onClick:Pe,href:ke}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(ti,{title:O,subtitle:z||M})),React.createElement(CardContent,null,E!=null&&E.length?React.createElement(Box,null,E.map((Be,bt)=>React.createElement(Chip,{size:"small",label:Be,key:bt}))):null,a),React.createElement(CardActions,null,!ke&&React.createElement(Tn,{to:"#",onClick:Pe,color:"primary"},Q),ke&&React.createElement(Tn,{to:ke,color:"primary"},Q)))}const vl=t=>(0,Ee.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),yl=(0,ne.Z)(vl,{name:"BackstageItemCardGrid"});function _l(t){const{children:a,...E}=t,O=yl(E);return r.createElement(it.Z,{className:O.root,...E},a)}const bl=(0,ne.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Ka(t){const{themeId:a,children:E}=t,O=bl();return r.createElement(_.Z,{theme:M=>({...M,page:M.getPageTheme({themeId:a})})},r.createElement("main",{className:O.root},E))}function Pl(t){const{themeId:a,children:E,...O}=t;return r.createElement(Ka,{themeId:a},r.createElement(Fa,{...O}),E)}const Cl=Nn.z.object({providerInfo:Nn.z.object({}).catchall(Nn.z.unknown()).optional(),profile:Nn.z.object({email:Nn.z.string().optional(),displayName:Nn.z.string().optional(),picture:Nn.z.string().optional()}),backstageIdentity:Nn.z.object({token:Nn.z.string(),identity:Nn.z.object({type:Nn.z.literal("user"),userEntityRef:Nn.z.string(),ownershipEntityRefs:Nn.z.array(Nn.z.string())})})});var Ol=Object.defineProperty,Al=(t,a,E)=>a in t?Ol(t,a,{enumerable:!0,configurable:!0,writable:!0,value:E}):t[a]=E,no=(t,a,E)=>(Al(t,typeof a!="symbol"?a+"":a,E),E);const ni={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Rl(t){const a=new Date(Date.now()+ni.defaultTokenExpiryMillis);if(!t)return a;const[E,O,M]=t.split("."),z=JSON.parse(window.atob(O));return typeof z.exp!="number"?a:new Date(z.exp*1e3-ni.tokenExpiryMarginMillis)}class Sl{constructor(a){no(this,"options"),no(this,"abortController"),no(this,"state"),this.options=a,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:a}=this.getSessionSync(),E=a.identity.userEntityRef,O=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(E);if(!O)throw new TypeError(`Invalid user entity reference "${E}"`);return O[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const a=this.state.type==="active"?this.state.session:void 0,E=this.fetchSession().then(O=>(this.state={type:"active",session:O,expiresAt:Rl(O.backstageIdentity.token)},O),O=>{throw this.state={type:"failed",error:O},O});return this.state={type:"fetching",promise:E,previous:a},E}async fetchSession(){const a=await this.options.discoveryApi.getBaseUrl("auth"),E=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,O=new Headers(E);O.set("X-Requested-With","XMLHttpRequest");const M=await fetch(`${a}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:O,credentials:"include"});if(!M.ok)throw await ResponseError.fromResponse(M);return Cl.parse(await M.json())}}const pc=t=>{const a=useApi(discoveryApiRef),[{status:E,error:O},{execute:M}]=useAsync(async()=>{const z=new Sl({provider:t.provider,discoveryApi:a,headers:t.headers});await z.start(),t.onSignInSuccess(z)});return useMountEffect(M),E==="loading"?React.createElement(Vr,null):O?React.createElement(oa,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:O}):null};class ro{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const a="user:default/guest";return{type:"user",userEntityRef:a,ownershipEntityRefs:[a]}}async getCredentials(){return{}}async signOut(){}}function Dl(t){const[a,E,O]=t.split(".");return JSON.parse(window.atob(E))}class ao{constructor(a){this.result=a}getUserId(){return this.result.userId}static fromResult(a){return new ao(a)}async getIdToken(){var a,E;return(E=(a=this.result).getIdToken)==null?void 0:E.call(a)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const a=await this.getIdToken();if(!a){const M=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:M,ownershipEntityRefs:[M]}}const{sub:E,ent:O}=Dl(a);return{type:"user",userEntityRef:E,ownershipEntityRefs:O!=null?O:[]}}async getCredentials(){var a,E;return{token:await((E=(a=this.result).getIdToken)==null?void 0:E.call(a))}}async signOut(){var a,E;return(E=(a=this.result).signOut)==null?void 0:E.call(a)}}var Tl=Object.defineProperty,Il=(t,a,E)=>a in t?Tl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:E}):t[a]=E,Ml=(t,a,E)=>(Il(t,typeof a!="symbol"?a+"":a,E),E);class ya{constructor(a,E,O){this.identity=a,this.authApi=E,this.profile=O,Ml(this,"profilePromise")}static createGuest(){return new ro}static fromLegacy(a){return ao.fromResult(a)}static create(a){return new ya(a.identity,a.authApi,a.profile)}getUserId(){const a=this.identity.userEntityRef,E=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(a);if(!E)throw new TypeError(`Invalid user entity reference "${a}"`);return E[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(a){throw this.profilePromise=void 0,a}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const oo=(0,ne.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),za=({children:t})=>{const a=oo();return r.createElement(Wt.Z,{component:"li",item:!0,classes:a},t)},wl={Component:({config:t,onSignInStarted:a,onSignInSuccess:E,onSignInFailure:O})=>{const{apiRef:M,title:z,message:Q}=t,Pe=(0,l.h_)(M),ke=(0,l.h_)(l.VE),Be=async()=>{try{a();const bt=await Pe.getBackstageIdentity({instantPopup:!0});if(!bt)throw O(),new Error(`The ${z} provider is not configured to support sign-in`);const _t=await Pe.getProfile();E(ya.create({identity:bt.identity,profile:_t,authApi:Pe}))}catch(bt){O(),ke.post(new we.SP("Login failed",bt))}};return r.createElement(za,null,r.createElement(Ea,{variant:"fullHeight",title:z,actions:r.createElement(Ce.Z,{color:"primary",variant:"outlined",onClick:Be},"Sign In")},r.createElement(d.Z,{variant:"body1"},Q)))},loader:async(t,a)=>{const E=t.get(a),O=await E.getBackstageIdentity({optional:!0});if(!O)return;const M=await E.getProfile();return ya.create({identity:O.identity,profile:M,authApi:E})}},Ll={Component:({onSignInStarted:t,onSignInSuccess:a})=>r.createElement(za,null,r.createElement(Ea,{title:"Guest",variant:"fullHeight",actions:r.createElement(Ce.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),a(new ro)}},"Enter")},r.createElement(d.Z,{variant:"body1"},"Enter as a Guest User.",r.createElement("br",null),"You will not have a verified identity,",r.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new ro},xl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Bl=(0,ne.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),ri=t=>{const{ref:a,...E}=t;return{inputRef:a,...E}},Ul={Component:({onSignInStarted:t,onSignInSuccess:a})=>{const E=Bl(),{register:O,handleSubmit:M,formState:z}=(0,Rr.cI)({mode:"onChange"}),{errors:Q}=z,Pe=({userId:ke,idToken:Be})=>{t(),a(ya.fromLegacy({userId:ke,getIdToken:Be!==void 0?async()=>Be:void 0,profile:{email:`${ke}@example.com`}}))};return r.createElement(za,null,r.createElement(Ea,{title:"Custom User",variant:"fullHeight"},r.createElement(d.Z,{variant:"body1"},"Enter your own User ID and credentials.",r.createElement("br",null),"This selection will not be stored."),r.createElement("form",{className:E.form,onSubmit:M(Pe)},r.createElement(R.Z,null,r.createElement(Lr.Z,{...ri(O("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(Q.userId)}),Q.userId&&r.createElement(xr.Z,{error:!0},Q.userId.message)),r.createElement(R.Z,null,r.createElement(Lr.Z,{...ri(O("idToken",{required:!1,validate:ke=>!ke||xl.test(ke)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(Q.idToken)}),Q.idToken&&r.createElement(xr.Z,{error:!0},Q.idToken.message)),r.createElement(Ce.Z,{type:"submit",color:"primary",variant:"outlined",className:E.button,disabled:!(z!=null&&z.isDirty)||!kr()(Q)},"Continue"))))},loader:async()=>{}};class io{constructor(a){this.config=a}static from(a){return new io(a)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const _a="@backstage/core:SignInPage:provider",ai={guest:Ll,custom:Ul,common:wl};function oi(t,a){if(t in a)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function Zl(t){return t.reduce((E,O)=>{if(typeof O=="string")return oi(O,E),E[O]={components:ai[O],id:O},E;const{id:M}=O;return oi(M,E),E[M]={components:ai.common,id:M,config:O},E},{})}const $l=(t,a)=>{const E=useApi(errorApiRef),O=useApiHolder(),[M,z]=useState(!0),Q=useCallback(ke=>{a(io.from({identityApi:ke,signOut:async()=>{var Be;localStorage.removeItem(_a),await((Be=ke.signOut)==null?void 0:Be.call(ke))}}))},[a]);useLayoutEffect(()=>{var ke;if(!M)return;const Be=localStorage.getItem(_a);if(Be===null){z(!1);return}const bt=t[Be];if(!bt){z(!1);return}let _t=!1;return bt.components.loader(O,(ke=bt.config)==null?void 0:ke.apiRef).then(jt=>{if(_t){localStorage.removeItem(_a);return}jt?Q(jt):z(!1)}).catch(jt=>{localStorage.removeItem(_a),!_t&&(E.post(jt),z(!1))}),()=>{_t=!0}},[M,E,a,O,t,Q]);const Pe=useMemo(()=>Object.keys(t).map(ke=>{const Be=t[ke],{Component:bt}=Be.components,_t=sn=>{Q(sn)},jt=()=>{var sn;localStorage.setItem(_a,((sn=Be==null?void 0:Be.config)==null?void 0:sn.id)||Be.id)},Zt=()=>{localStorage.removeItem(_a)};return React.createElement(bt,{key:Be.id,config:Be.config,onSignInStarted:jt,onSignInSuccess:_t,onSignInFailure:Zt})}),[t,Q]);return[M,Pe]},Wl=({onSignInSuccess:t,providers:a=[],title:E,align:O="left"})=>{const M=useApi(configApiRef),z=oo(),Q=Zl(a),[Pe,ke]=$l(Q,t);return Pe?React.createElement(Vr,null):React.createElement(Ka,{themeId:"home"},React.createElement(Fa,{title:M.getString("app.title")}),React.createElement(Za,null,E&&React.createElement(Lo,{title:E,textAlign:O}),React.createElement(Grid,{container:!0,justifyContent:O==="center"?O:"flex-start",spacing:2,component:"ul",classes:z},ke)))},kl=({provider:t,auto:a,onSignInSuccess:E})=>{const O=oo(),M=useApi(t.apiRef),z=useApi(configApiRef),[Q,Pe]=useState(),[ke,Be]=useState(!1),bt=async({checkExisting:_t,showPopup:jt})=>{try{let Zt;if(_t&&(Zt=await M.getBackstageIdentity({optional:!0})),!Zt&&(jt||a)&&(Be(!0),Zt=await M.getBackstageIdentity({instantPopup:!0}),!Zt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Zt){Be(!0);return}const sn=await M.getProfile();E(ya.create({identity:Zt.identity,authApi:M,profile:sn}))}catch(Zt){Pe(Zt),Be(!0)}};return useMountEffect(()=>bt({checkExisting:!0})),ke?React.createElement(Ka,{themeId:"home"},React.createElement(Fa,{title:z.getString("app.title")}),React.createElement(Za,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:O},React.createElement(za,null,React.createElement(Ea,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{bt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),Q&&Q.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},Q.message)))))):React.createElement(Vr,null)};function _c(t){return"provider"in t?React.createElement(kl,{...t}):React.createElement(Wl,{...t})}const Nl=(0,ne.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),Fl=(0,Y.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(h.Z);function Kl(t){const{slackChannel:a,errorBoundaryProps:E,children:O,title:M,deepLink:z,value:Q,onChange:Pe}=t,ke=Nl(),[Be,bt]=(0,r.useState)(0),_t=Pe||((sn,Pn)=>bt(Pn));let jt;Q?r.Children.map(O,sn=>{r.isValidElement(sn)&&(sn==null?void 0:sn.props.value)===Q&&(jt=sn==null?void 0:sn.props.children)}):r.Children.map(O,(sn,Pn)=>{r.isValidElement(sn)&&Pn===Be&&(jt=sn==null?void 0:sn.props.children)});const Zt=E||(a?{slackChannel:a}:{});return r.createElement(de.Z,null,r.createElement(Va,{...Zt},M&&r.createElement(Fl,{title:M}),r.createElement(on.Z,{selectionFollowsFocus:!0,classes:ke,value:Q||Be,onChange:_t},O),r.createElement(ce.Z,null),r.createElement(S.Z,null,jt),z&&r.createElement(co,{...z})))}const zl=(0,ne.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function jl(t){const{children:a,...E}=t,O=zl();return r.createElement(ln.Z,{disableRipple:!0,classes:O,...E})}},49408:function(fn,Ut,e){"use strict";e.d(Ut,{P:function(){return d},u:function(){return m}});var l=e(18473),y=e(2784);const g="plugin-context",d=A=>{const{children:H,plugin:je}=A,{Provider:r}=(0,l.CT)(g);return y.createElement(r,{value:(0,l.EI)({1:{plugin:je}})},H)};function m(){const A=(0,l.Vt)(g);if(!A)throw new Error("Plugin Options context is not available");const H=A.atVersion(1);if(!H)throw new Error("Plugin Options v1 is not available");return H.plugin.getPluginOptions()}},30705:function(fn,Ut,e){"use strict";e.d(Ut,{$4:function(){return ot},$v:function(){return F},CL:function(){return tt},CO:function(){return Me},D:function(){return _},Ds:function(){return it},E6:function(){return C},F4:function(){return fe},IY:function(){return St},I_:function(){return je},Km:function(){return pe},Kp:function(){return Ee},NT:function(){return Nt},NW:function(){return Bt},Oi:function(){return G},P4:function(){return q},R5:function(){return Rt},Rz:function(){return $t},T0:function(){return ie},VE:function(){return Ue},W0:function(){return lt},YO:function(){return Ge},ZM:function(){return rn},bq:function(){return Oe},fC:function(){return H},gP:function(){return Yt},gW:function(){return Pt},h_:function(){return r},hg:function(){return Ct},ni:function(){return ve},p_:function(){return I},qD:function(){return dt},rx:function(){return S},sM:function(){return Y},tg:function(){return Le},uB:function(){return Se},ux:function(){return Ce},vJ:function(){return rt},v_:function(){return Je},x8:function(){return $e},z$:function(){return ct}});var l=e(18473),y=e(2784),g=e(73557),d=e(49408);const m=(0,l.CT)("analytics-context"),A=()=>{const h=(0,y.useContext)(m);if(h===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const c=h.atVersion(1);if(c===void 0)throw new Error("No context found for version 1.");return c},H=h=>{const{attributes:c,children:b}=h,D={...A(),...c},R=(0,l.EI)({1:D});return y.createElement(m.Provider,{value:R},b)};function je(){const h=(0,l.Vt)("api-context");if(!h)throw new Error("API context is not available");const c=h.atVersion(1);if(!c)throw new Error("ApiContext v1 not available");return c}function r(h){const b=je().get(h);if(!b)throw new Error(`No implementation available for ${h}`);return b}function be(h){return function(b){const L=R=>{const W=je(),k={};for(const ye in h)if(h.hasOwnProperty(ye)){const et=h[ye],U=W.get(et);if(!U)throw new Error(`No implementation available for ${et}`);k[ye]=U}return React.createElement(b,{...R,...k})},D=b.displayName||b.name||"Component";return L.displayName=`withApis(${D})`,L}}class ne{constructor(c){if(this.config=c,!c.id.split(".").flatMap(L=>L.split("-")).every(L=>L.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${c.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function ie(h){return new ne(h)}function ve(h,c){return"id"in h?{api:h,deps:{},factory:()=>c}:h}var Y=(h=>(h.SignedIn="SignedIn",h.SignedOut="SignedOut",h))(Y||{});const Ee=ie({id:"core.auth.google"}),fe=ie({id:"core.auth.github"}),_=ie({id:"core.auth.okta"}),Ce=ie({id:"core.auth.gitlab"}),I=ie({id:"core.auth.microsoft"}),Pt=ie({id:"core.auth.onelogin"}),Oe=ie({id:"core.auth.bitbucket"}),pe=ie({id:"core.auth.bitbucket-server"}),Se=ie({id:"core.auth.atlassian"}),F=ie({id:"core.alert"}),Je=ie({id:"core.analytics"}),Ct=ie({id:"core.apptheme"}),it=ie({id:"core.config"}),Bt=ie({id:"core.discovery"}),Ue=ie({id:"core.error"});var tt=(h=>(h[h.None=0]="None",h[h.Active=1]="Active",h))(tt||{});const lt=ie({id:"core.featureflags"}),Yt=ie({id:"core.fetch"}),ot=ie({id:"core.identity"}),rn=ie({id:"core.oauthrequest"}),C=ie({id:"core.storage"}),At=(0,l.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),en="_ROUTABLE-EXTENSION-RENDERED";class tn{constructor(c,b={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=c,this.context=b,At.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{At.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...At.mostRecentGatheredNavigation,...At.mostRecentRoutableExtensionRender}),At.mostRecentGatheredNavigation=void 0,At.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),At.beforeUnloadRegistered=!0)}setContext(c){this.context=c}captureEvent(c,b,{value:L,attributes:D}={}){const{_routeNodeType:R,...W}=this.context;if(c===en){At.mostRecentGatheredNavigation&&(At.mostRecentRoutableExtensionRender={context:{...W,extension:"App"}});return}if(At.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...At.mostRecentGatheredNavigation,...At.mostRecentRoutableExtensionRender})}catch(k){console.warn("Error during analytics event capture. %o",k)}At.mostRecentGatheredNavigation=void 0,At.mostRecentRoutableExtensionRender=void 0}if(c==="navigate"&&R==="gathered"&&W.pluginId==="root"){At.mostRecentGatheredNavigation={action:c,subject:b,value:L,attributes:D,context:W};return}try{this.analyticsApi.captureEvent({action:c,subject:b,value:L,attributes:D,context:W})}catch(k){console.warn("Error during analytics event capture. %o",k)}}}function K(){try{return r(Je)}catch{return{captureEvent:()=>{}}}}function ct(){const h=(0,y.useRef)(null),c=A(),b=K();function L(){return h.current===null&&(h.current=new tn(b)),h.current}const D=L();return D.setContext(c),D}const dt=()=>{const h=(0,l.Vt)("app-context");if(!h)throw new Error("App context is not available");const c=h.atVersion(1);if(!c)throw new Error("AppContext v1 not available");return c},Ye=(0,l.uW)("component-data-store",()=>new WeakMap),ut="__backstage_data";function Rt(h,c,b){var L;const D=h;let R=(L=D[ut])!=null?L:Ye.get(h);if(R||(R={map:new Map},Object.defineProperty(D,ut,{enumerable:!1,configurable:!0,writable:!1,value:R}),Ye.set(h,R)),R.map.has(c)){const W=h.displayName||h.name;throw new Error(`Attempted to attach duplicate data "${c}" to component "${W}"`)}R.map.set(c,b)}function St(h,c){var b;if(!h)return;const L=h.type;if(!L)return;const D=(b=L[ut])!=null?b:Ye.get(L);if(D)return D.map.get(c)}const ft=(0,l.uW)("route-ref-type",()=>Symbol("route-ref-type"));var Mt=Object.defineProperty,mt=(h,c,b)=>c in h?Mt(h,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):h[c]=b,xt=(h,c,b)=>(mt(h,typeof c!="symbol"?c+"":c,b),b),Wt;class Lt{constructor(c,b){this.id=c,this.params=b,xt(this,Wt,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}Wt=ft;function Nt(h){var c;return new Lt(h.id,(c=h.params)!=null?c:[])}var ge=Object.defineProperty,Fe=(h,c,b)=>c in h?ge(h,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):h[c]=b,Xe=(h,c,b)=>(Fe(h,typeof c!="symbol"?c+"":c,b),b),Ke;const ht=/^\w+$/;class pt{constructor(c,b,L,D){this.id=c,this.path=b,this.parent=L,this.params=D,Xe(this,Ke,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Ke=ft;function $t(h){const{id:c,path:b,parent:L}=h,D=b.split("/").filter(k=>k.startsWith(":")).map(k=>k.substring(1)),R=[...L.params,...D];if(L.params.some(k=>D.includes(k)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!b.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${b}'`);if(b.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${b}'`);for(const k of D)if(!ht.test(k))throw new Error(`SubRouteRef path has invalid param, got '${k}'`);return new pt(c,b,L,R)}var Xt=Object.defineProperty,Ft=(h,c,b)=>c in h?Xt(h,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):h[c]=b,j=(h,c,b)=>(Ft(h,typeof c!="symbol"?c+"":c,b),b),ce;class Te{constructor(c,b,L){this.id=c,this.params=b,this.optional=L,j(this,ce,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}ce=ft;function $e(h){var c;return new Te(h.id,(c=h.params)!=null?c:[],Boolean(h.optional))}function Le(h){const{pathname:c}=(0,g.TH)(),b=(0,l.Vt)("routing-context");if(!b)throw new Error("Routing context is not available");const L=b.atVersion(1),D=(0,y.useMemo)(()=>L&&L.resolve(h,{pathname:c}),[L,h,c]);if(!b)throw new Error("useRouteRef used outside of routing context");if(!L)throw new Error("RoutingContext v1 not available");const R="optional"in h&&h.optional;if(!D&&!R)throw new Error(`No path for ${h}`);return D}function G(h){return(0,g.UO)()}var Ae=Object.defineProperty,Re=(h,c,b)=>c in h?Ae(h,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):h[c]=b,xe=(h,c,b)=>(Re(h,typeof c!="symbol"?c+"":c,b),b);class J extends y.Component{constructor(){super(...arguments),xe(this,"state",{error:void 0}),xe(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(c){return{error:c}}render(){const{error:c}=this.state,{app:b,plugin:L}=this.props,{ErrorBoundaryFallback:D}=b.getComponents();return c?y.createElement(D,{error:c,resetError:this.handleErrorReset,plugin:L}):this.props.children}}function q(h){const{component:c,mountPoint:b,name:L}=h;return Ge({component:{lazy:()=>c().then(D=>{const R=k=>{const ye=ct();try{Le(b)}catch(et){if(typeof et=="object"&&et!==null){const{message:U}=et;if(typeof U=="string"&&U.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${b} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw et}return(0,y.useEffect)(()=>{ye.captureEvent(en,"")},[ye]),y.createElement(D,{...k})},W=L||D.displayName||D.name||"LazyComponent";return R.displayName=`RoutableExtension(${W})`,R},D=>W=>{const k=dt(),{BootErrorPage:ye}=k.getComponents();return y.createElement(ye,{step:"load-chunk",error:D})})},data:{"core.mountPoint":b},name:L})}function Me(h){const{component:c,name:b}=h;return Ge({component:c,name:b})}function Ge(h){const{data:c={},name:b}=h;b||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let L;if("lazy"in h.component){const R=h.component.lazy;L=(0,y.lazy)(()=>R().then(W=>({default:W})))}else L=h.component.sync;const D=b||L.displayName||L.name||"Component";return{expose(R){const W=k=>{const ye=dt(),{Progress:et}=ye.getComponents(),U=c==null?void 0:c["core.mountPoint"];return y.createElement(y.Suspense,{fallback:y.createElement(et,null)},y.createElement(J,{app:ye,plugin:R},y.createElement(H,{attributes:{pluginId:R.getId(),...b&&{extension:b},...U&&{routeRef:U.id}}},y.createElement(d.P,{plugin:R},y.createElement(L,{...k})))))};Rt(W,"core.plugin",R),Rt(W,"core.extensionName",b);for(const[k,ye]of Object.entries(c))Rt(W,k,ye);return W.displayName=`Extension(${D})`,W}}}function we(h,c,b,L){return y.Children.toArray(h).flatMap(D=>{if(!(0,y.isValidElement)(D))return[];if(D.type===y.Fragment)return we(D.props.children,c,b,L);if(St(D,"core.featureFlagged")){const R=D.props;return("with"in R?c.isActive(R.with):!c.isActive(R.without))?we(D.props.children,c,b,L):[]}if(b===void 0||b(D))return[D];if(L)throw new Error(L);return we(D.props.children,c,b,L)})}class Ve{constructor(c,b){this.node=c,this.featureFlagsApi=b}selectByComponentData(c){const b=we(this.node,this.featureFlagsApi,L=>St(L,c.key)!==void 0,c.withStrictError);return new Ve(b,this.featureFlagsApi)}findComponentData(c){return we(this.node,this.featureFlagsApi,L=>St(L,c.key)!==void 0).map(L=>St(L,c.key)).filter(L=>L!==void 0)}getElements(){return we(this.node,this.featureFlagsApi)}}function rt(h,c,b=[]){const L=r(lt),D=new Ve(h,L);return(0,y.useMemo)(()=>c(D),[h,...b])}var oe=Object.defineProperty,X=(h,c,b)=>c in h?oe(h,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):h[c]=b,de=(h,c,b)=>(X(h,typeof c!="symbol"?c+"":c,b),b);class he{constructor(c){this.config=c,de(this,"options")}getId(){return this.config.id}getApis(){var c;return(c=this.config.apis)!=null?c:[]}getFeatureFlags(){var c,b;return(b=(c=this.config.featureFlags)==null?void 0:c.slice())!=null?b:[]}get routes(){var c;return(c=this.config.routes)!=null?c:{}}get externalRoutes(){var c;return(c=this.config.externalRoutes)!=null?c:{}}provide(c){return c.expose(this)}__experimentalReconfigure(c){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(c))}getPluginOptions(){var c;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(c=this.options)!=null?c:{}}toString(){return`plugin{${this.config.id}}`}}function S(h){return new he(h)}},32272:function(fn,Ut,e){"use strict";e.d(Ut,{BD:function(){return d},SP:function(){return Se},VL:function(){return Bt},VZ:function(){return g},dR:function(){return Ce}});var l=e(24852),y=e.n(l);function g(Ue){if(typeof Ue!="object"||Ue===null||Array.isArray(Ue))return!1;const tt=Ue;return!(typeof tt.name!="string"||tt.name===""||typeof tt.message!="string")}function d(Ue){if(typeof Ue!="object"||Ue===null||Array.isArray(Ue))throw new Error(`Encountered invalid error, not an object, got '${Ue}'`);const tt=Ue;if(typeof tt.name!="string"||tt.name==="")throw new Error(`Encountered error object without a name, got '${Ue}'`);if(typeof tt.message!="string")throw new Error(`Encountered error object without a message, got '${Ue}'`)}function m(Ue,tt){const Yt={name:"Unknown",message:"<no reason given>",...serializeError$1(Ue)};return tt!=null&&tt.includeStack||delete Yt.stack,Yt}function A(Ue){const tt=(0,l.deserializeError)(Ue);return Ue.stack||(tt.stack=void 0),tt}function H(Ue){if(g(Ue)){const tt=String(Ue);return tt!=="[object Object]"?tt:`${Ue.name}: ${Ue.message}`}return`unknown error '${Ue}'`}var je=Object.defineProperty,r=(Ue,tt,lt)=>tt in Ue?je(Ue,tt,{enumerable:!0,configurable:!0,writable:!0,value:lt}):Ue[tt]=lt,be=(Ue,tt,lt)=>(r(Ue,typeof tt!="symbol"?tt+"":tt,lt),lt);class ne extends Error{constructor(tt,lt){var Yt;let ot=tt;if(lt!==void 0){const rn=H(lt);ot?ot+=`; caused by ${rn}`:ot=`caused by ${rn}`}super(ot),be(this,"cause"),(Yt=Error.captureStackTrace)==null||Yt.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=g(lt)?lt:void 0}}var ie=Object.defineProperty,ve=(Ue,tt,lt)=>tt in Ue?ie(Ue,tt,{enumerable:!0,configurable:!0,writable:!0,value:lt}):Ue[tt]=lt,Y=(Ue,tt,lt)=>(ve(Ue,typeof tt!="symbol"?tt+"":tt,lt),lt);class Ee extends null{constructor(){super(...arguments),Y(this,"name","InputError")}}class fe extends null{constructor(){super(...arguments),Y(this,"name","AuthenticationError")}}class _ extends null{constructor(){super(...arguments),Y(this,"name","NotAllowedError")}}class Ce extends ne{constructor(){super(...arguments),Y(this,"name","NotFoundError")}}class I extends null{constructor(){super(...arguments),Y(this,"name","ConflictError")}}class Pt extends null{constructor(){super(...arguments),Y(this,"name","NotModifiedError")}}class Oe extends null{constructor(){super(...arguments),Y(this,"name","NotImplementedError")}}class pe extends null{}class Se extends ne{constructor(tt,lt){super(tt,lt),this.name=g(lt)?lt.name:"Error"}}async function F(Ue){var tt;try{const lt=await Ue.text();if(lt){if((tt=Ue.headers.get("content-type"))!=null&&tt.startsWith("application/json"))try{const Yt=JSON.parse(lt);if(Yt.error&&Yt.response)return Yt}catch{}return{error:{name:"Error",message:`Request failed with status ${Ue.status} ${Ue.statusText}, ${lt}`},response:{statusCode:Ue.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${Ue.status} ${Ue.statusText}`},response:{statusCode:Ue.status}}}var Je=Object.defineProperty,Ct=(Ue,tt,lt)=>tt in Ue?Je(Ue,tt,{enumerable:!0,configurable:!0,writable:!0,value:lt}):Ue[tt]=lt,it=(Ue,tt,lt)=>(Ct(Ue,typeof tt!="symbol"?tt+"":tt,lt),lt);class Bt extends Error{constructor(tt){super(tt.message),it(this,"response"),it(this,"body"),it(this,"cause"),this.name="ResponseError",this.response=tt.response,this.body=tt.data,this.cause=tt.cause}static async fromResponse(tt){const lt=await F(tt),Yt=lt.response.statusCode||tt.status,ot=lt.error.name||tt.statusText,rn=`Request failed with ${Yt} ${ot}`,C=A(lt.error);return new Bt({message:rn,response:tt,data:lt,cause:C})}}},49462:function(fn,Ut,e){"use strict";e.d(Ut,{Om:function(){return m},ae:function(){return Ce},nW:function(){return Pt},q3:function(){return I},zN:function(){return _}});var l=e(30705),y=e(1854),g=e(73250),d=e(2784);const m=(0,l.T0)({id:"core.scmauth"});var A=(Oe,pe,Se)=>{if(!pe.has(Oe))throw TypeError("Cannot "+Se)},H=(Oe,pe,Se)=>(A(Oe,pe,"read from private field"),Se?Se.call(Oe):pe.get(Oe)),je=(Oe,pe,Se)=>{if(pe.has(Oe))throw TypeError("Cannot add the same private member more than once");pe instanceof WeakSet?pe.add(Oe):pe.set(Oe,Se)},r=(Oe,pe,Se,F)=>(A(Oe,pe,"write to private field"),F?F.call(Oe,Se):pe.set(Oe,Se),Se),be,ne,ie,ve,Y;class Ee{constructor(pe){je(this,be,void 0),r(this,be,pe)}async getCredentials(pe){const Se=new URL(pe.url),F=H(this,be).find(Je=>Je.isUrlSupported(Se));if(!F)throw new Error(`No auth provider available for '${pe.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(pe)}}be=new WeakMap;const fe=class na{constructor(pe,Se,F,Je){je(this,ne,void 0),je(this,ie,void 0),je(this,ve,void 0),je(this,Y,void 0),r(this,ne,Se),r(this,ie,F),r(this,ve,Je),r(this,Y,pe)}static createDefaultApiFactory(){return(0,l.ni)({api:m,deps:{github:l.F4,gitlab:l.ux,azure:l.p_,bitbucket:l.bq},factory:({github:pe,gitlab:Se,azure:F,bitbucket:Je})=>na.merge(na.forGithub(pe),na.forGitlab(Se),na.forAzure(F),na.forBitbucket(Je))})}static forAuthApi(pe,Se){return new na("generic",pe,Se.host,Se.scopeMapping)}static forGithub(pe,Se){var F;const Je=(F=Se==null?void 0:Se.host)!=null?F:"github.com";return new na("github",pe,Je,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(pe,Se){var F;const Je=(F=Se==null?void 0:Se.host)!=null?F:"gitlab.com";return new na("gitlab",pe,Je,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(pe,Se){var F;const Je=(F=Se==null?void 0:Se.host)!=null?F:"dev.azure.com";return new na("azure",pe,Je,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(pe,Se){var F;const Je=(F=Se==null?void 0:Se.host)!=null?F:"bitbucket.org";return new na("bitbucket",pe,Je,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...pe){return new Ee(pe)}isUrlSupported(pe){return pe.host===H(this,ie)}getAdditionalScopesForProvider(pe){var Se,F;return!(pe!=null&&pe.customScopes)||H(this,Y)==="generic"?[]:(F=(Se=pe.customScopes)==null?void 0:Se[H(this,Y)])!=null?F:[]}async getCredentials(pe){const{url:Se,additionalScope:F,...Je}=pe,Ct=H(this,ve).default.slice();F!=null&&F.repoWrite&&Ct.push(...H(this,ve).repoWrite);const it=this.getAdditionalScopesForProvider(F);it.length&&Ct.push(...it);const Bt=[...new Set(Ct)],Ue=await H(this,ne).getAccessToken(Bt,Je);return{token:Ue,headers:{Authorization:`Bearer ${Ue}`}}}};ne=new WeakMap,ie=new WeakMap,ve=new WeakMap,Y=new WeakMap;let _=fe;class Ce{static fromConfig(pe){return y.Lx.fromConfig(pe)}}const I=(0,l.T0)({id:"integration.scmintegrations"}),Pt=Oe=>{var pe;const{type:Se}=Oe,F=(0,l.qD)(),Je=g.Z,Ct=Se&&(pe=F.getSystemIcon(Se))!=null?pe:Je;return d.createElement(Ct,null)}},1854:function(fn,Ut,e){"use strict";e.d(Ut,{BT:function(){return Rr},Lx:function(){return Ze},MY:function(){return On},ah:function(){return or}});var l=e(82717),y=e.n(l),g=e(76635),d=e.n(g),m=e(96279),A=e.n(m),H=e(72872),je=e(89393),r=e(26228),be=e(48834).Buffer;function ne(u){const s=new URL("http://example.com");return s.host=u,s.host===u}function ie(u){try{return new URL(u),!0}catch{return!1}}function ve(u,s){return{list(){return u},byUrl(i){try{const p=typeof i=="string"?new URL(i):i;return u.find(P=>s(P)===p.host)}catch{return}},byHost(i){return u.find(p=>s(p)===i)}}}function Y(u){const{url:s,base:i,lineNumber:p}=u;try{return new URL(s),s}catch{}let P;if(s.startsWith("/")){const{filepath:$}=y()(i);P=new URL(i);const re=(0,g.trimEnd)(P.pathname.substring(0,P.pathname.length-$.length),"/");P.pathname=`${re}${s}`}else P=new URL(s,i);return P.search=new URL(i).search,p&&(P.hash=`L${p}`),P.toString()}const Ee="amazonaws.com";function fe(u){var s;const i=u.getOptionalString("endpoint"),p=(s=u.getOptionalBoolean("s3ForcePathStyle"))!=null?s:!1;let P,$;if(i){try{const Ht=new URL(i);P=Ht.host,$=Ht.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${i}' is not a valid URL`)}if($!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${i}'`)}else P=Ee;const re=u.getOptionalString("accessKeyId"),ue=u.getOptionalString("secretAccessKey"),Ne=u.getOptionalString("roleArn"),vt=u.getOptionalString("externalId");return{host:P,endpoint:i,s3ForcePathStyle:p,accessKeyId:re,secretAccessKey:ue,roleArn:Ne,externalId:vt}}function _(u){const s=u.map(fe);return s.some(i=>i.host===Ee)||s.push({host:Ee}),s}var Ce=Object.defineProperty,I=(u,s,i)=>s in u?Ce(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,Pt=(u,s,i)=>(I(u,typeof s!="symbol"?s+"":s,i),i);const Oe=class{constructor(s){this.integrationConfig=s}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return Y(s)}resolveEditUrl(s){return s}};Pt(Oe,"factory",({config:u})=>{var s;const i=_((s=u.getOptionalConfigArray("integrations.awsS3"))!=null?s:[]);return ve(i.map(p=>new Oe(p)),p=>p.config.host)});let pe=Oe;var Se=(u,s,i)=>{if(!s.has(u))throw TypeError("Cannot "+i)},F=(u,s,i)=>(Se(u,s,"read from private field"),i?i.call(u):s.get(u)),Je=(u,s,i)=>{if(s.has(u))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(u):s.set(u,i)},Ct=(u,s,i,p)=>(Se(u,s,"write to private field"),p?p.call(u,i):s.set(u,i),i),it,Bt,Ue,tt,lt,Yt,ot;const rn="GB",C=class si{constructor(s,i,p,P,$,re){Je(this,it,void 0),Je(this,Bt,void 0),Je(this,Ue,void 0),Je(this,tt,void 0),Je(this,lt,void 0),Je(this,Yt,void 0),Je(this,ot,(...ue)=>{const Ne=new URL(F(this,it));return Ne.pathname=ue.map(vt=>encodeURIComponent(vt)).join("/"),Ne}),Ct(this,it,s),Ct(this,Bt,i),Ct(this,Ue,p),Ct(this,tt,P),Ct(this,lt,$),Ct(this,Yt,re)}static fromRepoUrl(s){var i;const p=new URL(s);let P,$,re;const ue=p.pathname.split("/").map(pn=>decodeURIComponent(pn));if(ue[2]==="_git"?(P=ue[1],$=re=ue[3]):ue[3]==="_git"?(P=ue[1],$=ue[2],re=ue[4]):ue[4]==="_git"&&(P=`${ue[1]}/${ue[2]}`,$=ue[3],re=ue[5]),!P||!$||!re)throw new Error("Azure URL must point to a git repository");const Ne=(i=p.searchParams.get("path"))!=null?i:void 0;let vt;const Ht=p.searchParams.get("version");if(Ht){if(Ht.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");vt=Ht.slice(2)}return new si(p.origin,P,$,re,Ne,vt)}toRepoUrl(){let s;return F(this,Ue)===F(this,tt)?s=F(this,ot).call(this,F(this,Bt),"_git",F(this,tt)):s=F(this,ot).call(this,F(this,Bt),F(this,Ue),"_git",F(this,tt)),F(this,lt)&&s.searchParams.set("path",F(this,lt)),F(this,Yt)&&s.searchParams.set("version",rn+F(this,Yt)),s.toString()}toFileUrl(){if(!F(this,lt))throw new Error("Azure URL must point to a specific path to be able to download a file");const s=F(this,ot).call(this,F(this,Bt),F(this,Ue),"_apis","git","repositories",F(this,tt),"items");return s.searchParams.set("api-version","6.0"),s.searchParams.set("path",F(this,lt)),F(this,Yt)&&s.searchParams.set("version",F(this,Yt)),s.toString()}toArchiveUrl(){const s=F(this,ot).call(this,F(this,Bt),F(this,Ue),"_apis","git","repositories",F(this,tt),"items");return s.searchParams.set("recursionLevel","full"),s.searchParams.set("download","true"),s.searchParams.set("api-version","6.0"),F(this,lt)&&s.searchParams.set("scopePath",F(this,lt)),F(this,Yt)&&s.searchParams.set("version",F(this,Yt)),s.toString()}toCommitsUrl(){const s=F(this,ot).call(this,F(this,Bt),F(this,Ue),"_apis","git","repositories",F(this,tt),"commits");return s.searchParams.set("api-version","6.0"),F(this,Yt)&&s.searchParams.set("searchCriteria.itemVersion.version",F(this,Yt)),s.toString()}getOwner(){return F(this,Bt)}getProject(){return F(this,Ue)}getRepo(){return F(this,tt)}getPath(){return F(this,lt)}getRef(){return F(this,Yt)}};it=new WeakMap,Bt=new WeakMap,Ue=new WeakMap,tt=new WeakMap,lt=new WeakMap,Yt=new WeakMap,ot=new WeakMap;let At=C;const en="dev.azure.com",tn=u=>{const s=u;return Object.keys(u).length===3&&s.clientId!==void 0&&s.clientSecret!==void 0&&s.tenantId!==void 0},K=u=>Object.keys(u).length===1&&u.clientId!==void 0;function ct(u){var s;const i=(s=u.getOptionalString("host"))!=null?s:en,p=u.getOptionalString("token"),P=u.getOptional("credential")?{tenantId:u.getOptionalString("credential.tenantId"),clientId:u.getOptionalString("credential.clientId"),clientSecret:u.getOptionalString("credential.clientSecret")}:void 0;if(!ne(i))throw new Error(`Invalid Azure integration config, '${i}' is not a valid host`);if(P&&!tn(P)&&!K(P))throw new Error("Invalid Azure integration config, credential is not valid");if(P&&i!==en)throw new Error(`Invalid Azure integration config, credential can only be used with ${en}`);if(P&&p)throw new Error("Invalid Azure integration config, specify either a token or a credential but not both");return{host:i,token:p,credential:P}}function dt(u){const s=u.map(ct);return s.some(i=>i.host===en)||s.push({host:en}),s}var Ye=Object.defineProperty,ut=(u,s,i)=>s in u?Ye(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,Rt=(u,s,i)=>(ut(u,typeof s!="symbol"?s+"":s,i),i);const St=class{constructor(s){this.integrationConfig=s}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){var i;const{url:p,base:P}=s;if(ie(p))return p;try{const $=At.fromRepoUrl(P),re=new URL(P),ue=new URL(`https://a.com${(i=$.getPath())!=null?i:""}`),Ne=new URL(p,ue).pathname;return re.searchParams.set("path",Ne),s.lineNumber&&(re.searchParams.set("line",String(s.lineNumber)),re.searchParams.set("lineEnd",String(s.lineNumber+1)),re.searchParams.set("lineStartColumn","1"),re.searchParams.set("lineEndColumn","1")),re.toString()}catch{return new URL(p,P).toString()}}resolveEditUrl(s){return s}};Rt(St,"factory",({config:u})=>{var s;const i=dt((s=u.getOptionalConfigArray("integrations.azure"))!=null?s:[]);return ve(i.map(p=>new St(p)),p=>p.config.host)});let ft=St;function Mt(u){return At.fromRepoUrl(u).toFileUrl()}function mt(u){return At.fromRepoUrl(u).toArchiveUrl()}function xt(u){return At.fromRepoUrl(u).toCommitsUrl()}async function Wt(u,s){const i="499b84ac-1321-427f-aa17-267ca6975798/.default",p=s?{...s}:{},{token:P,credential:$}=u;if($){if(tn($)){const ue=await new ClientSecretCredential($.tenantId,$.clientId,$.clientSecret).getToken(i);p.Authorization=`Bearer ${ue.token}`}else if(K($)){const ue=await new ManagedIdentityCredential($.clientId).getToken(i);p.Authorization=`Bearer ${ue.token}`}}else if(P){const re=be.from(`:${u.token}`,"utf8");p.Authorization=`Basic ${re.toString("base64")}`}return{headers:p}}const Lt="bitbucket.org",Nt="https://api.bitbucket.org/2.0";function ge(u){var s;const i=(s=u.getOptionalString("host"))!=null?s:Lt;let p=u.getOptionalString("apiBaseUrl");const P=u.getOptionalString("token"),$=u.getOptionalString("username"),re=u.getOptionalString("appPassword");if(!ne(i))throw new Error(`Invalid Bitbucket integration config, '${i}' is not a valid host`);return p?p=(0,g.trimEnd)(p,"/"):i===Lt?p=Nt:p=`https://${i}/rest/api/1.0`,{host:i,apiBaseUrl:p,token:P,username:$,appPassword:re}}function Fe(u){const s=u.map(ge);return s.some(i=>i.host===Lt)||s.push({host:Lt,apiBaseUrl:Nt}),s}var Xe=Object.defineProperty,Ke=(u,s,i)=>s in u?Xe(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,ht=(u,s,i)=>(Ke(u,typeof s!="symbol"?s+"":s,i),i);const pt=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const i=Y(s);if(!s.lineNumber)return i;const p=new URL(i);return this.integrationConfig.host==="bitbucket.org"?p.hash=`lines-${s.lineNumber}`:p.hash=`${s.lineNumber}`,p.toString()}resolveEditUrl(s){const i=y()(s),p=new URL(s);return p.searchParams.set("mode","edit"),p.searchParams.set("spa","0"),p.searchParams.set("at",i.ref),p.toString()}};ht(pt,"factory",({config:u})=>{var s,i,p;const P=Fe((p=u.getOptionalConfigArray("integrations.bitbucket"))!=null?p:[...(s=u.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?s:[],...(i=u.getOptionalConfigArray("integrations.bitbucketServer"))!=null?i:[]]);return ve(P.map($=>new pt($)),$=>$.config.host)});let $t=pt;async function Xt(u,s){const{name:i,owner:p,resource:P}=parseGitUrl(u),$=P==="bitbucket.org";let re=$?`${s.apiBaseUrl}/repositories/${p}/${i}`:`${s.apiBaseUrl}/projects/${p}/repos/${i}/default-branch`,ue=await fetch(re,ce(s));if(ue.status===404&&!$&&(re=`${s.apiBaseUrl}/projects/${p}/repos/${i}/branches/default`,ue=await fetch(re,ce(s))),!ue.ok){const vt=`Failed to retrieve default branch from ${re}, ${ue.status} ${ue.statusText}`;throw new Error(vt)}let Ne;if($)Ne=(await ue.json()).mainbranch.name;else{const{displayId:vt}=await ue.json();Ne=vt}if(!Ne)throw new Error(`Failed to read default branch from ${re}. Response ${ue.status} ${ue.json()}`);return Ne}async function Ft(u,s){const{name:i,owner:p,ref:P,protocol:$,resource:re,filepath:ue}=parseGitUrl(u),Ne=re==="bitbucket.org";let vt=P;vt||(vt=await Xt(u,s));const Ht=ue?`&path=${encodeURIComponent(decodeURIComponent(ue))}`:"";return Ne?`${$}://${re}/${p}/${i}/get/${vt}.tar.gz`:`${s.apiBaseUrl}/projects/${p}/repos/${i}/archive?format=tgz&at=${vt}&prefix=${p}-${i}${Ht}`}function j(u,s){try{const{owner:i,name:p,ref:P,filepathtype:$,filepath:re}=parseGitUrl(u);if(!i||!p||$!=="browse"&&$!=="raw"&&$!=="src")throw new Error("Invalid Bitbucket URL or file path");const ue=re.replace(/^\//,"");if(s.host==="bitbucket.org"){if(!P)throw new Error("Invalid Bitbucket URL or file path");return`${s.apiBaseUrl}/repositories/${i}/${p}/src/${P}/${ue}`}return`${s.apiBaseUrl}/projects/${i}/repos/${p}/raw/${ue}?at=${P}`}catch(i){throw new Error(`Incorrect URL: ${u}, ${i}`)}}function ce(u){const s={};if(u.token)s.Authorization=`Bearer ${u.token}`;else if(u.username&&u.appPassword){const i=be.from(`${u.username}:${u.appPassword}`,"utf8");s.Authorization=`Basic ${i.toString("base64")}`}return{headers:s}}const Te="bitbucket.org",$e="https://api.bitbucket.org/2.0";function Le(u){const s=Te,i=$e,p=u.getString("username"),P=u.getString("appPassword");return{host:s,apiBaseUrl:i,username:p,appPassword:P}}function G(u){const s=u.map(Le);return s.length===0&&s.push({host:Te,apiBaseUrl:$e}),s}var Ae=Object.defineProperty,Re=(u,s,i)=>s in u?Ae(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,xe=(u,s,i)=>(Re(u,typeof s!="symbol"?s+"":s,i),i);const J=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const i=Y(s);if(s.lineNumber){const p=new URL(i);return p.hash=`lines-${s.lineNumber}`,p.toString()}return i}resolveEditUrl(s){const i=y()(s),p=new URL(s);return p.searchParams.set("mode","edit"),p.searchParams.set("at",i.ref),p.toString()}};xe(J,"factory",({config:u})=>{var s;const i=G((s=u.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?s:[]);return ve(i.map(p=>new J(p)),p=>p.config.host)});let q=J;async function Me(u,s){const{name:i,owner:p}=parseGitUrl(u),P=`${s.apiBaseUrl}/repositories/${p}/${i}`,$=await fetch(P,Ve(s));if(!$.ok){const Ne=`Failed to retrieve default branch from ${P}, ${$.status} ${$.statusText}`;throw new Error(Ne)}const ue=(await $.json()).mainbranch.name;if(!ue)throw new Error(`Failed to read default branch from ${P}. Response ${$.status} ${$.json()}`);return ue}async function Ge(u,s){const{name:i,owner:p,ref:P,protocol:$,resource:re}=parseGitUrl(u);let ue=P;return ue||(ue=await Me(u,s)),`${$}://${re}/${p}/${i}/get/${ue}.tar.gz`}function we(u,s){try{const{owner:i,name:p,ref:P,filepathtype:$,filepath:re}=parseGitUrl(u);if(!i||!p||$!=="src"&&$!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const ue=re.replace(/^\//,"");if(!P)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${s.apiBaseUrl}/repositories/${i}/${p}/src/${P}/${ue}`}catch(i){throw new Error(`Incorrect URL: ${u}, ${i}`)}}function Ve(u){const s={};if(u.username&&u.appPassword){const i=be.from(`${u.username}:${u.appPassword}`,"utf8");s.Authorization=`Basic ${i.toString("base64")}`}return{headers:s}}function rt(u){const s=u.getString("host");let i=u.getOptionalString("apiBaseUrl");const p=u.getOptionalString("token"),P=u.getOptionalString("username"),$=u.getOptionalString("password");if(!ne(s))throw new Error(`Invalid Bitbucket Server integration config, '${s}' is not a valid host`);return i?i=(0,g.trimEnd)(i,"/"):i=`https://${s}/rest/api/1.0`,{host:s,apiBaseUrl:i,token:p,username:P,password:$}}function oe(u){return u.map(rt)}var X=Object.defineProperty,de=(u,s,i)=>s in u?X(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,he=(u,s,i)=>(de(u,typeof s!="symbol"?s+"":s,i),i);const S=class{constructor(s){this.integrationConfig=s}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const i=Y(s);if(s.lineNumber){const p=new URL(i);return p.hash=s.lineNumber.toString(),p.toString()}return i}resolveEditUrl(s){return s.includes("?")?s.substring(0,s.indexOf("?")):s}};he(S,"factory",({config:u})=>{var s;const i=oe((s=u.getOptionalConfigArray("integrations.bitbucketServer"))!=null?s:[]);return ve(i.map(p=>new S(p)),p=>p.config.host)});let h=S;async function c(u,s){const{name:i,owner:p}=parseGitUrl(u);let P=`${s.apiBaseUrl}/projects/${p}/repos/${i}/default-branch`,$=await fetch(P,D(s));if($.status===404&&(P=`${s.apiBaseUrl}/projects/${p}/repos/${i}/branches/default`,$=await fetch(P,D(s))),!$.ok){const Ne=`Failed to retrieve default branch from ${P}, ${$.status} ${$.statusText}`;throw new Error(Ne)}const{displayId:re}=await $.json(),ue=re;if(!ue)throw new Error(`Failed to read default branch from ${P}. Response ${$.status} ${$.json()}`);return ue}async function b(u,s){const{name:i,owner:p,ref:P,filepath:$}=parseGitUrl(u);let re=P;re||(re=await c(u,s));const ue=$?`&path=${encodeURIComponent(decodeURIComponent($))}`:"";return`${s.apiBaseUrl}/projects/${p}/repos/${i}/archive?format=tgz&at=${re}&prefix=${p}-${i}${ue}`}function L(u,s){try{const{owner:i,name:p,ref:P,filepathtype:$,filepath:re}=parseGitUrl(u);if(!i||!p||$!=="browse"&&$!=="raw"&&$!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const ue=re.replace(/^\//,"");return`${s.apiBaseUrl}/projects/${i}/repos/${p}/raw/${ue}?at=${P}`}catch(i){throw new Error(`Incorrect URL: ${u}, ${i}`)}}function D(u){const s={};if(u.token)s.Authorization=`Bearer ${u.token}`;else if(u.username&&u.password){const i=be.from(`${u.username}:${u.password}`,"utf8");s.Authorization=`Basic ${i.toString("base64")}`}return{headers:s}}function R(u){const s=u.getString("host");let i=u.getOptionalString("baseUrl"),p=u.getOptionalString("cloneUrl"),P=u.getOptionalString("gitilesBaseUrl");const $=u.getOptionalString("username"),re=u.getOptionalString("password");if(ne(s)){if(i&&!ie(i))throw new Error(`Invalid Gerrit integration config, '${i}' is not a valid baseUrl`);if(p&&!ie(p))throw new Error(`Invalid Gerrit integration config, '${p}' is not a valid cloneUrl`);if(P&&!ie(P))throw new Error(`Invalid Gerrit integration config, '${P}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${s}' is not a valid host`);return i?i=(0,g.trimEnd)(i,"/"):i=`https://${s}`,P?P=(0,g.trimEnd)(P,"/"):P=`https://${s}`,p?p=(0,g.trimEnd)(p,"/"):p=i,{host:s,baseUrl:i,cloneUrl:p,gitilesBaseUrl:P,username:$,password:re}}function W(u){return u.map(R)}const k=")]}'";function ye(u,s){const p=s.replace(u.gitilesBaseUrl,"").split("/").filter(vt=>!!vt),P=p.indexOf("+");if(P<=0)throw new Error(`Unable to parse project from url: ${s}`);const $=(0,g.trimStart)(p.slice(0,P).join("/"),"/"),re=p.indexOf("heads");if(re<=0)throw new Error(`Unable to parse branch from url: ${s}`);const ue=p[re+1],Ne=p.slice(re+2).join("/");return{branch:ue,filePath:Ne===""?"/":Ne,project:$}}function et(u,s,i,p){return`${u.gitilesBaseUrl}/${s}/+/refs/heads/${i}/${(0,g.trimStart)(p,"/")}`}function U(u){return u.password?"/a/":"/"}function Z(u,s){const{branch:i,project:p}=ye(u,s);return`${u.baseUrl}${U(u)}projects/${encodeURIComponent(p)}/branches/${i}`}function te(u,s){const{project:i}=ye(u,s);return`${u.cloneUrl}${U(u)}${i}`}function T(u,s){const{branch:i,filePath:p,project:P}=ye(u,s);return`${u.baseUrl}${U(u)}projects/${encodeURIComponent(P)}/branches/${i}/files/${encodeURIComponent(p)}/content`}function B(u){return`${u.baseUrl}${U(u)}projects/`}function V(u){const s={};if(!u.password)return s;const i=be.from(`${u.username}:${u.password}`,"utf8");return s.Authorization=`Basic ${i.toString("base64")}`,{headers:s}}async function me(u){const s=await u.text();if(s.startsWith(k))try{return JSON.parse(s.slice(k.length))}catch(i){throw new Error(`Invalid response from Gerrit: ${s.slice(0,10)} - ${i}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${s.slice(0,10)}`)}var _e=Object.defineProperty,at=(u,s,i)=>s in u?_e(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,He=(u,s,i)=>(at(u,typeof s!="symbol"?s+"":s,i),i);const Ot=class{constructor(s){this.integrationConfig=s}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){const{url:i,base:p,lineNumber:P}=s;let $;if(i.startsWith("/")){const{branch:re,project:ue}=ye(this.config,p);return et(this.config,ue,re,i)}return i?$=new URL(i,p):$=new URL(p),P&&($.hash=P.toString()),$.toString()}resolveEditUrl(s){return s}};He(Ot,"factory",({config:u})=>{var s;const i=W((s=u.getOptionalConfigArray("integrations.gerrit"))!=null?s:[]);return ve(i.map(p=>new Ot(p)),p=>p.config.host)});let yt=Ot;function Tt(u){const s=u.getString("host");let i=u.getOptionalString("baseUrl");const p=u.getOptionalString("username"),P=u.getOptionalString("password");if(!ne(s))throw new Error(`Invalid Gitea integration config, '${s}' is not a valid host`);return i?i=(0,g.trimEnd)(i,"/"):i=`https://${s}`,{host:s,baseUrl:i,username:p,password:P}}function Kt(u,s){var i;try{const p=(i=u.baseUrl)!=null?i:`https://${u.host}`,[P,$,re,ue,Ne,vt,...Ht]=s.replace(p,"").split("/"),pn=Ht.join("/").replace(/^\//,"");return`${p}/${$}/${re}/_edit/${vt}/${pn}`}catch(p){throw new Error(`Incorrect URL: ${s}, ${p}`)}}function ln(u,s){var i;try{const p=(i=u.baseUrl)!=null?i:`https://${u.host}`,[P,$,re,ue,Ne,vt,...Ht]=s.replace(p,"").split("/"),pn=Ht.join("/").replace(/^\//,"");return`${p}/api/v1/repos/${$}/${re}/contents/${pn}?ref=${vt}`}catch(p){throw new Error(`Incorrect URL: ${s}, ${p}`)}}function on(u){const s={},{username:i,password:p}=u;return p?(i?s.Authorization=`basic ${be.from(`${i}:${p}`).toString("base64")}`:s.Authorization=`token ${p}`,{headers:s}):s}var Gt=Object.defineProperty,wt=(u,s,i)=>s in u?Gt(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,It=(u,s,i)=>(wt(u,typeof s!="symbol"?s+"":s,i),i);const dn=class{constructor(s){this.config=s}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(s){return Y(s)}resolveEditUrl(s){return Kt(this.config,s)}};It(dn,"factory",({config:u})=>{var s;const p=((s=u.getOptionalConfigArray("integrations.gitea"))!=null?s:[]).map(P=>Tt(P));return ve(p.map(P=>new dn(P)),P=>P.config.host)});let hn=dn;const yn="github.com",bn="https://api.github.com",Ln="https://raw.githubusercontent.com";function In(u){var s,i;const p=(s=u.getOptionalString("host"))!=null?s:yn;let P=u.getOptionalString("apiBaseUrl"),$=u.getOptionalString("rawBaseUrl");const re=u.getOptionalString("token"),ue=(i=u.getOptionalConfigArray("apps"))==null?void 0:i.map(Ne=>({appId:Ne.getNumber("appId"),clientId:Ne.getString("clientId"),clientSecret:Ne.getString("clientSecret"),webhookSecret:Ne.getString("webhookSecret"),privateKey:Ne.getString("privateKey"),allowedInstallationOwners:Ne.getOptionalStringArray("allowedInstallationOwners")}));if(!ne(p))throw new Error(`Invalid GitHub integration config, '${p}' is not a valid host`);return P?P=(0,g.trimEnd)(P,"/"):p===yn&&(P=bn),$?$=(0,g.trimEnd)($,"/"):p===yn&&($=Ln),{host:p,apiBaseUrl:P,rawBaseUrl:$,token:re,apps:ue}}function On(u){const s=u.map(In);return s.some(i=>i.host===yn)||s.push({host:yn,apiBaseUrl:bn,rawBaseUrl:Ln}),s}function Rn(u,s,i){try{const{owner:p,name:P,ref:$,filepathtype:re,filepath:ue}=parseGitUrl(u);if(!p||!P||!$||re!=="blob"&&re!=="raw"&&re!=="tree")throw new Error("Invalid GitHub URL or file path");const Ne=ue.replace(/^\//,"");return er(s,i)==="api"?`${s.apiBaseUrl}/repos/${p}/${P}/contents/${Ne}?ref=${$}`:`${s.rawBaseUrl}/${p}/${P}/${$}/${Ne}`}catch(p){throw new Error(`Incorrect URL: ${u}, ${p}`)}}function xn(u,s){const i={};return er(u,s)==="api"&&(i.Accept="application/vnd.github.v3.raw"),s.token&&(i.Authorization=`token ${s.token}`),{headers:i}}function er(u,s){return u.apiBaseUrl&&(s.token||!u.rawBaseUrl)?"api":"raw"}var Kn=Object.defineProperty,Zr=(u,s,i)=>s in u?Kn(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,ur=(u,s,i)=>(Zr(u,typeof s!="symbol"?s+"":s,i),i);class $r{constructor(){ur(this,"tokenCache",new Map),ur(this,"isExpired",s=>r.ou.local()>s)}async getOrCreateToken(s,i,p){let P=this.tokenCache.get(s);if((!P||this.isExpired(P.expiresAt))&&(P=await p(),P.expiresAt=P.expiresAt.minus({minutes:10}),this.tokenCache.set(s,P)),!this.appliesToRepo(P,i))throw new Error(`The Backstage GitHub application used in the ${s} organization does not have access to a repository with the name ${i}`);return{accessToken:P.token}}appliesToRepo(s,i){return i===void 0?!0:s.repositories!==void 0?s.repositories.includes(i):!0}}const Ir={Accept:"application/vnd.github.machine-man-preview+json"};class Wr{constructor(s,i){ur(this,"appClient"),ur(this,"baseUrl"),ur(this,"baseAuthConfig"),ur(this,"cache",new $r),ur(this,"allowedInstallationOwners"),this.allowedInstallationOwners=s.allowedInstallationOwners,this.baseUrl=i,this.baseAuthConfig={appId:s.appId,privateKey:s.privateKey.replace(/\\n/gm,`
`)},this.appClient=new je.v({baseUrl:i,headers:Ir,authStrategy:H.i,auth:this.baseAuthConfig})}async getInstallationCredentials(s,i){var p;return this.allowedInstallationOwners&&!((p=this.allowedInstallationOwners)!=null&&p.includes(s))?{accessToken:void 0}:this.cache.getOrCreateToken(s,i,async()=>{var P;const{installationId:$,suspended:re}=await this.getInstallationData(s);if(re)throw new Error(`The GitHub application for ${s} is suspended`);const ue=await this.appClient.apps.createInstallationAccessToken({installation_id:$,headers:Ir});let Ne;if(ue.data.repository_selection==="selected"){const vt=new je.v({baseUrl:this.baseUrl,auth:ue.data.token}),Ht=await vt.paginate(vt.apps.listReposAccessibleToInstallation);Ne=((P=Ht.repositories)!=null?P:Ht).map(Jt=>Jt.name)}return{token:ue.data.token,expiresAt:r.ou.fromISO(ue.data.expires_at),repositories:Ne}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(s){const p=(await this.getInstallations()).find($=>{var re;return $.account&&"login"in $.account&&((re=$.account.login)==null?void 0:re.toLocaleLowerCase("en-US"))===s.toLocaleLowerCase("en-US")});if(p)return{installationId:p.id,suspended:Boolean(p.suspended_by)};const P=new Error(`No app installation found for ${s} in ${this.baseAuthConfig.appId}`);throw P.name="NotFoundError",P}}class Jn{constructor(s){ur(this,"apps");var i,p;this.apps=(p=(i=s.apps)==null?void 0:i.map(P=>new Wr(P,s.apiBaseUrl)))!=null?p:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(i=>i.getInstallations()))).flat():[]}async getAppToken(s,i){if(this.apps.length===0)return;const p=await Promise.all(this.apps.map(ue=>ue.getInstallationCredentials(s,i).then(Ne=>({credentials:Ne,error:void 0}),Ne=>({credentials:void 0,error:Ne})))),P=p.find(ue=>{var Ne;return(Ne=ue.credentials)==null?void 0:Ne.accessToken});if(P)return P.credentials.accessToken;const re=p.map(ue=>ue.error).find(ue=>(ue==null?void 0:ue.name)!=="NotFoundError");if(re)throw re}}const br=class{constructor(s,i){this.githubAppCredentialsMux=s,this.token=i}async getCredentials(s){const i=y()(s.url),p=i.owner||i.name,P=i.owner?i.name:void 0;let $="app",re=await this.githubAppCredentialsMux.getAppToken(p,P);return re||($="token",re=this.token),{headers:re?{Authorization:`Bearer ${re}`}:void 0,token:re,type:$}}};ur(br,"create",u=>new br(new Jn(u),u.token));let Mr=null;class wr{constructor(s){this.providers=s}static fromIntegrations(s){const i=new Map;return s.github.list().forEach(p=>{const P=Mr.create(p.config);i.set(p.config.host,P)}),new wr(i)}async getCredentials(s){const i=new URL(s.url),p=this.providers.get(i.host);if(!p)throw new Error(`There is no GitHub integration that matches ${s.url}. Please add a configuration for an integration.`);return p.getCredentials(s)}}var Ar=Object.defineProperty,vr=(u,s,i)=>s in u?Ar(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,Lr=(u,s,i)=>(vr(u,typeof s!="symbol"?s+"":s,i),i);const hr=class{constructor(s){this.integrationConfig=s}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return Rr(Y(s),"tree")}resolveEditUrl(s){return Rr(s,"edit")}};Lr(hr,"factory",({config:u})=>{var s;const i=On((s=u.getOptionalConfigArray("integrations.github"))!=null?s:[]);return ve(i.map(p=>new hr(p)),p=>p.config.host)});let Nn=hr;function Rr(u,s){return u.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(i,p,P,$)=>`//${p}/${P}/${$}/${s}/`)}var xr=Object.defineProperty,jr=(u,s,i)=>s in u?xr(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,kr=(u,s,i)=>(jr(u,typeof s!="symbol"?s+"":s,i),i);const Nr=null;class Br extends Nn{constructor(s){super(s)}get config(){return super.config}}kr(Br,"factory",Nn.factory);const se=null,ze=null,nt=null,Et="gitlab.com",Qt="https://gitlab.com/api/v4";function zt(u){const s=u.getString("host");let i=u.getOptionalString("apiBaseUrl");const p=u.getOptionalString("token");let P=u.getOptionalString("baseUrl");if(i?i=(0,g.trimEnd)(i,"/"):s===Et&&(i=Qt),P?P=(0,g.trimEnd)(P,"/"):P=`https://${s}`,ne(s)){if(!i||!ie(i))throw new Error(`Invalid GitLab integration config, '${i}' is not a valid apiBaseUrl`);if(!ie(P))throw new Error(`Invalid GitLab integration config, '${P}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${s}' is not a valid host`);return{host:s,token:p,apiBaseUrl:i,baseUrl:P}}function qt(u){const s=u.map(zt);return s.some(i=>i.host===Et)||s.push({host:Et,apiBaseUrl:Qt,baseUrl:`https://${Et}`}),s}function mn(u){let s="";return u.host!==Et&&(s=new URL(u.baseUrl).pathname),trimEnd(s,"/")}async function cn(u,s){const i=await _n(u,s);return An(u,i,s).toString()}function an(u){const{token:s=""}=u;return{headers:{"PRIVATE-TOKEN":s}}}function An(u,s,i){try{const p=new URL(u),P=p.pathname.split("/blob/").slice(1).join("/blob/"),[$,...re]=P.split("/"),ue=mn(i);return p.pathname=[...ue?[ue]:[],"api/v4/projects",s,"repository/files",encodeURIComponent(decodeURIComponent(re.join("/"))),"raw"].join("/"),p.search=`?ref=${$}`,p}catch(p){throw new Error(`Incorrect url: ${u}, ${p}`)}}async function _n(u,s){const i=new URL(u);if(!i.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let p=i.pathname.split("/-/blob/")[0].split("/blob/")[0];const P=mn(s);P&&(p=p.replace(P,""));const $=new URL(`${i.origin}${P}/api/v4/projects/${encodeURIComponent(p.replace(/^\//,""))}`),re=await fetch($.toString(),an(s)),ue=await re.json();if(!re.ok)throw new Error(`GitLab Error '${ue.error}', ${ue.error_description}`);return Number(ue.id)}catch(p){throw new Error(`Could not get GitLab project ID for: ${u}, ${p}`)}}var Cn=Object.defineProperty,Un=(u,s,i)=>s in u?Cn(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,Tn=(u,s,i)=>(Un(u,typeof s!="symbol"?s+"":s,i),i);const Bn=class{constructor(s){this.integrationConfig=s}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(s){return Y(s)}resolveEditUrl(s){return or(s,"edit")}};Tn(Bn,"factory",({config:u})=>{var s;const i=qt((s=u.getOptionalConfigArray("integrations.gitlab"))!=null?s:[]);return ve(i.map(p=>new Bn(p)),p=>p.config.host)});let Sn=Bn;function or(u,s){return u.replace(/\/\-\/(blob|tree|edit)\//,`/-/${s}/`)}var Wn=Object.defineProperty,zn=(u,s,i)=>s in u?Wn(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,sr=(u,s,i)=>(zn(u,typeof s!="symbol"?s+"":s,i),i);const jn=class{constructor(s){this.token=s}async getCredentials(s){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};sr(jn,"create",u=>new jn(u.token));let Fn=null;class Hn{constructor(s){this.providers=s}static fromIntegrations(s){const i=new Map;return s.gitlab.list().forEach(p=>{const P=Fn.create(p.config);i.set(p.config.host,P)}),new Hn(i)}async getCredentials(s){const i=new URL(s.url),p=this.providers.get(i.host);if(!p)throw new Error(`There is no GitLab integration that matches ${s.url}. Please add a configuration for an integration.`);return p.getCredentials(s)}}function dr(u){if(!u)return{};if(!u.has("clientEmail")&&!u.has("privateKey"))return{};const s=u.getString("privateKey").split("\\n").join(`
`);return{clientEmail:u.getString("clientEmail"),privateKey:s}}var tr=Object.defineProperty,Pr=(u,s,i)=>s in u?tr(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,kn=(u,s,i)=>(Pr(u,typeof s!="symbol"?s+"":s,i),i);class Ze{constructor(s){kn(this,"byType"),this.byType=s}static fromConfig(s){return new Ze({awsS3:pe.factory({config:s}),azure:ft.factory({config:s}),bitbucket:$t.factory({config:s}),bitbucketCloud:q.factory({config:s}),bitbucketServer:h.factory({config:s}),gerrit:yt.factory({config:s}),github:Nn.factory({config:s}),gitlab:Sn.factory({config:s}),gitea:hn.factory({config:s})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(s=>s.list())}byUrl(s){let i=Object.values(this.byType).map(p=>p.byUrl(s)).filter(Boolean);if(i.length>1){const p=i.filter(P=>!(P instanceof $t));p.length!==0&&(i=p)}return i[0]}byHost(s){return Object.values(this.byType).map(i=>i.byHost(s)).find(Boolean)}resolveUrl(s){const i=this.byUrl(s.base);return i?i.resolveUrl(s):Y(s)}resolveEditUrl(s){const i=this.byUrl(s);return i?i.resolveEditUrl(s):s}}},63115:function(fn,Ut,e){"use strict";e.d(Ut,{Cy:function(){return Ue},DC:function(){return Ke},OO:function(){return $t},RE:function(){return Ct},XQ:function(){return pt},Yq:function(){return tn},ap:function(){return Ft},bM:function(){return mt},cm:function(){return Wt},d1:function(){return Fe},fP:function(){return Je},fe:function(){return Lt},gC:function(){return Xt},hK:function(){return Xe},hs:function(){return Nt},nE:function(){return K},x1:function(){return ht},zJ:function(){return ge}});var l=e(2784),y=e(73557),g=e(80236),d=e(30705),m=e(16673),A=e(64304),H=e(99688),je=e(13737),r=e(60364),be=e(90436),ne=e(79692),ie=e(95544),ve=e(8629),Y=e(79249),Ee=e(38724),fe=e(99152),_=e(6487),Ce=e(49429),I=e(77277),Pt=e(34520),Oe=e(15933);const pe=(0,d.NT)({id:"api-docs"}),Se=(0,d.x8)({id:"register-component",optional:!0}),F=[m.Es.columns.createTitleColumn({hidden:!0}),m.Es.columns.createNameColumn({defaultKind:"API"}),m.Es.columns.createSystemColumn(),m.Es.columns.createOwnerColumn(),m.Es.columns.createSpecTypeColumn(),m.Es.columns.createSpecLifecycleColumn(),m.Es.columns.createMetadataDescriptionColumn(),m.Es.columns.createTagsColumn()],Je=j=>{var ce;const{initiallySelectedFilter:Te="all",columns:$e,actions:Le}=j,Ae=`${(ce=(0,d.h_)(d.Ds).getOptionalString("organization.name"))!=null?ce:"Backstage"} API Explorer`,Re=(0,d.tg)(Se);return l.createElement(g.g9,{themeId:"apis",title:"APIs",subtitle:Ae,pageTitleOverride:"APIs"},l.createElement(g.VY,null,l.createElement(g.yW,{title:""},l.createElement(g.XF,{title:"Register Existing API",to:Re==null?void 0:Re()}),l.createElement(g.qt,null,"All your APIs")),l.createElement(A.UO,null,l.createElement(A._i,null,l.createElement(A._i.Filters,null,l.createElement(A.tW,{initialFilter:"api",hidden:!0}),l.createElement(A.sL,null),l.createElement(A.EW,{initialFilter:Te}),l.createElement(A.dq,null),l.createElement(A.df,null),l.createElement(A.xE,null)),l.createElement(A._i.Content,null,l.createElement(m.Es,{columns:$e||F,actions:Le}))))))},Ct=j=>(0,y.pC)()||l.createElement(Je,{...j}),it=(0,d.T0)({id:"plugin.api-docs.config"}),Bt=j=>l.createElement(g.Oi,{text:j.definition,language:j.language,showCopyCodeButton:!0}),Ue=()=>{var j;const{entity:ce}=(0,A.X2)(),Te=(0,d.h_)(it),{getApiDefinitionWidget:$e}=Te;if(!ce)return l.createElement(H.Z,{severity:"error"},"Could not fetch the API");const Le=$e(ce),G=(j=ce.metadata.title)!=null?j:ce.metadata.name;return Le?l.createElement(g.oZ,{title:G},l.createElement(g.hB,{label:Le.title,key:"widget"},Le.component(ce.spec.definition)),l.createElement(g.hB,{label:"Raw",key:"raw"},l.createElement(Bt,{definition:ce.spec.definition,language:Le.rawLanguage||ce.spec.type}))):l.createElement(g.oZ,{title:G,children:[l.createElement(g.hB,{label:ce.spec.type,key:"raw"},l.createElement(Bt,{definition:ce.spec.definition,language:ce.spec.type}))]})},tt=l.lazy(()=>Promise.all([e.e(1978),e.e(7700),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(j=>({default:j.AsyncApiDefinition}))),lt=j=>l.createElement(l.Suspense,{fallback:l.createElement(g.Ex,null)},l.createElement(tt,{...j})),Yt=l.lazy(()=>e.e(4774).then(e.bind(e,14774)).then(j=>({default:j.GraphQlDefinition}))),ot=j=>l.createElement(l.Suspense,{fallback:l.createElement(g.Ex,null)},l.createElement(Yt,{...j})),rn=l.lazy(()=>Promise.all([e.e(1978),e.e(7700),e.e(4398)]).then(e.bind(e,74398)).then(j=>({default:j.OpenApiDefinition}))),C=j=>l.createElement(l.Suspense,{fallback:l.createElement(g.Ex,null)},l.createElement(rn,{...j})),At=j=>{const ce=(0,r.Z)();return l.createElement(g.Oi,{customStyle:{backgroundColor:ce.palette.background.default},text:j.definition,language:"protobuf",showCopyCodeButton:!0})},en=j=>{const{definition:ce}=j,Te=(0,r.Z)();return l.createElement(g.Oi,{customStyle:{backgroundColor:Te.palette.background.default},text:ce,language:"typescript",showCopyCodeButton:!0})};function tn(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:j=>l.createElement(C,{definition:j})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:j=>l.createElement(lt,{definition:j})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:j=>l.createElement(ot,{definition:j})},{type:"grpc",title:"gRPC",component:j=>l.createElement(At,{definition:j})},{type:"trpc",title:"tRPC",component:j=>l.createElement(en,{definition:j})}]}const K=j=>{const{apiEntity:ce}=j,$e=(0,d.h_)(it).getApiDefinitionWidget(ce),Le=$e?$e.title:ce.spec.type;return l.createElement(be.Z,{component:"span"},Le)},ct=(0,ne.Z)(j=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${j.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:j.palette.text.primary,wordBreak:"break-word",fontSize:j.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:j.spacing(1),color:j.palette.text.primary}}));function dt(j){const{children:ce,value:Te,index:$e,...Le}=j,G=ct();return l.createElement("div",{role:"tabpanel",hidden:Te!==$e,id:`vertical-tabpanel-${$e}`,"aria-labelledby":`vertical-tab-${$e}`,className:G.tabContents,...Le},Te===$e&&l.createElement(ie.Z,{pl:3,pr:3},ce))}function Ye(j){return{id:`vertical-tab-${j}`,"aria-controls":`vertical-tabpanel-${j}`}}function ut(j){var ce,Te,$e;const{open:Le,entity:G,onClose:Ae}=j,[Re,xe]=l.useState(0),J=ct();(0,l.useEffect)(()=>{xe(0)},[Le]);const Me=(0,d.h_)(it).getApiDefinitionWidget(G);let Ge=0,we=0;return l.createElement(ve.Z,{fullWidth:!0,maxWidth:"xl",open:Le,onClose:Ae,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:J.fullHeightDialog}},l.createElement(Y.Z,{id:"api-definition-dialog-title",disableTypography:!0},l.createElement(be.Z,{className:J.type},"API - ",(ce=Me==null?void 0:Me.title)!=null?ce:"Raw"),l.createElement(be.Z,{className:J.title,variant:"h1"},(Te=G.metadata.title)!=null?Te:G.metadata.name)),l.createElement(Ee.Z,{dividers:!0,className:J.root},l.createElement(fe.Z,{orientation:"vertical",variant:"scrollable",value:Re,onChange:(Ve,rt)=>xe(rt),"aria-label":"API definition options",className:J.tabs},Me?l.createElement(_.Z,{label:Me.title,...Ye(Ge++)}):null,l.createElement(_.Z,{label:"Raw",...Ye(Ge++)})),Me?l.createElement(dt,{value:Re,index:we++},Me.component(G.spec.definition)):null,l.createElement(dt,{value:Re,index:we++},l.createElement(Bt,{definition:G.spec.definition,language:($e=Me==null?void 0:Me.rawLanguage)!=null?$e:G.spec.type}))),l.createElement(Ce.Z,null,l.createElement(I.Z,{onClick:Ae,color:"primary"},"Close")))}function Rt(){return{title:"Type",field:"spec.type",render:j=>l.createElement(K,{apiEntity:j})}}const St=({apiEntity:j})=>{const[ce,Te]=(0,l.useState)(!1);return l.createElement(l.Fragment,null,l.createElement(je.Z,{onClick:()=>Te(!ce)},l.createElement(Oe.Z,null)),l.createElement(ut,{entity:j,open:ce,onClose:()=>Te(!1)}))};function ft(){return{title:"API Definition",render:j=>l.createElement(St,{apiEntity:j})}}const Mt=[A.u3.columns.createEntityRefColumn({defaultKind:"API"}),A.u3.columns.createSystemColumn(),A.u3.columns.createOwnerColumn(),Rt(),A.u3.columns.createSpecLifecycleColumn(),A.u3.columns.createMetadataDescriptionColumn(),ft()],mt=j=>{const{variant:ce="gridItem",columns:Te=Mt}=j,{entity:$e}=(0,A.X2)(),{entities:Le,loading:G,error:Ae}=(0,A.eK)($e,{type:Pt.Dg});return G?l.createElement(g.rJ,{variant:ce,title:"Consumed APIs"},l.createElement(g.Ex,null)):Ae||!Le?l.createElement(g.rJ,{variant:ce,title:"Consumed APIs"},l.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:l.createElement(g.Oi,{text:`${Ae}`,language:"text"})})):l.createElement(A.u3,{title:"Consumed APIs",variant:ce,emptyContent:l.createElement("div",{style:{textAlign:"center"}},l.createElement(be.Z,{variant:"body1"},"This ",$e.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),l.createElement(be.Z,{variant:"body2"},l.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Te,entities:Le})},xt=[A.u3.columns.createEntityRefColumn({defaultKind:"API"}),A.u3.columns.createOwnerColumn(),Rt(),A.u3.columns.createSpecLifecycleColumn(),A.u3.columns.createMetadataDescriptionColumn()],Wt=j=>{const{variant:ce="gridItem",columns:Te=xt}=j,{entity:$e}=(0,A.X2)(),{entities:Le,loading:G,error:Ae}=(0,A.eK)($e,{type:Pt.aS,kind:"API"});return G?l.createElement(g.rJ,{variant:ce,title:"APIs"},l.createElement(g.Ex,null)):Ae||!Le?l.createElement(g.rJ,{variant:ce,title:"APIs"},l.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:l.createElement(g.Oi,{text:`${Ae}`,language:"text"})})):l.createElement(A.u3,{title:"APIs",variant:ce,emptyContent:l.createElement("div",{style:{textAlign:"center"}},l.createElement(be.Z,{variant:"body1"},"This ",$e.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),l.createElement(be.Z,{variant:"body2"},l.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Te,entities:Le})},Lt=j=>{const{variant:ce="gridItem",columns:Te=Mt}=j,{entity:$e}=(0,A.X2)(),{entities:Le,loading:G,error:Ae}=(0,A.eK)($e,{type:Pt.M_});return G?l.createElement(g.rJ,{variant:ce,title:"Provided APIs"},l.createElement(g.Ex,null)):Ae||!Le?l.createElement(g.rJ,{variant:ce,title:"Provided APIs"},l.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:l.createElement(g.Oi,{text:`${Ae}`,language:"text"})})):l.createElement(A.u3,{title:"Provided APIs",variant:ce,emptyContent:l.createElement("div",{style:{textAlign:"center"}},l.createElement(be.Z,{variant:"body1"},"This ",$e.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),l.createElement(be.Z,{variant:"body2"},l.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Te,entities:Le})},Nt=j=>{const{variant:ce="gridItem"}=j,{entity:Te}=(0,A.X2)(),{entities:$e,loading:Le,error:G}=(0,A.eK)(Te,{type:Pt.X9});return Le?l.createElement(g.rJ,{variant:ce,title:"Consumers"},l.createElement(g.Ex,null)):G||!$e?l.createElement(g.rJ,{variant:ce,title:"Consumers"},l.createElement(g.GB,{severity:"error",title:"Could not load components",message:l.createElement(g.Oi,{text:`${G}`,language:"text"})})):l.createElement(A.u3,{title:"Consumers",variant:ce,emptyContent:l.createElement("div",{style:{textAlign:"center"}},l.createElement(be.Z,{variant:"body1"},"No component consumes this API."),l.createElement(be.Z,{variant:"body2"},l.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:A.u3.componentEntityColumns,entities:$e})},ge=j=>{const{variant:ce="gridItem"}=j,{entity:Te}=(0,A.X2)(),{entities:$e,loading:Le,error:G}=(0,A.eK)(Te,{type:Pt.Zj});return Le?l.createElement(g.rJ,{variant:ce,title:"Providers"},l.createElement(g.Ex,null)):G||!$e?l.createElement(g.rJ,{variant:ce,title:"Providers"},l.createElement(g.GB,{severity:"error",title:"Could not load components",message:l.createElement(g.Oi,{text:`${G}`,language:"text"})})):l.createElement(A.u3,{title:"Providers",variant:ce,emptyContent:l.createElement("div",{style:{textAlign:"center"}},l.createElement(be.Z,{variant:"body1"},"No component provides this API."),l.createElement(be.Z,{variant:"body2"},l.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:A.u3.componentEntityColumns,entities:$e})},Fe=(0,d.rx)({id:"api-docs",routes:{root:pe},apis:[(0,d.ni)({api:it,deps:{},factory:()=>{const j=tn();return{getApiDefinitionWidget:ce=>j.find(Te=>Te.type===ce.spec.type)}}})],externalRoutes:{registerApi:Se}}),Xe=Fe.provide((0,d.P4)({name:"ApiExplorerPage",component:()=>e.e(2045).then(e.bind(e,22045)).then(j=>j.ApiExplorerIndexPage),mountPoint:pe})),Ke=Fe.provide((0,d.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(4105).then(e.bind(e,44105)).then(j=>j.ApiDefinitionCard)}})),ht=Fe.provide((0,d.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(j=>j.ConsumedApisCard)}})),pt=Fe.provide((0,d.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(5584).then(e.bind(e,65584)).then(j=>j.ConsumingComponentsCard)}})),$t=Fe.provide((0,d.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(j=>j.ProvidedApisCard)}})),Xt=Fe.provide((0,d.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(5584).then(e.bind(e,65584)).then(j=>j.ProvidingComponentsCard)}})),Ft=Fe.provide((0,d.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(j=>j.HasApisCard)}}))},75650:function(fn,Ut,e){"use strict";e.d(Ut,{j8:function(){return m},ui:function(){return y},x7:function(){return d}});var l=e(5083);const y="catalog-entity",g=(0,l.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:y}),d=(0,l.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),m=(0,l.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:y}),A=(0,l.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:y}),H=(0,l.J$)({name:"catalog.location.read",attributes:{action:"read"}}),je=(0,l.J$)({name:"catalog.location.create",attributes:{action:"create"}}),r=(0,l.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),be=[g,d,m,A,H,je,r]},98487:function(fn,Ut,e){"use strict";e.d(Ut,{Az:function(){return ot},Ho:function(){return tt},Nm:function(){return Se},_U:function(){return Ue},t0:function(){return rn},vw:function(){return pe}});var l=e(34520),y=e(80236),g=e(30705),d=e(79692),m=e(60364),A=e(4614),H=e(72779),je=e.n(H),r=e(2784),be=e(10368),ne=e(64304),ie=e(39412),ve=e(48760),Y=e(14162),Ee=e.n(Y),fe=e(69294);const _=(0,be.Z)(C=>({text:{fill:C.palette.textContrast},secondary:{fill:C.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function Ce({edge:{relations:C}}){const At=_();return r.createElement("text",{className:At.text,textAnchor:"middle"},C.map((en,tn)=>r.createElement("tspan",{key:en,className:je()(tn>0&&At.secondary)},tn>0&&r.createElement("tspan",null," / "),en)))}function I({kind:C,...At}){var en;const K=(en=(0,g.qD)().getSystemIcon(`kind:${C.toLocaleLowerCase("en-US")}`))!=null?en:ie.Z;return r.createElement(K,{...At})}const Pt=(0,d.Z)(C=>({node:{fill:C.palette.grey[300],stroke:C.palette.grey[300],"&.primary":{fill:C.palette.primary.light,stroke:C.palette.primary.light},"&.secondary":{fill:C.palette.secondary.light,stroke:C.palette.secondary.light}},text:{fill:C.palette.getContrastText(C.palette.grey[300]),"&.primary":{fill:C.palette.primary.contrastText},"&.secondary":{fill:C.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function Oe({node:{id:C,kind:At,namespace:en,name:tn,color:K="default",focused:ct,title:dt,onClick:Ye}}){const ut=Pt(),[Rt,St]=(0,r.useState)(0),[ft,Mt]=(0,r.useState)(0),mt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(mt.current){let{height:Xe,width:Ke}=mt.current.getBBox();Xe=Math.round(Xe),Ke=Math.round(Ke),(Xe!==ft||Ke!==Rt)&&(St(Ke),Mt(Xe))}},[Rt,ft]);const xt=10,Wt=ft,Lt=At?Wt+xt:0,Nt=Lt+Rt+xt*2,ge=ft+xt*2,Fe=dt!=null?dt:At&&tn&&en?(0,ne.$3)({kind:At,name:tn,namespace:en}):C;return r.createElement("g",{onClick:Ye,className:je()(Ye&&ut.clickable)},r.createElement("rect",{className:je()(ut.node,K==="primary"&&"primary",K==="secondary"&&"secondary"),width:Nt,height:ge,rx:10}),At&&r.createElement(I,{kind:At,y:xt,x:xt,width:Wt,height:Wt,className:je()(ut.text,ct&&"focused",K==="primary"&&"primary",K==="secondary"&&"secondary")}),r.createElement("text",{ref:mt,className:je()(ut.text,ct&&"focused",K==="primary"&&"primary",K==="secondary"&&"secondary"),y:ge/2,x:Lt+(Rt+xt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Fe))}const pe=[[l.$1,l.S4],[l.Dg,l.X9],[l.Zj,l.M_],[l.aS,l.cz],[l._b,l.wP],[l.KS,l.hr],[l.nP,l.w$]];var Se=(C=>(C.TOP_BOTTOM="TB",C.BOTTOM_TOP="BT",C.LEFT_RIGHT="LR",C.RIGHT_LEFT="RL",C))(Se||{});const F=Ee()(10);function Je(){const C=(0,g.h_)(ne.Ah),At=(0,r.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[en,tn]=(0,r.useState)({}),K=(0,r.useCallback)(()=>{const{cachedEntities:St,requestedEntities:ft}=At.current,Mt={};ft.forEach(mt=>{const xt=St.get(mt);xt&&(Mt[mt]=xt)}),tn(Mt)},[At,tn]),[ct,dt]=(0,fe.default)(async()=>{const{requestedEntities:St,outstandingEntities:ft,cachedEntities:Mt}=At.current;await Promise.all(Array.from(St).map(mt=>F(async()=>{if(Mt.has(mt))return;if(ft.has(mt)){await ft.get(mt);return}const xt=C.getEntityByRef(mt);ft.set(mt,xt);try{const Wt=await xt;Wt&&(Mt.set(mt,Wt),K())}finally{ft.delete(mt)}})))},[At,K]),{loading:Ye,error:ut}=ct,Rt=(0,r.useCallback)(St=>{const ft=new Set(St),{requestedEntities:Mt}=At.current;(ft.size!==Mt.size||Array.from(ft).some(mt=>!Mt.has(mt)))&&(At.current.requestedEntities=ft,dt(),K())},[At,dt,K]);return{entities:en,loading:Ye,error:ut,requestEntities:Rt}}function Ct({rootEntityRefs:C,filter:{maxDepth:At=Number.POSITIVE_INFINITY,relations:en,kinds:tn}={}}){const{entities:K,loading:ct,error:dt,requestEntities:Ye}=Je();return(0,r.useEffect)(()=>{const ut=new Set([...C]),Rt=new Set;let St=[...C],ft=0;for(;St.length>0&&(!isFinite(At)||ft<At);){const Mt=St;for(St=[];Mt.length>0;){const mt=Mt.shift(),xt=K[mt];if(Rt.add(mt),xt&&xt.relations)for(const Wt of xt.relations)(!en||en.includes(Wt.type))&&(!tn||tn.some(Lt=>Wt.targetRef.startsWith(`${Lt.toLocaleLowerCase("en-US")}:`)))&&(Rt.has(Wt.targetRef)||(St.push(Wt.targetRef),ut.add(Wt.targetRef)))}++ft}Ye([...ut])},[K,C,At,en,tn,Ye]),{entities:K,loading:ct,error:dt}}function it({rootEntityRefs:C,maxDepth:At=Number.POSITIVE_INFINITY,unidirectional:en=!0,mergeRelations:tn=!0,kinds:K,relations:ct,onNodeClick:dt,relationPairs:Ye=pe}){const[ut,Rt]=(0,r.useState)({}),{entities:St,loading:ft,error:Mt}=Ct({rootEntityRefs:C,filter:{maxDepth:At,kinds:K,relations:ct}});return(0,ve.Z)(()=>{var mt;if(!St||Object.keys(St).length===0){Rt({});return}const xt=Object.entries(St).map(([ge,Fe])=>{var Xe,Ke,ht;const pt=C.includes(ge),$t={id:ge,title:(Ke=(Xe=Fe.metadata)==null?void 0:Xe.title)!=null?Ke:void 0,kind:Fe.kind,name:Fe.metadata.name,namespace:(ht=Fe.metadata.namespace)!=null?ht:l.zG,focused:pt,color:pt?"secondary":"primary"};return dt&&($t.onClick=Xt=>dt($t,Xt)),$t}),Wt=[],Lt=new Set,Nt=[...C];for(;Nt.length>0;){const ge=Nt.pop(),Fe=St[ge];Lt.add(ge),Fe&&((mt=Fe==null?void 0:Fe.relations)==null||mt.forEach(Xe=>{var Ke;if(St[Xe.targetRef]&&!(ct&&!ct.includes(Xe.type))&&!(K&&!K.some(ht=>Xe.targetRef.startsWith(`${ht.toLocaleLowerCase("en-US")}:`)))){if(!en||!Lt.has(Xe.targetRef))if(tn){const ht=(Ke=Ye.find(([$t,Xt])=>$t===Xe.type||Xt===Xe.type))!=null?Ke:[Xe.type],[pt]=ht;Wt.push({from:pt===Xe.type?ge:Xe.targetRef,to:pt===Xe.type?Xe.targetRef:ge,relations:ht,label:"visible"})}else Wt.push({from:ge,to:Xe.targetRef,relations:[Xe.type],label:"visible"});Lt.has(Xe.targetRef)||(Nt.push(Xe.targetRef),Lt.add(Xe.targetRef))}}))}Rt({nodes:xt,edges:Wt})},100,[St,C,K,ct,en,tn,dt,Ye]),{loading:ft,error:Mt,...ut}}const Bt=(0,d.Z)(C=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${C.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Ue=C=>{const{rootEntityNames:At,maxDepth:en=2,unidirectional:tn=!0,mergeRelations:K=!0,kinds:ct,relations:dt,direction:Ye=Se.LEFT_RIGHT,onNodeClick:ut,relationPairs:Rt=pe,className:St,zoom:ft="enabled",renderNode:Mt,renderLabel:mt,curve:xt}=C,Wt=(0,m.Z)(),Lt=Bt(),Nt=(0,r.useMemo)(()=>(Array.isArray(At)?At:[At]).map(pt=>(0,l.eE)(pt)),[At]),ge=(0,g.h_)(g.VE),{loading:Fe,error:Xe,nodes:Ke,edges:ht}=it({rootEntityRefs:Nt,maxDepth:en,unidirectional:tn,mergeRelations:K,kinds:ct,relations:dt,onNodeClick:ut,relationPairs:Rt});return(0,r.useEffect)(()=>{Xe&&ge.post(Xe)},[ge,Xe]),r.createElement("div",{className:je()(Lt.container,St)},Fe&&r.createElement(A.Z,{className:Lt.progress}),Ke&&ht&&r.createElement(y.mn,{nodes:Ke,edges:ht,renderNode:Mt||Oe,renderLabel:mt||Ce,direction:Ye,className:Lt.graph,paddingX:Wt.spacing(4),paddingY:Wt.spacing(4),labelPosition:y.NX.LabelPosition.RIGHT,labelOffset:Wt.spacing(1),zoom:ft,curve:xt}))},tt=(0,g.NT)({id:"catalog-graph"}),lt=(0,g.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Yt=(0,g.rx)({id:"catalog-graph",routes:{catalogGraph:tt},externalRoutes:{catalogEntity:lt}}),ot=Yt.provide((0,g.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(4463).then(e.bind(e,4463)).then(C=>C.CatalogGraphCard)}})),rn=Yt.provide((0,g.P4)({name:"CatalogGraphPage",component:()=>e.e(3683).then(e.bind(e,43683)).then(C=>C.CatalogGraphPage),mountPoint:tt}))},93316:function(fn,Ut,e){"use strict";e.d(Ut,{gA:function(){return et},vr:function(){return ce},wS:function(){return j}});var l=e(30705),y=e(49462),g=e(64304),d=e(89393),m=e(49431),A=e(82717),H=e.n(A),je=e(80236),r=e(90436),be=e(7089),ne=e(77277),ie=e(4614),ve=e(11776),Y=e(38402),Ee=e(86136),fe=e(49378),_=e(9520),Ce=e(61837),I=e(82113),Pt=e(60905),Oe=e(86619),pe=e(74828),Se=e(94339),F=e(32552),Je=e(24579),Ct=e(95544),it=e(21324),Bt=e(34546),Ue=e(5806),tt=e(31377),lt=e(67471),Yt=e(31625),ot=e(60364),rn=e(41156),C=e(2784),At=e(79692),en=e(4989),tn=e(84905),K=e(38016),ct=e(39412),dt=e(96795),Ye=e.n(dt),ut=e(63955),Rt=e(88013),St=e(10921),ft=e(76635),Mt=e.n(ft),mt=e(32272),xt=e(64279),Wt=e(34520);const Lt=(0,l.T0)({id:"plugin.catalog-import.service"}),Nt=(U,Z)=>{const te=U.github.byUrl(Z);if(!te)return;const{name:T,owner:B}=H()(Z);return{repo:T,owner:B,githubIntegrationConfig:te.config}};function ge(U){const{ref:Z,...te}=U;return{inputRef:Z,...te}}function Fe(U){var Z;return(Z=U.getOptionalString("catalog.import.entityFilename"))!=null?Z:"catalog-info.yaml"}function Xe(U){var Z;return(Z=U.getOptionalString("catalog.import.pullRequestBranchName"))!=null?Z:"backstage-integration"}var Ke=Object.defineProperty,ht=(U,Z,te)=>Z in U?Ke(U,Z,{enumerable:!0,configurable:!0,writable:!0,value:te}):U[Z]=te,pt=(U,Z,te)=>(ht(U,typeof Z!="symbol"?Z+"":Z,te),te);class $t{constructor(Z){pt(this,"discoveryApi"),pt(this,"identityApi"),pt(this,"scmAuthApi"),pt(this,"scmIntegrationsApi"),pt(this,"catalogApi"),pt(this,"configApi"),this.discoveryApi=Z.discoveryApi,this.scmAuthApi=Z.scmAuthApi,this.identityApi=Z.identityApi,this.scmIntegrationsApi=Z.scmIntegrationsApi,this.catalogApi=Z.catalogApi,this.configApi=Z.configApi}async analyzeUrl(Z){var te;if(new URL(Z).pathname.match(/\.ya?ml$/)||(te=new URL(Z).searchParams.get("path"))!=null&&te.match(/.ya?ml$/)){const V=await this.catalogApi.addLocation({type:"url",target:Z,dryRun:!0});return{type:"locations",locations:[{exists:V.exists,target:V.location.target,entities:V.entities.map(me=>{var _e;return{kind:me.kind,namespace:(_e=me.metadata.namespace)!=null?_e:"default",name:me.metadata.name}})}]}}if(!Nt(this.scmIntegrationsApi,Z)){const V=this.scmIntegrationsApi.byUrl(Z),me=Fe(this.configApi);throw V?new Error(`The ${V.title} integration only supports full URLs to ${me} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${me} file instead.`)}const B=await this.analyzeLocation({repo:Z});if(B.existingEntityFiles.length>0){const V=B.existingEntityFiles.reduce((me,_e)=>{var at;return me[_e.location.target]={target:_e.location.target,exists:_e.isRegistered,entities:[..._e.location.target in me?me[_e.location.target].entities:[],{name:_e.entity.metadata.name,namespace:(at=_e.entity.metadata.namespace)!=null?at:"default",kind:_e.entity.kind}]},me},{});return{type:"locations",locations:Object.values(V)}}return{type:"repository",integrationType:"github",url:Z,generatedEntities:B.generateEntities.map(V=>V.entity)}}async preparePullRequest(){var Z;const te=(Z=this.configApi.getOptionalString("app.title"))!=null?Z:"Backstage",T=this.configApi.getString("app.baseUrl");return{title:`Add ${Fe(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${te} software catalog](${T}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(Z){const{repositoryUrl:te,fileContent:T,title:B,body:V}=Z,me=Nt(this.scmIntegrationsApi,te);if(me)return await this.submitGitHubPrToRepo({...me,repositoryUrl:te,fileContent:T,title:B,body:V});throw new Error("unimplemented!")}async analyzeLocation(Z){const{token:te}=await this.identityApi.getCredentials(),T=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...te&&{Authorization:`Bearer ${te}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:Z.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(V=>{throw new Error(`Failed to generate entity definitions, ${V.message}`)});if(!T.ok)throw new Error(`Failed to generate entity definitions. Received http response ${T.status}: ${T.statusText}`);return await T.json()}async submitGitHubPrToRepo(Z){const{owner:te,repo:T,title:B,body:V,fileContent:me,repositoryUrl:_e,githubIntegrationConfig:at}=Z,{token:He}=await this.scmAuthApi.getCredentials({url:_e,additionalScope:{repoWrite:!0}}),Ot=new d.v({auth:He,baseUrl:at.apiBaseUrl}),yt=Xe(this.configApi),Tt=Fe(this.configApi),Kt=await Ot.repos.get({owner:te,repo:T}).catch(Gt=>{throw new Error(Xt("Couldn't fetch repo data",Gt))}),ln=await Ot.git.getRef({owner:te,repo:T,ref:`heads/${Kt.data.default_branch}`}).catch(Gt=>{throw new Error(Xt("Couldn't fetch default branch data",Gt))});return await Ot.git.createRef({owner:te,repo:T,ref:`refs/heads/${yt}`,sha:ln.data.object.sha}).catch(Gt=>{throw new Error(Xt(`Couldn't create a new branch with name '${yt}'`,Gt))}),await Ot.repos.createOrUpdateFileContents({owner:te,repo:T,path:Tt,message:B,content:m.DS.encode(me),branch:yt}).catch(Gt=>{throw new Error(Xt(`Couldn't create a commit with ${Tt} file added`,Gt))}),{link:(await Ot.pulls.create({owner:te,repo:T,title:B,head:yt,body:V,base:Kt.data.default_branch}).catch(Gt=>{throw new Error(Xt(`Couldn't create a pull request for ${yt} branch`,Gt))})).data.html_url,location:`https://${at.host}/${te}/${T}/blob/${Kt.data.default_branch}/${Tt}`}}}function Xt(U,Z){return`${U}, received http response status code ${Z.status}: ${Z.message}`}const Ft=(0,l.NT)({id:"catalog-import"}),j=(0,l.rx)({id:"catalog-import",apis:[(0,l.ni)({api:Lt,deps:{discoveryApi:l.NW,scmAuthApi:y.Om,identityApi:l.$4,scmIntegrationsApi:y.q3,catalogApi:g.Ah,configApi:l.Ds},factory:({discoveryApi:U,scmAuthApi:Z,identityApi:te,scmIntegrationsApi:T,catalogApi:B,configApi:V})=>new $t({discoveryApi:U,scmAuthApi:Z,scmIntegrationsApi:T,identityApi:te,catalogApi:B,configApi:V})})],routes:{importPage:Ft}}),ce=j.provide((0,l.P4)({name:"CatalogImportPage",component:()=>e.e(1245).then(e.bind(e,44398)).then(U=>U.ImportPage),mountPoint:Ft}));function Te(){const U=(0,l.h_)(l.Ds);return Fe(U)}const $e=U=>{const{exampleLocationUrl:Z="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:te="https://github.com/backstage/backstage"}=U,T=(0,l.h_)(l.Ds),B=T.getOptional("app.title")||"Backstage",V=(0,l.h_)(Lt),me=T.has("integrations.github"),_e=Te();return C.createElement(je.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},C.createElement(r.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",B,"."),C.createElement(r.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),C.createElement(r.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",C.createElement("code",null,Z)),C.createElement(r.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",B," catalog."),me&&C.createElement(C.Fragment,null,C.createElement(r.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",C.createElement(be.Z,{label:"GitHub only",variant:"outlined",size:"small"})),C.createElement(r.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",C.createElement("code",null,te)),C.createElement(r.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",C.createElement("code",null,_e)," files in the repository, previews the entities, and adds them to the ",B," ","catalog."),V.preparePullRequest&&C.createElement(r.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",C.createElement("code",null,_e)," and prepares the ",B," catalog to load all entities as soon as the Pull Request is merged.")))};function Le(U){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:U,previousStates:[]}}function G(U,Z){switch(Z.type){case"onAnalysis":{if(U.activeState!=="analyze")return U;const{activeState:te,previousStates:T}=U,[B,V,me,_e]=Z.args;return{...U,analysisUrl:V,activeFlow:B,analyzeResult:me,prepareResult:_e==null?void 0:_e.prepareResult,activeState:(_e==null?void 0:_e.prepareResult)===void 0?"prepare":"review",previousStates:T.concat(te)}}case"onPrepare":{if(U.activeState!=="prepare")return U;const{activeState:te,previousStates:T}=U,[B,V]=Z.args;return{...U,prepareResult:B,activeState:"review",previousStates:V!=null&&V.notRepeatable?[]:T.concat(te)}}case"onReview":{if(U.activeState!=="review")return U;const{activeState:te,previousStates:T}=U,[B]=Z.args;return{...U,reviewResult:B,activeState:"finish",previousStates:T.concat(te)}}case"onGoBack":{const{activeState:te,previousStates:T}=U;return{...U,activeState:T.length>0?T[T.length-1]:te,previousStates:T.slice(0,T.length-1)}}case"onReset":return{...Le(Z.initialUrl),prepareResult:U.prepareResult};default:throw new Error}}const Ae=U=>{const[Z,te]=(0,C.useReducer)(G,U==null?void 0:U.initialUrl,Le),{activeFlow:T,activeState:B,analysisUrl:V,previousStates:me}=Z;return{activeFlow:T,activeState:B,activeStepNumber:["analyze","prepare","review","finish"].indexOf(B),analysisUrl:V,analyzeResult:Z.analyzeResult,prepareResult:Z.prepareResult,reviewResult:Z.reviewResult,onAnalysis:(_e,at,He,Ot)=>te({type:"onAnalysis",args:[_e,at,He,Ot]}),onPrepare:(_e,at)=>te({type:"onPrepare",args:[_e,at]}),onReview:_e=>te({type:"onReview",args:[_e]}),onGoBack:me.length>0?()=>te({type:"onGoBack"}):void 0,onReset:()=>te({type:"onReset",initialUrl:U==null?void 0:U.initialUrl})}},Re=(0,At.Z)(U=>({wrapper:{marginTop:U.spacing(1),marginRight:U.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:U.spacing(1),marginRight:U.spacing(1)}})),xe=U=>{const{loading:Z,...te}=U,T=Re();return C.createElement("div",{className:T.wrapper},C.createElement(ne.Z,{color:"primary",variant:"contained",...te,disabled:U.disabled||U.loading}),U.loading&&C.createElement(ie.Z,{size:"1.5rem",className:T.buttonProgress}),U.loading)},J=U=>{const Z=Re();return C.createElement(ne.Z,{variant:"outlined",className:Z.button,...U},U.children||"Back")},q=U=>{const Z=Re();return C.createElement(je.Qj,{color:"primary",variant:"contained",className:Z.button,...U},U.children)},Me=(0,At.Z)(U=>({nested:{paddingLeft:U.spacing(4)}}));function Ge(U){return U.sort((Z,te)=>(0,g.$3)(Z).localeCompare((0,g.$3)(te)))}const we=U=>{const{locations:Z,collapsed:te=!1,locationListItemIcon:T,onItemClick:B,firstListItem:V,withLinks:me=!1}=U,_e=(0,l.qD)(),at=Me(),[He,Ot]=(0,C.useState)([]),yt=Tt=>{Ot(Kt=>Kt.includes(Tt)?Kt.filter(ln=>ln!==Tt):Kt.concat(Tt))};return C.createElement(ve.Z,null,V,Z.map(Tt=>C.createElement(C.Fragment,{key:Tt.target},C.createElement(Y.Z,{dense:!0,button:Boolean(B),onClick:()=>B==null?void 0:B(Tt.target)},C.createElement(Ee.Z,null,T(Tt.target)),C.createElement(fe.Z,{primary:Tt.target,secondary:`Entities: ${Tt.entities.length}`}),te&&C.createElement(_.Z,null,C.createElement(Ce.Z,{edge:"end",onClick:()=>yt(Tt.target)},He.includes(Tt.target)?C.createElement(tn.Z,null):C.createElement(K.Z,null)))),C.createElement(I.Z,{in:!te||He.includes(Tt.target),timeout:"auto",unmountOnExit:!0},C.createElement(ve.Z,{component:"div",disablePadding:!0,dense:!0},Ge(Tt.entities).map(Kt=>{var ln;const on=(ln=_e.getSystemIcon(`kind:${Kt.kind.toLocaleLowerCase("en-US")}`))!=null?ln:ct.Z;return C.createElement(Y.Z,{key:(0,g.$3)(Kt),className:at.nested,...me?{component:g.dx,entityRef:Kt,button:me}:{}},C.createElement(Ee.Z,null,C.createElement(on,null)),C.createElement(fe.Z,{primary:(0,g.$3)(Kt)}))}))))))},Ve=U=>{for(const Z of U)for(const te of Z.entities)if(["component","api","resource"].includes(te.kind.toLocaleLowerCase("en-US")))return te;return null},rt=({prepareResult:U,onReset:Z})=>{const te=(0,l.tg)(g.wi);if(U.type==="repository")return C.createElement(C.Fragment,null,C.createElement(r.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",C.createElement(je.rU,{to:U.pullRequest.url,target:"_blank",rel:"noreferrer"},U.pullRequest.url)),C.createElement(r.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),C.createElement(Pt.Z,{container:!0,spacing:0},C.createElement(J,{onClick:Z},"Register another")),";");const[T,B]=Ye()(U.locations,me=>me.exists),V=Ve(B);return C.createElement(C.Fragment,null,B.length>0&&C.createElement(C.Fragment,null,C.createElement(r.Z,null,"The following entities have been added to the catalog:"),C.createElement(we,{locations:B,locationListItemIcon:()=>C.createElement(en.Z,null),withLinks:!0})),T.length>0&&C.createElement(C.Fragment,null,C.createElement(r.Z,null,"A refresh was triggered for the following locations:"),C.createElement(we,{locations:T,locationListItemIcon:()=>C.createElement(en.Z,null),withLinks:!0})),C.createElement(Pt.Z,{container:!0,spacing:0},V&&C.createElement(q,{to:te(V)},"View Component"),C.createElement(J,{onClick:Z},"Register another")))},oe=U=>{const{onAnalysis:Z,analysisUrl:te="",disablePullRequest:T=!1,exampleLocationUrl:B="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=U,V=(0,l.h_)(l.VE),me=(0,l.h_)(Lt),{register:_e,handleSubmit:at,formState:{errors:He},watch:Ot}=(0,ut.cI)({mode:"onTouched",defaultValues:{url:te}}),[yt,Tt]=(0,C.useState)(!1),[Kt,ln]=(0,C.useState)(void 0),on=(0,C.useCallback)(async({url:Gt})=>{var wt,It,dn;Tt(!0);try{const hn=await me.analyzeUrl(Gt);switch(hn.type){case"repository":!T&&hn.generatedEntities.length>0?Z("no-location",Gt,hn):(ln("Couldn't generate entities for your repository"),Tt(!1));break;case"locations":{hn.locations.length===1?Z("single-location",Gt,hn,{prepareResult:hn}):hn.locations.length>1?Z("multiple-locations",Gt,hn):(ln("There are no entities at this location"),Tt(!1));break}default:{const yn=`Received unknown analysis result of type ${hn.type}. Please contact the support team.`;ln(yn),Tt(!1),V.post(new Error(yn));break}}}catch(hn){ln((dn=(It=(wt=hn==null?void 0:hn.data)==null?void 0:wt.error)==null?void 0:It.message)!=null?dn:hn.message),Tt(!1)}},[me,T,V,Z]);return C.createElement("form",{onSubmit:at(on)},C.createElement(Oe.Z,{...ge(_e("url",{required:!0,validate:{httpsValidator:Gt=>typeof Gt=="string"&&Gt.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:B,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(He.url),required:!0}),He.url&&C.createElement(pe.Z,{error:!0},He.url.message),Kt&&C.createElement(pe.Z,{error:!0},Kt),C.createElement(Pt.Z,{container:!0,spacing:0},C.createElement(xe,{disabled:Boolean(He.url)||!Ot("url"),loading:yt,type:"submit"},"Analyze")))},X=U=>{const{name:Z,options:te,required:T,errors:B,rules:V,loading:me=!1,loadingText:_e,helperText:at,errorHelperText:He,textFieldProps:Ot={}}=U;return C.createElement(ut.Qr,{name:Z,rules:V,render:({field:{onChange:yt}})=>C.createElement(Rt.ZP,{loading:me,loadingText:_e,options:te||[],autoSelect:!0,freeSolo:!0,onChange:(Tt,Kt)=>yt(Kt),renderInput:Tt=>C.createElement(Oe.Z,{...Tt,helperText:(B==null?void 0:B[Z])&&He||at,error:Boolean(B==null?void 0:B[Z]),margin:"normal",variant:"outlined",required:T,InputProps:{...Tt.InputProps,endAdornment:C.createElement(C.Fragment,null,me?C.createElement(ie.Z,{color:"inherit",size:"1em"}):null,Tt.InputProps.endAdornment)},...Ot})})})},de=U=>{const{defaultValues:Z,onSubmit:te,render:T}=U,B=(0,ut.cI)({mode:"onTouched",defaultValues:Z}),{handleSubmit:V,watch:me,control:_e,register:at,formState:He,setValue:Ot}=B;return C.createElement(ut.RV,{...B},C.createElement("form",{onSubmit:V(te)},T({values:me(),formState:He,register:at,control:_e,setValue:Ot})))},he=U=>{const{repositoryUrl:Z,entities:te,classes:T}=U,B=Te();return C.createElement(Se.Z,{variant:"outlined",className:T==null?void 0:T.card},C.createElement(F.Z,{title:C.createElement("code",null,`${(0,ft.trimEnd)(Z,"/")}/${B}`)}),C.createElement(Je.Z,{className:T==null?void 0:T.cardContent},C.createElement(je.Oi,{text:te.map(V=>St.ZP.stringify(V)).join(`---
`).trim(),language:"yaml"})))},S=U=>{const{title:Z,description:te,classes:T}=U;return C.createElement(Se.Z,{variant:"outlined",className:T==null?void 0:T.card},C.createElement(F.Z,{title:Z,subheader:"Create a new Pull Request"}),C.createElement(Je.Z,{className:T==null?void 0:T.cardContent},C.createElement(je.SA,{content:te})))},h=(0,At.Z)(U=>({previewCard:{marginTop:U.spacing(1)},previewCardContent:{paddingTop:0}}));function c(U,Z,te){return U.map(T=>({...T,apiVersion:T.apiVersion,kind:T.kind,metadata:{...T.metadata,name:Z},spec:{...T.spec,...te?{owner:te}:{}}}))}const b=U=>{var Z,te,T,B,V,me;const{analyzeResult:_e,onPrepare:at,onGoBack:He,renderFormFields:Ot}=U,yt=h(),Tt=(0,l.h_)(g.Ah),Kt=(0,l.h_)(Lt),ln=(0,l.h_)(l.VE),[on,Gt]=(0,C.useState)(!1),[wt,It]=(0,C.useState)(),dn=Te(),{loading:hn,value:yn,error:bn}=(0,xt.default)(()=>Kt.preparePullRequest(),[Kt.preparePullRequest]);(0,C.useEffect)(()=>{bn&&ln.post(bn)},[bn,ln]);const{loading:Ln,value:In}=(0,xt.default)(async()=>(await Tt.getEntities({filter:{kind:"group"}})).items.map(xn=>(0,g.$3)(xn,{defaultKind:"group"})).sort()),On=(0,C.useCallback)(async Rn=>{Gt(!0);try{const xn=await Kt.submitPullRequest({repositoryUrl:_e.url,title:Rn.title,body:Rn.body,fileContent:c(_e.generatedEntities,Rn.componentName,Rn.owner).map(er=>St.ZP.stringify(er)).join(`---
`)});at({type:"repository",url:_e.url,integrationType:_e.integrationType,pullRequest:{url:xn.link},locations:[{target:xn.location,entities:c(_e.generatedEntities,Rn.componentName,Rn.owner).map(er=>({kind:er.kind,namespace:er.metadata.namespace,name:er.metadata.name}))}]},{notRepeatable:!0})}catch(xn){(0,mt.BD)(xn),It(xn.message),Gt(!1)}},[_e.generatedEntities,_e.integrationType,_e.url,Kt,at]);return C.createElement(C.Fragment,null,C.createElement(r.Z,null,"You entered a link to a ",_e.integrationType," repository but a"," ",C.createElement("code",null,dn)," could not be found. Use this form to open a Pull Request that creates one."),!hn&&C.createElement(de,{onSubmit:On,defaultValues:{title:(Z=yn==null?void 0:yn.title)!=null?Z:"",body:(te=yn==null?void 0:yn.body)!=null?te:"",owner:((B=(T=_e.generatedEntities[0])==null?void 0:T.spec)==null?void 0:B.owner)||"",componentName:((me=(V=_e.generatedEntities[0])==null?void 0:V.metadata)==null?void 0:me.name)||"",useCodeowners:!1},render:({values:Rn,formState:xn,register:er,setValue:Kn})=>C.createElement(C.Fragment,null,Ot({values:Rn,formState:xn,register:er,setValue:Kn,groups:In!=null?In:[],groupsLoading:Ln}),C.createElement(Ct.Z,{marginTop:2},C.createElement(r.Z,{variant:"h6"},"Preview Pull Request")),C.createElement(S,{title:Rn.title,description:Rn.body,classes:{card:yt.previewCard,cardContent:yt.previewCardContent}}),C.createElement(Ct.Z,{marginTop:2,marginBottom:1},C.createElement(r.Z,{variant:"h6"},"Preview Entities")),C.createElement(he,{entities:c(_e.generatedEntities,Rn.componentName,Rn.owner),repositoryUrl:_e.url,classes:{card:yt.previewCard,cardContent:yt.previewCardContent}}),wt&&C.createElement(pe.Z,{error:!0},wt),C.createElement(Pt.Z,{container:!0,spacing:0},He&&C.createElement(J,{onClick:He,disabled:on}),C.createElement(xe,{type:"submit",disabled:Boolean(xn.errors.title||xn.errors.body||xn.errors.owner),loading:on},"Create PR")))}))},L=({analyzeResult:U,prepareResult:Z,onPrepare:te,onGoBack:T})=>{const[B,V]=(0,C.useState)((Z==null?void 0:Z.locations.map(yt=>yt.target))||[]),[me,_e]=Ye()(U==null?void 0:U.locations,yt=>yt.exists),at=(0,C.useCallback)(async()=>{te({type:"locations",locations:_e.filter(yt=>B.includes(yt.target))})},[_e,te,B]),He=yt=>{V(Tt=>Tt.includes(yt)?Tt.filter(Kt=>Kt!==yt):Tt.concat(yt))},Ot=()=>{V(yt=>yt.length<_e.length?_e.map(Tt=>Tt.target):[])};return C.createElement(C.Fragment,null,_e.length>0&&C.createElement(C.Fragment,null,C.createElement(r.Z,null,"Select one or more locations that are present in your git repository:"),C.createElement(we,{firstListItem:C.createElement(Y.Z,{dense:!0,button:!0,onClick:Ot},C.createElement(Ee.Z,null,C.createElement(it.Z,{edge:"start",checked:B.length===_e.length,indeterminate:B.length>0&&B.length<_e.length,tabIndex:-1,disableRipple:!0})),C.createElement(fe.Z,{primary:"Select All"})),onItemClick:He,locations:_e,locationListItemIcon:yt=>C.createElement(it.Z,{edge:"start",checked:B.includes(yt),tabIndex:-1,disableRipple:!0}),collapsed:!0})),me.length>0&&C.createElement(C.Fragment,null,C.createElement(r.Z,null,"These locations already exist in the catalog:"),C.createElement(we,{locations:me,locationListItemIcon:()=>C.createElement(en.Z,null),withLinks:!0,collapsed:!0})),C.createElement(Pt.Z,{container:!0,spacing:0},T&&C.createElement(J,{onClick:T}),C.createElement(xe,{disabled:B.length===0,onClick:at},"Review")))},D=({prepareResult:U,onReview:Z,onGoBack:te})=>{const T=(0,l.h_)(g.Ah),B=(0,l.h_)(l.Ds),V=(0,l.z$)(),me=B.getOptional("app.title")||"Backstage",[_e,at]=(0,C.useState)(!1),[He,Ot]=(0,C.useState)(),yt=!!(U.type==="locations"&&U.locations.some(Kt=>Kt.exists)),Tt=(0,C.useCallback)(async()=>{at(!0),V.captureEvent("click","import entity");try{let Kt=new Array;U.type==="locations"&&(Kt=await Promise.all(U.locations.filter(on=>on.exists).map(async on=>{var Gt;const wt=(0,Wt.eE)((Gt=on.entities[0])!=null?Gt:on);return await T.refreshEntity(wt),{target:on.target}})));const ln=await Promise.all(U.locations.filter(on=>!on.exists).map(async on=>{const Gt=await T.addLocation({type:"url",target:on.target});return{target:Gt.location.target,entities:Gt.entities}}));Z({...U,refreshed:Kt,locations:ln})}catch(Kt){(0,mt.BD)(Kt),U.type==="repository"&&Kt.message.startsWith("Location was added but has no entities specified yet")?Z({...U,locations:U.locations.map(ln=>({target:ln.target,entities:[]}))}):(Ot(Kt.message),at(!1))}},[U,Z,T,V]);return C.createElement(C.Fragment,null,U.type==="repository"&&C.createElement(C.Fragment,null,C.createElement(r.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",C.createElement(je.rU,{to:U.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},U.pullRequest.url)),C.createElement(r.Z,{paragraph:!0},"You can already import the location and ",me," will fetch the entities as soon as the Pull Request is merged.")),C.createElement(r.Z,null,yt?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),C.createElement(we,{locations:U.locations,locationListItemIcon:()=>C.createElement(en.Z,null)}),He&&C.createElement(pe.Z,{error:!0},He),C.createElement(Pt.Z,{container:!0,spacing:0},te&&C.createElement(J,{onClick:te,disabled:_e}),C.createElement(xe,{disabled:_e,loading:_e,onClick:()=>Tt()},yt?"Refresh":"Import")))};function R(U,Z){switch(U){case"single-location":return{...Z,prepare:()=>({stepLabel:C.createElement(Bt.Z,{optional:C.createElement(r.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:C.createElement(C.Fragment,null)})};case"multiple-locations":return{...Z,prepare:(te,T)=>te.analyzeResult.type!=="locations"?Z.prepare(te,T):{stepLabel:C.createElement(Bt.Z,{optional:C.createElement(r.Z,{variant:"caption"},"Discovered Locations: ",te.analyzeResult.locations.length)},"Select Locations"),content:C.createElement(L,{analyzeResult:te.analyzeResult,prepareResult:te.prepareResult,onPrepare:te.onPrepare,onGoBack:te.onGoBack})}};case"no-location":return{...Z,prepare:(te,T)=>te.analyzeResult.type!=="repository"?Z.prepare(te,T):{stepLabel:C.createElement(Bt.Z,null,"Create Pull Request"),content:C.createElement(b,{analyzeResult:te.analyzeResult,onPrepare:te.onPrepare,onGoBack:te.onGoBack,renderFormFields:({values:B,setValue:V,formState:me,groupsLoading:_e,groups:at,register:He})=>C.createElement(C.Fragment,null,C.createElement(Ct.Z,{marginTop:2},C.createElement(r.Z,{variant:"h6"},"Pull Request Details")),C.createElement(Oe.Z,{...ge(He("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(me.errors.title),required:!0}),C.createElement(Oe.Z,{...ge(He("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(me.errors.body),multiline:!0,required:!0}),C.createElement(Ct.Z,{marginTop:2},C.createElement(r.Z,{variant:"h6"},"Entity Configuration")),C.createElement(Oe.Z,{...ge(He("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(me.errors.componentName),required:!0}),!B.useCodeowners&&C.createElement(X,{name:"owner",errors:me.errors,options:at||[],loading:_e,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),C.createElement(Ue.Z,{control:C.createElement(it.Z,{...ge(He("useCodeowners")),onChange:(Ot,yt)=>{yt&&V("owner","")}}),label:C.createElement(C.Fragment,null,"Use ",C.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),C.createElement(pe.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return Z}}const W={analyze:(U,{apis:Z})=>({stepLabel:C.createElement(Bt.Z,null,"Select URL"),content:C.createElement(oe,{key:"analyze",analysisUrl:U.analysisUrl,onAnalysis:U.onAnalysis,disablePullRequest:!Z.catalogImportApi.preparePullRequest})}),prepare:U=>({stepLabel:C.createElement(Bt.Z,{optional:C.createElement(r.Z,{variant:"caption"},"Optional")},"Import Actions"),content:C.createElement(J,{onClick:U.onGoBack})}),review:U=>({stepLabel:C.createElement(Bt.Z,null,"Review"),content:C.createElement(D,{prepareResult:U.prepareResult,onReview:U.onReview,onGoBack:U.onGoBack})}),finish:U=>({stepLabel:C.createElement(Bt.Z,null,"Finish"),content:C.createElement(rt,{prepareResult:U.prepareResult,onReset:U.onReset})})},k=(0,At.Z)(()=>({stepperRoot:{padding:0}})),ye=U=>{const{initialUrl:Z,generateStepper:te=R,variant:T}=U,B=(0,l.h_)(Lt),V=k(),me=Ae({initialUrl:Z}),_e=(0,C.useMemo)(()=>te(me.activeFlow,W),[te,me.activeFlow]),at=He=>C.createElement(tt.Z,null,He.stepLabel,C.createElement(lt.Z,null,He.content));return C.createElement(je.rJ,{variant:T},C.createElement(Yt.Z,{classes:{root:V.stepperRoot},activeStep:me.activeStepNumber,orientation:"vertical"},at(_e.analyze(me,{apis:{catalogImportApi:B}})),at(_e.prepare(me,{apis:{catalogImportApi:B}})),at(_e.review(me,{apis:{catalogImportApi:B}})),at(_e.finish(me,{apis:{catalogImportApi:B}}))))},et=()=>{const U=(0,ot.Z)(),Z=(0,l.h_)(l.Ds),te=(0,rn.Z)(U.breakpoints.down("sm")),T=Z.getOptional("app.title")||"Backstage",B=[C.createElement(Pt.Z,{item:!0,xs:12,md:4,lg:6,xl:8},C.createElement($e,null)),C.createElement(Pt.Z,{item:!0,xs:12,md:8,lg:6,xl:4},C.createElement(ye,null))];return C.createElement(je.T3,{themeId:"home"},C.createElement(je.h4,{title:"Register an existing component"}),C.createElement(je.VY,null,C.createElement(je.yW,{title:`Start tracking your component in ${T}`},C.createElement(je.qt,null,"Start tracking your component in ",T," by adding it to the software catalog.")),C.createElement(Pt.Z,{container:!0,spacing:2},te?B:B.reverse())))}},52963:function(fn,Ut,e){"use strict";e.d(Ut,{N:function(){return je}});var l=e(34520),y=e(78373),g=e(56563),d=e(30705),m=e(18473),A=e(2784);function H(r,be){const ne=new Set([...getEntityRelations(r,RELATION_MEMBER_OF,{kind:"group"}),...r?[getCompoundEntityRef(r)]:[]].map(stringifyEntityRef)),ie=getEntityRelations(be,RELATION_OWNED_BY).map(stringifyEntityRef);for(const ve of ie)if(ne.has(ve))return!0;return!1}function je(r){const{entity:be,loading:ne,error:ie}=(0,y.a)(),{allowed:ve,loading:Y,error:Ee}=(0,g.gI)({permission:r,resourceRef:be?(0,l.eE)(be):void 0});return ne||Y?{loading:!0,allowed:!1}:ie?{loading:!1,allowed:!1,error:ie}:{loading:!1,allowed:ve,error:Ee}}},78373:function(fn,Ut,e){"use strict";e.d(Ut,{A:function(){return H},a:function(){return be},g:function(){return m},u:function(){return r}});var l=e(34520),y=e(30705),g=e(18473),d=e(2784);function m(ne,ie,ve){var Y;let Ee=((Y=ne==null?void 0:ne.relations)==null?void 0:Y.filter(fe=>fe.type===ie).map(fe=>(0,l.of)(fe.targetRef)))||[];return ve!=null&&ve.kind&&(Ee=Ee.filter(fe=>fe.kind.toLocaleLowerCase("en-US")===ve.kind.toLocaleLowerCase("en-US"))),Ee}const A=(0,g.CT)("entity-context"),H=ne=>{const{children:ie,entity:ve,loading:Y,error:Ee,refresh:fe}=ne,_={entity:ve,loading:Y,error:Ee,refresh:fe};return d.createElement(A.Provider,{value:(0,g.EI)({1:_})},d.createElement(y.fC,{attributes:{...ve?{entityRef:(0,l.eE)(ve)}:void 0}},ie))},je=ne=>React.createElement(H,{entity:ne.entity,loading:!Boolean(ne.entity),error:void 0,refresh:void 0,children:ne.children});function r(){const ne=(0,g.Vt)("entity-context");if(!ne)throw new Error("Entity context is not available");const ie=ne.atVersion(1);if(!ie)throw new Error("EntityContext v1 not available");if(!ie.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:ie.entity}}function be(){const ne=(0,g.Vt)("entity-context");if(!ne)throw new Error("Entity context is not available");const ie=ne.atVersion(1);if(!ie)throw new Error("EntityContext v1 not available");const{entity:ve,loading:Y,error:Ee,refresh:fe}=ie;return{entity:ve,loading:Y,error:Ee,refresh:fe}}},64304:function(fn,Ut,e){"use strict";e.d(Ut,{h$:function(){return ut.A},n3:function(){return l.n3},_i:function(){return U},tW:function(){return Zr},df:function(){return Ar},UO:function(){return It},ph:function(){return Ta},dq:function(){return Et},nl:function(){return ua},dx:function(){return qt},rI:function(){return cn},nN:function(){return or},u3:function(){return Fn},xE:function(){return dr},sL:function(){return tr},LH:function(){return kn},U_:function(){return Gr},pp:function(){return Oa},EW:function(){return Aa},Ah:function(){return b},hd:function(){return zt},wi:function(){return Qt},hF:function(){return ut.g},CV:function(){return T},$3:function(){return vr},p3:function(){return L},ce:function(){return ut.a},X2:function(){return ut.u},wp:function(){return dn},ZW:function(){return Rn},Uh:function(){return hn},eK:function(){return yn},CR:function(){return Ln}});var l=e(88285),y=e(30705),g=e(82394),d=e(2784),m=e(41156),A=e(60364),H=e(77277),je=e(4190),r=e(95544),be=e(90436),ne=e(60905),ie=e(21324),ve=e(5806),Y=e(79692),Ee=e(86619),fe=e(80030),_=e(15223),Ce=e(42494),I=e(29611),Pt=e(50581),Oe=e(61837),pe=e(15459),Se=e(55999),F=e(49378),Je=e(54506),Ct=e(94339),it=e(24579),Bt=e(38402),Ue=e(86136),tt=e(11776),lt=e(8629),Yt=e(79249),ot=e(38724),rn=e(99152),C=e(6487),At=e(49429),en=e(85256),tn=e(12231),K=e(9520),ct=e(36444),dt=e(80236),Ye=e(34520),ut=e(78373),Rt=e(76635),St=e(19126),ft=e.n(St),Mt=e(73557),mt=e(69294),xt=e(48760),Wt=e(90736),Lt=e(64279),Nt=e(18149),ge=e.n(Nt),Fe=e(829),Xe=e.n(Fe),Ke=e(72164),ht=e(38016),pt=e(88013),$t=e(99688),Xt=e(19996),Ft=e(25505),j=e(72779),ce=e.n(j);function Te(x){(0,d.useEffect)(()=>{x()},[])}function $e(x){const N=(0,d.useRef)(x);return N.current=x,(0,d.useMemo)(()=>Object.freeze({get current(){return N.current}}),[])}function Le(x){const N=$e(x);(0,d.useEffect)(()=>()=>{N.current()},[])}function G(x,N,ee,ae=0){const We=(0,d.useRef)(),Qe=(0,d.useRef)(),qe=(0,d.useRef)(),gt=()=>{We.current&&(clearTimeout(We.current),We.current=void 0),Qe.current&&(clearTimeout(Qe.current),Qe.current=void 0)};return Le(gt),(0,d.useMemo)(()=>{const f=()=>{if(!qe.current)return;const o=qe.current;qe.current=void 0,x.apply(o.this,o.args),gt()},n=function(...o){We.current&&clearTimeout(We.current),qe.current={args:o,this:this},We.current=setTimeout(f,ee),ae>0&&!Qe.current&&(Qe.current=setTimeout(f,ae))};return Object.defineProperties(n,{length:{value:x.length},name:{value:`${x.name||"anonymous"}__debounced__${ee}`}}),n},[ee,ae,...N])}function Ae(x,N,ee,ae=0){(0,d.useEffect)(G(x,N,ee,ae),N)}var Re=e(98685),xe=e(62367),J=e(72579),q=e.n(J),Me=e(18473),Ge=e(33375),we=e(21853),Ve=e(11640),rt=e(28347),oe=e(39412),X=e(27685),de=e(3440),he=e.n(de),S=e(10921),h=e(32272),c=e(47603);const b=(0,y.T0)({id:"plugin.catalog.service"}),L=(0,y.T0)({id:"catalog-react.starred-entities"});var D=Object.defineProperty,R=(x,N,ee)=>N in x?D(x,N,{enumerable:!0,configurable:!0,writable:!0,value:ee}):x[N]=ee,W=(x,N,ee)=>(R(x,typeof N!="symbol"?N+"":N,ee),ee);class k{constructor(){W(this,"starredEntities",new Set),W(this,"subscribers",new Set),W(this,"observable",new ObservableImpl(N=>(N.next(new Set(this.starredEntities)),this.subscribers.add(N),()=>{this.subscribers.delete(N)})))}async toggleStarred(N){this.starredEntities.delete(N)||this.starredEntities.add(N);for(const ee of this.subscribers)ee.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const ye=x=>{const N=(0,m.Z)(Qe=>Qe.breakpoints.down("md")),ee=(0,A.Z)(),[ae,We]=(0,d.useState)(!1);return N?d.createElement(d.Fragment,null,d.createElement(H.Z,{style:{marginTop:ee.spacing(1),marginLeft:ee.spacing(1)},onClick:()=>We(!0),startIcon:d.createElement(ct.Z,null)},"Filters"),d.createElement(je.ZP,{open:ae,onClose:()=>We(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},d.createElement(r.Z,{m:2},d.createElement(be.Z,{variant:"h6",component:"h2",style:{marginBottom:ee.spacing(1)}},"Filters"),x.children))):d.createElement(ne.Z,{item:!0,lg:2},x.children)},et=x=>d.createElement(ne.Z,{item:!0,xs:12,lg:10},x.children),U=x=>d.createElement(ne.Z,{container:!0,style:{position:"relative"}},x.children);U.Filters=ye,U.Content=et;function Z(x){return x.reduce((N,ee)=>({...N,...ee.getCatalogFilters?ee.getCatalogFilters():{}}),{})}function te(x){return N=>x.every(ee=>!ee.filterEntity||ee.filterEntity(N))}function T(x,N){var ee;const ae=(ee=x.metadata.annotations)==null?void 0:ee[Ye.M6];if(ae)try{const We=(0,Ye.Ou)(ae),Qe=N.byUrl(We.target);return{locationTargetUrl:We.target,integrationType:Qe==null?void 0:Qe.type}}catch{return}}var B=Object.defineProperty,V=(x,N,ee)=>N in x?B(x,N,{enumerable:!0,configurable:!0,writable:!0,value:ee}):x[N]=ee,me=(x,N,ee)=>(V(x,typeof N!="symbol"?N+"":N,ee),ee);class _e{constructor(N){this.value=N}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class at{constructor(N){this.value=N}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class He{constructor(N){this.values=N}filterEntity(N){return this.values.every(ee=>{var ae;return((ae=N.metadata.tags)!=null?ae:[]).includes(ee)})}toQueryValue(){return this.values}}class Ot{constructor(N){this.value=N}filterEntity(N){const ee=this.toUpperArray(this.value.split(/\s/)),ae=this.toUpperArray([N.metadata.tags]),We=this.toUpperArray([N.metadata.name,N.metadata.title]);for(const Qe of ee)if(ae.every(qe=>qe!==Qe)&&We.every(qe=>!qe.includes(Qe)))return!1;return!0}toUpperArray(N){return N.flat().filter(ee=>Boolean(ee)).map(ee=>ee.toLocaleUpperCase("en-US"))}}class yt{constructor(N){me(this,"values"),this.values=N.reduce((ee,ae)=>{try{return ee.push((0,Ye.eE)((0,Ye.of)(ae,{defaultKind:"Group"}))),ee}catch{return ee}},[])}filterEntity(N){return this.values.some(ee=>(0,ut.g)(N,Ye.S4).some(ae=>(0,Ye.eE)(ae)===ee))}toQueryValue(){return this.values}}class Tt{constructor(N){this.values=N}filterEntity(N){return this.values.some(ee=>{var ae;return((ae=N.spec)==null?void 0:ae.lifecycle)===ee})}toQueryValue(){return this.values}}class Kt{constructor(N){this.values=N}filterEntity(N){return this.values.some(ee=>N.metadata.namespace===ee)}toQueryValue(){return this.values}}class ln{constructor(N,ee,ae){this.value=N,this.isOwnedEntity=ee,this.isStarredEntity=ae}filterEntity(N){switch(this.value){case"owned":return this.isOwnedEntity(N);case"starred":return this.isStarredEntity(N);default:return!0}}toQueryValue(){return this.value}}class on{constructor(N){this.value=N}filterEntity(N){var ee;const ae=(ee=N.metadata.annotations)==null?void 0:ee["backstage.io/orphan"];return ae!==void 0&&this.value.toString()===ae}}class Gt{constructor(N){this.value=N}filterEntity(N){var ee,ae;const We=((ae=(ee=N==null?void 0:N.status)==null?void 0:ee.items)==null?void 0:ae.length)>0;return We!==void 0&&this.value===We}}const wt=(0,d.createContext)(void 0),It=x=>{const N=(0,Wt.default)(),ee=(0,y.h_)(b),[ae,We]=(0,d.useState)({}),Qe=(0,Mt.TH)(),qe=(0,d.useMemo)(()=>{var Ie;return(Ie=ft().parse(Qe.search,{ignoreQueryPrefix:!0}).filters)!=null?Ie:{}},[Qe]),[gt,f]=(0,d.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:n,error:o},v]=(0,mt.default)(async()=>{var Ie;const De=(0,Rt.compact)(Object.values(ae)),st=te(De),Dt=Z(De),un=Z((0,Rt.compact)(Object.values(gt.appliedFilters))),kt=Object.keys(ae).reduce((Vt,gn)=>{const En=ae[gn];return En!=null&&En.toQueryValue&&(Vt[gn]=En.toQueryValue()),Vt},{});if((0,Rt.isEqual)(un,Dt))f({appliedFilters:ae,backendEntities:gt.backendEntities,entities:gt.backendEntities.filter(st)});else{const Vt=await ee.getEntities({filter:Dt});f({appliedFilters:ae,backendEntities:Vt.items,entities:Vt.items.filter(st)})}if(N()){const Vt=ft().parse(Qe.search,{ignoreQueryPrefix:!0}),gn=ft().stringify({...Vt,filters:kt},{addQueryPrefix:!0,arrayFormat:"repeat"}),En=`${window.location.pathname}${gn}`;(Ie=window.history)==null||Ie.replaceState(null,document.title,En)}},[ee,qe,ae,gt],{loading:!0});(0,xt.Z)(v,10,[ae]);const w=(0,d.useCallback)(Ie=>{We(De=>{const st=typeof Ie=="function"?Ie(De):Ie;return{...De,...st}})},[]),le=(0,d.useMemo)(()=>({filters:gt.appliedFilters,entities:gt.entities,backendEntities:gt.backendEntities,updateFilters:w,queryParameters:qe,loading:n,error:o}),[gt,w,qe,n,o]);return d.createElement(wt.Provider,{value:le},x.children)};function dn(){const x=(0,d.useContext)(wt);if(!x)throw new Error("useEntityList must be used within EntityListProvider");return x}function hn(){var x;const N=(0,y.h_)(b),{filters:{kind:ee,type:ae},queryParameters:{type:We},updateFilters:Qe}=dn(),qe=(0,d.useMemo)(()=>[We].flat().filter(Boolean),[We]),[gt,f]=(0,d.useState)(qe.length?qe:(x=ae==null?void 0:ae.getTypes())!=null?x:[]);(0,d.useEffect)(()=>{qe.length&&f(qe)},[qe]);const[n,o]=(0,d.useState)([]),v=(0,d.useMemo)(()=>ee==null?void 0:ee.value,[ee]),{error:w,loading:le,value:Ie}=(0,Lt.default)(async()=>v?await N.getEntityFacets({filter:{kind:v},facets:["spec.type"]}).then(Dt=>Dt.facets["spec.type"]||[]):[],[v,N]),De=(0,d.useRef)(Ie);return(0,d.useEffect)(()=>{const st=De.current;if(De.current=Ie,le||!v||st===Ie||!Ie)return;const Dt=[...new Set(Xe()(Ie,kt=>-kt.count).map(kt=>kt.value.toLocaleLowerCase("en-US")))];o(Dt);const un=gt.filter(kt=>Dt.includes(kt));ge()(gt,un)||f(un)},[le,v,gt,f,Ie]),(0,d.useEffect)(()=>{Qe({type:gt.length?new at(gt):void 0})},[gt,Qe]),{loading:le,error:w,availableTypes:n,selectedTypes:gt,setSelectedTypes:f}}function yn(x,N){var ee,ae;const We=(ee=N==null?void 0:N.type)==null?void 0:ee.toLocaleLowerCase("en-US"),Qe=(ae=N==null?void 0:N.kind)==null?void 0:ae.toLocaleLowerCase("en-US"),qe=(0,y.h_)(b),{loading:gt,value:f,error:n}=(0,Lt.default)(async()=>{var o;const v=(o=x.relations)==null?void 0:o.filter(le=>(!We||le.type.toLocaleLowerCase("en-US")===We)&&(!Qe||(0,Ye.of)(le.targetRef).kind===Qe));if(!(v!=null&&v.length))return[];const{items:w}=await qe.getEntitiesByRefs({entityRefs:v.map(le=>le.targetRef)});return w.filter(le=>Boolean(le))},[x,We,Qe]);return{entities:f,loading:gt,error:n}}function bn(x){return typeof x=="string"?x:(0,Ye.eE)(x)}function Ln(){const x=(0,y.h_)(L),N=(0,Ke.Z)(x.starredEntitie$(),new Set),ee=(0,d.useCallback)(We=>N.has(bn(We)),[N]),ae=(0,d.useCallback)(We=>x.toggleStarred(bn(We)).then(),[x]);return{starredEntities:N,toggleStarredEntity:ae,isStarredEntity:ee}}function In(x){return typeof x=="string"?x:(0,Ye.eE)(x)}function On(x){const N=(0,y.h_)(L),[ee,ae]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{const Qe=N.starredEntitie$().subscribe({next(qe){ae(qe.has(In(x)))}});return()=>{Qe.unsubscribe()}},[x,N]),{toggleStarredEntity:(0,d.useCallback)(()=>N.toggleStarred(In(x)).then(),[x,N]),isStarredEntity:ee}}function Rn(){const x=(0,y.h_)(y.$4),{loading:N,value:ee}=(0,Lt.default)(async()=>{const{ownershipEntityRefs:We}=await x.getBackstageIdentity();return We},[]),ae=(0,d.useMemo)(()=>{const We=new Set(ee!=null?ee:[]);return Qe=>{const qe=(0,ut.g)(Qe,Ye.S4).map(Ye.eE);for(const gt of qe)if(We.has(gt))return!0;return!1}},[ee]);return(0,d.useMemo)(()=>({loading:N,isOwnedEntity:ae}),[N,ae])}function xn(){const x=(0,y.h_)(b),{error:N,loading:ee,value:ae}=(0,Lt.default)(async()=>await x.getEntityFacets({facets:["kind"]}).then(Qe=>{var qe;return((qe=Qe.facets.kind)==null?void 0:qe.map(gt=>gt.value).sort())||[]}),[x]);return{loading:ee,error:N,allKinds:ae!=null?ae:[]}}function er(x,N,ee){let ae=x;return N&&(ae=ae.filter(Qe=>N.some(qe=>qe.toLocaleLowerCase("en-US")===Qe.toLocaleLowerCase("en-US")))),ee&&!x.some(Qe=>Qe.toLocaleLowerCase("en-US")===ee.toLocaleLowerCase("en-US"))&&(ae=ae.concat([ee])),ae.sort().reduce((Qe,qe)=>(Qe[qe.toLocaleLowerCase("en-US")]=qe,Qe),{})}function Kn(x){var N,ee;const{filters:ae,queryParameters:{kind:We},updateFilters:Qe}=dn(),qe=(0,d.useMemo)(()=>[We].flat()[0],[We]),[gt,f]=(0,d.useState)((ee=qe!=null?qe:(N=ae.kind)==null?void 0:N.value)!=null?ee:x.initialFilter);(0,d.useEffect)(()=>{qe&&f(qe)},[qe]),(0,d.useEffect)(()=>{var w,le;(w=ae.kind)!=null&&w.value&&f((le=ae.kind)==null?void 0:le.value)},[ae.kind]),(0,d.useEffect)(()=>{Qe({kind:gt?new _e(gt):void 0})},[gt,Qe]);const{allKinds:n,loading:o,error:v}=xn();return{loading:o,error:v,allKinds:n!=null?n:[],selectedKind:gt,setSelectedKind:f}}const Zr=x=>{const{allowedKinds:N,hidden:ee,initialFilter:ae="component"}=x,We=(0,y.h_)(y.$v),{error:Qe,allKinds:qe,selectedKind:gt,setSelectedKind:f}=Kn({initialFilter:ae});if((0,d.useEffect)(()=>{Qe&&We.post({message:"Failed to load entity kinds",severity:"error"})},[Qe,We]),Qe)return null;const n=er(qe,N,gt),o=Object.keys(n).map(v=>({value:v,label:n[v]}));return ee?null:d.createElement(r.Z,{pb:1,pt:1},d.createElement(dt.Ph,{label:"Kind",items:o,selected:gt.toLocaleLowerCase("en-US"),onChange:v=>f(String(v))}))},ur=d.createElement(Ft.Z,{fontSize:"small"}),$r=d.createElement(Xt.Z,{fontSize:"small"});function Ir({selected:x}){return d.createElement(ie.Z,{icon:ur,checkedIcon:$r,checked:x})}const Wr=(0,d.memo)(x=>{const{selected:N,value:ee,availableOptions:ae,showCounts:We}=x,Qe=We?`${ee} (${ae==null?void 0:ae[ee]})`:ee;return d.createElement(ve.Z,{control:d.createElement(Ir,{selected:N}),label:Qe,onClick:qe=>qe.preventDefault()})}),Jn=(0,Y.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function br(x){const N=Jn();return d.createElement(Ee.Z,{variant:"outlined",...x,className:ce()(N.input,x.className)})}function Mr(x){var N,ee;const{label:ae,name:We,path:Qe,showCounts:qe,Filter:gt,InputProps:f,initialSelectedOptions:n=[]}=x,{updateFilters:o,filters:v,queryParameters:{[We]:w}}=dn(),le=(0,y.h_)(b),{value:Ie}=(0,Lt.default)(async()=>{var gn;const En=Qe,{facets:Yn}=await le.getEntityFacets({facets:[En],filter:(gn=v.kind)==null?void 0:gn.getCatalogFilters()});return Object.fromEntries(Yn[En].map(({value:$n,count:Xn})=>[$n,Xn]))},[v.kind]),De=(0,d.useMemo)(()=>[w].flat().filter(Boolean),[w]),[st,Dt]=(0,d.useState)(De.length?De:(ee=(N=v[We])==null?void 0:N.values)!=null?ee:n);(0,d.useEffect)(()=>{De.length&&Dt(De)},[De]);const un=Object.keys(Ie!=null?Ie:{}),kt=st.length&&un.length;(0,d.useEffect)(()=>{o({[We]:kt?new gt(st):void 0})},[We,kt,st,gt,o]);const Vt=v[We];return Vt&&typeof Vt=="object"&&!("values"in Vt)||!un.length||un.length<=1?null:d.createElement(r.Z,{pb:1,pt:1},d.createElement(be.Z,{variant:"button",component:"label"},ae,d.createElement(pt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:un,value:st,onChange:(gn,En)=>Dt(En),renderOption:(gn,{selected:En})=>d.createElement(Wr,{selected:En,value:gn,availableOptions:Ie,showCounts:!!qe}),size:"small",popupIcon:d.createElement(ht.Z,{"data-testid":`${String(We)}-picker-expand`}),renderInput:gn=>d.createElement(br,{...gn,...f})})))}const wr=(0,Y.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Ar=x=>{const{initialFilter:N=[]}=x,ee=wr();return d.createElement(Mr,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Tt,InputProps:{className:ee.input},initialSelectedOptions:N})};function vr(x,N){const ee=N==null?void 0:N.defaultKind;let ae,We,Qe;return"metadata"in x?(ae=x.kind,We=x.metadata.namespace,Qe=x.metadata.name):(ae=x.kind,We=x.namespace,Qe=x.name),(We===void 0||We==="")&&(We=Ye.zG),(N==null?void 0:N.defaultNamespace)!==void 0?(N==null?void 0:N.defaultNamespace)===We&&(We=void 0):We===Ye.zG&&(We=void 0),ae=ae.toLocaleLowerCase("en-US"),ae=ee&&ee.toLocaleLowerCase("en-US")===ae?void 0:ae,`${ae?`${ae}:`:""}${We?`${We}/`:""}${Qe}`}function Lr(x,N){for(const ee of["spec.profile.displayName","metadata.title"]){const ae=q()(x,ee);if(ae&&typeof ae=="string")return ae}return N}function hr({enabled:x}){const N=(0,y.h_)(b),[ee]=(0,d.useState)(async()=>{if(!x)return[];const ae="relations.ownedBy";return N.getEntityFacets({facets:[ae]}).then(We=>We.facets[ae].map(Qe=>Qe.value).map(Qe=>{const{kind:qe,name:gt,namespace:f}=(0,Ye.of)(Qe);return{apiVersion:"backstage.io/v1beta1",kind:qe,metadata:{name:gt,namespace:f}}}).sort((Qe,qe)=>(Qe.metadata.namespace||"").localeCompare(qe.metadata.namespace||"","en-US")||Qe.metadata.name.localeCompare(qe.metadata.name,"en-US")||Qe.kind.localeCompare(qe.kind,"en-US"))).catch(()=>[])});return(0,mt.default)(async(ae,We)=>{var Qe;const qe=await ee;if(!qe)return{items:[]};const gt=(Qe=We==null?void 0:We.limit)!=null?Qe:20,{text:f,start:n}=Nn(ae),o=qe.filter(w=>jr(f,w)),v=n+gt;return{items:o.slice(0,v),...xr({entities:o,limit:v,payload:{text:f,start:v}})}},[ee],{loading:!0,value:{items:[]}})}function Nn(x){return Rr(x)&&x.cursor?JSON.parse(atob(x.cursor)):{text:x.text||"",start:0}}function Rr(x){return!!x.cursor}function xr({entities:x,limit:N,payload:ee}){return x.length>N?{cursor:btoa(JSON.stringify(ee))}:{}}function jr(x,N){var ee;const ae=x.trim();return N.kind.includes(ae)||((ee=N.metadata.namespace)==null?void 0:ee.includes(ae))||N.metadata.name.includes(ae)}function kr(){const x=(0,y.h_)(b);return(0,mt.default)(async(N,ee)=>{var ae;const We=N,Qe=N,qe=(ae=ee==null?void 0:ee.limit)!=null?ae:20;if(Qe.cursor){const f=await x.queryEntities({cursor:Qe.cursor,limit:qe});return{cursor:f.pageInfo.nextCursor,items:[...Qe.items,...f.items]}}const gt=await x.queryEntities({fullTextFilter:{term:We.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:qe});return{cursor:gt.pageInfo.nextCursor,items:gt.items}},[],{loading:!0})}function Nr({mode:x,initialSelectedOwnersRefs:N}){const ee=x==="owners-only",ae=kr(),We=hr({enabled:ee}),[Qe,qe]=ee?We:ae;return[Qe,qe,Br({enabled:!ee,initialSelectedOwnersRefs:N})]}function Br({enabled:x,initialSelectedOwnersRefs:N}){const ee=(0,d.useRef)({}),ae=(0,y.h_)(b),[,We]=(0,mt.default)(async()=>{(await ae.getEntitiesByRefs({entityRefs:N})).items.forEach(qe=>{qe&&(ee.current[(0,Ye.eE)(qe)]=qe)})},[]);return Te(()=>{x&&N.length>0&&We()}),{getEntity:Qe=>ee.current[Qe],setEntity:Qe=>{ee.current[(0,Ye.eE)(Qe)]=Qe}}}const se=(0,Y.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),ze=d.createElement(Ft.Z,{fontSize:"small"}),nt=d.createElement(Xt.Z,{fontSize:"small"}),Et=x=>{var N,ee,ae;const We=se(),{mode:Qe="owners-only"}=x||{},{updateFilters:qe,filters:gt,queryParameters:{owners:f}}=dn(),[n,o]=(0,d.useState)(""),v=(0,d.useMemo)(()=>[f].flat().filter(Boolean),[f]),[w,le]=(0,d.useState)(v.length?v:(ee=(N=gt.owners)==null?void 0:N.values)!=null?ee:[]),[{value:Ie,loading:De},st,Dt]=Nr({mode:Qe,initialSelectedOwnersRefs:w});Ae(()=>st({text:n}),[n,st],250);const un=(Ie==null?void 0:Ie.items)||[];return(0,d.useEffect)(()=>{if(v.length){const kt=new yt(v);le(kt.values)}},[v]),(0,d.useEffect)(()=>{qe({owners:w.length?new yt(w):void 0})},[w,qe]),["user","group"].includes(((ae=gt.kind)==null?void 0:ae.value.toLocaleLowerCase("en-US"))||"")?null:d.createElement(r.Z,{pb:1,pt:1},d.createElement(be.Z,{variant:"button",component:"label"},"Owner",d.createElement(pt.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:De,options:un,value:w,getOptionSelected:(kt,Vt)=>typeof Vt=="string"?(0,Ye.eE)(kt)===Vt:kt===Vt,getOptionLabel:kt=>{const Vt=typeof kt=="string"?Dt.getEntity(kt)||(0,Ye.of)(kt,{defaultKind:"group",defaultNamespace:"default"}):kt;return Lr(Vt,vr(Vt))},onChange:(kt,Vt)=>{o(""),le(Vt.map(gn=>{const En=typeof gn=="string"?gn:(0,Ye.eE)(gn);return typeof gn!="string"&&Dt.setEntity(gn),En}))},filterOptions:kt=>kt,renderOption:(kt,{selected:Vt})=>{const gn=kt.kind.toLocaleLowerCase("en-US")==="group";return d.createElement(ve.Z,{control:d.createElement(ie.Z,{icon:ze,checkedIcon:nt,checked:Vt}),onClick:En=>En.preventDefault(),label:d.createElement(r.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},gn?d.createElement(xe.Z,{fontSize:"small"}):d.createElement(Re.Z,{fontSize:"small"}),"\xA0",Lr(kt,vr(kt,{defaultKind:kt.kind})))})},size:"small",popupIcon:d.createElement(ht.Z,{"data-testid":"owner-picker-expand"}),renderInput:kt=>d.createElement(Ee.Z,{...kt,className:We.input,onChange:Vt=>{o(Vt.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:kt=>{const Vt=kt.currentTarget;Math.abs(Vt.scrollHeight-Vt.clientHeight-Vt.scrollTop)<1&&(Ie!=null&&Ie.cursor)&&st({items:Ie.items,cursor:Ie.cursor})},"data-testid":"owner-picker-listbox"}})))},Qt=(0,Me.uW)("catalog:entity-route-ref",()=>(0,y.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function zt(x){var N,ee;return{kind:x.kind.toLocaleLowerCase("en-US"),namespace:(ee=(N=x.metadata.namespace)==null?void 0:N.toLocaleLowerCase("en-US"))!=null?ee:Ye.zG,name:x.metadata.name}}const qt=(0,d.forwardRef)((x,N)=>{var ee;const{entityRef:ae,defaultKind:We,title:Qe,children:qe,...gt}=x,f=(0,y.tg)(Qt);let n,o,v;if(typeof ae=="string"){const De=(0,Ye.of)(ae);n=De.kind,o=De.namespace,v=De.name}else"metadata"in ae?(n=ae.kind,o=ae.metadata.namespace,v=ae.metadata.name):(n=ae.kind,o=ae.namespace,v=ae.name);n=n.toLocaleLowerCase("en-US"),o=(ee=o==null?void 0:o.toLocaleLowerCase("en-US"))!=null?ee:Ye.zG;const w={kind:n,namespace:o,name:v},le=vr({kind:n,namespace:o,name:v},{defaultKind:We}),Ie=d.createElement(dt.rU,{...gt,ref:N,to:f(w)},qe,!qe&&(Qe!=null?Qe:le));return Qe?d.createElement(fe.ZP,{title:le},Ie):Ie});function mn(x){const{entityRefs:N,defaultKind:ee,getTitle:ae,...We}=x,Qe=(0,y.h_)(b),{value:qe=new Array,loading:gt,error:f}=(0,Lt.default)(async()=>{const n=N.reduce((v,w)=>typeof w=="object"&&"metadata"in w?v:[...v,(0,Ye.of)(w)],new Array),o=N.filter(v=>typeof v=="object"&&"metadata"in v);return n.length>0?[...(await Qe.getEntities({filter:n.map(v=>({kind:v.kind,"metadata.namespace":v.namespace,"metadata.name":v.name}))})).items,...o]:o},[N]);return gt?d.createElement(dt.Ex,null):f?d.createElement(dt.yu,{error:f}):d.createElement(d.Fragment,null,qe.map((n,o)=>d.createElement(d.Fragment,{key:o},o>0&&", ",d.createElement(qt,{...We,defaultKind:ee,entityRef:n,title:ae(n)}))))}function cn(x){const{entityRefs:N,defaultKind:ee,fetchEntities:ae,getTitle:We,...Qe}=x;return ae?d.createElement(mn,{...Qe,defaultKind:ee,entityRefs:N,getTitle:We}):d.createElement(d.Fragment,null,N.map((qe,gt)=>d.createElement(d.Fragment,{key:gt},gt>0&&", ",d.createElement(qt,{...Qe,defaultKind:ee,entityRef:qe,title:We?We(qe):void 0}))))}const an=x=>{const N=useRouteRef(Qt);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:N(getCompoundEntityRef(x.entity))},React.createElement(InfoIcon,null))},An=x=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${x.email}`,to:`mailto:${x.email}`},React.createElement(EmailIcon,null)),_n=x=>{var N;const ee=(N=x.entity.spec.profile)==null?void 0:N.email;return ee?React.createElement(An,{email:ee}):null},Cn=x=>{var N;const ee=(N=x.entity.spec.profile)==null?void 0:N.email;return ee?React.createElement(An,{email:ee}):null},Un=(0,Y.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Tn=4,Bn=x=>{var N,ee,ae;const{entityRef:We,children:Qe,delayTime:qe=500}=x,gt=Un(),f=useApiHolder(),n=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[o,v]=useState(!1),w=useMemo(()=>debounce(()=>v(!0),qe),[qe]),[{loading:le,error:Ie,value:De},st]=useAsyncFn(async()=>{const un=f.get(b);if(un){const kt=await un.getEntityByRef(We);if(!kt)throw new Error(`${We} not found`);return kt}},[f,We]),Dt=()=>{v(!1),w.cancel()};return useEffect(()=>{n.isOpen&&!De&&!Ie&&!le&&st()},[n.isOpen,st,De,Ie,le]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:w},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(n)},Qe)),o&&React.createElement(HoverPopover,{PaperProps:{className:gt.popoverPaper},...bindPopover(n),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:Dt},React.createElement(Card,null,React.createElement(CardContent,null,Ie&&React.createElement(ResponseErrorPanel,{error:Ie}),le&&React.createElement(Progress,null),De&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},De.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},De.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},De.kind),De.metadata.description&&React.createElement(Typography,{className:gt.descriptionTypography,paragraph:!0},De.metadata.description),React.createElement(Typography,null,(N=De.spec)==null?void 0:N.type),React.createElement(Box,{marginTop:"0.5em"},(De.metadata.tags||[]).slice(0,Tn).map(un=>React.createElement(Chip,{key:un,size:"small",label:un})),((ee=De.metadata.tags)==null?void 0:ee.length)&&((ae=De.metadata.tags)==null?void 0:ae.length)>Tn&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Ie&&De&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(De)&&React.createElement(Cn,{entity:De}),isGroupEntity(De)&&React.createElement(_n,{entity:De}),React.createElement(an,{entity:De}))))))},Sn=(0,Y.Z)(x=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),or=()=>{var x,N;const ee=Sn(),{filters:ae,updateFilters:We}=dn(),[Qe,qe]=(0,d.useState)((N=(x=ae.text)==null?void 0:x.value)!=null?N:"");return(0,xt.Z)(()=>{We({text:Qe.length?new Ot(Qe):void 0})},250,[Qe,We]),d.createElement(_.Z,{className:ee.searchToolbar},d.createElement(Ce.Z,null,d.createElement(I.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:ee.input,placeholder:"Search",autoComplete:"off",onChange:gt=>qe(gt.target.value),value:Qe,startAdornment:d.createElement(Pt.Z,{position:"start"},d.createElement(we.Z,null)),endAdornment:d.createElement(Pt.Z,{position:"end"},d.createElement(Oe.Z,{"aria-label":"clear search",onClick:()=>qe(""),edge:"end",disabled:Qe.length===0},d.createElement(Ge.Z,null)))})))},Wn=Object.freeze({createEntityRefColumn(x){const{defaultKind:N}=x;function ee(ae){var We;return((We=ae.metadata)==null?void 0:We.title)||vr(ae,{defaultKind:N})}return{title:"Name",highlight:!0,customFilterAndSearch(ae,We){return ee(We).includes(ae)},customSort(ae,We){return ee(ae).localeCompare(ee(We))},render:ae=>{var We;return d.createElement(qt,{entityRef:ae,defaultKind:N,title:(We=ae.metadata)==null?void 0:We.title})}}},createEntityRelationColumn(x){const{title:N,relation:ee,defaultKind:ae,filter:We}=x;function Qe(gt){return(0,ut.g)(gt,ee,We)}function qe(gt){return Qe(gt).map(f=>vr(f,{defaultKind:ae})).join(", ")}return{title:N,customFilterAndSearch(gt,f){return qe(f).includes(gt)},customSort(gt,f){return qe(gt).localeCompare(qe(f))},render:gt=>d.createElement(cn,{entityRefs:Qe(gt),defaultKind:ae})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Ye.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Ye.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Ye.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:x=>d.createElement(dt.Or,{text:x.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),zn=[Wn.createEntityRefColumn({defaultKind:"system"}),Wn.createDomainColumn(),Wn.createOwnerColumn(),Wn.createMetadataDescriptionColumn()],sr=[Wn.createEntityRefColumn({defaultKind:"component"}),Wn.createSystemColumn(),Wn.createOwnerColumn(),Wn.createSpecTypeColumn(),Wn.createSpecLifecycleColumn(),Wn.createMetadataDescriptionColumn()],jn=(0,Y.Z)(x=>({empty:{padding:x.spacing(2),display:"flex",justifyContent:"center"}})),Fn=x=>{const{entities:N,title:ee,emptyContent:ae,variant:We="gridItem",columns:Qe,tableOptions:qe={}}=x,gt=jn(),f={minWidth:"0",width:"100%"};return We==="gridItem"&&(f.height="calc(100% - 10px)"),d.createElement(dt.iA,{columns:Qe,title:ee,style:f,emptyContent:ae&&d.createElement("div",{className:gt.empty},ae),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...qe},data:N})};Fn.columns=Wn,Fn.systemEntityColumns=zn,Fn.componentEntityColumns=sr;const Hn=(0,Y.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),dr=x=>{const N=Hn();return d.createElement(Mr,{label:"Tags",name:"tags",path:"metadata.tags",Filter:He,showCounts:x.showCounts,InputProps:{className:N.input}})},tr=x=>{var N;const{hidden:ee,initialFilter:ae}=x,We=(0,y.h_)(y.$v),{error:Qe,availableTypes:qe,selectedTypes:gt,setSelectedTypes:f}=hn();if((0,d.useEffect)(()=>{Qe&&We.post({message:"Failed to load entity types",severity:"error"}),ae&&f([ae])},[Qe,We,ae,f]),qe.length===0||Qe)return null;const n=[{value:"all",label:"all"},...qe.map(o=>({value:o,label:o}))];return ee?null:d.createElement(r.Z,{pb:1,pt:1},d.createElement(dt.Ph,{label:"Type",items:n,selected:(N=n.length>1?gt[0]:void 0)!=null?N:"all",onChange:o=>f(o==="all"?[]:[String(o)])}))},Pr=(0,pe.Z)({root:{color:"#f3ba37"}})(Ve.Z),kn=x=>{const{toggleStarredEntity:N,isStarredEntity:ee}=On(x.entity);return d.createElement(Oe.Z,{"aria-label":"favorite",color:"inherit",...x,onClick:()=>N()},d.createElement(fe.ZP,{title:ee?"Remove from favorites":"Add to favorites"},ee?d.createElement(Pr,null):d.createElement(rt.Z,null)))},Ze=oe.Z;function u(x,N){if(x)return x.toLocaleLowerCase("en-US");if(N)try{return(0,Ye.of)(N).kind.toLocaleLowerCase("en-US")}catch{return}}function s(x,N){const ee=(0,y.qD)(),ae=u(x,N);return ae&&ee.getSystemIcon(`kind:${ae}`)||Ze}function i(x){const{kind:N,entityRef:ee,...ae}=x,We=s(N,ee);return d.createElement(We,{...ae})}const p=(0,Y.Z)(x=>({node:{fill:x.palette.grey[300],stroke:x.palette.grey[300],"&.primary":{fill:x.palette.primary.light,stroke:x.palette.primary.light},"&.secondary":{fill:x.palette.secondary.light,stroke:x.palette.secondary.light}},text:{fill:x.palette.getContrastText(x.palette.grey[300]),"&.primary":{fill:x.palette.primary.contrastText},"&.secondary":{fill:x.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function P(x){const N=(0,y.h_)(b),ee=(0,Ye.eE)(x),{loading:ae,error:We,value:Qe}=(0,Lt.default)(async()=>{const qe=await N.getEntityAncestors({entityRef:ee}),gt=new Array,f=new Array;for(const n of qe.items){const o=(0,Ye.eE)(n.entity),v=o===qe.rootEntityRef;gt.push({id:o,root:v,...n.entity});for(const w of n.parentEntityRefs)f.push({from:o,to:w})}return{nodes:gt,edges:f}},[ee]);return{loading:ae,error:We,nodes:(Qe==null?void 0:Qe.nodes)||[],edges:(Qe==null?void 0:Qe.edges)||[]}}function $({node:x}){const N=p(),ee=(0,Mt.s0)(),ae=(0,y.tg)(Qt),[We,Qe]=(0,d.useState)(0),[qe,gt]=(0,d.useState)(0),f=(0,d.useRef)(null);(0,d.useLayoutEffect)(()=>{if(f.current){let{height:st,width:Dt}=f.current.getBBox();st=Math.round(st),Dt=Math.round(Dt),(st!==qe||Dt!==We)&&(Qe(Dt),gt(st))}},[We,qe]);const n=10,o=qe,v=o+n,w=v+We+n*2,le=qe+n*2,Ie=x.metadata.title||(x.kind&&x.metadata.name&&x.metadata.namespace?vr({kind:x.kind,name:x.metadata.name,namespace:x.metadata.namespace||""}):x.id),De=()=>{ee(ae({kind:x.kind,namespace:x.metadata.namespace||Ye.zG,name:x.metadata.name}))};return d.createElement("g",{onClick:De,className:N.clickable},d.createElement("rect",{className:ce()(N.node,x.root?"secondary":"primary"),width:w,height:le,rx:10}),d.createElement(i,{kind:x.kind,y:n,x:n,width:o,height:o,className:ce()(N.text,x.root?"secondary":"primary")}),d.createElement("text",{ref:f,className:ce()(N.text,x.root?"secondary":"primary"),y:le/2,x:v+(We+n*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Ie))}function re(x){const{loading:N,error:ee,nodes:ae,edges:We}=P(x.entity);return N?d.createElement(dt.Ex,null):ee?d.createElement(dt.Gk,{error:ee}):d.createElement(d.Fragment,null,d.createElement(Se.Z,{variant:"h2"},"Ancestry"),d.createElement(Se.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",d.createElement(dt.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),d.createElement(r.Z,{mt:4},d.createElement(dt.mn,{nodes:ae,edges:We,renderNode:$,direction:dt.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const ue=(0,Y.Z)(x=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:x.spacing(2)},helpIcon:{marginLeft:x.spacing(1),color:x.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Ne(x){const N=ue();return d.createElement(F.Z,{...x,primaryTypographyProps:{className:N.monospace},secondaryTypographyProps:{className:N.monospace}})}function vt(x){const N=ue();return d.createElement(Je.Z,{className:N.monospace},x.children)}function Ht(x){return d.createElement(r.Z,{mt:2},d.createElement(Ct.Z,{variant:"outlined"},d.createElement(it.Z,null,d.createElement(be.Z,{variant:"h6",gutterBottom:!0},x.title,x.helpLink&&d.createElement(vn,{to:x.helpLink})),x.children)))}function pn(x){if(x.match(/^url:https?:\/\//))return x.slice(4);if(x.match(/^https?:\/\//))return x}function Jt(x){const[N,ee]=x.entry,ae=pn(ee);return d.createElement(Bt.Z,null,x.indent&&d.createElement(Ue.Z,null),d.createElement(Ne,{primary:N,secondary:ae?d.createElement(dt.rU,{to:ae},ee):ee}))}function vn(x){const N=ue();return d.createElement(dt.rU,{to:x.to,className:N.helpIcon},d.createElement(X.Z,{fontSize:"inherit"}))}const nn=(0,Y.Z)({root:{display:"flex",flexDirection:"column"}});function Zn(x){var N,ee;const ae=(0,y.h_)(b),We=(0,Ye.eE)(x),Qe=(N=x.metadata.annotations)==null?void 0:N[Ye.P1],qe=(ee=x.metadata.annotations)==null?void 0:ee[Ye.q1],{loading:gt,error:f,value:n}=(0,Lt.default)(async()=>!Qe&&!qe?[]:(await ae.getEntities({filter:[...Qe?[{[`metadata.annotations.${Ye.P1}`]:Qe}]:[],...qe?[{[`metadata.annotations.${Ye.q1}`]:qe}]:[]]})).items,[Qe,qe]);return{loading:gt,error:f,location:Qe,originLocation:qe,colocatedEntities:n==null?void 0:n.filter(o=>(0,Ye.eE)(o)!==We)}}function Mn(x){return d.createElement(tt.Z,{dense:!0},x.header&&d.createElement(Jt,{key:"header",entry:x.header}),x.entities.map(N=>d.createElement(Bt.Z,{key:(0,Ye.eE)(N)},d.createElement(Ue.Z,null,d.createElement(i,{kind:N.kind})),d.createElement(Ne,{primary:d.createElement(qt,{entityRef:N})}))))}function lr(x){const{entity:N}=x,{loading:ee,error:ae,location:We,originLocation:Qe,colocatedEntities:qe}=Zn(N);if(ee)return d.createElement(dt.Ex,null);if(ae)return d.createElement(dt.Gk,{error:ae});if(!We&&!Qe)return d.createElement($t.Z,{severity:"warning"},"Entity had no location information.");if(!(qe!=null&&qe.length))return d.createElement($t.Z,{severity:"info"},"There were no other entities on this location.");if(We===Qe)return d.createElement(Mn,{entities:qe});const gt=qe.filter(n=>{var o;return((o=n.metadata.annotations)==null?void 0:o[Ye.P1])===We}),f=qe.filter(n=>{var o;return((o=n.metadata.annotations)==null?void 0:o[Ye.q1])===Qe});return d.createElement(d.Fragment,null,gt.length>0&&d.createElement(Mn,{entities:gt,header:["At the same location",We]}),f.length>0&&d.createElement(Mn,{entities:f,header:["At the same origin",Qe]}))}function Gn(x){const N=nn();return d.createElement(d.Fragment,null,d.createElement(Se.Z,{variant:"h2"},"Colocated"),d.createElement(Se.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),d.createElement("div",{className:N.root},d.createElement(lr,{entity:x.entity})))}function yr(x){return Object.fromEntries([...Object.entries(x)].sort((N,ee)=>N[0]<ee[0]?-1:1))}function Fr(x){return d.createElement(d.Fragment,null,d.createElement(Se.Z,{variant:"h2"},"Entity as JSON"),d.createElement(Se.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),d.createElement(Se.Z,null,d.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},d.createElement(dt.Oi,{text:JSON.stringify(yr(x.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Qn=(0,Y.Z)({root:{display:"flex",flexDirection:"column"}});function Vn(x){var N,ee;const ae=Qn(),{apiVersion:We,kind:Qe,metadata:qe,spec:gt,relations:f=[],status:n={}}=x.entity,o=he()(Xe()(f,v=>v.targetRef),"type");return d.createElement(d.Fragment,null,d.createElement(Se.Z,{variant:"h2"},"Overview"),d.createElement("div",{className:ae.root},d.createElement(Ht,{title:"Identity"},d.createElement(tt.Z,{dense:!0},d.createElement(Bt.Z,null,d.createElement(Ne,{primary:"apiVersion",secondary:We})),d.createElement(Bt.Z,null,d.createElement(Ne,{primary:"kind",secondary:Qe})),(gt==null?void 0:gt.type)&&d.createElement(Bt.Z,null,d.createElement(Ne,{primary:"spec.type",secondary:gt.type})),qe.uid&&d.createElement(Bt.Z,null,d.createElement(Ne,{primary:"uid",secondary:qe.uid})),qe.etag&&d.createElement(Bt.Z,null,d.createElement(Ne,{primary:"etag",secondary:qe.etag})))),d.createElement(Ht,{title:"Metadata"},!!Object.keys(qe.annotations||{}).length&&d.createElement(tt.Z,{dense:!0,subheader:d.createElement(vt,null,"Annotations",d.createElement(vn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(qe.annotations).map(v=>d.createElement(Jt,{key:v[0],indent:!0,entry:v}))),!!Object.keys(qe.labels||{}).length&&d.createElement(tt.Z,{dense:!0,subheader:d.createElement(vt,null,"Labels")},Object.entries(qe.labels).map(v=>d.createElement(Jt,{key:v[0],indent:!0,entry:v}))),!!((N=qe.tags)!=null&&N.length)&&d.createElement(tt.Z,{dense:!0,subheader:d.createElement(vt,null,"Tags")},qe.tags.map((v,w)=>d.createElement(Bt.Z,{key:`${v}-${w}`},d.createElement(Ue.Z,null),d.createElement(Ne,{primary:v}))))),!!f.length&&d.createElement(Ht,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(o).map(([v,w],le)=>d.createElement("div",{key:le},d.createElement(tt.Z,{dense:!0,subheader:d.createElement(vt,null,v)},w.map(Ie=>d.createElement(Bt.Z,{key:Ie.targetRef},d.createElement(Ue.Z,null,d.createElement(i,{entityRef:Ie.targetRef})),d.createElement(Ne,{primary:d.createElement(qt,{entityRef:Ie.targetRef})}))))))),!!((ee=n.items)!=null&&ee.length)&&d.createElement(Ht,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},n.items.map((v,w)=>d.createElement("div",{key:w},d.createElement(be.Z,null,v.level,": ",v.type),d.createElement(r.Z,{ml:2},v.message))))))}function nr(x){return d.createElement(d.Fragment,null,d.createElement(Se.Z,{variant:"h2"},"Entity as YAML"),d.createElement(Se.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),d.createElement(Se.Z,null,d.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},d.createElement(dt.Oi,{text:S.ZP.stringify(yr(x.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Ur=(0,Y.Z)(x=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:x.palette.background.paper},tabs:{borderRight:`1px solid ${x.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Sr(x){const{children:N,value:ee,index:ae,...We}=x,Qe=Ur();return d.createElement("div",{role:"tabpanel",hidden:ee!==ae,id:`vertical-tabpanel-${ae}`,"aria-labelledby":`vertical-tab-${ae}`,className:Qe.tabContents,...We},ee===ae&&d.createElement(r.Z,{pl:3,pr:3},N))}function fr(x){return{id:`vertical-tab-${x}`,"aria-controls":`vertical-tabpanel-${x}`}}function Gr(x){const N=Ur(),[ee,ae]=d.useState(0);return(0,d.useEffect)(()=>{ae(0)},[x.open]),x.entity?d.createElement(lt.Z,{fullWidth:!0,maxWidth:"xl",open:x.open,onClose:x.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:N.fullHeightDialog}},d.createElement(Yt.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),d.createElement(ot.Z,{dividers:!0},d.createElement("div",{className:N.root},d.createElement(rn.Z,{orientation:"vertical",variant:"scrollable",value:ee,onChange:(We,Qe)=>ae(Qe),"aria-label":"Inspector options",className:N.tabs},d.createElement(C.Z,{label:"Overview",...fr(0)}),d.createElement(C.Z,{label:"Ancestry",...fr(1)}),d.createElement(C.Z,{label:"Colocated",...fr(2)}),d.createElement(C.Z,{label:"Raw JSON",...fr(3)}),d.createElement(C.Z,{label:"Raw YAML",...fr(4)})),d.createElement(Sr,{value:ee,index:0},d.createElement(Vn,{entity:x.entity})),d.createElement(Sr,{value:ee,index:1},d.createElement(re,{entity:x.entity})),d.createElement(Sr,{value:ee,index:2},d.createElement(Gn,{entity:x.entity})),d.createElement(Sr,{value:ee,index:3},d.createElement(Fr,{entity:x.entity})),d.createElement(Sr,{value:ee,index:4},d.createElement(nr,{entity:x.entity})))),d.createElement(At.Z,null,d.createElement(H.Z,{onClick:x.onClose,color:"primary"},"Close"))):null}function Hr(x){var N;const ee=(0,y.h_)(b),ae=(N=x.metadata.annotations)==null?void 0:N[Ye.q1],We=x.metadata.uid,Qe=ae==="bootstrap:bootstrap",qe=(0,Lt.default)(async()=>{const Ie=ee.getLocationByRef(ae);let De;if(!ae)De=Promise.resolve([]);else{const st=`metadata.annotations.${Ye.q1}`;De=ee.getEntities({filter:{[st]:ae},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Dt=>Dt.items)}return Promise.all([Ie,De]).then(([st,Dt])=>({location:st,colocatedEntities:Dt}))},[ee,x]),gt=(0,d.useCallback)(async function(){const{location:De}=qe.value;await ee.removeLocationById(De.id)},[ee,qe]),f=(0,d.useCallback)(async function(){await ee.removeEntityByUid(We)},[ee,We]);if(Qe)return{type:"bootstrap",location:ae,deleteEntity:f};const{loading:n,error:o,value:v}=qe;if(n)return{type:"loading"};if(o)return{type:"error",error:o};const{location:w,colocatedEntities:le}=v;return w?{type:"unregister",location:ae,colocatedEntities:le.map(Ye.iB),unregisterLocation:gt,deleteEntity:f}:{type:"only-delete",deleteEntity:f}}const Jr=(0,Y.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),pa=({entity:x,onConfirm:N,onClose:ee})=>{var ae;const We=(0,y.h_)(y.$v),Qe=(0,y.h_)(y.Ds),qe=Jr(),gt=Hr(x),[f,n]=(0,d.useState)(!1),[o,v]=(0,d.useState)(!1),w=(ae=Qe.getOptionalString("app.title"))!=null?ae:"Backstage",le=(0,d.useCallback)(async function(){if("unregisterLocation"in gt){v(!0);try{await gt.unregisterLocation(),N()}catch(Dt){(0,h.BD)(Dt),We.post({message:Dt.message})}finally{v(!1)}}},[We,N,gt]),Ie=(0,d.useCallback)(async function(){if("deleteEntity"in gt){v(!0);try{await gt.deleteEntity(),N()}catch(Dt){(0,h.BD)(Dt),We.post({message:Dt.message})}finally{v(!1)}}},[We,N,gt]),De=()=>d.createElement(At.Z,{className:qe.dialogActions},d.createElement(H.Z,{onClick:ee,color:"primary"},"Cancel"));return gt.type==="loading"?d.createElement(dt.Ex,null):gt.type==="error"?d.createElement(dt.Gk,{error:gt.error}):gt.type==="bootstrap"?d.createElement(d.Fragment,null,d.createElement($t.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',gt.location,'"). If you believe this is in error, please contact the ',w," ","integrator."),d.createElement(r.Z,{marginTop:2},!f&&d.createElement(d.Fragment,null,d.createElement(H.Z,{variant:"text",size:"small",color:"primary",className:qe.advancedButton,onClick:()=>n(!0)},"Advanced Options"),d.createElement(De,null)),f&&d.createElement(d.Fragment,null,d.createElement(Se.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),d.createElement(H.Z,{variant:"contained",color:"secondary",disabled:o,onClick:Ie},"Delete Entity"),d.createElement(De,null)))):gt.type==="only-delete"?d.createElement(d.Fragment,null,d.createElement(Se.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),d.createElement(H.Z,{variant:"contained",color:"secondary",disabled:o,onClick:Ie},"Delete Entity"),d.createElement(De,null)):gt.type==="unregister"?d.createElement(d.Fragment,null,d.createElement(Se.Z,null,"This action will unregister the following entities:"),d.createElement(Se.Z,{component:"ul"},gt.colocatedEntities.map(st=>d.createElement("li",{key:`${st.kind}:${st.namespace}/${st.name}`},d.createElement(qt,{entityRef:st})))),d.createElement(Se.Z,null,"Located at the following location:"),d.createElement(Se.Z,{component:"ul"},d.createElement("li",null,gt.location)),d.createElement(Se.Z,null,"To undo, just re-register the entity in ",w,"."),d.createElement(r.Z,{marginTop:2},d.createElement(H.Z,{variant:"contained",color:"secondary",disabled:o,onClick:le},"Unregister Location"),!f&&d.createElement(r.Z,{component:"span",marginLeft:2},d.createElement(H.Z,{variant:"text",size:"small",color:"primary",className:qe.advancedButton,onClick:()=>n(!0)},"Advanced Options"))),f&&d.createElement(d.Fragment,null,d.createElement(r.Z,{paddingTop:4,paddingBottom:4},d.createElement(en.Z,null)),d.createElement(Se.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),d.createElement(H.Z,{variant:"contained",color:"secondary",disabled:o,onClick:Ie},"Delete Entity"))):d.createElement($t.Z,{severity:"error"},"Internal error: Unknown state")},Oa=x=>{const{open:N,onConfirm:ee,onClose:ae,entity:We}=x;return d.createElement(lt.Z,{open:N,onClose:ae},d.createElement(Yt.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),d.createElement(ot.Z,null,d.createElement(pa,{entity:We,onConfirm:ee,onClose:ae})))},oa=(0,Y.Z)(x=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:x.spacing(1,0,1,0)},title:{margin:x.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:x.palette.text.primary},menuItem:{minHeight:x.spacing(6)},groupWrapper:{margin:x.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function ra(x){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:c.Z},{id:"starred",label:"Starred",icon:Ve.Z}]},{name:x!=null?x:"Company",items:[{id:"all",label:"All"}]}]}const Aa=x=>{var N;const{initialFilter:ee,availableFilters:ae}=x,We=oa(),qe=(N=(0,y.h_)(y.Ds).getOptionalString("organization.name"))!=null?N:"Company",{filters:gt,updateFilters:f,backendEntities:n,queryParameters:{kind:o,user:v},loading:w}=dn(),le=["starred","all"],Ie=ra(qe).map(cr=>({...cr,items:cr.items.filter(({id:mr})=>["group","user"].some(Vr=>Vr===o)?le.includes(mr):!ae||ae.includes(mr))})).filter(({items:cr})=>!!cr.length),{isStarredEntity:De}=Ln(),{isOwnedEntity:st,loading:Dt}=Rn(),un=w||Dt,kt=(0,d.useMemo)(()=>new ln("owned",st,De),[st,De]),Vt=(0,d.useMemo)(()=>new ln("starred",st,De),[st,De]),gn=(0,d.useMemo)(()=>[v].flat()[0],[v]),[En,Yn]=(0,d.useState)(gn!=null?gn:ee),$n=(0,d.useMemo)(()=>n.filter(te((0,Rt.compact)(Object.values({...gt,user:void 0})))),[gt,n]),Xn=(0,d.useMemo)(()=>({all:$n.length,starred:$n.filter(cr=>Vt.filterEntity(cr)).length,owned:$n.filter(cr=>kt.filterEntity(cr)).length}),[$n,Vt,kt]);return(0,d.useEffect)(()=>{gn&&Yn(gn)},[gn]),(0,d.useEffect)(()=>{!un&&En&&En!=="all"&&Xn[En]===0&&Yn("all")},[un,Xn,En,Yn]),(0,d.useEffect)(()=>{f({user:En?new ln(En,st,De):void 0})},[En,st,De,f]),d.createElement(Ct.Z,{className:We.root},Ie.map(cr=>d.createElement(d.Fragment,{key:cr.name},d.createElement(be.Z,{variant:"subtitle2",component:"span",className:We.title},cr.name),d.createElement(Ct.Z,{className:We.groupWrapper},d.createElement(tt.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":cr.name},cr.items.map(mr=>{var Vr,Ba;return d.createElement(tn.Z,{role:"none presentation",key:mr.id,button:!0,divider:!0,onClick:()=>Yn(mr.id),selected:mr.id===((Vr=gt.user)==null?void 0:Vr.value),className:We.menuItem,disabled:Xn[mr.id]===0,"data-testid":`user-picker-${mr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},mr.icon&&d.createElement(Ue.Z,{className:We.listIcon},d.createElement(mr.icon,{fontSize:"small"})),d.createElement(F.Z,null,d.createElement(be.Z,{variant:"body1"},mr.label," ")),d.createElement(K.Z,null,(Ba=Xn[mr.id])!=null?Ba:"-"))}))))))},Ra=(0,Y.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Sa=d.createElement(Ft.Z,{fontSize:"small"}),Or=d.createElement(Xt.Z,{fontSize:"small"}),ua=()=>{const x=Ra(),{updateFilters:N}=dn(),[ee,ae]=(0,d.useState)([]);function We(gt){N({orphan:gt?new on(gt):void 0})}function Qe(gt){N({error:gt?new Gt(gt):void 0})}const qe=["Is Orphan","Has Error"];return d.createElement(r.Z,{pb:1,pt:1},d.createElement(be.Z,{variant:"button",component:"label"},"Processing Status",d.createElement(pt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:qe,value:ee,onChange:(gt,f)=>{ae(f),We(f.includes("Is Orphan")),Qe(f.includes("Has Error"))},renderOption:(gt,{selected:f})=>d.createElement(ve.Z,{control:d.createElement(ie.Z,{icon:Sa,checkedIcon:Or,checked:f}),onClick:n=>n.preventDefault(),label:gt}),size:"small",popupIcon:d.createElement(ht.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:gt=>d.createElement(Ee.Z,{...gt,className:x.input,variant:"outlined"})})))},Da=(0,Y.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Ta=()=>{const x=Da();return d.createElement(Mr,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Kt,InputProps:{className:x.input}})};function xa(x){var N;const{children:ee,value:ae}=x,[We,Qe]=useState((N=ae==null?void 0:ae.filters)!=null?N:{}),qe=useCallback(n=>{Qe(o=>{const v=typeof n=="function"?n(o):n;return{...o,...v}})},[]),gt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),f=useMemo(()=>{var n,o,v,w,le;return{entities:(n=ae==null?void 0:ae.entities)!=null?n:gt.entities,backendEntities:(o=ae==null?void 0:ae.backendEntities)!=null?o:gt.backendEntities,updateFilters:(v=ae==null?void 0:ae.updateFilters)!=null?v:qe,filters:We,loading:(w=ae==null?void 0:ae.loading)!=null?w:!1,queryParameters:(le=ae==null?void 0:ae.queryParameters)!=null?le:gt.queryParameters,error:ae==null?void 0:ae.error}},[ae,gt,We,qe]);return React.createElement(wt.Provider,{value:f},ee)}},41881:function(fn,Ut,e){"use strict";e.d(Ut,{A:function(){return X},B:function(){return Gt},C:function(){return D},E:function(){return Ir},F:function(){return yn},H:function(){return bn},L:function(){return Ge},a:function(){return rt},b:function(){return Re},c:function(){return Te},d:function(){return Mr},e:function(){return br},f:function(){return Jn},g:function(){return wr},h:function(){return Wr},j:function(){return xr},k:function(){return kr},l:function(){return hr},m:function(){return Rr},o:function(){return Lr},p:function(){return Ar},r:function(){return Br},t:function(){return T},u:function(){return me},v:function(){return V},w:function(){return He},x:function(){return at},y:function(){return Kt},z:function(){return Tt}});var l=e(82394),y=e.n(l),g=e(34520),d=e(76635),m=e.n(d),A=e(80236),H=e(30705),je=e(49462),r=e(64304),be=e(67898),ne=e(79692),ie=e(90436),ve=e(60905),Y=e(95544),Ee=e(41156),fe=e(90348),_=e(11861),Ce=e(7089),I=e(94339),Pt=e(32552),Oe=e(61837),pe=e(85256),Se=e(24579),F=e(12420),Je=e(12231),Ct=e(86136),it=e(49378),Bt=e(80030),Ue=e(79784),tt=e(50758),lt=e(8629),Yt=e(79249),ot=e(49429),rn=e(77277),C=e(88188),At=e(52866),en=e(30254),tn=e(27604),K=e(2784),ct=e(52160),dt=e(19928),Ye=e.n(dt),ut=e(64279),Rt=e(15459),St=e(2997),ft=e(11640),Mt=e(28347),mt=e(99688),xt=e(73557),Wt=e(31654),Lt=e(43054),Nt=e(65759),ge=e(52963),Fe=e(75650),Xe=e(49166),Ke=e(32272),ht=e(88285),pt=e(92573);async function $t({storageApi:se}){var ze;const nt=se.forBucket("settings"),Et=se.forBucket("starredEntities"),Qt=nt.snapshot("starredEntities").value;if(!(0,d.isArray)(Qt))return;const zt=new Set((ze=Et.snapshot("entityRefs").value)!=null?ze:[]);Qt.filter(d.isString).map(qt=>qt.split(":")).filter(qt=>qt.length===4&&qt[0]==="entity").map(([qt,mn,cn,an])=>(0,g.eE)({kind:mn,namespace:cn,name:an})).forEach(qt=>zt.add(qt)),await Et.set("entityRefs",Array.from(zt)),await nt.remove("starredEntities")}var Xt=Object.defineProperty,Ft=(se,ze,nt)=>ze in se?Xt(se,ze,{enumerable:!0,configurable:!0,writable:!0,value:nt}):se[ze]=nt,j=(se,ze,nt)=>(Ft(se,typeof ze!="symbol"?ze+"":ze,nt),nt);class ce{constructor(ze){j(this,"settingsStore"),j(this,"starredEntities"),j(this,"subscribers",new Set),j(this,"observable",new(y())(Et=>(Et.next(new Set(this.starredEntities)),this.subscribers.add(Et),()=>{this.subscribers.delete(Et)})));var nt;$t(ze).then(),this.settingsStore=ze.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((nt=this.settingsStore.snapshot("entityRefs").value)!=null?nt:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Et=>{var Qt;this.starredEntities=new Set((Qt=Et.value)!=null?Qt:[]),this.notifyChanges()}})}async toggleStarred(ze){this.starredEntities.has(ze)?this.starredEntities.delete(ze):this.starredEntities.add(ze),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const ze of this.subscribers)ze.next(new Set(this.starredEntities))}}const Te=(0,H.x8)({id:"create-component",optional:!0}),$e=(0,H.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Le=(0,H.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),G=(0,H.NT)({id:"catalog"}),Ae=(0,ne.Z)(se=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:se.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function Re(se){const{label:ze,value:nt,gridSizes:Et,children:Qt}=se,zt=Ae(),qt=(0,H.vJ)(Qt,cn=>cn.getElements()),mn=qt.length>0?qt:K.createElement(ie.Z,{variant:"body2",className:zt.value},nt||"unknown");return K.createElement(ve.Z,{item:!0,...Et},K.createElement(ie.Z,{variant:"h2",className:zt.label},ze),mn)}const xe=(0,ne.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function J(se){const{href:ze,text:nt,Icon:Et}=se,Qt=xe();return K.createElement(Y.Z,{display:"flex"},K.createElement(Y.Z,{mr:1,className:Qt.svgIcon},K.createElement(ie.Z,{component:"div"},Et?K.createElement(Et,null):K.createElement(ct.Z,null))),K.createElement(Y.Z,{flexGrow:"1"},K.createElement(A.rU,{to:ze,target:"_blank",rel:"noopener"},nt||ze)))}const q={xs:1,sm:1,md:1,lg:2,xl:3};function Me(se){var ze,nt;const Et=[(0,Ee.Z)(zt=>zt.breakpoints.up("xl"))?"xl":null,(0,Ee.Z)(zt=>zt.breakpoints.up("lg"))?"lg":null,(0,Ee.Z)(zt=>zt.breakpoints.up("md"))?"md":null,(0,Ee.Z)(zt=>zt.breakpoints.up("sm"))?"sm":null,(0,Ee.Z)(zt=>zt.breakpoints.up("xs"))?"xs":null];let Qt=1;if(typeof se=="number")Qt=se;else{const zt=(ze=Et.find(qt=>qt!==null))!=null?ze:"xs";Qt=(nt=se==null?void 0:se[zt])!=null?nt:q[zt]}return Qt}function Ge(se){const{items:ze,cols:nt=void 0}=se,Et=Me(nt);return K.createElement(fe.Z,{rowHeight:"auto",cols:Et},ze.map(({text:Qt,href:zt,Icon:qt},mn)=>K.createElement(_.Z,{key:mn},K.createElement(J,{href:zt,text:Qt!=null?Qt:zt,Icon:qt}))))}const we=(0,ne.Z)({description:{wordBreak:"break-word"}});function Ve(se,ze,nt){if(ze==="url"||se.includes("://"))return se;const Et=nt.type==="file"?`file://${nt.target}`:nt.target;return ze==="file"||nt.type==="file"?new URL(se,Et).href:Et}function rt(se){var ze,nt,Et,Qt,zt,qt,mn,cn;const{entity:an}=se,An=we(),_n=an.kind.toLocaleLowerCase("en-US")==="system",Cn=an.kind.toLocaleLowerCase("en-US")==="resource",Un=an.kind.toLocaleLowerCase("en-US")==="component",Tn=an.kind.toLocaleLowerCase("en-US")==="api",Bn=an.kind.toLocaleLowerCase("en-US")==="template",Sn=an.kind.toLocaleLowerCase("en-US")==="location",or=an.kind.toLocaleLowerCase("en-US")==="group",Wn=(0,r.hF)(an,g.cz,{kind:"system"}),zn=(0,r.hF)(an,g.cz,{kind:"component"}),sr=(0,r.hF)(an,g.cz,{kind:"domain"}),jn=(0,r.hF)(an,g.S4);let Fn;try{Fn=(0,g.CV)(an)}catch{Fn=void 0}return K.createElement(ve.Z,{container:!0},K.createElement(Re,{label:"Description",gridSizes:{xs:12}},K.createElement(A.SA,{className:An.description,content:((ze=an==null?void 0:an.metadata)==null?void 0:ze.description)||"No description"})),K.createElement(Re,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},jn.length>0&&K.createElement(r.rI,{entityRefs:jn,defaultKind:"group"})),(_n||sr.length>0)&&K.createElement(Re,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},sr.length>0&&K.createElement(r.rI,{entityRefs:sr,defaultKind:"domain"})),(Tn||Un||Cn||Wn.length>0)&&K.createElement(Re,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},Wn.length>0&&K.createElement(r.rI,{entityRefs:Wn,defaultKind:"system"})),Un&&zn.length>0&&K.createElement(Re,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},K.createElement(r.rI,{entityRefs:zn,defaultKind:"component"})),(Tn||Un||Cn||Bn||or||Sn||typeof((nt=an==null?void 0:an.spec)==null?void 0:nt.type)=="string")&&K.createElement(Re,{label:"Type",value:(Et=an==null?void 0:an.spec)==null?void 0:Et.type,gridSizes:{xs:12,sm:6,lg:4}}),(Tn||Un||typeof((Qt=an==null?void 0:an.spec)==null?void 0:Qt.lifecycle)=="string")&&K.createElement(Re,{label:"Lifecycle",value:(zt=an==null?void 0:an.spec)==null?void 0:zt.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),K.createElement(Re,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((qt=an==null?void 0:an.metadata)==null?void 0:qt.tags)||[]).map(Hn=>K.createElement(Ce.Z,{key:Hn,size:"small",label:Hn}))),Sn&&(((mn=an==null?void 0:an.spec)==null?void 0:mn.targets)||((cn=an==null?void 0:an.spec)==null?void 0:cn.target))&&K.createElement(Re,{label:"Targets",gridSizes:{xs:12}},K.createElement(Ge,{cols:1,items:(an.spec.targets||[an.spec.target]).map(Hn=>Hn).map(Hn=>{var dr;return{text:Hn,href:Ve(Hn,((dr=an==null?void 0:an.spec)==null?void 0:dr.type)||"unknown",Fn)}})})))}const oe=(0,ne.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function X(se){var ze,nt,Et,Qt;const{variant:zt}=se,qt=(0,H.qD)(),mn=oe(),{entity:cn}=(0,r.X2)(),an=(0,H.h_)(je.q3),An=(0,H.h_)(r.Ah),_n=(0,H.h_)(H.$v),Cn=(0,H.h_)(H.VE),Un=(0,H.tg)($e),Tn=(0,H.tg)(Le),Bn=(0,r.CV)(cn,an),Sn=(ze=cn.metadata.annotations)==null?void 0:ze[g.Tf],or={label:"View Source",disabled:!Bn,icon:K.createElement(je.nW,{type:Bn==null?void 0:Bn.integrationType}),href:Bn==null?void 0:Bn.locationTargetUrl},Wn={label:"View TechDocs",disabled:!((nt=cn.metadata.annotations)!=null&&nt["backstage.io/techdocs-ref"])||!Un,icon:K.createElement(en.Z,null),href:Un&&Un({namespace:cn.metadata.namespace||g.zG,kind:cn.kind,name:cn.metadata.name})},zn=[or,Wn];if((0,be.t)(cn)){const tr=(Et=qt.getSystemIcon("scaffolder"))!=null?Et:C.Z,Pr={label:"Launch Template",icon:K.createElement(tr,null),disabled:!Tn,href:Tn&&Tn({templateName:cn.metadata.name,namespace:cn.metadata.namespace||g.zG})};zn.push(Pr)}let sr="";zt==="gridItem"?sr=mn.gridItemCard:zt==="fullHeight"&&(sr=mn.fullHeightCard);let jn="";zt==="gridItem"?jn=mn.gridItemCardContent:zt==="fullHeight"&&(jn=mn.fullHeightCardContent);const Fn=(Qt=cn.metadata.annotations)==null?void 0:Qt[g.P1],Hn=(Fn==null?void 0:Fn.startsWith("url:"))||(Fn==null?void 0:Fn.startsWith("file:")),dr=(0,K.useCallback)(async()=>{try{await An.refreshEntity((0,g.eE)(cn)),_n.post({message:"Refresh scheduled",severity:"info",display:"transient"})}catch(tr){Cn.post(tr)}},[An,_n,Cn,cn]);return K.createElement(I.Z,{className:sr},K.createElement(Pt.Z,{title:"About",action:K.createElement(K.Fragment,null,Hn&&K.createElement(Oe.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:dr},K.createElement(At.Z,null)),K.createElement(Oe.Z,{component:A.rU,"aria-label":"Edit",disabled:!Sn,title:"Edit Metadata",to:Sn!=null?Sn:"#"},K.createElement(tn.Z,null))),subheader:K.createElement(A.M6,{links:zn})}),K.createElement(pe.Z,null),K.createElement(Se.Z,{className:jn},K.createElement(rt,{entity:cn})))}function de(){const se=useApi(catalogApiRef),{error:ze,loading:nt,value:Et}=useAsync(async()=>await se.getEntityFacets({facets:["kind"]}).then(zt=>{var qt;return((qt=zt.facets.kind)==null?void 0:qt.map(mn=>mn.value).sort())||[]}),[se]);return{loading:nt,error:ze,allKinds:Et!=null?Et:[]}}function he(se,ze,nt){let Et=se;return ze&&(Et=Et.filter(zt=>ze.some(qt=>qt.toLocaleLowerCase("en-US")===zt.toLocaleLowerCase("en-US")))),nt&&!se.some(zt=>zt.toLocaleLowerCase("en-US")===nt.toLocaleLowerCase("en-US"))&&(Et=Et.concat([nt])),Et.sort().reduce((zt,qt)=>(zt[qt.toLocaleLowerCase("en-US")]=qt,zt),{})}const S=(0,ne.Z)(se=>(0,F.Z)({root:{...se.typography.h4}}));function h(se){var ze,nt;const{initialFilter:Et="component",allowedKinds:Qt}=se,zt=S(),{allKinds:qt}=de(),{filters:mn,updateFilters:cn,queryParameters:{kind:an}}=useEntityList(),An=useMemo(()=>[an].flat()[0],[an]),[_n,Cn]=useState((nt=An!=null?An:(ze=mn.kind)==null?void 0:ze.value)!=null?nt:Et);useEffect(()=>{An&&Cn(An)},[An]),useEffect(()=>{var Tn,Bn;(Tn=mn.kind)!=null&&Tn.value&&Cn((Bn=mn.kind)==null?void 0:Bn.value)},[mn.kind]),useEffect(()=>{cn({kind:_n?new EntityKindFilter(_n):void 0})},[_n,cn]);const Un=he(qt,Qt,_n);return React.createElement(Select,{input:React.createElement(InputBase,null),value:_n.toLocaleLowerCase("en-US"),onChange:Tn=>Cn(Tn.target.value),classes:zt},Object.keys(Un).map(Tn=>React.createElement(MenuItem,{value:Tn,key:Tn},`${pluralize(Un[Tn])}`)))}const c=Object.freeze({createNameColumn(se){function ze(nt){var Et;return((Et=nt.metadata)==null?void 0:Et.title)||(0,r.$3)(nt,{defaultKind:se==null?void 0:se.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:nt},{entity:Et}){return ze(nt).localeCompare(ze(Et))},render:({entity:nt})=>{var Et;return K.createElement(r.dx,{entityRef:nt,defaultKind:(se==null?void 0:se.defaultKind)||"Component",title:(Et=nt.metadata)==null?void 0:Et.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:se})=>K.createElement(r.rI,{entityRefs:se.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:se})=>K.createElement(r.rI,{entityRefs:se.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:se})=>{var ze,nt;return K.createElement(K.Fragment,null,(((ze=se==null?void 0:se.spec)==null?void 0:ze.targets)||((nt=se==null?void 0:se.spec)==null?void 0:nt.target))&&K.createElement(A.Or,{text:(se.spec.targets||[se.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:se})=>K.createElement(A.Or,{text:se.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:se})=>K.createElement(K.Fragment,null,se.metadata.tags&&se.metadata.tags.map(ze=>K.createElement(Ce.Z,{key:ze,label:ze,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(se){return{title:"Title",field:"entity.metadata.title",hidden:se==null?void 0:se.hidden,searchable:!0}},createLabelColumn(se,ze){return{title:(ze==null?void 0:ze.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:nt})=>{var Et;const Qt=(Et=nt.metadata)==null?void 0:Et.labels,zt=Qt&&Qt[se]||(ze==null?void 0:ze.defaultValue);return K.createElement(K.Fragment,null,zt&&K.createElement(Ce.Z,{key:zt,label:zt,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),b=(0,Rt.Z)({root:{color:"#f3ba37"}})(ft.Z),L=(se,ze)=>{const nt=Et=>Et.metadata.title||(0,r.$3)(Et,{defaultKind:"Component"});return nt(se).localeCompare(nt(ze))},D=se=>{var ze,nt,Et,Qt,zt;const{columns:qt,actions:mn,tableOptions:cn,subtitle:an,emptyContent:An}=se,{isStarredEntity:_n,toggleStarredEntity:Cn}=(0,r.CR)(),{loading:Un,error:Tn,entities:Bn,filters:Sn}=(0,r.wp)(),or=(0,K.useMemo)(()=>{var kn;return[c.createTitleColumn({hidden:!0}),c.createNameColumn({defaultKind:(kn=Sn.kind)==null?void 0:kn.value}),...Ze(),c.createMetadataDescriptionColumn(),c.createTagsColumn()];function Ze(){var u;const s=[c.createSystemColumn(),c.createOwnerColumn(),c.createSpecTypeColumn(),c.createSpecLifecycleColumn()];switch((u=Sn.kind)==null?void 0:u.value){case"user":return[];case"domain":case"system":return[c.createOwnerColumn()];case"group":case"template":return[c.createSpecTypeColumn()];case"location":return[c.createSpecTypeColumn(),c.createSpecTargetsColumn()];default:return Bn.every(i=>i.metadata.namespace==="default")?s:[...s,c.createNamespaceColumn()]}}},[(ze=Sn.kind)==null?void 0:ze.value,Bn]),Wn=Sn.type===void 0,zn=(0,d.capitalize)((Et=(nt=Sn.user)==null?void 0:nt.value)!=null?Et:"all");if(Tn)return K.createElement("div",null,K.createElement(A.GB,{severity:"error",title:"Could not fetch catalog entities."},K.createElement(A.Oi,{language:"text",text:Tn.toString()})));const sr=[({entity:kn})=>{var Ze;const u=(Ze=kn.metadata.annotations)==null?void 0:Ze[g.l2],s="View";return{icon:()=>K.createElement(K.Fragment,null,K.createElement(ie.Z,{variant:"srOnly"},s),K.createElement(St.Z,{fontSize:"small"})),tooltip:s,disabled:!u,onClick:()=>{u&&window.open(u,"_blank")}}},({entity:kn})=>{var Ze;const u=(Ze=kn.metadata.annotations)==null?void 0:Ze[g.Tf],s="Edit";return{icon:()=>K.createElement(K.Fragment,null,K.createElement(ie.Z,{variant:"srOnly"},s),K.createElement(tn.Z,{fontSize:"small"})),tooltip:s,disabled:!u,onClick:()=>{u&&window.open(u,"_blank")}}},({entity:kn})=>{const Ze=_n(kn),u=Ze?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>K.createElement(K.Fragment,null,K.createElement(ie.Z,{variant:"srOnly"},u),Ze?K.createElement(b,null):K.createElement(Mt.Z,null)),tooltip:u,onClick:()=>Cn(kn)}}],jn=Bn.sort(L).map(kn=>{const Ze=(0,r.hF)(kn,g.cz,{kind:"system"}),u=(0,r.hF)(kn,g.S4);return{entity:kn,resolved:{name:(0,r.$3)(kn,{defaultKind:"Component"}),ownedByRelationsTitle:u.map(s=>(0,r.$3)(s,{defaultKind:"group"})).join(", "),ownedByRelations:u,partOfSystemRelationTitle:Ze.map(s=>(0,r.$3)(s,{defaultKind:"system"})).join(", "),partOfSystemRelations:Ze}}}),Fn=(qt||or).find(kn=>kn.title==="Type");Fn&&(Fn.hidden=!Wn);const Hn=jn.length>20,dr=((Qt=Sn.kind)==null?void 0:Qt.value)||"",tr=((zt=Sn.type)==null?void 0:zt.value)||"",Pr=[zn,tr,Ye()(dr)].filter(kn=>kn).join(" ");return K.createElement(A.iA,{isLoading:Un,columns:qt||or,options:{paging:Hn,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Un,padding:"dense",pageSizeOptions:[20,50,100],...cn},title:`${Pr} (${Bn.length})`,data:jn,actions:mn||sr,subtitle:an,emptyContent:An})};D.columns=c;function R(se){var ze;const{unregisterEntityOptions:nt,isUnregisterAllowed:Et,onUnregisterEntity:Qt,onClose:zt}=se,qt=typeof(nt==null?void 0:nt.disableUnregister)=="boolean",mn=(ze=!Et||(qt?!!(nt!=null&&nt.disableUnregister):(nt==null?void 0:nt.disableUnregister)==="disable"))!=null?ze:!1;let cn=K.createElement(K.Fragment,null);return(nt==null?void 0:nt.disableUnregister)!=="hidden"&&(cn=K.createElement(Je.Z,{onClick:()=>{zt(),Qt()},disabled:mn},K.createElement(Ct.Z,null,K.createElement(Xe.Z,{fontSize:"small"})),K.createElement(it.Z,{primary:"Unregister entity"}))),K.createElement(K.Fragment,null,cn)}const W=(0,ne.Z)(se=>({button:{color:se.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function k(se){const{UNSTABLE_extraContextMenuItems:ze,UNSTABLE_contextMenuOptions:nt,onUnregisterEntity:Et,onInspectEntity:Qt}=se,[zt,qt]=(0,K.useState)(),mn=W(),an=(0,ge.N)(Fe.j8).allowed,An=Bn=>{qt(Bn.currentTarget)},_n=()=>{qt(void 0)},Cn=(0,H.h_)(H.$v),Un=(0,K.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>Cn.post({message:"Copied!",severity:"info",display:"transient"}))},[Cn]),Tn=ze&&[...ze.map(Bn=>K.createElement(Je.Z,{key:Bn.title,onClick:()=>{_n(),Bn.onClick()}},K.createElement(Ct.Z,null,K.createElement(Bn.Icon,{fontSize:"small"})),K.createElement(it.Z,{primary:Bn.title}))),K.createElement(pe.Z,{key:"the divider is here!"})];return K.createElement(K.Fragment,null,K.createElement(Bt.ZP,{title:"More",arrow:!0},K.createElement(Oe.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!zt,role:"button",onClick:An,"data-testid":"menu-button",className:mn.button,id:"long-menu"},K.createElement(Lt.Z,null))),K.createElement(Ue.ZP,{open:Boolean(zt),onClose:_n,anchorEl:zt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},K.createElement(tt.Z,{autoFocusItem:Boolean(zt)},Tn,K.createElement(R,{unregisterEntityOptions:nt,isUnregisterAllowed:an,onUnregisterEntity:Et,onClose:_n}),K.createElement(Je.Z,{onClick:()=>{_n(),Qt()}},K.createElement(Ct.Z,null,K.createElement(Wt.Z,{fontSize:"small"})),K.createElement(it.Z,{primary:"Inspect entity"})),K.createElement(Je.Z,{onClick:()=>{_n(),Un()}},K.createElement(Ct.Z,null,K.createElement(Nt.Z,{fontSize:"small"})),K.createElement(it.Z,{primary:"Copy entity URL"})))))}const ye="plugin.catalog.entityLayoutRoute",et=()=>null;(0,H.R5)(et,ye,!0),(0,H.R5)(et,"core.gatherMountPoints",!0);function U(se){const{entity:ze,title:nt}=se;return K.createElement(Y.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},K.createElement(Y.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},nt),ze&&K.createElement(r.LH,{entity:ze}))}function Z(se,ze,nt,Et){var Qt,zt,qt,mn,cn;const an=(Qt=se!=null?se:Et==null?void 0:Et.kind)!=null?Qt:"",An=(zt=ze!=null?ze:Et==null?void 0:Et.metadata.namespace)!=null?zt:"";return{headerTitle:`${(cn=(mn=(qt=Et==null?void 0:Et.metadata.title)!=null?qt:nt)!=null?mn:Et==null?void 0:Et.metadata.name)!=null?cn:""}${An&&An!==g.zG?` in ${An}`:""}`,headerType:(()=>{let Cn=an.toLocaleLowerCase("en-US");return Et&&Et.spec&&"type"in Et.spec&&(Cn+=" \u2014 ",Cn+=Et.spec.type.toLocaleLowerCase("en-US")),Cn})()}}function te(se){var ze;const{entity:nt}=se,Et=(0,r.hF)(nt,g.S4);return K.createElement(K.Fragment,null,Et.length>0&&K.createElement(A.i9,{label:"Owner",value:K.createElement(r.rI,{entityRefs:Et,defaultKind:"Group",color:"inherit"})}),((ze=nt.spec)==null?void 0:ze.lifecycle)&&K.createElement(A.i9,{label:"Lifecycle",value:nt.spec.lifecycle}))}const T=se=>{var ze,nt,Et;const{UNSTABLE_extraContextMenuItems:Qt,UNSTABLE_contextMenuOptions:zt,children:qt,NotFoundComponent:mn}=se,{kind:cn,namespace:an,name:An}=(0,H.Oi)(r.wi),{entity:_n,loading:Cn,error:Un}=(0,r.ce)(),Tn=(0,xt.TH)(),Bn=(0,H.vJ)(qt,dr=>dr.selectByComponentData({key:ye,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:tr})=>{if(_n){if(tr.if&&!tr.if(_n))return[]}else return[];return[{path:tr.path,title:tr.title,children:tr.children,tabProps:tr.tabProps}]}),[_n]),{headerTitle:Sn,headerType:or}=Z(cn,an,An,_n),[Wn,zn]=(0,K.useState)(!1),[sr,jn]=(0,K.useState)(!1),Fn=(0,xt.s0)(),Hn=async()=>{zn(!1),jn(!1),Fn("/")};return(0,K.useEffect)(()=>{zn(!1),jn(!1)},[Tn.pathname]),K.createElement(A.T3,{themeId:(Et=(nt=(ze=_n==null?void 0:_n.spec)==null?void 0:ze.type)==null?void 0:nt.toString())!=null?Et:"home"},K.createElement(A.h4,{title:K.createElement(U,{title:Sn,entity:_n}),pageTitleOverride:Sn,type:or},_n&&K.createElement(K.Fragment,null,K.createElement(te,{entity:_n}),K.createElement(k,{UNSTABLE_extraContextMenuItems:Qt,UNSTABLE_contextMenuOptions:zt,onUnregisterEntity:()=>zn(!0),onInspectEntity:()=>jn(!0)}))),Cn&&K.createElement(A.Ex,null),_n&&K.createElement(A.tn,{routes:Bn}),Un&&K.createElement(A.VY,null,K.createElement(mt.Z,{severity:"error"},Un.toString())),!Cn&&!Un&&!_n&&K.createElement(A.VY,null,mn||K.createElement(A.GB,{title:"Entity not found"},"There is no ",cn," with the requested"," ",K.createElement(A.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),K.createElement(r.pp,{open:Wn,entity:_n,onConfirm:Hn,onClose:()=>zn(!1)}),K.createElement(r.U_,{open:sr,entity:_n,onClose:()=>jn(!1)}))};T.Route=et;function B(se){const{open:ze,onClose:nt,onConfirm:Et,entity:Qt}=se,[zt,qt]=(0,K.useState)(!1),mn=(0,H.h_)(r.Ah),cn=(0,H.h_)(H.$v),an=async()=>{qt(!0);try{const An=Qt.metadata.uid;await mn.removeEntityByUid(An),Et()}catch(An){(0,Ke.BD)(An),cn.post({message:An.message})}finally{qt(!1)}};return K.createElement(lt.Z,{open:ze,onClose:nt},K.createElement(Yt.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),K.createElement(ot.Z,null,K.createElement(rn.Z,{variant:"contained",color:"secondary",disabled:zt,onClick:an},"Delete"),K.createElement(rn.Z,{onClick:nt,color:"primary"},"Cancel")))}function V(se){var ze,nt;return((nt=(ze=se==null?void 0:se.metadata)==null?void 0:ze.annotations)==null?void 0:nt["backstage.io/orphan"])==="true"}function me(){const se=(0,xt.s0)(),ze=(0,H.tg)(G),[nt,Et]=(0,K.useState)(!1),{entity:Qt}=(0,r.X2)(),zt=async()=>{Et(!1),se(ze())};return K.createElement(K.Fragment,null,K.createElement(mt.Z,{severity:"warning",onClick:()=>Et(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),K.createElement(B,{open:nt,entity:Qt,onConfirm:zt,onClose:()=>Et(!1)}))}async function _e(se,ze){var nt;const Et=(nt=se.relations)==null?void 0:nt.map(zt=>zt.targetRef);if(!Et||(Et==null?void 0:Et.length)<1||Et.length>1e3)return[];const Qt=await ze.getEntitiesByRefs({entityRefs:Et,fields:["kind","metadata.name","metadata.namespace"]});return Et.filter((zt,qt)=>Qt.items[qt]===void 0)}async function at(se,ze){const nt=ze.apis.get(r.Ah);if(!nt)throw new Error(`No implementation available for ${r.Ah}`);return(await _e(se,nt)).length>0}function He(){const{entity:se}=(0,r.X2)(),ze=(0,H.h_)(r.Ah),{loading:nt,error:Et,value:Qt}=(0,ut.default)(async()=>_e(se,ze),[se,ze]);return Et?K.createElement(Y.Z,{mb:1},K.createElement(A.Gk,{error:Et})):nt||!Qt||Qt.length===0?null:K.createElement(K.Fragment,null,K.createElement(mt.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",K.createElement("br",null),"Entities not found are: ",Qt.join(", ")))}const Ot=se=>se.error&&se.level==="error"&&se.type===ht.mk;async function yt(se,ze){return{items:(await ze.getEntityAncestors({entityRef:se})).items.map(Qt=>{var zt,qt;return{errors:((qt=(zt=Qt.entity.status)==null?void 0:zt.items)!=null?qt:[]).filter(Ot).map(an=>an.error).filter(an=>Boolean(an)),entity:Qt.entity}}).filter(Qt=>Qt.errors.length>0)}}async function Tt(se,ze){const nt=ze.apis.get(r.Ah);if(!nt)throw new Error(`No implementation available for ${r.Ah}`);return(await yt((0,g.eE)(se),nt)).items.length>0}function Kt(){const{entity:se}=(0,r.X2)(),ze=(0,g.eE)(se),nt=(0,H.h_)(r.Ah),{loading:Et,error:Qt,value:zt}=(0,ut.default)(async()=>yt(ze,nt),[ze,nt]);return Qt?K.createElement(Y.Z,{mb:1},K.createElement(A.Gk,{error:Qt})):Et||!zt?null:K.createElement(K.Fragment,null,zt.items.map((qt,mn)=>K.createElement(Y.Z,{key:mn,mb:1},(0,g.eE)(se)!==(0,g.eE)(qt.entity)&&K.createElement(Y.Z,{p:1},"The error below originates from"," ",K.createElement(r.dx,{entityRef:qt.entity})),qt.errors.map((cn,an)=>K.createElement(A.Gk,{key:an,error:cn})))))}const ln="core.backstage.entitySwitch",on=se=>null;(0,H.R5)(on,ln,!0);const Gt=se=>{var ze,nt;const{entity:Et,loading:Qt}=(0,r.ce)(),zt=(0,H.I_)(),qt=(0,H.vJ)(se.children,cn=>cn.selectByComponentData({key:ln,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(an=>{if(Qt)return[];const{if:An,children:_n}=an.props;return Et?[{if:An==null?void 0:An(Et,{apis:zt}),children:_n}]:[{if:An===void 0,children:_n}]}),[zt,Et,Qt]);if(qt.some(cn=>typeof cn.if=="object"&&"then"in cn.if))return K.createElement(wt,{results:qt,renderMultipleMatches:se.renderMultipleMatches});if(se.renderMultipleMatches==="all"){const cn=qt.filter(an=>an.if).map(an=>an.children);return cn.length===0?It(qt):K.createElement(K.Fragment,null,cn)}return(nt=(ze=qt.find(cn=>cn.if))==null?void 0:ze.children)!=null?nt:It(qt)};function wt({results:se,renderMultipleMatches:ze}){const{loading:nt,value:Et}=(0,ut.default)(async()=>{var Qt;const zt=se.map(async({if:qt,children:mn})=>{try{if(await qt)return mn}catch{}return null});if(ze==="all"){const qt=(await Promise.all(zt)).filter(Boolean);return qt.length===0?It(se):K.createElement(K.Fragment,null,qt)}return(Qt=(await Promise.all(zt)).find(Boolean))!=null?Qt:It(se)},[se]);return nt||!Et?null:Et}function It(se){var ze,nt;return(nt=(ze=se.filter(Et=>Et.if===void 0)[0])==null?void 0:ze.children)!=null?nt:null}Gt.Case=on;function dn(se,ze){return Boolean(se&&typeof se=="string"&&(se==null?void 0:se.toLocaleLowerCase("en-US"))===(ze==null?void 0:ze.toLocaleLowerCase("en-US")))}function hn(se,ze){return typeof ze=="string"?dn(se,ze):ze.length===0||ze.some(nt=>dn(se,nt))}function yn(se){return In({kind:se})}function bn(se){return In({kind:"component",type:se})}function Ln(se){return In({kind:"resource",type:se})}function In(se){return ze=>{var nt;return!(se.kind&&!hn(ze.kind,se.kind)||se.type&&!hn((nt=ze.spec)==null?void 0:nt.type,se.type))}}function On(se){return ze=>{var nt;return hn((nt=ze.metadata)==null?void 0:nt.namespace,se)}}const Rn=null,xn=r._i.Filters,er=r._i.Content,Kn=`metadata:
  name: example
  labels:
    javaVersion: 1.2.3`,Zr=(0,ne.Z)(se=>({code:{borderRadius:6,margin:`${se.spacing(2)}px 0px`,background:se.palette.type==="dark"?"#444":se.palette.common.white}}),{name:"PluginCatalogEntityLabelsEmptyState"});function ur(){const se=Zr();return K.createElement(K.Fragment,null,K.createElement(ie.Z,{variant:"body1"},"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:"),K.createElement("div",{className:se.code},K.createElement(A.Oi,{text:Kn,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6],customStyle:{background:"inherit",fontSize:"115%"}})),K.createElement(rn.Z,{variant:"contained",color:"primary",target:"_blank",href:"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional"},"Read more"))}const $r=(0,ne.Z)(se=>({key:{fontWeight:"bold"}})),Ir=se=>{var ze;const{variant:nt,title:Et}=se,{entity:Qt}=(0,r.X2)(),zt=$r(),qt=[{render:cn=>K.createElement(ie.Z,{className:zt.key,variant:"body2"},cn.key)},{field:"value"}],mn=(ze=Qt==null?void 0:Qt.metadata)==null?void 0:ze.labels;return K.createElement(A.rJ,{title:Et||"Labels",variant:nt},!mn||Object.keys(mn).length===0?K.createElement(ur,null):K.createElement(A.iA,{columns:qt,data:Object.keys(mn).map(cn=>({key:cn,value:mn[cn]})),options:{search:!1,showTitle:!0,loadingType:"linear",header:!1,padding:"dense",pageSize:5,toolbar:!1,paging:Object.keys(mn).length>5}}))};function Wr(se){var ze,nt;return(ze=se==null?void 0:se.metadata)!=null&&ze.labels?Object.keys((nt=se==null?void 0:se.metadata)==null?void 0:nt.labels).some(Boolean):!1}const Jn=(0,H.rx)({id:"catalog",apis:[(0,H.ni)({api:r.Ah,deps:{discoveryApi:H.NW,fetchApi:H.gP},factory:({discoveryApi:se,fetchApi:ze})=>new ht.MS({discoveryApi:se,fetchApi:ze})}),(0,H.ni)({api:r.p3,deps:{storageApi:H.E6},factory:({storageApi:se})=>new ce({storageApi:se})})],routes:{catalogIndex:G,catalogEntity:r.wi},externalRoutes:{createComponent:Te,viewTechDoc:$e,createFromTemplate:Le},__experimentalConfigure(se){return{...{createButtonTitle:"Create"},...se}}}),br=Jn.provide((0,H.P4)({name:"CatalogIndexPage",component:()=>e.e(7878).then(e.bind(e,27878)).then(se=>se.CatalogPage),mountPoint:G})),Mr=Jn.provide((0,H.P4)({name:"CatalogEntityPage",component:()=>e.e(9958).then(e.bind(e,39958)).then(se=>se.CatalogEntityPage),mountPoint:r.wi})),wr=Jn.provide((0,H.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(3588).then(e.bind(e,73588)).then(se=>se.AboutCard)}})),Ar=Jn.provide((0,H.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(5739).then(e.bind(e,24774)).then(se=>se.EntityLinksCard)}})),vr=Jn.provide((0,H.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(4976).then(e.bind(e,4976)).then(se=>se.EntityLabelsCard)}})),Lr=Jn.provide((0,H.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(1901).then(e.bind(e,43629)).then(se=>se.HasSystemsCard)}})),hr=Jn.provide((0,H.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(7128).then(e.bind(e,27128)).then(se=>se.HasComponentsCard)}})),Nn=Jn.provide((0,H.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(9391).then(e.bind(e,19391)).then(se=>se.HasSubcomponentsCard)}})),Rr=Jn.provide((0,H.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2071).then(e.bind(e,52071)).then(se=>se.HasResourcesCard)}})),xr=Jn.provide((0,H.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(se=>se.DependsOnComponentsCard)}})),jr=Jn.provide((0,H.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(se=>se.DependencyOfComponentsCard)}})),kr=Jn.provide((0,H.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(se=>se.DependsOnResourcesCard)}})),Nr=Jn.provide((0,H.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(se=>se.RelatedEntitiesCard)}})),Br=Jn.provide((0,pt.E5)({name:"CatalogSearchResultListItem",component:()=>e.e(638).then(e.bind(e,40638)).then(se=>se.CatalogSearchResultListItem),predicate:se=>se.type==="software-catalog"}))},16673:function(fn,Ut,e){"use strict";e.d(Ut,{BL:function(){return l.o},Cy:function(){return l.m},Eq:function(){return l.u},Es:function(){return l.C},FZ:function(){return l.r},Hz:function(){return l.t},Kf:function(){return l.H},PA:function(){return l.v},Tu:function(){return l.e},VU:function(){return l.w},_l:function(){return l.F},bM:function(){return l.g},dN:function(){return l.d},f2:function(){return l.p},im:function(){return l.z},jF:function(){return l.j},mr:function(){return l.y},o6:function(){return l.k},p$:function(){return l.B},rR:function(){return l.f},vA:function(){return l.x},yf:function(){return l.l}});var l=e(41881),y=e(82394),g=e.n(y),d=e(34520),m=e(76635),A=e.n(m),H=e(80236),je=e(30705),r=e(49462),be=e(64304),ne=e(67898),ie=e(2784),ve=e(19928),Y=e.n(ve),Ee=e(52963),fe=e(75650),_=e(32272),Ce=e(88285),I=e(92573)},42214:function(fn,Ut,e){"use strict";e.d(Ut,{IJ:function(){return he},Oz:function(){return h},Q3:function(){return we},fX:function(){return Nt},i4:function(){return de}});var l=e(30705),y=e(1854),g=e(89393),d=e(49462),m=e(2784),A=e(64304),H=e(39857),je=e(73557),r=e(79692),be=e(27616),ne=e(8284),ie=e(90436),ve=e(4614),Y=e(80030),Ee=e(69087),fe=e(35111),_=e(14498),Ce=e(89571),I=e(15584),Pt=e(49378),Oe=e(70660),pe=e(91256),Se=e(37390),F=e(95544),Je=e(67358),Ct=e(27556),it=e(97485),Bt=e(61837),Ue=e(77277),tt=e(38016),lt=e(69001),Yt=e(26228),ot=e(80236),rn=e(64279),C=e(30254),At=e(34520),en=e(82717),tn=e.n(en),K=e(43266),ct=e(58838),dt=e(77446),Ye=e(26883);const ut=(0,l.T0)({id:"plugin.githubactions.service"});var Rt=Object.defineProperty,St=(c,b,L)=>b in c?Rt(c,b,{enumerable:!0,configurable:!0,writable:!0,value:L}):c[b]=L,ft=(c,b,L)=>(St(c,typeof b!="symbol"?b+"":b,L),L);class Mt{constructor(b){ft(this,"configApi"),ft(this,"scmAuthApi"),this.configApi=b.configApi,this.scmAuthApi=b.scmAuthApi}async getOctokit(b="github.com"){var L;const{token:D}=await this.scmAuthApi.getCredentials({url:`https://${b}/`,additionalScope:{customScopes:{github:["repo"]}}}),W=(0,y.MY)((L=this.configApi.getOptionalConfigArray("integrations.github"))!=null?L:[]).find(ye=>ye.host===b),k=W==null?void 0:W.apiBaseUrl;return new g.v({auth:D,baseUrl:k})}async reRunWorkflow(b){const{hostname:L,owner:D,repo:R,runId:W}=b;return(await this.getOctokit(L)).actions.reRunWorkflow({owner:D,repo:R,run_id:W})}async listWorkflowRuns(b){const{hostname:L,owner:D,repo:R,pageSize:W=100,page:k=0,branch:ye}=b;return(await(await this.getOctokit(L)).actions.listWorkflowRunsForRepo({owner:D,repo:R,per_page:W,page:k,...ye?{branch:ye}:{}})).data}async getWorkflow(b){const{hostname:L,owner:D,repo:R,id:W}=b;return(await(await this.getOctokit(L)).actions.getWorkflow({owner:D,repo:R,workflow_id:W})).data}async getWorkflowRun(b){const{hostname:L,owner:D,repo:R,id:W}=b;return(await(await this.getOctokit(L)).actions.getWorkflowRun({owner:D,repo:R,run_id:W})).data}async listJobsForWorkflowRun(b){const{hostname:L,owner:D,repo:R,id:W,pageSize:k=100,page:ye=0}=b;return(await(await this.getOctokit(L)).actions.listJobsForWorkflowRun({owner:D,repo:R,run_id:W,per_page:k,page:ye})).data}async downloadJobLogsForWorkflowRun(b){const{hostname:L,owner:D,repo:R,runId:W}=b;return(await(await this.getOctokit(L)).actions.downloadJobLogsForWorkflowRun({owner:D,repo:R,job_id:W})).data}}var mt=(c=>(c[c.success=0]="success",c[c.failure=1]="failure",c[c.pending=2]="pending",c[c.running=3]="running",c))(mt||{});const xt=(0,l.NT)({id:"github-actions"}),Wt=(0,l.Rz)({id:"github-actions/build",path:"/:id",parent:xt}),Lt=(0,l.rx)({id:"github-actions",apis:[(0,l.ni)({api:ut,deps:{configApi:l.Ds,scmAuthApi:d.Om},factory:({configApi:c,scmAuthApi:b})=>new Mt({configApi:c,scmAuthApi:b})})],routes:{entityContent:xt}}),Nt=Lt.provide((0,l.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return rt}).then(c=>c.Router),mountPoint:xt})),ge=Lt.provide((0,l.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(c=>c.LatestWorkflowRunCard)}})),Fe=Lt.provide((0,l.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(c=>c.LatestWorkflowsForBranchCard)}})),Xe=Lt.provide((0,l.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(c=>c.RecentWorkflowRunsCard)}})),Ke="github.com/project-slug",ht=c=>{var b,L;return(L=(b=c==null?void 0:c.metadata.annotations)==null?void 0:b[Ke])!=null?L:""},pt=({status:c,conclusion:b})=>{if(c===void 0)return null;switch(c.toLocaleLowerCase("en-US")){case"queued":return m.createElement(m.Fragment,null,m.createElement(ot.wA,null)," Queued");case"in_progress":return m.createElement(m.Fragment,null,m.createElement(ot.VC,null)," In progress");case"completed":switch(b==null?void 0:b.toLocaleLowerCase("en-US")){case"skipped":return m.createElement(m.Fragment,null,m.createElement(ot.dh,null)," Aborted");case"timed_out":return m.createElement(m.Fragment,null,m.createElement(ot.Pd,null)," Timed out");case"failure":return m.createElement(m.Fragment,null,m.createElement(ot.vK,null)," Error");default:return m.createElement(m.Fragment,null,m.createElement(ot.Kq,null)," Completed")}default:return m.createElement(m.Fragment,null,m.createElement(ot.wA,null)," Pending")}},$t=({hostname:c,owner:b,repo:L})=>{const D=(0,l.h_)(ut),{id:R}=(0,l.Oi)(Wt);return(0,rn.default)(async()=>{if(!L||!b)throw new Error("No repo/owner provided");const W=await D.listJobsForWorkflowRun({hostname:c,owner:b,repo:L,id:parseInt(R,10)});return{total_count:W.total_count,jobs:W.jobs.map(k=>{var ye,et,U,Z;return{html_url:(ye=k.html_url)!=null?ye:void 0,status:k.status,conclusion:(et=k.conclusion)!=null?et:void 0,started_at:k.started_at,completed_at:(U=k.completed_at)!=null?U:void 0,id:k.id,name:k.name,steps:(Z=k.steps)==null?void 0:Z.map(te=>{var T,B,V;return{name:te.name,status:te.status,conclusion:(T=te.conclusion)!=null?T:void 0,number:te.number,started_at:(B=te.started_at)!=null?B:void 0,completed_at:(V=te.completed_at)!=null?V:void 0}})}})}},[L,b,R])},Xt=({hostname:c,owner:b,repo:L})=>{const D=(0,l.h_)(ut),{id:R}=(0,l.Oi)(Wt);return(0,rn.default)(async()=>L&&b?D.getWorkflowRun({hostname:c,owner:b,repo:L,id:parseInt(R,10)}):Promise.reject(new Error("No repo/owner provided")),[L,b,R])},Ft=({hostname:c,owner:b,repo:L,id:D})=>{const R=(0,l.h_)(ut);return(0,rn.default)(async()=>L&&b?R.downloadJobLogsForWorkflowRun({hostname:c,owner:b,repo:L,runId:D}):Promise.reject("No repo/owner provided"),[L,b,D])},j=c=>{var b,L,D;const R=(D=(b=c==null?void 0:c.metadata.annotations)==null?void 0:b[At.M6])!=null?D:(L=c==null?void 0:c.metadata.annotations)==null?void 0:L[At.P1];return R!=null&&R.startsWith("url:")?tn()(R.slice(4)).resource:void 0},ce=(0,r.Z)(c=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:c.palette.background.default}})),Te=({entity:c,runId:b,inProgress:L})=>{const D=ce(),R=ht(c),W=j(c),[k,ye]=R&&R.split("/")||[],et=Ft({hostname:W,owner:k,repo:ye,id:b}),U=et.value?String(et.value):void 0,[Z,te]=m.useState(!1),T=()=>{te(!0)},B=()=>{te(!1)};return m.createElement(be.Z,{TransitionProps:{unmountOnExit:!0},disabled:L},m.createElement(ne.Z,{expandIcon:m.createElement(tt.Z,null),IconButtonProps:{className:D.button}},m.createElement(ie.Z,{variant:"button"},et.loading?m.createElement(ve.Z,null):"Job Log"),m.createElement(Y.ZP,{title:"Open Log",TransitionComponent:Ee.Z,arrow:!0},m.createElement(C.Z,{onClick:V=>{V.stopPropagation(),T()},style:{marginLeft:"auto"}})),m.createElement(fe.Z,{className:D.modal,onClick:V=>V.stopPropagation(),open:Z,onClose:B},m.createElement(_.Z,{in:Z},m.createElement("div",{className:D.modalLogContainer},m.createElement(ot.nU,{text:U!=null?U:"No Values Found",classes:{root:D.log}}))))),U&&m.createElement("div",{className:D.normalLogContainer},m.createElement(ot.nU,{text:U,classes:{root:D.log}})))},$e=(0,r.Z)(c=>({root:{maxWidth:720,margin:c.spacing(2)},title:{padding:c.spacing(1,0,2,0)},table:{padding:c.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Le=(c,b)=>{if(!c||!b)return"";const L=Yt.ou.fromISO(c);return(b?Yt.ou.fromISO(b):Yt.ou.now()).diff(L).toFormat("m 'minutes' s 'seconds'")},G=({step:c})=>{var b;return m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(Pt.Z,{primary:c.name,secondary:Le(c.started_at,c.completed_at)})),m.createElement(I.Z,null,m.createElement(pt,{status:c.status.toLocaleUpperCase("en-US"),conclusion:(b=c.conclusion)==null?void 0:b.toLocaleUpperCase("en-US")})))},Ae=({job:c,className:b,entity:L})=>{var D;const R=$e();return m.createElement(be.Z,{TransitionProps:{unmountOnExit:!0},className:b},m.createElement(ne.Z,{expandIcon:m.createElement(tt.Z,null),IconButtonProps:{className:R.button}},m.createElement(ie.Z,{variant:"button"},c.name," (",Le(c.started_at,c.completed_at),")")),m.createElement(Oe.Z,{className:R.accordionDetails},m.createElement(pe.Z,null,m.createElement(Se.Z,null,(D=c.steps)==null?void 0:D.map(W=>m.createElement(G,{key:W.number,step:W}))))),c.status==="queued"||c.status==="in_progress"?m.createElement(Te,{runId:c.id,inProgress:!0,entity:L}):m.createElement(Te,{runId:c.id,inProgress:!1,entity:L}))},Re=({jobs:c,entity:b})=>{const L=$e();return m.createElement(F.Z,null,c&&c.total_count>0&&c.jobs.map(D=>m.createElement(Ae,{key:D.id,job:D,className:D.status!=="success"?L.failed:L.success,entity:b})))},xe=({entity:c})=>{var b,L,D,R,W,k,ye,et,U,Z,te,T,B,V,me;const _e=ht(c),at=j(c),[He,Ot]=_e&&_e.split("/")||[],yt=Xt({hostname:at,owner:He,repo:Ot}),Tt=$t({hostname:at,owner:He,repo:Ot}),Kt=$e();return yt.error&&yt.error.message?m.createElement(ie.Z,{variant:"h6",color:"error"},"Failed to load build, ",yt.error.message):yt.loading?m.createElement(Je.Z,null):m.createElement("div",{className:Kt.root},m.createElement(F.Z,{mb:3},m.createElement(ot.Oo,{"aria-label":"breadcrumb"},m.createElement(ot.rU,{to:".."},"Workflow runs"),m.createElement(ie.Z,null,"Workflow run details"))),m.createElement(pe.Z,{component:Ct.Z,className:Kt.table},m.createElement(Se.Z,null,m.createElement(it.Z,null,m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Branch")),m.createElement(I.Z,null,(b=yt.value)==null?void 0:b.head_branch)),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Message")),m.createElement(I.Z,null,(D=(L=yt.value)==null?void 0:L.head_commit)==null?void 0:D.message)),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Commit ID")),m.createElement(I.Z,null,(W=(R=yt.value)==null?void 0:R.head_commit)==null?void 0:W.id)),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Workflow")),m.createElement(I.Z,null,(k=yt.value)==null?void 0:k.name)),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Status")),m.createElement(I.Z,null,m.createElement(pt,{status:((ye=yt.value)==null?void 0:ye.status)||void 0,conclusion:((et=yt.value)==null?void 0:et.conclusion)||void 0}))),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Author")),m.createElement(I.Z,null,`${(te=(Z=(U=yt.value)==null?void 0:U.head_commit)==null?void 0:Z.author)==null?void 0:te.name} (${(V=(B=(T=yt.value)==null?void 0:T.head_commit)==null?void 0:B.author)==null?void 0:V.email})`)),m.createElement(Ce.Z,null,m.createElement(I.Z,null,m.createElement(ie.Z,{noWrap:!0},"Links")),m.createElement(I.Z,null,((me=yt.value)==null?void 0:me.html_url)&&m.createElement(ot.rU,{to:yt.value.html_url},"Workflow runs on GitHub"," ",m.createElement(lt.Z,{className:Kt.externalLinkIcon})))),m.createElement(Ce.Z,null,m.createElement(I.Z,{colSpan:2},m.createElement(ie.Z,{noWrap:!0},"Jobs"),Tt.loading?m.createElement(ve.Z,null):m.createElement(Re,{jobs:Tt.value,entity:c})))))))};function J({hostname:c,owner:b,repo:L,branch:D,initialPageSize:R=5}){const W=(0,l.h_)(ut),k=(0,l.h_)(l.VE),[ye,et]=(0,m.useState)(0),[U,Z]=(0,m.useState)(0),[te,T]=(0,m.useState)(R),{loading:B,value:V,retry:me,error:_e}=(0,dt.Z)(async()=>{const at=await W.listWorkflowRuns({hostname:c,owner:b,repo:L,pageSize:te,page:U+1,branch:D});return et(at.total_count),at.workflow_runs.map(He=>{var Ot,yt,Tt,Kt,ln,on,Gt,wt,It;return{workflowName:(Ot=He.name)!=null?Ot:void 0,message:(yt=He.head_commit)==null?void 0:yt.message,id:`${He.id}`,onReRunClick:async()=>{try{await W.reRunWorkflow({hostname:c,owner:b,repo:L,runId:He.id})}catch(dn){k.post(new Error(`Failed to rerun the workflow: ${dn.message}`))}},source:{branchName:(Tt=He.head_branch)!=null?Tt:void 0,commit:{hash:(Kt=He.head_commit)==null?void 0:Kt.id,url:(Gt=(ln=He.head_repository)==null?void 0:ln.branches_url)==null?void 0:Gt.replace("{/branch}",(on=He.head_branch)!=null?on:"")}},status:(wt=He.status)!=null?wt:void 0,conclusion:(It=He.conclusion)!=null?It:void 0,url:He.url,githubUrl:He.html_url}})},[U,te,L,b]);return[{page:U,pageSize:te,loading:B,runs:V,projectName:`${b}/${L}`,total:ye,error:_e},{runs:V,setPage:Z,setPageSize:T,retry:me}]}const q=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:c=>{const b=()=>{const L=(0,l.tg)(Wt);return m.createElement(ot.rU,{component:H.rU,to:L({id:c.id})},c.message)};return m.createElement(b,null)}},{title:"Source",render:c=>{var b,L;return m.createElement(ie.Z,{variant:"body2",noWrap:!0},m.createElement(ie.Z,{paragraph:!0,variant:"body2"},(b=c.source)==null?void 0:b.branchName),m.createElement(ie.Z,{paragraph:!0,variant:"body2"},(L=c.source)==null?void 0:L.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:c=>m.createElement(F.Z,{display:"flex",alignItems:"center"},m.createElement(pt,{status:c.status,conclusion:c.conclusion}))},{title:"Actions",render:c=>m.createElement(Y.ZP,{title:"Rerun workflow"},m.createElement(Bt.Z,{onClick:c.onReRunClick},m.createElement(K.Z,null))),width:"10%"}],Me=({projectName:c,loading:b,pageSize:L,page:D,retry:R,runs:W,onChangePage:k,onChangePageSize:ye,total:et})=>m.createElement(ot.iA,{isLoading:b,options:{paging:!0,pageSize:L,padding:"dense"},totalCount:et,page:D,actions:[{icon:()=>m.createElement(Ye.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>R()}],data:W!=null?W:[],onPageChange:k,onRowsPerPageChange:ye,style:{width:"100%"},title:m.createElement(F.Z,{display:"flex",alignItems:"center"},m.createElement(ct.Z,null),m.createElement(F.Z,{mr:1}),m.createElement(ie.Z,{variant:"h6"},c)),columns:q}),Ge=({entity:c,branch:b})=>{const L=ht(c),D=j(c),[R,W]=(L!=null?L:"/").split("/"),[{runs:k,...ye},{retry:et,setPage:U,setPageSize:Z}]=J({hostname:D,owner:R,repo:W,branch:b}),te=D||"github.com";return!ye.loading&&!k?m.createElement(ot.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:m.createElement(Ue.Z,{variant:"contained",color:"primary",href:`https://${te}/${L}/actions/new`},"Create new Workflow")}):m.createElement(Me,{...ye,runs:k,loading:ye.loading,retry:et,onChangePageSize:Z,onChangePage:U})},we=c=>{var b;return Boolean((b=c.metadata.annotations)==null?void 0:b[Ke])};var rt=Object.freeze({__proto__:null,isGithubActionsAvailable:we,Router:()=>{const{entity:c}=(0,A.X2)();return we(c)?m.createElement(je.Z5,null,m.createElement(je.AW,{path:"/",element:m.createElement(Ge,{entity:c})}),m.createElement(je.AW,{path:`${Wt.path}`,element:m.createElement(xe,{entity:c})}),")"):m.createElement(ot.sk,{annotation:Ke})}});const oe=(0,r.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),X=c=>{var b;const{error:L,loading:D,lastRun:R,branch:W}=c,k=oe();return L?m.createElement(ie.Z,null,"Couldn't fetch latest ",W," run"):D?m.createElement(Je.Z,null):m.createElement(ot.xT,{metadata:{status:m.createElement(m.Fragment,null,m.createElement(pt,{status:R.status,conclusion:R.conclusion})),message:R.message,url:m.createElement(ot.rU,{to:(b=R.githubUrl)!=null?b:""},"See more on GitHub"," ",m.createElement(lt.Z,{className:k.externalLinkIcon}))}})},de=c=>{var b,L,D;const{branch:R="master",variant:W}=c,{entity:k}=(0,A.X2)(),ye=(0,l.h_)(l.VE),et=j(k),[U,Z]=((L=(b=k==null?void 0:k.metadata.annotations)==null?void 0:b[Ke])!=null?L:"/").split("/"),[{runs:te,loading:T,error:B}]=J({hostname:et,owner:U,repo:Z,branch:R}),V=(D=te==null?void 0:te[0])!=null?D:{};return(0,m.useEffect)(()=>{B&&ye.post(B)},[B,ye]),m.createElement(ot.rJ,{title:`Last ${R} build`,variant:W},m.createElement(X,{error:B,loading:T,branch:R,lastRun:V}))},he=c=>{const{branch:b="master",variant:L}=c,{entity:D}=(0,A.X2)();return m.createElement(ot.rJ,{title:`Last ${b} build`,variant:L},m.createElement(Ge,{branch:b,entity:D}))},S=c=>c.split(`
`)[0],h=c=>{var b,L;const{branch:D,dense:R=!1,limit:W=5,variant:k}=c,{entity:ye}=(0,A.X2)(),et=(0,l.h_)(l.VE),U=j(ye),[Z,te]=((L=(b=ye==null?void 0:ye.metadata.annotations)==null?void 0:b[Ke])!=null?L:"/").split("/"),[{runs:T=[],loading:B,error:V}]=J({hostname:U,owner:Z,repo:te,branch:D,initialPageSize:W});(0,m.useEffect)(()=>{V&&et.post(V)},[V,et]);const me=U||"github.com",_e=(0,l.tg)(Wt);return V?m.createElement(ot.yu,{title:V.message,error:V}):m.createElement(ot.rJ,{title:"Recent Workflow Runs",subheader:D?`Branch: ${D}`:"All Branches",noPadding:!0,variant:k},T.length?m.createElement(ot.iA,{isLoading:B,options:{search:!1,paging:!1,padding:R?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:at=>{var He;return m.createElement(ot.rU,{component:H.rU,to:_e({id:at.id})},S((He=at.message)!=null?He:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:pt}],data:T}):m.createElement("div",{style:{textAlign:"center"}},m.createElement(ie.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),m.createElement(ie.Z,{variant:"body2"},m.createElement(ot.rU,{to:`https://${me}/${Z}/${te}/actions/new`},"Create a new workflow"))))}},27826:function(fn,Ut,e){"use strict";e.d(Ut,{T:function(){return ne},_:function(){return ie}});var l=e(2784),y=e(8629),g=e(79249),d=e(38724),m=e(49429),A=e(77277),H=e(61837),je=e(47603),r=e(80236),be=e(30705);const ne=Y=>{const{open:Ee,close:fe,componentName:_,children:Ce}=Y;return l.createElement(y.Z,{open:Ee,onClose:()=>fe()},l.createElement(g.Z,null,"Settings - ",_),l.createElement(d.Z,null,Ce),l.createElement(m.Z,null,l.createElement(A.Z,{onClick:()=>fe(),color:"primary",variant:"contained"},"Close")))};function ie(Y){const{title:Ee,components:fe,name:_,description:Ce,layout:I,settings:Pt}=Y,Oe=(Pt==null?void 0:Pt.schema)!==void 0;return(0,be.YO)({name:_,data:{title:Ee,description:Ce,"home.widget.config":{layout:I,settings:Pt}},component:{lazy:()=>fe().then(pe=>Se=>l.createElement(ve,{...Se,...pe,title:Se.title||Ee,isCustomizable:Oe}))}})}function ve(Y){const{Renderer:Ee,Content:fe,Settings:_,Actions:Ce,ContextProvider:I,isCustomizable:Pt,title:Oe,...pe}=Y,Se=(0,be.qD)(),{Progress:F}=Se.getComponents(),[Je,Ct]=l.useState(!1);if(Ee)return l.createElement(l.Suspense,{fallback:l.createElement(F,null)},l.createElement(Ee,{title:Oe,Content:fe,...Ce?{Actions:Ce}:{},..._&&!Pt?{Settings:_}:{},...I?{ContextProvider:I}:{},...pe}));const it={title:Oe,..._&&!Pt?{action:l.createElement(H.Z,{onClick:()=>Ct(!0)},l.createElement(je.Z,null,"Settings"))}:{},...Ce?{actions:l.createElement(Ce,null)}:{}},Bt=l.createElement(r.rJ,{...it},_&&!Pt&&l.createElement(ne,{open:Je,componentName:Oe,close:()=>Ct(!1)},l.createElement(_,null)),l.createElement(fe,{...pe}));return l.createElement(l.Suspense,{fallback:l.createElement(F,null)},I?l.createElement(I,{...pe},Bt):Bt)}},68306:function(fn,Ut,e){"use strict";e.d(Ut,{E9:function(){return Le},gC:function(){return ut}});var l=e(30705),y=e(27826),g=e(2784),d=e(66244),m=e.n(d),A=e(79692),H=e(12420),je=e(8629),r=e(38724),be=e(60905),ne=e(80030),ie=e(79249),ve=e(3806),Y=e(60364),Ee=e(76635),fe=e.n(Ee),_=e(72164),Ce=e(80236),I=e(90436),Pt=e(61837),Oe=e(47603),pe=e(22983),Se=e(55635),F=e(39362),Je=e(11776),Ct=e(38402),it=e(65549),Bt=e(49378),Ue=e(77277),tt=e(96401),lt=e(27604),Yt=e(49166),ot=e(30195);const rn=(0,l.NT)({id:"home"}),C=(0,l.rx)({id:"home",routes:{root:rn}}),At=C.provide((0,l.P4)({name:"HomepageCompositionRoot",component:()=>e.e(7849).then(e.bind(e,57849)).then(q=>q.HomepageCompositionRoot),mountPoint:rn})),en=C.provide((0,l.CO)({name:"ComponentAccordion",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(q=>q.ComponentAccordion)}})),tn=C.provide((0,l.CO)({name:"ComponentTabs",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(q=>q.ComponentTabs)}})),K=C.provide((0,l.CO)({name:"ComponentTab",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(q=>q.ComponentTab)}})),ct=C.provide((0,l.CO)({name:"WelcomeTitle",component:{lazy:()=>e.e(4461).then(e.bind(e,4461)).then(q=>q.WelcomeTitle)}})),dt=C.provide((0,l.CO)({name:"CompanyLogo",component:{lazy:()=>e.e(3258).then(e.bind(e,33258)).then(q=>q.CompanyLogo)}})),Ye=C.provide((0,y._)({name:"HomePageRandomJoke",title:"Random Joke",components:()=>e.e(8163).then(e.bind(e,8163)),description:"Shows a random joke about optional category",layout:{height:{minRows:4},width:{minColumns:3}},settings:{schema:{title:"Random Joke settings",type:"object",properties:{defaultCategory:{title:"Category",type:"string",enum:["any","programming","dad"],default:"any"}}}}})),ut=C.provide((0,y._)({name:"HomePageToolkit",title:"Toolkit",components:()=>e.e(7777).then(e.bind(e,27777))})),Rt=C.provide((0,y._)({name:"HomePageStarredEntities",title:"Your Starred Entities",components:()=>e.e(8943).then(e.bind(e,58943))})),St=C.provide((0,l.CO)({name:"HeaderWorldClock",component:{lazy:()=>e.e(2352).then(e.bind(e,32352)).then(q=>q.HeaderWorldClock)}})),ft=(0,Se.Zz)(e(80070).Q2),Mt=(0,A.Z)(q=>(0,H.Z)({iconGrid:{height:"100%","& *":{padding:0}},settingsOverlay:{position:"absolute",backgroundColor:"rgba(40, 40, 40, 0.93)",width:"100%",height:"100%",top:0,left:0,padding:q.spacing(2),color:"white"}})),mt=q=>{const{id:Me,widget:Ge,settings:we,handleRemove:Ve,handleSettingsSave:rt}=q,[oe,X]=g.useState(!1),de=Mt();return g.createElement("div",{className:de.settingsOverlay},Ge.settingsSchema&&g.createElement(je.Z,{open:oe,className:"widgetSettingsDialog",onClose:()=>X(!1)},g.createElement(r.Z,null,g.createElement(ft,{validator:F.ZP,showErrorList:!1,schema:Ge.settingsSchema,uiSchema:Ge.uiSchema,noHtml5Validate:!0,formData:we,formContext:{settings:we},onSubmit:({formData:he,errors:S})=>{S.length===0&&(rt(Me,he),X(!1))}}))),g.createElement(be.Z,{container:!0,className:de.iconGrid,alignItems:"center",justifyContent:"center"},Ge.settingsSchema&&g.createElement(be.Z,{item:!0,className:"overlayGridItem"},g.createElement(ne.ZP,{title:"Edit settings"},g.createElement(Pt.Z,{color:"primary",onClick:()=>X(!0)},g.createElement(Oe.Z,{fontSize:"large"})))),g.createElement(be.Z,{item:!0,className:"overlayGridItem"},g.createElement(ne.ZP,{title:"Delete widget"},g.createElement(Pt.Z,{color:"secondary",onClick:()=>Ve(Me)},g.createElement(pe.Z,{fontSize:"large"}))))))},xt=q=>{var Me;return(Me=q.title)!=null?Me:q.name},Wt=q=>{const{widgets:Me,handleAdd:Ge}=q;return g.createElement(g.Fragment,null,g.createElement(ie.Z,null,"Add new widget to dashboard"),g.createElement(r.Z,null,g.createElement(Je.Z,{dense:!0},Me.map(we=>g.createElement(Ct.Z,{key:we.name,button:!0,onClick:()=>Ge(we)},g.createElement(ve.Z,null,g.createElement(it.Z,null)),g.createElement(Bt.Z,{secondary:we.description&&g.createElement(I.Z,{component:"span",variant:"caption",color:"textPrimary"},we.description),primary:g.createElement(I.Z,{variant:"body1",color:"textPrimary"},xt(we))}))))))},Lt=(0,A.Z)(q=>(0,H.Z)({contentHeaderBtn:{marginLeft:q.spacing(2)},widgetWrapper:{"& > *:first-child":{width:"100%",height:"100%"}}})),Nt=q=>{const{editMode:Me,numWidgets:Ge,clearLayout:we,setAddWidgetDialogOpen:Ve,changeEditMode:rt,defaultConfigAvailable:oe,restoreDefault:X}=q,de=Lt();return g.createElement(g.Fragment,null,!Me&&Ge>0?g.createElement(Ue.Z,{variant:"contained",color:"primary",onClick:()=>rt(!0),size:"small",startIcon:g.createElement(lt.Z,null)},"Edit"):g.createElement(g.Fragment,null,oe&&g.createElement(Ue.Z,{variant:"contained",className:de.contentHeaderBtn,onClick:X,size:"small",startIcon:g.createElement(Yt.Z,null)},"Restore defaults"),Ge>0&&g.createElement(Ue.Z,{variant:"contained",color:"secondary",className:de.contentHeaderBtn,onClick:we,size:"small",startIcon:g.createElement(pe.Z,null)},"Clear all"),g.createElement(Ue.Z,{variant:"contained",className:de.contentHeaderBtn,onClick:()=>Ve(!0),size:"small",startIcon:g.createElement(it.Z,null)},"Add widget"),Ge>0&&g.createElement(Ue.Z,{className:de.contentHeaderBtn,variant:"contained",color:"primary",onClick:()=>rt(!1),size:"small",startIcon:g.createElement(tt.Z,null)},"Save")))},ge=ot.z.any(),Fe=ot.z.any(),Xe=ot.z.any(),Ke=ot.z.any(),ht=ot.z.object({component:Xe,x:ot.z.number().nonnegative("x must be positive number"),y:ot.z.number().nonnegative("y must be positive number"),width:ot.z.number().positive("width must be positive number"),height:ot.z.number().positive("height must be positive number")}),pt=ot.z.object({name:ot.z.string(),title:ot.z.string().optional(),description:ot.z.string().optional(),component:Xe,width:ot.z.number().positive("width must be positive number").optional(),height:ot.z.number().positive("height must be positive number").optional(),minWidth:ot.z.number().positive("minWidth must be positive number").optional(),maxWidth:ot.z.number().positive("maxWidth must be positive number").optional(),minHeight:ot.z.number().positive("minHeight must be positive number").optional(),maxHeight:ot.z.number().positive("maxHeight must be positive number").optional(),settingsSchema:ge.optional(),uiSchema:Fe.optional()}),$t=ot.z.object({id:ot.z.string(),layout:Ke,settings:ot.z.record(ot.z.string(),ot.z.any())}),Xt=ot.z.object({version:ot.z.literal(1),pages:ot.z.record(ot.z.string(),ot.z.array($t))}),Ft=(0,d.WidthProvider)(d.Responsive),j=(0,A.Z)(q=>(0,H.Z)({responsiveGrid:{"& .react-grid-item > .react-resizable-handle:after":{position:"absolute",content:'""',borderStyle:"solid",borderWidth:"0 0 20px 20px",borderColor:`transparent transparent ${q.palette.primary.light} transparent`}},contentHeaderBtn:{marginLeft:q.spacing(2)},widgetWrapper:{overflow:"hidden",'& > div[class*="MuiCard-root"]':{width:"100%",height:"100%"},'& div[class*="MuiCardContent-root"]':{overflow:"auto"},"& + .react-grid-placeholder":{backgroundColor:q.palette.primary.light},"&.edit > :active":{cursor:"move"}}}));function ce(q){const Me="home",Ge=(0,l.h_)(l.E6).forBucket("home.customHomepage"),we=(0,g.useCallback)(oe=>{const X={version:1,pages:{default:oe}};Ge.set(Me,JSON.stringify(X))},[Me,Ge]),Ve=(0,_.Z)(Ge.observe$(Me),Ge.snapshot(Me));return[(0,g.useMemo)(()=>{if(Ve.presence==="absent")return q;try{const oe=JSON.parse(Ve.value);return Xt.parse(oe).pages.default}catch{return q}},[Ve,q]),we]}const Te=(q,Me)=>{const Ge=q.map((we,Ve)=>{var rt,oe;const X=ht.parse(we),de=g.isValidElement(X.component)?(0,l.IY)(X.component,"core.extensionName"):X.component;if(!de)return null;const he=Me.find(h=>h.name===de);if(!he)return null;const S=`${he.name}__${Ve}${Math.random().toString(36).slice(2)}`;return{id:S,layout:{i:S,x:X.x,y:X.y,w:Math.min((rt=he.maxWidth)!=null?rt:Number.MAX_VALUE,X.width),h:Math.min((oe=he.maxHeight)!=null?oe:Number.MAX_VALUE,X.height),minW:he.minWidth,maxW:he.maxWidth,minH:he.minHeight,maxH:he.maxHeight,isDraggable:!1,isResizable:!1},settings:{}}});return(0,Ee.compact)(Ge)},$e=q=>q.selectByComponentData({key:"core.extensionName"}).getElements().flatMap(Me=>{var Ge,we,Ve,rt,oe,X,de,he,S,h,c,b,L,D;const R=(0,l.IY)(Me,"home.widget.config");return[pt.parse({component:Me,name:(0,l.IY)(Me,"core.extensionName"),title:(0,l.IY)(Me,"title"),description:(0,l.IY)(Me,"description"),settingsSchema:(Ge=R==null?void 0:R.settings)==null?void 0:Ge.schema,uiSchema:(we=R==null?void 0:R.settings)==null?void 0:we.uiSchema,width:(rt=(Ve=R==null?void 0:R.layout)==null?void 0:Ve.width)==null?void 0:rt.defaultColumns,minWidth:(X=(oe=R==null?void 0:R.layout)==null?void 0:oe.width)==null?void 0:X.minColumns,maxWidth:(he=(de=R==null?void 0:R.layout)==null?void 0:de.width)==null?void 0:he.maxColumns,height:(h=(S=R==null?void 0:R.layout)==null?void 0:S.height)==null?void 0:h.defaultRows,minHeight:(b=(c=R==null?void 0:R.layout)==null?void 0:c.height)==null?void 0:b.minRows,maxHeight:(D=(L=R==null?void 0:R.layout)==null?void 0:L.height)==null?void 0:D.maxRows})]}),Le=q=>{var Me;const Ge=j(),we=(0,Y.Z)(),Ve=(0,l.vJ)(q.children,$e,[q]),rt=q.config?Te(q.config,Ve):[],[oe,X]=ce(rt),[de,he]=g.useState(!1),S=oe.find(Z=>Z.layout.isResizable)!==void 0,[h,c]=g.useState(S),b=Z=>Ve.find(te=>te.name===Z),L=Z=>Z.split("__")[0],D=Z=>{var te,T,B,V;const me=`${Z.name}__${oe.length+1}${Math.random().toString(36).slice(2)}`;X([...oe,{id:me,layout:{i:me,x:0,y:Math.max(...oe.map(_e=>_e.layout.y+_e.layout.h))+1,w:Math.min((te=Z.maxWidth)!=null?te:Number.MAX_VALUE,(T=Z.width)!=null?T:12),h:Math.min((B=Z.maxHeight)!=null?B:Number.MAX_VALUE,(V=Z.height)!=null?V:4),minW:Z.minWidth,maxW:Z.maxWidth,minH:Z.minHeight,maxH:Z.maxHeight,isResizable:h,isDraggable:h},settings:{}}]),he(!1)},R=Z=>{X(oe.filter(te=>te.id!==Z))},W=(Z,te)=>{const T=oe.findIndex(B=>B.id===Z);if(T>=0){const B=oe[T];B.settings=te,oe[T]=B,X(oe)}},k=()=>{X([])},ye=Z=>{c(Z),X(oe.map(te=>({...te,layout:{...te.layout,isDraggable:Z,isResizable:Z}})))},et=(Z,te)=>{if(h){const T=Z.map(B=>({...oe.find(me=>me.id===B.i),layout:B}));X(T)}},U=()=>{X(rt)};return g.createElement(g.Fragment,null,g.createElement(Ce.yW,{title:""},g.createElement(Nt,{editMode:h,numWidgets:oe.length,clearLayout:k,setAddWidgetDialogOpen:he,changeEditMode:ye,defaultConfigAvailable:q.config!==void 0,restoreDefault:U})),g.createElement(je.Z,{open:de,onClose:()=>he(!1)},g.createElement(Wt,{widgets:Ve,handleAdd:D})),!h&&oe.length===0&&g.createElement(I.Z,{variant:"h5",align:"center"},"No widgets added. Start by clicking the 'Add widget' button."),g.createElement(Ft,{className:Ge.responsiveGrid,measureBeforeMount:!0,compactType:q.compactType,style:q.style,allowOverlap:q.allowOverlap,preventCollision:q.preventCollision,draggableCancel:".overlayGridItem,.widgetSettingsDialog",containerPadding:q.containerPadding,margin:q.containerMargin,breakpoints:q.breakpoints?q.breakpoints:we.breakpoints.values,cols:q.cols?q.cols:{xl:12,lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:(Me=q.rowHeight)!=null?Me:60,onLayoutChange:et,layouts:{xl:oe.map(Z=>Z.layout)}},oe.map(Z=>{var te;const T=Z.layout,B=L(T.i),V=b(B);if(!V||!V.component)return null;const me={...V.component.props,...(te=Z.settings)!=null?te:{}};return g.createElement("div",{key:T.i,className:`${Ge.widgetWrapper} ${h&&"edit"}`},g.createElement(Ce.SV,null,g.createElement(V.component.type,{...me})),h&&g.createElement(mt,{id:T.i,widget:V,handleRemove:R,handleSettingsSave:W,settings:Z.settings}))})))},G=q=>React.createElement("svg",{className:q.classes.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2079.95 456.05"},React.createElement("path",{className:q.classes.path,d:"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z"})),Ae=(0,A.Z)({svg:{width:"auto",height:28},path:{fill:"#7df3e1"}}),Re=()=>{const q=Ae();return React.createElement("svg",{className:q.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 337.46 428.5"},React.createElement("path",{className:q.path,d:"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z"}))},xe=null,J=null},26622:function(fn,Ut,e){"use strict";e.d(Ut,{f:function(){return g}});var l=e(75650),y=e(5083);const g=(0,y.J$)({name:"jenkins.execute",attributes:{action:"update"},resourceType:l.ui}),d=[g]},2125:function(fn,Ut,e){"use strict";e.d(Ut,{eY:function(){return At},oH:function(){return Rt}});var l=e(30705),y=e(32272),g=e(79692),d=e(67358),m=e(90436),A=e(95544),H=e(80030),je=e(61837),r=e(91256),be=e(27556),ne=e(37390),ie=e(97485),ve=e(89571),Y=e(15584),Ee=e(69001),fe=e(26228),_=e(2784),Ce=e(80236),I=e(77446),Pt=e(64304),Oe=e(34520),pe=e(73557),Se=e(52963),F=e(43266),Je=e(72753),Ct=e(33901),it=e(26622),Bt=Object.defineProperty,Ue=(j,ce,Te)=>ce in j?Bt(j,ce,{enumerable:!0,configurable:!0,writable:!0,value:Te}):j[ce]=Te,tt=(j,ce,Te)=>(Ue(j,typeof ce!="symbol"?ce+"":ce,Te),Te);const lt=(0,l.T0)({id:"plugin.jenkins.service2"});class Yt{constructor(ce){tt(this,"discoveryApi"),tt(this,"identityApi"),this.discoveryApi=ce.discoveryApi,this.identityApi=ce.identityApi}async getProjects(ce){var Te;const{entity:$e,filter:Le}=ce,G=new URL(`${await this.discoveryApi.getBaseUrl("jenkins")}/v1/entity/${encodeURIComponent($e.namespace)}/${encodeURIComponent($e.kind)}/${encodeURIComponent($e.name)}/projects`);Le.branch&&G.searchParams.append("branch",Le.branch);const Ae=await this.getToken();return((Te=(await(await fetch(G.href,{method:"GET",headers:{...Ae&&{Authorization:`Bearer ${Ae}`}}})).json()).projects)==null?void 0:Te.map(xe=>({...xe,onRestartClick:()=>this.retry({entity:$e,jobFullName:xe.fullName,buildNumber:String(xe.lastBuild.number)})})))||[]}async getBuild(ce){const{entity:Te,jobFullName:$e,buildNumber:Le}=ce,G=`${await this.discoveryApi.getBaseUrl("jenkins")}/v1/entity/${encodeURIComponent(Te.namespace)}/${encodeURIComponent(Te.kind)}/${encodeURIComponent(Te.name)}/job/${encodeURIComponent($e)}/${encodeURIComponent(Le)}`,Ae=await this.getToken();return(await(await fetch(G,{method:"GET",headers:{...Ae&&{Authorization:`Bearer ${Ae}`}}})).json()).build}async retry(ce){const{entity:Te,jobFullName:$e,buildNumber:Le}=ce,G=`${await this.discoveryApi.getBaseUrl("jenkins")}/v1/entity/${encodeURIComponent(Te.namespace)}/${encodeURIComponent(Te.kind)}/${encodeURIComponent(Te.name)}/job/${encodeURIComponent($e)}/${encodeURIComponent(Le)}:rebuild`,Ae=await this.getToken(),Re=await fetch(G,{method:"POST",headers:{...Ae&&{Authorization:`Bearer ${Ae}`}}});if(!Re.ok)throw await y.VL.fromResponse(Re)}async getToken(){const{token:ce}=await this.identityApi.getCredentials();return ce}}const ot=(0,l.NT)({id:"jenkins"}),rn=(0,l.Rz)({id:"jenkins/builds",path:"/builds/:jobFullName/:buildNumber",parent:ot}),C=(0,l.rx)({id:"jenkins",apis:[(0,l.ni)({api:lt,deps:{discoveryApi:l.NW,identityApi:l.$4},factory:({discoveryApi:j,identityApi:ce})=>new Yt({discoveryApi:j,identityApi:ce})})],routes:{entityContent:ot}}),At=C.provide((0,l.P4)({name:"EntityJenkinsContent",component:()=>Promise.resolve().then(function(){return Ft}).then(j=>j.Router),mountPoint:ot})),en=C.provide((0,l.CO)({name:"EntityLatestJenkinsRunCard",component:{lazy:()=>e.e(5841).then(e.bind(e,95841)).then(j=>j.LatestRunCard)}})),tn=({status:j})=>{if(j===void 0)return null;switch(j.toLocaleLowerCase("en-US")){case"queued":case"scheduled":return _.createElement(_.Fragment,null,_.createElement(Ce.wA,null)," Queued");case"running":return _.createElement(_.Fragment,null,_.createElement(Ce.VC,null)," In progress");case"unstable":return _.createElement(_.Fragment,null,_.createElement(Ce.Pd,null)," Unstable");case"failure":return _.createElement(_.Fragment,null,_.createElement(Ce.vK,null)," Failed");case"success":return _.createElement(_.Fragment,null,_.createElement(Ce.Kq,null)," Completed");case"aborted":return _.createElement(_.Fragment,null,_.createElement(Ce.dh,null)," Aborted");default:return _.createElement(_.Fragment,null,_.createElement(Ce.Pd,null)," ",j)}};var K=(j=>(j[j.CONNECTION_ERROR=0]="CONNECTION_ERROR",j[j.NOT_FOUND=1]="NOT_FOUND",j))(K||{});function ct({branch:j}={}){const{entity:ce}=(0,Pt.X2)(),Te=(0,Oe.iB)(ce),$e=(0,l.h_)(lt),Le=(0,l.h_)(l.VE),[G,Ae]=(0,_.useState)(0),[Re,xe]=(0,_.useState)(0),[J,q]=(0,_.useState)(5),[Me,Ge]=(0,_.useState)(),we=async(X,de)=>{try{await $e.retry({entity:Te,jobFullName:X,buildNumber:de})}catch(he){Le.post(he)}},{loading:Ve,value:rt,retry:oe}=(0,I.Z)(async()=>{try{const X=await $e.getProjects({entity:(0,Oe.iB)(ce),filter:{branch:j}});return Ae(X.length),X}catch(X){const de=X.notFound?1:0;throw Ge({message:X.message,errorType:de}),X}},[$e,Le,ce,j]);return[{page:Re,pageSize:J,loading:Ve,projects:rt,total:G,error:Me},{setPage:xe,setPageSize:q,restartBuild:we,retry:oe}]}const dt=(0,g.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Ye=({loading:j,latestRun:ce})=>{var Te;const $e=dt();if(j||!ce)return _.createElement(d.Z,null);const Le=fe.ou.fromMillis(ce.lastBuild.timestamp).toRelative(),G=(ce.lastBuild.building?"Running for ":"")+((Te=fe.ou.local().minus(fe.nL.fromMillis(ce.lastBuild.duration)).toRelative({locale:"en"}))==null?void 0:Te.replace(" ago",""));return _.createElement(Ce.xT,{metadata:{status:_.createElement(_.Fragment,null,_.createElement(tn,{status:ce.lastBuild.status})),build:ce.fullDisplayName,"latest run":Le,duration:G,link:_.createElement(Ce.rU,{to:ce.lastBuild.url},"See more on Jenkins"," ",_.createElement(Ee.Z,{className:$e.externalLinkIcon}))}})},ut=j=>{const{message:ce,errorType:Te}=j;let $e;return Te===K.CONNECTION_ERROR?$e="Can't connect to Jenkins":Te===K.NOT_FOUND&&($e="Can't find Jenkins project"),_.createElement(Ce.GB,{severity:"error",title:$e,message:ce})},Rt=j=>{const{branch:ce="master",variant:Te}=j,[{projects:$e,loading:Le,error:G}]=ct({branch:ce}),Ae=$e==null?void 0:$e[0];return _.createElement(Ce.rJ,{title:`Latest ${ce} build`,variant:Te},G?_.createElement(ut,{message:G.message,errorType:G.errorType}):_.createElement(Ye,{loading:Le,branch:ce,latestRun:Ae}))},St="jenkins.io/job-full-name",ft="jenkins.io/github-folder",Mt=({count:j})=>j!==0?_.createElement(_.Fragment,null,j," failed"):null,mt=({count:j})=>j!==0?_.createElement(_.Fragment,null,j," skipped"):null,xt=({skipped:j,failed:ce})=>j===0&&ce===0?null:j!==0&&ce!==0?_.createElement(_.Fragment,null," ","(",_.createElement(Mt,{count:ce}),", ",_.createElement(mt,{count:j}),")"):ce!==0?_.createElement(_.Fragment,null," ","(",_.createElement(Mt,{count:ce}),")"):j!==0?_.createElement(_.Fragment,null," ","(",_.createElement(mt,{count:j}),")"):null,Wt=[{title:"Timestamp",defaultSort:"desc",hidden:!0,field:"lastBuild.timestamp"},{title:"Build",field:"fullName",highlight:!0,render:j=>{const ce=()=>{var Te,$e;const Le=(0,l.tg)(rn);return!j.fullName||!((Te=j.lastBuild)!=null&&Te.number)?_.createElement(_.Fragment,null,j.fullName||j.fullDisplayName||j.displayName||"Unknown"):_.createElement(Ce.rU,{to:Le({jobFullName:encodeURIComponent(j.fullName),buildNumber:String(($e=j.lastBuild)==null?void 0:$e.number)})},j.fullDisplayName)};return _.createElement(ce,null)}},{title:"Source",field:"lastBuild.source.branchName",render:j=>{var ce,Te,$e,Le,G,Ae,Re,xe;return _.createElement(_.Fragment,null,_.createElement(m.Z,{paragraph:!0},_.createElement(Ce.rU,{to:($e=(Te=(ce=j.lastBuild)==null?void 0:ce.source)==null?void 0:Te.url)!=null?$e:""},(G=(Le=j.lastBuild)==null?void 0:Le.source)==null?void 0:G.branchName)),_.createElement(m.Z,{paragraph:!0},(xe=(Re=(Ae=j.lastBuild)==null?void 0:Ae.source)==null?void 0:Re.commit)==null?void 0:xe.hash))}},{title:"Status",field:"status",render:j=>_.createElement(A.Z,{display:"flex",alignItems:"center"},_.createElement(tn,{status:j.status}))},{title:"Tests",sorting:!1,render:j=>{var ce,Te,$e,Le,G,Ae,Re,xe;return _.createElement(_.Fragment,null,_.createElement(m.Z,{paragraph:!0},((ce=j.lastBuild)==null?void 0:ce.tests)&&_.createElement(Ce.rU,{to:($e=(Te=j.lastBuild)==null?void 0:Te.tests.testUrl)!=null?$e:""},(Le=j.lastBuild)==null?void 0:Le.tests.passed," / ",(G=j.lastBuild)==null?void 0:G.tests.total," ","passed",_.createElement(xt,{skipped:(Ae=j.lastBuild)==null?void 0:Ae.tests.skipped,failed:(Re=j.lastBuild)==null?void 0:Re.tests.failed})),!((xe=j.lastBuild)!=null&&xe.tests)&&"n/a"))}},{title:"Actions",sorting:!1,render:j=>{const ce=()=>{var Te;const[$e,Le]=(0,_.useState)(!1),{allowed:G,loading:Ae}=(0,Se.N)(it.f),Re=(0,l.h_)(l.$v),xe=async()=>{if(j.onRestartClick){Le(!0);try{await j.onRestartClick(),Re.post({message:"Jenkins re-build has successfully executed",severity:"success",display:"transient"})}catch(J){Re.post({message:`Jenkins re-build has failed. Error: ${J.message}`,severity:"error"})}finally{Le(!1)}}};return _.createElement("div",{style:{width:"98px"}},((Te=j.lastBuild)==null?void 0:Te.url)&&_.createElement(H.ZP,{title:"View build"},_.createElement(je.Z,{href:j.lastBuild.url,target:"_blank"},_.createElement(Je.Z,null))),$e&&_.createElement(Ce.Ex,null),!$e&&_.createElement(H.ZP,{title:"Rerun build"},_.createElement(je.Z,{onClick:xe,disabled:Ae||!G},_.createElement(F.Z,null))))};return _.createElement(ce,null)},width:"10%"}],Lt=({loading:j,pageSize:ce,page:Te,retry:$e,projects:Le,onChangePage:G,onChangePageSize:Ae,total:Re})=>{const xe=Le==null?void 0:Le.slice(Te*ce,Math.min(Le.length,(Te+1)*ce));return _.createElement(Ce.iA,{isLoading:j,options:{paging:!0,pageSize:ce,padding:"dense"},totalCount:Re,page:Te,actions:[{icon:()=>_.createElement(F.Z,null),tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>$e()}],data:xe!=null?xe:[],onPageChange:G,onRowsPerPageChange:Ae,title:_.createElement(A.Z,{display:"flex",alignItems:"center"},_.createElement("img",{src:Ct,alt:"Jenkins logo",height:"50px"}),_.createElement(A.Z,{mr:2}),_.createElement(m.Z,{variant:"h6"},"Projects")),columns:Wt})},Nt=()=>{const[j,{setPage:ce,retry:Te,setPageSize:$e}]=ct();return _.createElement(Lt,{...j,retry:Te,onChangePageSize:$e,onChangePage:ce})},ge=(j,ce)=>{const Te=(0,_.useRef)(!1);return{startPolling:async()=>{if(Te.current!==!0)for(Te.current=!0;Te.current===!0;)await j(),await new Promise(G=>setTimeout(G,ce))},stopPolling:()=>{Te.current=!1}}},Fe=1500;function Xe({jobFullName:j,buildNumber:ce}){const Te=(0,l.h_)(lt),$e=(0,l.h_)(l.VE),{entity:Le}=(0,Pt.X2)(),G=(0,_.useCallback)(async()=>{try{const Me=await(0,Oe.iB)(Le);return Te.getBuild({entity:Me,jobFullName:j,buildNumber:ce})}catch(Me){return $e.post(Me),Promise.reject(Me)}},[ce,j,Le,Te,$e]),{loading:Ae,value:Re,retry:xe}=(0,I.Z)(()=>G(),[G]),{startPolling:J,stopPolling:q}=ge(G,Fe);return[{loading:Ae,value:Re,retry:xe},{getBuildWithSteps:G,startPolling:J,stopPolling:q}]}const Ke=(0,g.Z)(j=>({root:{maxWidth:720},table:{padding:j.spacing(1)},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),ht=()=>{var j,ce,Te,$e,Le,G;const{jobFullName:Ae,buildNumber:Re}=(0,l.Oi)(rn),xe=Ke(),[{value:J}]=Xe({jobFullName:Ae,buildNumber:Re});return _.createElement("div",{className:xe.root},_.createElement(Ce.Oo,{"aria-label":"breadcrumb"},_.createElement(Ce.rU,{to:"../../.."},"Projects"),_.createElement(m.Z,null,"Run")),_.createElement(A.Z,{m:2}),_.createElement(r.Z,{component:be.Z,className:xe.table},_.createElement(ne.Z,null,_.createElement(ie.Z,null,_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Branch")),_.createElement(Y.Z,null,(j=J==null?void 0:J.source)==null?void 0:j.branchName)),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Message")),_.createElement(Y.Z,null,(ce=J==null?void 0:J.source)==null?void 0:ce.displayName)),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Commit ID")),_.createElement(Y.Z,null,($e=(Te=J==null?void 0:J.source)==null?void 0:Te.commit)==null?void 0:$e.hash)),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Status")),_.createElement(Y.Z,null,_.createElement(tn,{status:J==null?void 0:J.status}))),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Author")),_.createElement(Y.Z,null,(Le=J==null?void 0:J.source)==null?void 0:Le.author)),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"Jenkins")),_.createElement(Y.Z,null,(J==null?void 0:J.url)&&_.createElement(Ce.rU,{to:J.url},"View on Jenkins"," ",_.createElement(Ee.Z,{className:xe.externalLinkIcon})))),_.createElement(ve.Z,null,_.createElement(Y.Z,null,_.createElement(m.Z,{noWrap:!0},"GitHub")),_.createElement(Y.Z,null,((G=J==null?void 0:J.source)==null?void 0:G.url)&&_.createElement(Ce.rU,{to:J.source.url},"View on GitHub"," ",_.createElement(Ee.Z,{className:xe.externalLinkIcon}))))))))},pt=()=>_.createElement(Ce.VY,null,_.createElement(ht,null)),$t=j=>{var ce,Te;return Boolean((ce=j.metadata.annotations)==null?void 0:ce[St])||Boolean((Te=j.metadata.annotations)==null?void 0:Te[ft])};var Ft=Object.freeze({__proto__:null,isJenkinsAvailable:$t,Router:()=>{const{entity:j}=(0,Pt.X2)();return $t(j)?_.createElement(pe.Z5,null,_.createElement(pe.AW,{path:"/",element:_.createElement(Nt,null)}),_.createElement(pe.AW,{path:`/${rn.path}`,element:_.createElement(pt,null)})):_.createElement(Ce.sk,{annotation:St})}})},59235:function(fn,Ut,e){"use strict";e.d(Ut,{$M:function(){return K},Eg:function(){return dt},Jh:function(){return Xe},Yq:function(){return $e},jJ:function(){return Le},jQ:function(){return Ye},oy:function(){return ge},qJ:function(){return xt},rw:function(){return ct},w1:function(){return tn}});var l=e(30705),y=e(34520),g=e(64304),d=e(79692),m=e(12420),A=e(60905),H=e(95544),je=e(90436),r=e(82938),be=e(38402),ne=e(86136),ie=e(49378),ve=e(85256),Y=e(61837),Ee=e(11776),fe=e(80030),_=e(9520),Ce=e(76637),I=e(2784),Pt=e(16060),Oe=e(64279),pe=e(80236),Se=e(73655),F=e(99688),Je=e(52866),Ct=e(27604),it=e(13384),Bt=e(62367),Ue=e(52160),tt=e(98685),lt=e(19928),Yt=e.n(lt),ot=e(14162),rn=e.n(ot),C=e(19126),At=e.n(C);const en=(0,l.x8)({id:"catalog-index"}),tn=(0,l.rx)({id:"org",externalRoutes:{catalogIndex:en}}),K=tn.provide((0,l.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(8528).then(e.bind(e,88528)).then(G=>G.GroupProfileCard)}})),ct=tn.provide((0,l.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(8528).then(e.bind(e,88528)).then(G=>G.MembersListCard)}})),dt=tn.provide((0,l.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(8528).then(e.bind(e,88528)).then(G=>G.OwnershipCard)}})),Ye=tn.provide((0,l.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(8528).then(e.bind(e,88528)).then(G=>G.UserProfileCard)}})),ut=async(G,Ae)=>(G.length===0?{items:[]}:await Ae.getEntities({filter:{kind:"User","relations.memberof":G.map(xe=>(0,y.eE)({kind:"group",namespace:xe.namespace.toLocaleLowerCase("en-US"),name:xe.name.toLocaleLowerCase("en-US")}))}})).items,Rt=async(G,Ae)=>{var Re;const xe=new Map,q=[{kind:G.kind,namespace:(Re=G.metadata.namespace)!=null?Re:y.zG,name:G.metadata.name}],Me=[];for(;q.length>0;){const Ge=q.shift(),we=await Ae.getEntityByRef(Ge);xe.set((0,y.eE)(Ge),!0);const Ve=(0,g.hF)(we,y._b,{kind:"Group"}).filter(rt=>!xe.has((0,y.eE)(rt)));Ve.forEach(rt=>xe.set((0,y.eE)(rt),!0)),q.push(...Ve),Me.push(...Ve)}return Me},St=async(G,Ae)=>ut(await Rt(G,Ae),Ae),ft=G=>{const Ae=new Map;return G.filter(Re=>{const xe=(0,y.eE)(Re),J=Ae.has(xe);return Ae.set(xe,!0),!J})},Mt=(0,d.Z)(G=>(0,m.Z)({card:{border:`1px solid ${G.palette.divider}`,boxShadow:G.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:G.spacing(4,1,1),flex:"1",minWidth:"0px"}})),mt=G=>{var Ae;const Re=Mt(),{metadata:{name:xe,description:J},spec:{profile:q}}=G.member,Me=(Ae=q==null?void 0:q.displayName)!=null?Ae:xe;return I.createElement(A.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},I.createElement(H.Z,{className:Re.card},I.createElement(H.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},I.createElement(pe.qE,{displayName:Me,picture:q==null?void 0:q.picture,customStyles:{position:"absolute",top:"-2rem"}}),I.createElement(H.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},I.createElement(je.Z,{variant:"h6"},I.createElement(pe.rU,{"data-testid":"user-link",to:(0,Pt.Gn)(`/catalog/:namespace/user/${xe}`,(0,g.hd)(G.member))},I.createElement(pe.Or,{text:Me}))),(q==null?void 0:q.email)&&I.createElement(pe.rU,{to:`mailto:${q.email}`},I.createElement(pe.Or,{text:q.email})),J&&I.createElement(je.Z,{variant:"subtitle2"},J)))))},xt=G=>{var Ae;const{memberDisplayTitle:Re="Members",pageSize:xe=50,showAggregateMembersToggle:J}=G,{entity:q}=(0,g.X2)(),{metadata:{name:Me,namespace:Ge},spec:{profile:we}}=q,Ve=(0,l.h_)(g.Ah),rt=(Ae=we==null?void 0:we.displayName)!=null?Ae:Me,oe=Ge||y.zG,[X,de]=I.useState(1),he=(U,Z)=>{de(Z)},[S,h]=(0,I.useState)(!1),{loading:c,value:b}=(0,Oe.default)(async()=>J?await St(q,Ve):[],[Ve,q,J]),{loading:L,error:D,value:R}=(0,Oe.default)(async()=>(await Ve.getEntities({filter:{kind:"User","relations.memberof":[(0,y.eE)({kind:"group",namespace:oe.toLocaleLowerCase("en-US"),name:Me.toLocaleLowerCase("en-US")})]}})).items,[Ve,q]),W=ft([...R!=null?R:[],...b&&S?b:[]].sort((U,Z)=>(0,y.eE)(U).localeCompare((0,y.eE)(Z))));if(L)return I.createElement(pe.Ex,null);if(D)return I.createElement(pe.Gk,{error:D});const k=Math.ceil(((W==null?void 0:W.length)||0)/xe),ye=k<2?"":`, page ${X} of ${k}`,et=I.createElement(Ce.Z,{count:k,page:X,onChange:he,showFirstButton:!0,showLastButton:!0});return I.createElement(A.Z,{item:!0},I.createElement(pe.rJ,{title:`${Re} (${(W==null?void 0:W.length)||0}${ye})`,subheader:`of ${rt}`,...k<=1?{}:{actions:et}},J&&I.createElement(I.Fragment,null,"Direct Members",I.createElement(r.Z,{color:"primary",checked:S,onChange:()=>{h(!S)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),S&&c?I.createElement(pe.Ex,null):I.createElement(A.Z,{container:!0,spacing:3},W&&W.length>0?W.slice(xe*(X-1),xe*X).map(U=>I.createElement(mt,{member:U,key:U.metadata.uid})):I.createElement(H.Z,{p:2},I.createElement(je.Z,null,"This group has no ",Re.toLocaleLowerCase(),".")))))},Wt=({href:G,Icon:Ae,text:Re})=>I.createElement(be.Z,{key:G},I.createElement(ne.Z,null,Ae?I.createElement(Ae,null):I.createElement(Ue.Z,null)),I.createElement(ie.Z,null,I.createElement(pe.rU,{to:G},Re))),Lt=({links:G})=>{const Ae=(0,l.qD)(),Re=xe=>{var J;return xe&&(J=Ae.getSystemIcon(xe))!=null?J:Ue.Z};return G===void 0?null:I.createElement(I.Fragment,null,I.createElement(ve.Z,null),G.map(xe=>I.createElement(Wt,{key:xe.url,href:xe.url,text:xe.title,Icon:Re(xe.icon)})))},Nt=G=>I.createElement(H.Z,{display:"flex",alignItems:"center"},I.createElement(Bt.Z,{fontSize:"inherit"}),I.createElement(H.Z,{ml:1},G.title)),ge=G=>{var Ae,Re,xe;const J=(0,l.h_)(g.Ah),q=(0,l.h_)(l.$v),{entity:Me}=(0,g.X2)(),Ge=(0,I.useCallback)(async()=>{await J.refreshEntity((0,y.eE)(Me)),q.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[J,q,Me]);if(!Me)return I.createElement(F.Z,{severity:"error"},"Group not found");const{metadata:{name:we,description:Ve,title:rt,annotations:oe,links:X},spec:{profile:de}}=Me,he=(0,g.hF)(Me,y._b,{kind:"Group"}),S=(0,g.hF)(Me,y.wP,{kind:"group"}),h=oe==null?void 0:oe[y.P1],c=(h==null?void 0:h.startsWith("url:"))||(h==null?void 0:h.startsWith("file:")),b=(Ae=Me.metadata.annotations)==null?void 0:Ae[y.Tf],L=(xe=(Re=de==null?void 0:de.displayName)!=null?Re:rt)!=null?xe:we,D=de!=null&&de.email?`mailto:${de.email}`:"#",R=b?I.createElement(Y.Z,{"aria-label":"Edit",title:"Edit Metadata",component:pe.rU,to:b},I.createElement(Ct.Z,null)):I.createElement(Y.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},I.createElement(Ct.Z,null));return I.createElement(pe.rJ,{title:I.createElement(Nt,{title:L}),subheader:Ve,variant:G.variant,action:I.createElement(I.Fragment,null,c&&I.createElement(Y.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:Ge},I.createElement(Je.Z,null)),R)},I.createElement(A.Z,{container:!0,spacing:3},I.createElement(A.Z,{item:!0,xs:12,sm:2,xl:1},I.createElement(pe.qE,{displayName:L,picture:de==null?void 0:de.picture})),I.createElement(A.Z,{item:!0,md:10,xl:11},I.createElement(Ee.Z,null,(de==null?void 0:de.email)&&I.createElement(be.Z,null,I.createElement(ne.Z,null,I.createElement(fe.ZP,{title:"Email"},I.createElement(it.Z,null))),I.createElement(ie.Z,{primary:I.createElement(pe.rU,{to:D},de.email),secondary:"Email"})),I.createElement(be.Z,null,I.createElement(ne.Z,null,I.createElement(fe.ZP,{title:"Parent Group"},I.createElement(Se.Z,null))),I.createElement(ie.Z,{primary:S.length?I.createElement(g.rI,{entityRefs:S,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),I.createElement(be.Z,null,I.createElement(ne.Z,null,I.createElement(fe.ZP,{title:"Child Groups"},I.createElement(Bt.Z,null))),I.createElement(ie.Z,{primary:he.length?I.createElement(g.rI,{entityRefs:he,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(G==null?void 0:G.showLinks)&&I.createElement(Lt,{links:X})))))},Fe=G=>G.title?I.createElement(H.Z,{display:"flex",alignItems:"center"},I.createElement(tt.Z,{fontSize:"inherit"}),I.createElement(H.Z,{ml:1},G.title)):null,Xe=G=>{var Ae,Re;const{entity:xe}=(0,g.X2)();if(!xe)return I.createElement(F.Z,{severity:"error"},"User not found");const J=(Ae=xe.metadata.annotations)==null?void 0:Ae[y.Tf],{metadata:{name:q,description:Me,links:Ge},spec:{profile:we}}=xe,Ve=(Re=we==null?void 0:we.displayName)!=null?Re:q,rt=we!=null&&we.email?`mailto:${we.email}`:void 0,oe=(0,g.hF)(xe,y.hr,{kind:"Group"});return I.createElement(pe.rJ,{title:I.createElement(Fe,{title:Ve}),subheader:Me,variant:G.variant,action:I.createElement(I.Fragment,null,J&&I.createElement(Y.Z,{"aria-label":"Edit",title:"Edit Metadata",component:pe.rU,to:J},I.createElement(Ct.Z,null)))},I.createElement(A.Z,{container:!0,spacing:3,alignItems:"flex-start"},I.createElement(A.Z,{item:!0,xs:12,sm:2,xl:1},I.createElement(pe.qE,{displayName:Ve,picture:we==null?void 0:we.picture})),I.createElement(A.Z,{item:!0,md:10,xl:11},I.createElement(Ee.Z,null,(we==null?void 0:we.email)&&I.createElement(be.Z,null,I.createElement(ne.Z,null,I.createElement(fe.ZP,{title:"Email"},I.createElement(it.Z,null))),I.createElement(ie.Z,null,I.createElement(pe.rU,{to:rt!=null?rt:""},we.email))),I.createElement(be.Z,null,I.createElement(ne.Z,null,I.createElement(fe.ZP,{title:"Member of"},I.createElement(Bt.Z,null))),I.createElement(ie.Z,null,I.createElement(g.rI,{entityRefs:oe,defaultKind:"Group"}))),(G==null?void 0:G.showLinks)&&I.createElement(Lt,{links:Ge})))))},Ke=rn()(10),ht=(G,Ae)=>{const{kind:Re,type:xe}=Ae,J=G.map(Me=>(0,g.$3)((0,y.of)(Me),{defaultKind:"group"})),q={kind:Re.toLocaleLowerCase("en-US"),type:xe,owners:J,user:"all"};return At().stringify({filters:q},{arrayFormat:"repeat"})},pt=G=>{let Ae=[(0,y.eE)(G)];if(G.kind==="User"){const xe=(0,g.hF)(G,y.hr,{kind:"Group"}).map(J=>(0,y.eE)({kind:J.kind,namespace:J.namespace,name:J.name}));Ae=[...Ae,...xe]}return Ae},$t=async(G,Ae)=>{const Re=[],xe=new Map,J=new Set;Re.push(G);let q=G;for(;Re.length>0;){const Me=(0,g.hF)(q,y._b,{kind:"Group"});await Promise.all(Me.map(Ge=>Ke(async()=>{const we=Ae.getEntityByRef(Ge);xe.set(Ge.name,we);try{const Ve=await we;Ve&&Re.push(Ve)}finally{xe.delete(Ge.name)}}))),Re.shift(),J.add((0,y.eE)({kind:q.kind,namespace:q.metadata.namespace,name:q.metadata.name})),q=Re[0]}return Array.from(J)};function Xt(G,Ae,Re,xe,J=6){const q=(0,l.h_)(g.Ah),Me=xe!=null?xe:["Component","API","System"],{loading:Ge,error:we,value:Ve}=(0,Oe.default)(async()=>{const rt=Ae==="aggregated"&&Re?await $t(G,q):pt(G);return(await q.getEntities({filter:[{kind:Me,"relations.ownedBy":rt}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((he,S)=>{var h,c;const b=he.find(L=>{var D;return L.kind===S.kind&&L.type===((D=S.spec)==null?void 0:D.type)});return b?b.count+=1:he.push({kind:S.kind,type:(c=(h=S.spec)==null?void 0:h.type)==null?void 0:c.toString(),count:1}),he},[]).sort((he,S)=>S.count-he.count).slice(0,J).map(he=>({counter:he.count,type:he.type,kind:he.kind,queryParams:ht(rt,he)}))},[q,G,Ae]);return{componentsWithCounters:Ve,loading:Ge,error:we}}const Ft=(0,d.Z)(G=>(0,m.Z)({card:{border:`1px solid ${G.palette.divider}`,boxShadow:G.shadows[2],borderRadius:"4px",padding:G.spacing(2),transition:`${G.transitions.duration.standard}ms`,"&:hover":{boxShadow:G.shadows[4]},height:"100%"},bold:{fontWeight:G.typography.fontWeightBold},smallFont:{fontSize:G.typography.body2.fontSize},entityTypeBox:{background:Ae=>G.getPageTheme({themeId:Ae.type}).backgroundImage,color:Ae=>G.getPageTheme({themeId:Ae.type}).fontColor}})),j=({counter:G,type:Ae,kind:Re,url:xe})=>{const J=Ft({type:Ae!=null?Ae:Re}),q=Ae!=null?Ae:Re,Me=q.length>10;return I.createElement(pe.rU,{to:xe,variant:"body2"},I.createElement(H.Z,{className:`${J.card} ${J.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},I.createElement(je.Z,{className:J.bold,variant:"h6"},G),I.createElement(H.Z,{sx:{width:"100%",textAlign:"center"}},I.createElement(je.Z,{className:`${J.bold} ${Me&&J.smallFont}`,variant:"h6"},I.createElement(pe.Or,{text:Yt()(q.toLocaleUpperCase("en-US"),G)}))),Ae&&I.createElement(je.Z,{variant:"subtitle1"},Re)))},ce=({entity:G,relationsType:Ae,isGroup:Re,entityFilterKind:xe,entityLimit:J=6})=>{const q=(0,l.tg)(en),{componentsWithCounters:Me,loading:Ge,error:we}=Xt(G,Ae,Re,xe,J);return Ge?I.createElement(pe.Ex,null):we?I.createElement(pe.Gk,{error:we}):I.createElement(A.Z,{container:!0},Me==null?void 0:Me.map(Ve=>{var rt;return I.createElement(A.Z,{item:!0,xs:6,md:6,lg:4,key:(rt=Ve.type)!=null?rt:Ve.kind},I.createElement(j,{counter:Ve.counter,kind:Ve.kind,type:Ve.type,url:`${q()}/?${Ve.queryParams}`}))}))},Te=(0,d.Z)(G=>({list:{[G.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[G.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[G.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),$e=G=>{const{variant:Ae,entityFilterKind:Re,hideRelationsToggle:xe,relationsType:J,entityLimit:q=6}=G,Me=xe===void 0?!1:xe,Ge=Te(),{entity:we}=(0,g.X2)(),Ve=we.kind==="Group",[rt,oe]=(0,I.useState)(J||"direct");return I.createElement(pe.rJ,{title:"Ownership",variant:Ae},!Me&&I.createElement(Ee.Z,{dense:!0},I.createElement(be.Z,{className:Ge.list},I.createElement(ie.Z,{className:Ge.listItemText}),I.createElement(_.Z,{className:Ge.listItemSecondaryAction},"Direct Relations",I.createElement(fe.ZP,{placement:"top",arrow:!0,title:`${rt==="direct"?"Direct":"Aggregated"} Relations`},I.createElement(r.Z,{color:"primary",checked:rt!=="direct",onChange:()=>oe(rt==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!Ve})),"Aggregated Relations"))),I.createElement(ce,{entity:we,entityLimit:q,relationsType:rt,isGroup:Ve,entityFilterKind:Re}))},Le=G=>{const{singularTitle:Ae,pluralTitle:Re,icon:xe,filter:J}=G,q=(0,l.h_)(l.$4),Me=(0,l.h_)(g.Ah),Ge=(0,l.tg)(g.wi),{value:we}=(0,Oe.default)(async()=>{const Ve=await q.getBackstageIdentity();return(await Me.getEntities({filter:[{kind:"group","relations.hasMember":Ve.userEntityRef,...J!=null?J:{}}],fields:["metadata","kind"]})).items},[]);if(!(we!=null&&we.length))return null;if(we.length===1){const Ve=we[0];return I.createElement(pe.R6,{text:Ae,to:Ge((0,y.iB)(Ve)),icon:xe})}return I.createElement(pe.R6,{icon:xe,text:Re},I.createElement(pe.k2,{title:Re},we==null?void 0:we.map(function(rt){return I.createElement(pe.BT,{title:rt.metadata.title||rt.metadata.name,subtitle:rt.metadata.namespace!==y.zG?rt.metadata.namespace:void 0,to:Ge((0,y.iB)(rt)),icon:xe,key:(0,y.eE)(rt)})})))}},5083:function(fn,Ut,e){"use strict";e.d(Ut,{J$:function(){return Y},Y2:function(){return pe},g2:function(){return je},rG:function(){return A}});var l=e(32272),y=e(96279),g=e.n(y),d=e(9571),m=e(30195),A=(Se=>(Se.DENY="DENY",Se.ALLOW="ALLOW",Se.CONDITIONAL="CONDITIONAL",Se))(A||{});function H(Se,F){return Se.name===F.name}function je(Se,F){return"resourceType"in Se?!F||Se.resourceType===F:!1}function r(Se){return Se.attributes.action==="create"}function be(Se){return Se.attributes.action==="read"}function ne(Se){return Se.attributes.action==="update"}function ie(Se){return Se.attributes.action==="delete"}function ve(Se){return{authorize:async(F,Je)=>await Se.authorize(F,Je),authorizeConditional(F,Je){const Ct=F;return Se.authorize(Ct,Je)}}}function Y({name:Se,attributes:F,resourceType:Je}){return Je?{type:"resource",name:Se,attributes:F,resourceType:Je}:{type:"basic",name:Se,attributes:F}}var Ee=Object.defineProperty,fe=(Se,F,Je)=>F in Se?Ee(Se,F,{enumerable:!0,configurable:!0,writable:!0,value:Je}):Se[F]=Je,_=(Se,F,Je)=>(fe(Se,typeof F!="symbol"?F+"":F,Je),Je);const Ce=m.z.lazy(()=>m.z.object({rule:m.z.string(),resourceType:m.z.string(),params:m.z.record(m.z.any()).optional()}).or(m.z.object({anyOf:m.z.array(Ce).nonempty()})).or(m.z.object({allOf:m.z.array(Ce).nonempty()})).or(m.z.object({not:Ce}))),I=m.z.object({result:m.z.literal(A.ALLOW).or(m.z.literal(A.DENY))}),Pt=m.z.union([m.z.object({result:m.z.literal(A.ALLOW).or(m.z.literal(A.DENY))}),m.z.object({result:m.z.literal(A.CONDITIONAL),pluginId:m.z.string(),resourceType:m.z.string(),conditions:Ce})]),Oe=(Se,F)=>m.z.object({items:m.z.array(m.z.intersection(m.z.object({id:m.z.string()}),Se)).refine(Je=>Je.length===F.size&&Je.every(({id:Ct})=>F.has(Ct)),{message:"Items in response do not match request"})});class pe{constructor(F){_(this,"enabled"),_(this,"discovery");var Je;this.discovery=F.discovery,this.enabled=(Je=F.config.getOptionalBoolean("permission.enabled"))!=null?Je:!1}async authorize(F,Je){return this.makeRequest(F,I,Je)}async authorizeConditional(F,Je){return this.makeRequest(F,Pt,Je)}async makeRequest(F,Je,Ct){if(!this.enabled)return F.map(ot=>({result:A.ALLOW}));const it={items:F.map(ot=>({id:d.Z(),...ot}))},Bt=await this.discovery.getBaseUrl("permission"),Ue=await g()(`${Bt}/authorize`,{method:"POST",body:JSON.stringify(it),headers:{...this.getAuthorizationHeader(Ct==null?void 0:Ct.token),"content-type":"application/json"}});if(!Ue.ok)throw await l.VL.fromResponse(Ue);const tt=await Ue.json(),Yt=Oe(Je,new Set(it.items.map(({id:ot})=>ot))).parse(tt).items.reduce((ot,rn)=>(ot[rn.id]=rn,ot),{});return it.items.map(ot=>Yt[ot.id])}getAuthorizationHeader(F){return F?{Authorization:`Bearer ${F}`}:{}}}},56563:function(fn,Ut,e){"use strict";e.d(Ut,{RV:function(){return m},gI:function(){return H},iM:function(){return A},un:function(){return r}});var l=e(2784),y=e(30705),g=e(5083),d=e(69984);const m=(0,y.T0)({id:"plugin.permission.api"});class A{constructor(ne,ie){this.permissionClient=ne,this.identityApi=ie}static create(ne){const{config:ie,discovery:ve,identity:Y}=ne,Ee=new g.Y2({discovery:ve,config:ie});return new A(Ee,Y)}async authorize(ne){return(await this.permissionClient.authorize([ne],await this.identityApi.getCredentials()))[0]}}function H(be){const ne=(0,y.h_)(m),{data:ie,error:ve}=(0,d.ZP)(be,async Y=>{if((0,g.g2)(Y.permission)&&!Y.resourceRef)return g.rG.DENY;const{result:Ee}=await ne.authorize(Y);return Ee});return ve?{error:ve,loading:!1,allowed:!1}:ie===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:ie===g.rG.ALLOW}}const je=be=>{const{permission:ne,resourceRef:ie,errorComponent:ve,...Y}=be,Ee=H(isResourcePermission(ne)?{permission:ne,resourceRef:ie}:{permission:ne}),fe=useApp(),{NotFoundErrorPage:_}=fe.getComponents();let Ce=ve===void 0?React.createElement(_,null):ve;return Ee.loading?Ce=null:Ee.allowed&&(Ce=be.element),React.createElement(Route,{...Y,element:Ce})};function r(be){const{permission:ne,resourceRef:ie}=be,ve=H((0,g.g2)(ne)?{permission:ne,resourceRef:ie}:{permission:ne}),Y=(0,y.qD)();if(ve.loading)return null;if(ve.allowed)return l.createElement(l.Fragment,null,be.children);if(be.errorPage)return l.createElement(l.Fragment,null,be.errorPage);const{NotFoundErrorPage:Ee}=Y.getComponents();return l.createElement(Ee,null)}},67898:function(fn,Ut,e){"use strict";e.d(Ut,{t:function(){return be}});var l=e(34520),y="http://json-schema.org/draft-07/schema",g="TemplateV1beta3",d="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",m=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],A=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],H={$schema:y,$id:g,description:d,examples:m,allOf:A};const je=(0,l.wI)(H),r={async check(ne){return je(ne)===ne}},be=ne=>ne.apiVersion==="scaffolder.backstage.io/v1beta3"&&ne.kind==="Template"},60885:function(fn,Ut,e){"use strict";e.d(Ut,{F:function(){return d},S:function(){return H},a:function(){return m},s:function(){return r},u:function(){return je}});var l=e(18473),y=e(2784),g=e(30705);const d="scaffolder.extensions.wrapper.v1",m="scaffolder.extensions.field.v1",A=(0,l.CT)("secrets-context"),H=be=>{const[ne,ie]=(0,y.useState)({});return y.createElement(A.Provider,{value:(0,l.EI)({1:{secrets:ne,setSecrets:ie}})},be.children)},je=()=>{var be;const ne=(be=(0,y.useContext)(A))==null?void 0:be.atVersion(1);if(!ne)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:ie,secrets:ve={}}=ne;return{setSecrets:(0,y.useCallback)(Ee=>{ie(fe=>({...fe,...Ee}))},[ie]),secrets:ve}},r=(0,l.uW)("scaffolder:scaffolder-api-ref",()=>(0,g.T0)({id:"plugin.scaffolder.service"}))},12053:function(fn,Ut,e){"use strict";e.d(Ut,{A3:function(){return y.S},PT:function(){return je},TD:function(){return y.u},WQ:function(){return ve},eP:function(){return A},lc:function(){return y.s},zS:function(){return ne}});var l=e(30705),y=e(60885),g=e(92233),d=e(2784),m=e(18473);function A(fe){return{expose(){const _=()=>null;return(0,l.R5)(_,y.a,fe),_}}}const H=()=>null;(0,l.R5)(H,y.F,!0);const je=fe=>(0,l.vJ)(fe,_=>_.selectByComponentData({key:y.F}).findComponentData({key:y.a})),r="scaffolder.layout.v1",be="scaffolder.layouts.wrapper.v1",ne=fe=>(0,l.vJ)(fe,_=>_.selectByComponentData({key:be}).findComponentData({key:r}));function ie(fe,_){var Ce,I,Pt;switch(_.type){case"INIT":{fe.steps=_.data.spec.steps.reduce((Oe,pe)=>(Oe[pe.id]={status:"open",id:pe.id},Oe),{}),fe.stepLogs=_.data.spec.steps.reduce((Oe,pe)=>(Oe[pe.id]=[],Oe),{}),fe.loading=!1,fe.error=void 0,fe.completed=!1,fe.task=_.data;return}case"LOGS":{const Oe=_.data;for(const pe of Oe){const Se=`${pe.createdAt} ${pe.body.message}`;if(!pe.body.stepId||!((Ce=fe.steps)!=null&&Ce[pe.body.stepId]))continue;const F=(I=fe.stepLogs)==null?void 0:I[pe.body.stepId],Je=(Pt=fe.steps)==null?void 0:Pt[pe.body.stepId];pe.body.status&&pe.body.status!==Je.status&&(Je.status=pe.body.status,Je.status==="processing"&&(Je.startedAt=pe.createdAt),["cancelled","completed","failed"].includes(Je.status)&&(Je.endedAt=pe.createdAt)),F==null||F.push(Se)}return}case"COMPLETED":{fe.completed=!0,fe.output=_.data.body.output,fe.error=_.data.body.error;return}case"CANCELLED":{fe.cancelled=!0;return}case"ERROR":{fe.error=_.data,fe.loading=!1,fe.completed=!0;return}default:return}}const ve=fe=>{const _=(0,l.h_)(y.s),[Ce,I]=(0,g.C)(ie,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,d.useEffect)(()=>{let Pt=!1,Oe,pe,Se=1;const F=()=>_.getTask(fe).then(Je=>{if(Pt)return;I({type:"INIT",data:Je});const Ct=_.streamLogs({taskId:fe}),it=new Array;function Bt(){if(it.length){const Ue=it.splice(0,it.length);I({type:"LOGS",data:Ue})}}pe=setInterval(Bt,500),Oe=Ct.subscribe({next:Ue=>{switch(Ue.type){case"log":return it.push(Ue);case"cancelled":I({type:"CANCELLED"});return;case"completion":Bt(),I({type:"COMPLETED",data:Ue});return;default:throw new Error(`Unhandled event type ${Ue.type} in observer`)}},error:Ue=>{Bt(),Ue.message||(Ue.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${Se}/3 retries)`),Se<=3&&setTimeout(()=>{Se+=1,F()},15e3),I({type:"ERROR",data:Ue})}})},Je=>{Pt||I({type:"ERROR",data:Je})});return F(),()=>{Pt=!0,Oe&&Oe.unsubscribe(),pe&&clearInterval(pe)}},[_,I,fe]),Ce};function Y(fe){return{expose(){const _=()=>null;return attachComponentData(_,r,fe),_}}}const Ee=()=>null;(0,l.R5)(Ee,be,!0)},89759:function(fn,Ut,e){"use strict";e.d(Ut,{T:function(){return Ye},a:function(){return ct},b:function(){return rn}});var l=e(34520),y=e(80236),g=e(30705),d=e(95544),m=e(79692),A=e(60905),H=e(90436),je=e(4614),r=e(97136),be=e(27556),ne=e(77277),ie=e(31377),ve=e(34546),Y=e(31625),Ee=e(12420),fe=e(49166),_=e(98281),Ce=e(16874),I=e(72779),Pt=e.n(I),Oe=e(26228),pe=e(19126),Se=e.n(pe),F=e(2784),Je=e(73557),Ct=e(70218),it=e(12053),Bt=e(64304),Ue=e(52160),tt=e(12650);const lt=({error:ut})=>{const Rt=(0,F.useRef)("");return(0,F.useEffect)(()=>{Rt.current=String(Math.random())},[ut]),ut?F.createElement(d.Z,null,F.createElement(y.SX,{id:Rt.current,variant:"warning",message:ut.message})):null},Yt=(0,m.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),ot=ut=>{const{href:Rt,text:St,Icon:ft,...Mt}=ut,mt=Yt();return F.createElement(A.Z,{container:!0,direction:"row",spacing:1},F.createElement(A.Z,{item:!0},F.createElement(H.Z,{component:"div",className:mt.svgIcon},ft?F.createElement(ft,null):F.createElement(Ue.Z,null))),F.createElement(A.Z,{item:!0},F.createElement(y.rU,{to:Rt,...Mt},St||Rt)))},rn=({output:ut})=>{const{links:Rt=[]}=ut,St=(0,g.qD)(),ft=(0,g.tg)(Bt.wi),Mt=mt=>{var xt;return mt&&(xt=St.getSystemIcon(mt))!=null?xt:Ue.Z};return F.createElement(d.Z,{px:3,pb:3},Rt.filter(({url:mt,entityRef:xt})=>mt||xt).map(({url:mt,entityRef:xt,title:Wt,icon:Lt})=>{if(xt){const Nt=(0,l.of)(xt,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),ge=ft(Nt);return{title:Wt,icon:Lt,url:ge}}return{title:Wt,icon:Lt,url:mt}}).map(({url:mt,title:xt,icon:Wt},Lt)=>F.createElement(ot,{key:`output-link-${Lt}`,href:mt,text:xt!=null?xt:mt,Icon:Mt(Wt),target:"_blank"})))},C=e(75951),At=(0,m.Z)(ut=>(0,Ee.Z)({root:{width:"100%"},button:{marginBottom:ut.spacing(2),marginLeft:ut.spacing(2)},actionsContainer:{marginBottom:ut.spacing(2)},resetContainer:{padding:ut.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),en=({step:ut})=>{const[Rt,St]=(0,F.useState)("");return(0,Ct.Z)(()=>{if(!ut.startedAt){St("");return}const ft=ut.endedAt?Oe.ou.fromISO(ut.endedAt):Oe.ou.local(),Mt=Oe.ou.fromISO(ut.startedAt),mt=Oe.Xp.fromDateTimes(Mt,ft).toDuration().valueOf();St(C(mt,{round:!0}))},1e3),F.createElement(H.Z,{variant:"caption"},Rt)},tn=(0,m.Z)(ut=>(0,Ee.Z)({root:{color:ut.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:ut.palette.status.ok},error:{color:ut.palette.status.error}}));function K(ut){const Rt=tn(),{active:St,completed:ft,error:Mt}=ut,mt=()=>St?F.createElement(je.Z,{size:"24px"}):ft?F.createElement(_.Z,null):Mt?F.createElement(fe.Z,null):F.createElement(Ce.Z,null);return F.createElement("div",{className:Pt()(Rt.root,{[Rt.completed]:ft,[Rt.error]:Mt})},mt())}const ct=(0,F.memo)(ut=>{const{steps:Rt,currentStepId:St,onUserStepChange:ft}=ut,Mt=At(ut);return F.createElement("div",{className:Mt.root},F.createElement(Y.Z,{activeStep:Rt.findIndex(mt=>mt.id===St),orientation:"vertical",nonLinear:!0},Rt.map((mt,xt)=>{const Wt=mt.status==="cancelled",Lt=mt.status==="processing",Nt=mt.status==="completed",ge=mt.status==="failed",Fe=mt.status==="skipped";return F.createElement(ie.Z,{key:String(xt),expanded:!0},F.createElement(r.Z,{onClick:()=>ft(mt.id)},F.createElement(ve.Z,{StepIconProps:{completed:Nt,error:ge||Wt,active:Lt},StepIconComponent:K,className:Mt.stepWrapper},F.createElement("div",{className:Mt.labelWrapper},F.createElement(H.Z,{variant:"subtitle2"},mt.name),Fe?F.createElement(H.Z,{variant:"caption"},"Skipped"):F.createElement(en,{step:mt})))))})))}),dt=({links:ut=[]})=>ut.length>0,Ye=ut=>{const{loadingText:Rt}=ut,St=At(),ft=(0,Je.s0)(),Mt=(0,g.tg)(tt.r),mt=(0,g.h_)(it.lc),xt=(0,g.tg)(tt.n),[Wt,Lt]=(0,F.useState)(void 0),[Nt,ge]=(0,F.useState)(!1),[Fe,Xe]=(0,F.useState)(void 0),{taskId:Ke}=(0,g.Oi)(tt.o),ht=(0,it.WQ)(Ke),pt=ht.completed,$t=ht.cancelled,Xt=(0,F.useMemo)(()=>{var G,Ae;return(Ae=(G=ht.task)==null?void 0:G.spec.steps.map(Re=>{var xe;return{...Re,...(xe=ht==null?void 0:ht.steps)==null?void 0:xe[Re.id]}}))!=null?Ae:[]},[ht]);(0,F.useEffect)(()=>{var G;const Ae=Xt.find(Re=>["failed","processing"].includes(Re.status));if(pt&&!Ae){Xe((G=Xt[Xt.length-1])==null?void 0:G.id);return}Xe(Ae==null?void 0:Ae.id)},[Xt,pt]);const Ft=Wt!=null?Wt:Fe,j=(0,F.useMemo)(()=>{if(!Ft)return Rt||"Loading...";const G=ht.stepLogs[Ft];return G!=null&&G.length?G.join(`
`):"Waiting for logs..."},[ht.stepLogs,Ft,Rt]),ce=ht.completed&&!ht.loading&&!ht.task,{output:Te}=ht,$e=()=>{var G,Ae,Re;if(!ht.task||!((Ae=(G=ht.task)==null?void 0:G.spec.templateInfo)!=null&&Ae.entityRef)){ft(Mt());return}const xe=ht.task.spec.parameters,{name:J,namespace:q}=(0,l.of)((Re=ht.task.spec.templateInfo)==null?void 0:Re.entityRef);ft(`${xt({templateName:J,namespace:q})}?${Se().stringify({formData:JSON.stringify(xe)})}`)},Le=async()=>{ge(!0),await mt.cancelTask(Ke)};return F.createElement(y.T3,{themeId:"home"},F.createElement(y.h4,{pageTitleOverride:`Task ${Ke}`,title:"Task Activity",subtitle:`Activity for task: ${Ke}`}),F.createElement(y.VY,null,ce?F.createElement(y.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):F.createElement("div",null,F.createElement(A.Z,{container:!0},F.createElement(A.Z,{item:!0,xs:3},F.createElement(be.Z,null,F.createElement(ct,{steps:Xt,currentStepId:Ft,onUserStepChange:Lt}),Te&&dt(Te)&&F.createElement(rn,{output:Te}),F.createElement(ne.Z,{className:St.button,onClick:$e,disabled:!pt,variant:"contained",color:"primary"},"Start Over"),F.createElement(ne.Z,{className:St.button,onClick:Le,disabled:pt||$t||Nt,variant:"outlined",color:"secondary"},($t||Nt)&&!pt?"Cancelling...":"Cancel"))),F.createElement(A.Z,{item:!0,xs:9},!Ft&&F.createElement(y.Ex,null),F.createElement("div",{style:{height:"80vh"}},F.createElement(lt,{error:ht.error}),F.createElement(y.nU,{text:j})))))))}},15170:function(fn,Ut,e){"use strict";e.d(Ut,{T:function(){return Ce}});var l=e(2784),y=e(82108),g=e.n(y),d=e(80236),m=e(95544),A=e(90436),H=e(5806),je=e(21324),r=e(86619),be=e(19996),ne=e(25505),ie=e(38016),ve=e(88013),Y=e(64304),Ee=e(30705);const fe=l.createElement(ne.Z,{fontSize:"small"}),_=l.createElement(be.Z,{fontSize:"small"}),Ce=()=>{const I=(0,Ee.h_)(Ee.$v),{error:Pt,loading:Oe,availableTypes:pe,selectedTypes:Se,setSelectedTypes:F}=(0,Y.Uh)();return Oe?l.createElement(d.Ex,null):pe?Pt?(I.post({message:"Failed to load entity types",severity:"error"}),null):l.createElement(m.Z,{pb:1,pt:1},l.createElement(A.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),l.createElement(ve.ZP,{id:"categories-picker",multiple:!0,options:pe,value:Se,onChange:(Je,Ct)=>F(Ct),renderOption:(Je,{selected:Ct})=>l.createElement(H.Z,{control:l.createElement(je.Z,{icon:fe,checkedIcon:_,checked:Ct}),label:g()(Je)}),size:"small",popupIcon:l.createElement(ie.Z,{"data-testid":"categories-picker-expand"}),renderInput:Je=>l.createElement(r.Z,{...Je,variant:"outlined"})})):null}},12650:function(fn,Ut,e){"use strict";e.d(Ut,{A:function(){return K},B:function(){return dt},C:function(){return Te},D:function(){return ce},F:function(){return pt},G:function(){return Mt},H:function(){return St},I:function(){return Rt},J:function(){return Ft},K:function(){return Xt},L:function(){return Ve},d:function(){return h},h:function(){return mt},k:function(){return we},n:function(){return Re},o:function(){return xe},p:function(){return Me},q:function(){return q},r:function(){return G},s:function(){return rt},t:function(){return J},u:function(){return $e},v:function(){return Le},w:function(){return Ae},x:function(){return C},y:function(){return rn},z:function(){return Ye}});var l=e(49462),y=e(12053),g=e(34520),d=e(32272),m=e(19126),A=e.n(m),H=e(82394),je=e.n(H),r=e(31734),be=e.n(r),ne=e(88285),ie=e(30705),ve=e(64304),Y=e(86619),Ee=e(42494),fe=e(88013),_=e(2784),Ce=e(64279),I=e(30195),Pt=e(68111),Oe=e(74828),pe=e(29611),Se=e(56939),F=e(80236),Je=e(48760),Ct=e(62155),it=Object.defineProperty,Bt=(D,R,W)=>R in D?it(D,R,{enumerable:!0,configurable:!0,writable:!0,value:W}):D[R]=W,Ue=(D,R,W)=>(Bt(D,typeof R!="symbol"?R+"":R,W),W);class tt{constructor(R){Ue(this,"discoveryApi"),Ue(this,"scmIntegrationsApi"),Ue(this,"fetchApi"),Ue(this,"identityApi"),Ue(this,"useLongPollingLogs");var W,k;this.discoveryApi=R.discoveryApi,this.fetchApi=(W=R.fetchApi)!=null?W:{fetch},this.scmIntegrationsApi=R.scmIntegrationsApi,this.useLongPollingLogs=(k=R.useLongPollingLogs)!=null?k:!1,this.identityApi=R.identityApi}async listTasks(R){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const W=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:k}=await this.identityApi.getBackstageIdentity(),ye=A().stringify(R.filterByOwnership==="owned"?{createdBy:k}:{}),et=await this.fetchApi.fetch(`${W}/v2/tasks?${ye}`);if(!et.ok)throw await d.VL.fromResponse(et);return await et.json()}async getIntegrationsList(R){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(k=>!this.scmIntegrationsApi.bitbucketCloud.byHost(k.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(k.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(k=>({type:k.type,title:k.title,host:k.config.host})).filter(k=>R.allowedHosts.includes(k.host))}}async getTemplateParameterSchema(R){const{namespace:W,kind:k,name:ye}=(0,g.of)(R,{defaultKind:"template"}),et=await this.discoveryApi.getBaseUrl("scaffolder"),U=[W,k,ye].map(B=>encodeURIComponent(B)).join("/"),Z=`${et}/v2/templates/${U}/parameter-schema`,te=await this.fetchApi.fetch(Z);if(!te.ok)throw await d.VL.fromResponse(te);return await te.json()}async scaffold(R){const{templateRef:W,values:k,secrets:ye={}}=R,et=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,U=await this.fetchApi.fetch(et,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:W,values:{...k},secrets:ye})});if(U.status!==201){const te=`${U.status} ${U.statusText}`,T=await U.text();throw new Error(`Backend request failed, ${te} ${T.trim()}`)}const{id:Z}=await U.json();return{taskId:Z}}async getTask(R){const k=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(R)}`,ye=await this.fetchApi.fetch(k);if(!ye.ok)throw await d.VL.fromResponse(ye);return await ye.json()}streamLogs(R){return this.useLongPollingLogs?this.streamLogsPolling(R):this.streamLogsEventStream(R)}async dryRun(R){const W=await this.discoveryApi.getBaseUrl("scaffolder"),k=await this.fetchApi.fetch(`${W}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:R.template,values:R.values,secrets:R.secrets,directoryContents:R.directoryContents})});if(!k.ok)throw await d.VL.fromResponse(k);return k.json()}streamLogsEventStream({taskId:R,after:W}){return new(je())(k=>{var ye;const et=new URLSearchParams;W!==void 0&&et.set("after",String(Number(W))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(ye=this.identityApi)==null?void 0:ye.getCredentials()]).then(([U,Z])=>{const te=`${U}/v2/tasks/${encodeURIComponent(R)}/eventstream`,T=V=>{if(V.data)try{k.next(JSON.parse(V.data))}catch(me){k.error(me)}},B=new r.EventSourcePolyfill(te,{withCredentials:!0,headers:Z!=null&&Z.token?{Authorization:`Bearer ${Z.token}`}:{}});B.addEventListener("log",T),B.addEventListener("cancelled",T),B.addEventListener("completion",V=>{T(V),B.close(),k.complete()}),B.addEventListener("error",V=>{k.error(V)})},U=>{k.error(U)})})}streamLogsPolling({taskId:R,after:W}){let k=W;return new(je())(ye=>{this.discoveryApi.getBaseUrl("scaffolder").then(async et=>{for(;!ye.closed;){const U=`${et}/v2/tasks/${encodeURIComponent(R)}/events?${A().stringify({after:k})}`,Z=await this.fetchApi.fetch(U);if(!Z.ok){await new Promise(T=>setTimeout(T,1e3));continue}const te=await Z.json();for(const T of te)if(k=Number(T.id),ye.next(T),T.type==="completion"){ye.complete();return}}})})}async listActions(){const R=await this.discoveryApi.getBaseUrl("scaffolder"),W=await this.fetchApi.fetch(`${R}/v2/actions`);if(!W.ok)throw await d.VL.fromResponse(W);return await W.json()}async cancelTask(R){const k=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(R)}/cancel`,ye=await this.fetchApi.fetch(k,{method:"POST"});if(!ye.ok)throw await d.VL.fromResponse(ye);return await ye.json()}}function lt(D,R){return{schema:{returnValue:(0,Pt.ZP)(D),uiOptions:R?(0,Pt.ZP)(R):void 0},type:null,uiOptionsType:null}}const Yt=I.z.record(I.z.string().or(I.z.object({exists:I.z.boolean().optional()})).or(I.z.array(I.z.string()))),rn=lt(I.z.string(),I.z.object({allowedKinds:I.z.array(I.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:I.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:I.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:I.z.union([I.z.string(),I.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:I.z.array(Yt).or(Yt).optional().describe("List of key-value filter expression for entities")})).schema,C=D=>{var R,W,k,ye,et;const{onChange:U,schema:{title:Z="Entity",description:te="An entity from the catalog"},required:T,uiSchema:B,rawErrors:V,formData:me,idSchema:_e}=D,at=tn(B),He=(R=B["ui:options"])==null?void 0:R.defaultKind,Ot=((W=B["ui:options"])==null?void 0:W.defaultNamespace)||void 0,yt=(0,ie.h_)(ve.Ah),{value:Tt,loading:Kt}=(0,Ce.default)(async()=>{const{items:wt}=await yt.getEntities(at?{filter:at}:void 0);return wt}),ln=(ye=(k=B["ui:options"])==null?void 0:k.allowArbitraryValues)!=null?ye:!0,on=(0,_.useCallback)(wt=>{try{return(0,ve.$3)((0,g.of)(wt,{defaultKind:He,defaultNamespace:Ot}),{defaultKind:He,defaultNamespace:Ot})}catch{return wt}},[He,Ot]),Gt=(0,_.useCallback)((wt,It,dn)=>{if(typeof It!="string")U(It?(0,g.eE)(It):void 0);else if(dn==="blur"||dn==="create-option"){let hn=It;try{hn=(0,g.eE)((0,g.of)(It,{defaultKind:He,defaultNamespace:Ot}))}catch{}(me!==It||ln)&&U(hn)}},[U,me,He,Ot,ln]);return(0,_.useEffect)(()=>{(Tt==null?void 0:Tt.length)===1&&U((0,g.eE)(Tt[0]))},[Tt,U]),_.createElement(Ee.Z,{margin:"normal",required:T,error:(V==null?void 0:V.length)>0&&!me},_.createElement(fe.ZP,{disabled:(Tt==null?void 0:Tt.length)===1,id:_e==null?void 0:_e.$id,value:(et=Tt==null?void 0:Tt.find(wt=>(0,g.eE)(wt)===me))!=null?et:ln&&me?on(me):"",loading:Kt,onChange:Gt,options:Tt||[],getOptionLabel:wt=>typeof wt=="string"?wt:(0,ve.$3)(wt,{defaultKind:He,defaultNamespace:Ot}),autoSelect:!0,freeSolo:ln,renderInput:wt=>_.createElement(Y.Z,{...wt,label:Z,margin:"dense",helperText:te,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:T,InputProps:wt.InputProps})}))};function At(D){return typeof D=="object"&&D.exists?ne.n3:D==null?void 0:D.toString()}function en(D){const R={};for(const[W,k]of Object.entries(D))Array.isArray(k)?R[W]=k:R[W]=At(k);return R}function tn(D){var R,W;const k=(R=D["ui:options"])==null?void 0:R.allowedKinds,ye=((W=D["ui:options"])==null?void 0:W.catalogFilter)||k&&{kind:k};if(ye)return Array.isArray(ye)?ye.map(en):en(ye)}const K=(D,R)=>{g.y$.isValidObjectName(D)||R.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},dt=lt(I.z.string()).schema,Ye=D=>{const{onChange:R,required:W,schema:{title:k="Name",description:ye="Unique name of the component"},rawErrors:et,formData:U,uiSchema:{"ui:autofocus":Z},idSchema:te,placeholder:T}=D;return _.createElement(Y.Z,{id:te==null?void 0:te.$id,label:k,placeholder:T,helperText:ye,required:W,value:U!=null?U:"",onChange:({target:{value:B}})=>R(B),margin:"normal",error:(et==null?void 0:et.length)>0&&!U,inputProps:{autoFocus:Z}})},Rt=lt(I.z.string(),I.z.object({allowedKinds:I.z.array(I.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:I.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:I.z.union([I.z.string(),I.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:I.z.array(Yt).or(Yt).optional().describe("List of key-value filter expression for entities")})).schema,St=D=>{var R,W,k,ye,et;const{schema:{title:U="Owner",description:Z="The owner of the component"},uiSchema:te,...T}=D,B=(R=te["ui:options"])==null?void 0:R.defaultNamespace,V=(W=te["ui:options"])==null?void 0:W.allowedKinds,me=((k=te["ui:options"])==null?void 0:k.catalogFilter)||{kind:V||["Group","User"]},_e={...te,"ui:options":{catalogFilter:me,defaultKind:"Group",allowArbitraryValues:(et=(ye=te["ui:options"])==null?void 0:ye.allowArbitraryValues)!=null?et:!0,...B!==void 0?{defaultNamespace:B}:{}}};return _.createElement(C,{...T,schema:{title:U,description:Z},uiSchema:_e})},Mt=lt(I.z.string(),I.z.object({allowedHosts:I.z.array(I.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:I.z.array(I.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:I.z.array(I.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:I.z.array(I.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:I.z.array(I.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:I.z.object({secretsKey:I.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:I.z.object({gerrit:I.z.array(I.z.string()).optional().describe("Additional Gerrit scopes to request"),github:I.z.array(I.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:I.z.array(I.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:I.z.array(I.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:I.z.array(I.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,mt=(D,R,W)=>{var k,ye;try{const{host:et,searchParams:U}=new URL(`https://${D}`),Z=W.apiHolder.get(l.q3);et?(((k=Z==null?void 0:Z.byHost(et))==null?void 0:k.type)==="bitbucket"?(et==="bitbucket.org"&&!U.get("workspace")&&R.addError("Incomplete repository location provided, workspace not provided"),U.get("project")||R.addError("Incomplete repository location provided, project not provided")):((ye=Z==null?void 0:Z.byHost(et))==null?void 0:ye.type)!=="gerrit"&&(U.get("owner")||R.addError("Incomplete repository location provided, owner not provided")),U.get("repo")||R.addError("Incomplete repository location provided, repo not provided")):R.addError("Incomplete repository location provided, host not provided")}catch{R.addError("Unable to parse the Repository URL")}},xt=D=>{const{allowedOwners:R=[],rawErrors:W,state:k,onChange:ye}=D,et=R?R.map(Z=>({label:Z,value:Z})):[{label:"Loading...",value:"loading"}],{owner:U}=k;return _.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",required:!0,error:(W==null?void 0:W.length)>0&&!U},R!=null&&R.length?_.createElement(F.Ph,{native:!0,label:"Owner Available",onChange:Z=>ye({owner:String(Array.isArray(Z)?Z[0]:Z)}),disabled:R.length===1,selected:U,items:et}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"ownerInput"},"Owner"),_.createElement(pe.Z,{id:"ownerInput",onChange:Z=>ye({owner:Z.target.value}),value:U})),_.createElement(Oe.Z,null,"The organization, user or project that this repo will belong to")))},Wt=D=>{const{allowedOwners:R=[],state:W,onChange:k,rawErrors:ye}=D,et=R?R.map(Z=>({label:Z,value:Z})):[{label:"Loading...",value:"loading"}],{owner:U}=W;return _.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",required:!0,error:(ye==null?void 0:ye.length)>0&&!U},R!=null&&R.length?_.createElement(F.Ph,{native:!0,label:"Owner Available",onChange:Z=>k({owner:String(Array.isArray(Z)?Z[0]:Z)}),disabled:R.length===1,selected:U,items:et}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"ownerInput"},"Owner"),_.createElement(pe.Z,{id:"ownerInput",onChange:Z=>k({owner:Z.target.value}),value:U})),_.createElement(Oe.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Lt=D=>{const{allowedOrganizations:R=[],allowedOwners:W=[],rawErrors:k,state:ye,onChange:et}=D,U=R?R.map(B=>({label:B,value:B})):[{label:"Loading...",value:"loading"}],Z=W?W.map(B=>({label:B,value:B})):[{label:"Loading...",value:"loading"}],{organization:te,owner:T}=ye;return _.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",required:!0,error:(k==null?void 0:k.length)>0&&!te},R!=null&&R.length?_.createElement(F.Ph,{native:!0,label:"Organization",onChange:B=>et({organization:String(Array.isArray(B)?B[0]:B)}),disabled:R.length===1,selected:te,items:U}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"orgInput"},"Organization"),_.createElement(pe.Z,{id:"orgInput",onChange:B=>et({organization:B.target.value}),value:te})),_.createElement(Oe.Z,null,"The Organization that this repo will belong to")),_.createElement(Ee.Z,{margin:"normal",required:!0,error:(k==null?void 0:k.length)>0&&!T},W!=null&&W.length?_.createElement(F.Ph,{native:!0,label:"Owner",onChange:B=>et({owner:String(Array.isArray(B)?B[0]:B)}),disabled:W.length===1,selected:T,items:Z}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"ownerInput"},"Project"),_.createElement(pe.Z,{id:"ownerInput",onChange:B=>et({owner:B.target.value}),value:T})),_.createElement(Oe.Z,null,"The Project that this repo will belong to")))},Nt=D=>{const{allowedOwners:R=[],allowedProjects:W=[],onChange:k,rawErrors:ye,state:et}=D,{host:U,workspace:Z,project:te}=et,T=R?R==null?void 0:R.map(V=>({label:V,value:V})):[],B=W?W==null?void 0:W.map(V=>({label:V,value:V})):[];return(0,_.useEffect)(()=>{U==="bitbucket.org"&&R.length&&k({workspace:R[0]})},[R,U,k]),_.createElement(_.Fragment,null,U==="bitbucket.org"&&_.createElement(Ee.Z,{margin:"normal",required:!0,error:(ye==null?void 0:ye.length)>0&&!Z},R!=null&&R.length?_.createElement(F.Ph,{native:!0,label:"Allowed Workspaces",onChange:V=>k({workspace:String(Array.isArray(V)?V[0]:V)}),disabled:R.length===1,selected:Z,items:T}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"workspaceInput"},"Workspace"),_.createElement(pe.Z,{id:"workspaceInput",onChange:V=>k({workspace:V.target.value}),value:Z})),_.createElement(Oe.Z,null,"The Workspace that this repo will belong to")),_.createElement(Ee.Z,{margin:"normal",required:!0,error:(ye==null?void 0:ye.length)>0&&!te},W!=null&&W.length?_.createElement(F.Ph,{native:!0,label:"Allowed Projects",onChange:V=>k({project:String(Array.isArray(V)?V[0]:V)}),disabled:W.length===1,selected:te,items:B}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"projectInput"},"Project"),_.createElement(pe.Z,{id:"projectInput",onChange:V=>k({project:V.target.value}),value:te})),_.createElement(Oe.Z,null,"The Project that this repo will belong to")))},ge=D=>{const{onChange:R,rawErrors:W,state:k}=D,{workspace:ye,owner:et}=k;return _.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",error:(W==null?void 0:W.length)>0&&!ye},_.createElement(Se.Z,{htmlFor:"ownerInput"},"Owner"),_.createElement(pe.Z,{id:"ownerInput",onChange:U=>R({owner:U.target.value}),value:et}),_.createElement(Oe.Z,null,"The owner of the project (optional)")),_.createElement(Ee.Z,{margin:"normal",required:!0,error:(W==null?void 0:W.length)>0&&!ye},_.createElement(Se.Z,{htmlFor:"parentInput"},"Parent"),_.createElement(pe.Z,{id:"parentInput",onChange:U=>R({workspace:U.target.value}),value:ye}),_.createElement(Oe.Z,null,"The project parent that the repo will belong to")))},Fe=D=>{const{host:R,hosts:W,onChange:k,rawErrors:ye}=D,et=(0,ie.h_)(y.lc),{value:{integrations:U}={integrations:[]},loading:Z}=(0,Ce.default)(async()=>await et.getIntegrationsList({allowedHosts:W!=null?W:[]}));(0,_.useEffect)(()=>{R||(W!=null&&W.length?k(W[0]):U!=null&&U.length&&k(U[0].host))},[W,R,k,U]);const te=U?U.filter(T=>W!=null&&W.length?W==null?void 0:W.includes(T.host):!0).map(T=>({label:T.title,value:T.host})):[{label:"Loading...",value:"loading"}];return Z?_.createElement(F.Ex,null):_.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",required:!0,error:(ye==null?void 0:ye.length)>0&&!R},_.createElement(F.Ph,{native:!0,disabled:(W==null?void 0:W.length)===1,label:"Host",onChange:T=>k(String(Array.isArray(T)?T[0]:T)),selected:R,items:te,"data-testid":"host-select"}),_.createElement(Oe.Z,null,"The host where the repository will be created")))},Xe=D=>{const{repoName:R,allowedRepos:W,onChange:k,rawErrors:ye}=D;(0,_.useEffect)(()=>{R||W!=null&&W.length&&k(W[0])},[W,R,k]);const et=W?W.map(U=>({label:U,value:U})):[{label:"Loading...",value:"loading"}];return _.createElement(_.Fragment,null,_.createElement(Ee.Z,{margin:"normal",required:!0,error:(ye==null?void 0:ye.length)>0&&!R},W!=null&&W.length?_.createElement(F.Ph,{native:!0,label:"Repositories Available",onChange:U=>String(Array.isArray(U)?U[0]:U),disabled:W.length===1,selected:R,items:et}):_.createElement(_.Fragment,null,_.createElement(Se.Z,{htmlFor:"repoNameInput"},"Repository"),_.createElement(pe.Z,{id:"repoNameInput",onChange:U=>k(String(U.target.value)),value:R})),_.createElement(Oe.Z,null,"The name of the repository")))};function Ke(D){if(!D.host)return;const R=new URLSearchParams;return D.owner&&R.set("owner",D.owner),D.repoName&&R.set("repo",D.repoName),D.organization&&R.set("organization",D.organization),D.workspace&&R.set("workspace",D.workspace),D.project&&R.set("project",D.project),`${D.host}?${R.toString()}`}function ht(D){let R="",W="",k="",ye="",et="",U="";try{if(D){const Z=new URL(`https://${D}`);R=Z.host,W=Z.searchParams.get("owner")||"",k=Z.searchParams.get("repo")||"",ye=Z.searchParams.get("organization")||"",et=Z.searchParams.get("workspace")||"",U=Z.searchParams.get("project")||""}}catch{}return{host:R,owner:W,repoName:k,organization:ye,workspace:et,project:U}}const pt=D=>{var R,W;const{uiSchema:k,onChange:ye,rawErrors:et,formData:U}=D,[Z,te]=(0,_.useState)(ht(U)),T=(0,ie.h_)(l.q3),B=(0,ie.h_)(l.Om),{setSecrets:V}=(0,y.TD)(),me=(0,_.useMemo)(()=>{var wt,It;return(It=(wt=k==null?void 0:k["ui:options"])==null?void 0:wt.allowedHosts)!=null?It:[]},[k]),_e=(0,_.useMemo)(()=>{var wt,It;return(It=(wt=k==null?void 0:k["ui:options"])==null?void 0:wt.allowedOrganizations)!=null?It:[]},[k]),at=(0,_.useMemo)(()=>{var wt,It;return(It=(wt=k==null?void 0:k["ui:options"])==null?void 0:wt.allowedOwners)!=null?It:[]},[k]),He=(0,_.useMemo)(()=>{var wt,It;return(It=(wt=k==null?void 0:k["ui:options"])==null?void 0:wt.allowedProjects)!=null?It:[]},[k]),Ot=(0,_.useMemo)(()=>{var wt,It;return(It=(wt=k==null?void 0:k["ui:options"])==null?void 0:wt.allowedRepos)!=null?It:[]},[k]),{owner:yt,organization:Tt,project:Kt,repoName:ln}=Z;(0,_.useEffect)(()=>{ye(Ke(Z))},[Z,ye]),(0,_.useEffect)(()=>{_e.length>0&&!Tt&&te(wt=>({...wt,organization:_e[0]}))},[te,_e,Tt]),(0,_.useEffect)(()=>{at.length>0&&!yt&&te(wt=>({...wt,owner:at[0]}))},[te,at,yt]),(0,_.useEffect)(()=>{He.length>0&&!Kt&&te(wt=>({...wt,project:He[0]}))},[te,He,Kt]),(0,_.useEffect)(()=>{Ot.length>0&&!ln&&te(wt=>({...wt,repoName:Ot[0]}))},[te,Ot,ln]);const on=(0,_.useCallback)(wt=>{te(It=>({...It,...wt}))},[te]);(0,Je.Z)(async()=>{var wt;const{requestUserCredentials:It}=(wt=k==null?void 0:k["ui:options"])!=null?wt:{},dn=Z.owner?Z.owner:Z.project;if(!It||!(Z.host&&dn&&Z.repoName))return;const[hn,yn]=[Z.host,Z.repoName].map(encodeURIComponent),{token:bn}=await B.getCredentials({url:`https://${hn}/${dn}/${yn}`,additionalScope:{repoWrite:!0,customScopes:It.additionalScopes}});V({[It.secretsKey]:bn})},500,[Z,k]);const Gt=(W=Z.host&&((R=T.byHost(Z.host))==null?void 0:R.type))!=null?W:null;return _.createElement(_.Fragment,null,_.createElement(Fe,{host:Z.host,hosts:me,onChange:wt=>te(It=>({...It,host:wt})),rawErrors:et}),Gt==="github"&&_.createElement(xt,{allowedOwners:at,onChange:on,rawErrors:et,state:Z}),Gt==="gitlab"&&_.createElement(Wt,{allowedOwners:at,rawErrors:et,state:Z,onChange:on}),Gt==="bitbucket"&&_.createElement(Nt,{allowedOwners:at,allowedProjects:He,rawErrors:et,state:Z,onChange:on}),Gt==="azure"&&_.createElement(Lt,{allowedOrganizations:_e,allowedOwners:at,rawErrors:et,state:Z,onChange:on}),Gt==="gerrit"&&_.createElement(ge,{rawErrors:et,state:Z,onChange:on}),_.createElement(Xe,{repoName:Z.repoName,allowedRepos:Ot,onChange:wt=>te(It=>({...It,repoName:wt})),rawErrors:et}))},Xt=lt(I.z.string(),I.z.object({allowedKinds:I.z.array(I.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:I.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:I.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:I.z.union([I.z.string(),I.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,Ft=D=>{var R;const{schema:{title:W="Entity",description:k="An entity from the catalog"},uiSchema:ye,required:et}=D,U=(0,ie.h_)(ie.$4),{loading:Z,value:te}=(0,Ce.default)(async()=>(await U.getBackstageIdentity()).ownershipEntityRefs),T=(R=ye["ui:options"])==null?void 0:R.allowedKinds;return Z?_.createElement(fe.ZP,{loading:Z,renderInput:B=>_.createElement(Y.Z,{...B,label:W,margin:"dense",helperText:k,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:et,InputProps:B.InputProps}),options:[]}):_.createElement(C,{...D,schema:{title:W,description:k},allowedKinds:T,catalogFilter:T?{filter:{kind:T,[`relations.${g.S4}`]:te||[]}}:{filter:{[`relations.${g.S4}`]:te||[]}}})},ce=lt(I.z.array(I.z.string()),I.z.object({kinds:I.z.array(I.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:I.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:I.z.string().optional().describe("Helper text to display")})).schema,Te=D=>{var R,W,k;const{formData:ye,onChange:et,uiSchema:U}=D,Z=(0,ie.h_)(ve.Ah),[te,T]=(0,_.useState)([]),[B,V]=(0,_.useState)(""),[me,_e]=(0,_.useState)(!1),at=(0,g.In)().isValidTag,He=(R=U["ui:options"])==null?void 0:R.kinds,Ot=(W=U["ui:options"])==null?void 0:W.showCounts,yt=(k=U["ui:options"])==null?void 0:k.helperText,{loading:Tt,value:Kt}=(0,Ce.default)(async()=>{const on="metadata.tags",Gt={facets:[on]};He&&(Gt.filter={kind:He});const{facets:wt}=await Z.getEntityFacets(Gt),It=Object.fromEntries(wt[on].map(({value:dn,count:hn})=>[dn,hn]));return T(Object.keys(It).sort((dn,hn)=>Ot?It[hn]-It[dn]:dn.localeCompare(hn))),It}),ln=(on,Gt)=>{let wt=!1,It=!1;const dn=ye||[];if(Gt!=null&&Gt.length&&dn.length<Gt.length){const hn=Gt[Gt.length-1]=Gt[Gt.length-1].toLocaleLowerCase("en-US").trim();wt=!at(hn),It=dn.indexOf(hn)!==-1}_e(wt),V(wt?B:""),!wt&&!It&&et(Gt||[])};return(0,Ct.Z)(()=>et(ye||[])),_.createElement(Ee.Z,{margin:"normal"},_.createElement(fe.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:ln,value:ye||[],inputValue:B,loading:Tt,options:te,ChipProps:{size:"small"},renderOption:on=>Ot?`${on} (${Kt==null?void 0:Kt[on]})`:on,renderInput:on=>_.createElement(Y.Z,{...on,label:"Tags",onChange:Gt=>V(Gt.target.value),error:me,helperText:yt!=null?yt:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},$e=(0,ie.x8)({id:"register-component",optional:!0}),Le=(0,ie.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),G=(0,ie.NT)({id:"scaffolder"}),Ae=(0,ie.Rz)({id:"scaffolder/legacy/selected-template",parent:G,path:"/templates/:templateName"}),Re=(0,ie.Rz)({id:"scaffolder/selected-template",parent:G,path:"/templates/:namespace/:templateName"}),xe=(0,ie.Rz)({id:"scaffolder/task",parent:G,path:"/tasks/:taskId"}),J=(0,ie.Rz)({id:"scaffolder/list-tasks",parent:G,path:"/tasks"}),q=(0,ie.Rz)({id:"scaffolder/actions",parent:G,path:"/actions"}),Me=(0,ie.Rz)({id:"scaffolder/edit",parent:G,path:"/edit"}),we=lt(I.z.string(),I.z.object({title:I.z.string().default("Group").describe("Group"),description:I.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,Ve=D=>{const{schema:{title:R,description:W},required:k,rawErrors:ye,onChange:et}=D,U=(0,ie.h_)(ie.$4),Z=(0,ie.h_)(ve.Ah),te=(0,ie.h_)(ie.VE),[T,B]=(0,_.useState)([]),[V,me]=(0,_.useState)(null);(0,Ce.default)(async()=>{const{userEntityRef:at}=await U.getBackstageIdentity();if(!at){te.post(new d.dR("No user entity ref found"));return}const{items:He}=await Z.getEntities({filter:{type:"Group",["relations.hasMember"]:[at]}}),Ot=He.filter(yt=>Boolean(yt)).map(yt=>{var Tt;return{label:(Tt=yt.metadata.title)!=null?Tt:yt.metadata.name,ref:(0,g.eE)(yt)}});B(Ot)});const _e=(at,He)=>{var Ot;me(He),et((Ot=He==null?void 0:He.ref)!=null?Ot:"")};return _.createElement(Ee.Z,{margin:"normal",required:k,error:(ye==null?void 0:ye.length)>0},_.createElement(fe.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:T||[],value:V,onChange:_e,getOptionLabel:at=>at.label,renderInput:at=>_.createElement(Y.Z,{...at,label:R,margin:"dense",helperText:W,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:k})}))},rt=(0,ie.rx)({id:"scaffolder",apis:[(0,ie.ni)({api:y.lc,deps:{discoveryApi:ie.NW,scmIntegrationsApi:l.q3,fetchApi:ie.gP,identityApi:ie.$4},factory:({discoveryApi:D,scmIntegrationsApi:R,fetchApi:W,identityApi:k})=>new tt({discoveryApi:D,scmIntegrationsApi:R,fetchApi:W,identityApi:k})})],routes:{root:G,selectedTemplate:Re,ongoingTask:xe,actions:q,listTasks:J,edit:Me},externalRoutes:{registerComponent:$e,viewTechDoc:Le}}),oe=rt.provide((0,y.eP)({component:C,name:"EntityPicker",schema:rn})),X=rt.provide((0,y.eP)({component:Ye,name:"EntityNamePicker",validation:K,schema:dt})),de=rt.provide((0,y.eP)({component:pt,name:"RepoUrlPicker",validation:mt,schema:Mt})),he=rt.provide((0,y.eP)({component:St,name:"OwnerPicker",schema:Rt})),S=rt.provide((0,y.eP)({component:Ve,name:"MyGroupsPicker",schema:we})),h=rt.provide((0,ie.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(844),e.e(4580)]).then(e.bind(e,54580)).then(D=>D.Router),mountPoint:G})),c=rt.provide((0,y.eP)({component:Ft,name:"OwnedEntityPicker",schema:Xt})),b=rt.provide((0,y.eP)({component:Te,name:"EntityTagsPicker",schema:ce})),L=rt.provide((0,ie.P4)({name:"NextScaffolderPage",component:()=>Promise.all([e.e(844),e.e(6411)]).then(e.bind(e,16411)).then(D=>D.Router),mountPoint:G}))},78990:function(fn,Ut,e){"use strict";e.d(Ut,{Ho:function(){return l.s},sG:function(){return l.d}});var l=e(12650),y=e(15170),g=e(89759),d=e(12053),m=e(49462),A=e(34520),H=e(32272),je=e(19126),r=e.n(je),be=e(82394),ne=e.n(be),ie=e(31734),ve=e.n(ie),Y=e(88285),Ee=e(30705),fe=e(64304),_=e(2784),Ce=e(68111),I=e(80236),Pt=e(82108),Oe=e.n(Pt),pe=e(72779),Se=e.n(pe),F=e(26228);const Je=null,Ct=null,it=null,Bt=null,Ue=null,tt=null,lt=null},31734:function(fn,Ut){var e,l,y;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(g){"use strict";var d=g.setTimeout,m=g.clearTimeout,A=g.XMLHttpRequest,H=g.XDomainRequest,je=g.ActiveXObject,r=g.EventSource,be=g.document,ne=g.Promise,ie=g.fetch,ve=g.Response,Y=g.TextDecoder,Ee=g.TextEncoder,fe=g.AbortController;if(typeof window!="undefined"&&typeof be!="undefined"&&!("readyState"in be)&&be.body==null&&(be.readyState="loading",window.addEventListener("load",function(ge){be.readyState="complete"},!1)),A==null&&je!=null&&(A=function(){return new je("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(ge){function Fe(){}return Fe.prototype=ge,new Fe}),Date.now||(Date.now=function(){return new Date().getTime()}),fe==null){var _=ie;ie=function(ge,Fe){var Xe=Fe.signal;return _(ge,{headers:Fe.headers,credentials:Fe.credentials,cache:Fe.cache}).then(function(Ke){var ht=Ke.body.getReader();return Xe._reader=ht,Xe._aborted&&Xe._reader.cancel(),{status:Ke.status,statusText:Ke.statusText,headers:Ke.headers,body:{getReader:function(){return ht}}}})},fe=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function Ce(){this.bitsNeeded=0,this.codePoint=0}Ce.prototype.decode=function(ge){function Fe(j,ce,Te){if(Te===1)return j>=128>>ce&&j<<ce<=2047;if(Te===2)return j>=2048>>ce&&j<<ce<=55295||j>=57344>>ce&&j<<ce<=65535;if(Te===3)return j>=65536>>ce&&j<<ce<=1114111;throw new Error}function Xe(j,ce){if(j===6*1)return ce>>6>15?3:ce>31?2:1;if(j===6*2)return ce>15?3:2;if(j===6*3)return 3;throw new Error}for(var Ke=65533,ht="",pt=this.bitsNeeded,$t=this.codePoint,Xt=0;Xt<ge.length;Xt+=1){var Ft=ge[Xt];pt!==0&&(Ft<128||Ft>191||!Fe($t<<6|Ft&63,pt-6,Xe(pt,$t)))&&(pt=0,$t=Ke,ht+=String.fromCharCode($t)),pt===0?(Ft>=0&&Ft<=127?(pt=0,$t=Ft):Ft>=192&&Ft<=223?(pt=6*1,$t=Ft&31):Ft>=224&&Ft<=239?(pt=6*2,$t=Ft&15):Ft>=240&&Ft<=247?(pt=6*3,$t=Ft&7):(pt=0,$t=Ke),pt!==0&&!Fe($t,pt,Xe(pt,$t))&&(pt=0,$t=Ke)):(pt-=6,$t=$t<<6|Ft&63),pt===0&&($t<=65535?ht+=String.fromCharCode($t):(ht+=String.fromCharCode(55296+($t-65535-1>>10)),ht+=String.fromCharCode(56320+($t-65535-1&1023))))}return this.bitsNeeded=pt,this.codePoint=$t,ht};var I=function(){try{return new Y().decode(new Ee().encode("test"),{stream:!0})==="test"}catch(ge){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+ge)}return!1};(Y==null||Ee==null||!I())&&(Y=Ce);var Pt=function(){};function Oe(ge){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=Pt,this.onload=Pt,this.onerror=Pt,this.onreadystatechange=Pt,this._contentType="",this._xhr=ge,this._sendTimeout=0,this._abort=Pt}Oe.prototype.open=function(ge,Fe){this._abort(!0);var Xe=this,Ke=this._xhr,ht=1,pt=0;this._abort=function(Te){Xe._sendTimeout!==0&&(m(Xe._sendTimeout),Xe._sendTimeout=0),(ht===1||ht===2||ht===3)&&(ht=4,Ke.onload=Pt,Ke.onerror=Pt,Ke.onabort=Pt,Ke.onprogress=Pt,Ke.onreadystatechange=Pt,Ke.abort(),pt!==0&&(m(pt),pt=0),Te||(Xe.readyState=4,Xe.onabort(null),Xe.onreadystatechange())),ht=0};var $t=function(){if(ht===1){var Te=0,$e="",Le=void 0;if("contentType"in Ke)Te=200,$e="OK",Le=Ke.contentType;else try{Te=Ke.status,$e=Ke.statusText,Le=Ke.getResponseHeader("Content-Type")}catch{Te=0,$e="",Le=void 0}Te!==0&&(ht=2,Xe.readyState=2,Xe.status=Te,Xe.statusText=$e,Xe._contentType=Le,Xe.onreadystatechange())}},Xt=function(){if($t(),ht===2||ht===3){ht=3;var Te="";try{Te=Ke.responseText}catch{}Xe.readyState=3,Xe.responseText=Te,Xe.onprogress()}},Ft=function(Te,$e){if(($e==null||$e.preventDefault==null)&&($e={preventDefault:Pt}),Xt(),ht===1||ht===2||ht===3){if(ht=4,pt!==0&&(m(pt),pt=0),Xe.readyState=4,Te==="load")Xe.onload($e);else if(Te==="error")Xe.onerror($e);else if(Te==="abort")Xe.onabort($e);else throw new TypeError;Xe.onreadystatechange()}},j=function(Te){Ke!=null&&(Ke.readyState===4?(!("onload"in Ke)||!("onerror"in Ke)||!("onabort"in Ke))&&Ft(Ke.responseText===""?"error":"load",Te):Ke.readyState===3?"onprogress"in Ke||Xt():Ke.readyState===2&&$t())},ce=function(){pt=d(function(){ce()},500),Ke.readyState===3&&Xt()};"onload"in Ke&&(Ke.onload=function(Te){Ft("load",Te)}),"onerror"in Ke&&(Ke.onerror=function(Te){Ft("error",Te)}),"onabort"in Ke&&(Ke.onabort=function(Te){Ft("abort",Te)}),"onprogress"in Ke&&(Ke.onprogress=Xt),"onreadystatechange"in Ke&&(Ke.onreadystatechange=function(Te){j(Te)}),("contentType"in Ke||!("ontimeout"in A.prototype))&&(Fe+=(Fe.indexOf("?")===-1?"?":"&")+"padding=true"),Ke.open(ge,Fe,!0),"readyState"in Ke&&(pt=d(function(){ce()},0))},Oe.prototype.abort=function(){this._abort(!1)},Oe.prototype.getResponseHeader=function(ge){return this._contentType},Oe.prototype.setRequestHeader=function(ge,Fe){var Xe=this._xhr;"setRequestHeader"in Xe&&Xe.setRequestHeader(ge,Fe)},Oe.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},Oe.prototype.send=function(){if((!("ontimeout"in A.prototype)||!("sendAsBinary"in A.prototype)&&!("mozAnon"in A.prototype))&&be!=null&&be.readyState!=null&&be.readyState!=="complete"){var ge=this;ge._sendTimeout=d(function(){ge._sendTimeout=0,ge.send()},4);return}var Fe=this._xhr;"withCredentials"in Fe&&(Fe.withCredentials=this.withCredentials);try{Fe.send(void 0)}catch(Xe){throw Xe}};function pe(ge){return ge.replace(/[A-Z]/g,function(Fe){return String.fromCharCode(Fe.charCodeAt(0)+32)})}function Se(ge){for(var Fe=Object.create(null),Xe=ge.split(`\r
`),Ke=0;Ke<Xe.length;Ke+=1){var ht=Xe[Ke],pt=ht.split(": "),$t=pt.shift(),Xt=pt.join(": ");Fe[pe($t)]=Xt}this._map=Fe}Se.prototype.get=function(ge){return this._map[pe(ge)]},A!=null&&A.HEADERS_RECEIVED==null&&(A.HEADERS_RECEIVED=2);function F(){}F.prototype.open=function(ge,Fe,Xe,Ke,ht,pt,$t){ge.open("GET",ht);var Xt=0;ge.onprogress=function(){var j=ge.responseText,ce=j.slice(Xt);Xt+=ce.length,Xe(ce)},ge.onerror=function(j){j.preventDefault(),Ke(new Error("NetworkError"))},ge.onload=function(){Ke(null)},ge.onabort=function(){Ke(null)},ge.onreadystatechange=function(){if(ge.readyState===A.HEADERS_RECEIVED){var j=ge.status,ce=ge.statusText,Te=ge.getResponseHeader("Content-Type"),$e=ge.getAllResponseHeaders();Fe(j,ce,Te,new Se($e))}},ge.withCredentials=pt;for(var Ft in $t)Object.prototype.hasOwnProperty.call($t,Ft)&&ge.setRequestHeader(Ft,$t[Ft]);return ge.send(),ge};function Je(ge){this._headers=ge}Je.prototype.get=function(ge){return this._headers.get(ge)};function Ct(){}Ct.prototype.open=function(ge,Fe,Xe,Ke,ht,pt,$t){var Xt=null,Ft=new fe,j=Ft.signal,ce=new Y;return ie(ht,{headers:$t,credentials:pt?"include":"same-origin",signal:j,cache:"no-store"}).then(function(Te){return Xt=Te.body.getReader(),Fe(Te.status,Te.statusText,Te.headers.get("Content-Type"),new Je(Te.headers)),new ne(function($e,Le){var G=function(){Xt.read().then(function(Ae){if(Ae.done)$e(void 0);else{var Re=ce.decode(Ae.value,{stream:!0});Xe(Re),G()}}).catch(function(Ae){Le(Ae)})};G()})}).catch(function(Te){if(Te.name!=="AbortError")return Te}).then(function(Te){Ke(Te)}),{abort:function(){Xt!=null&&Xt.cancel(),Ft.abort()}}};function it(){this._listeners=Object.create(null)}function Bt(ge){d(function(){throw ge},0)}it.prototype.dispatchEvent=function(ge){ge.target=this;var Fe=this._listeners[ge.type];if(Fe!=null)for(var Xe=Fe.length,Ke=0;Ke<Xe;Ke+=1){var ht=Fe[Ke];try{typeof ht.handleEvent=="function"?ht.handleEvent(ge):ht.call(this,ge)}catch(pt){Bt(pt)}}},it.prototype.addEventListener=function(ge,Fe){ge=String(ge);var Xe=this._listeners,Ke=Xe[ge];Ke==null&&(Ke=[],Xe[ge]=Ke);for(var ht=!1,pt=0;pt<Ke.length;pt+=1)Ke[pt]===Fe&&(ht=!0);ht||Ke.push(Fe)},it.prototype.removeEventListener=function(ge,Fe){ge=String(ge);var Xe=this._listeners,Ke=Xe[ge];if(Ke!=null){for(var ht=[],pt=0;pt<Ke.length;pt+=1)Ke[pt]!==Fe&&ht.push(Ke[pt]);ht.length===0?delete Xe[ge]:Xe[ge]=ht}};function Ue(ge){this.type=ge,this.target=void 0}function tt(ge,Fe){Ue.call(this,ge),this.data=Fe.data,this.lastEventId=Fe.lastEventId}tt.prototype=Object.create(Ue.prototype);function lt(ge,Fe){Ue.call(this,ge),this.status=Fe.status,this.statusText=Fe.statusText,this.headers=Fe.headers}lt.prototype=Object.create(Ue.prototype);function Yt(ge,Fe){Ue.call(this,ge),this.error=Fe.error}Yt.prototype=Object.create(Ue.prototype);var ot=-1,rn=0,C=1,At=2,en=-1,tn=0,K=1,ct=2,dt=3,Ye=/^text\/event\-stream(;.*)?$/i,ut=1e3,Rt=18e6,St=function(ge,Fe){var Xe=ge==null?Fe:parseInt(ge,10);return Xe!==Xe&&(Xe=Fe),ft(Xe)},ft=function(ge){return Math.min(Math.max(ge,ut),Rt)},Mt=function(ge,Fe,Xe){try{typeof Fe=="function"&&Fe.call(ge,Xe)}catch(Ke){Bt(Ke)}};function mt(ge,Fe){it.call(this),Fe=Fe||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Lt(this,ge,Fe)}function xt(){return A!=null&&"withCredentials"in A.prototype||H==null?new A:new H}var Wt=ie!=null&&ve!=null&&"body"in ve.prototype;function Lt(ge,Fe,Xe){Fe=String(Fe);var Ke=Boolean(Xe.withCredentials),ht=Xe.lastEventIdQueryParameterName||"lastEventId",pt=ft(1e3),$t=St(Xe.heartbeatTimeout,45e3),Xt="",Ft=pt,j=!1,ce=0,Te=Xe.headers||{},$e=Xe.Transport,Le=Wt&&$e==null?void 0:new Oe($e!=null?new $e:xt()),G=$e!=null&&typeof $e!="string"?new $e:Le==null?new Ct:new F,Ae=void 0,Re=0,xe=ot,J="",q="",Me="",Ge="",we=tn,Ve=0,rt=0,oe=function(h,c,b,L){if(xe===rn)if(h===200&&b!=null&&Ye.test(b)){xe=C,j=Date.now(),Ft=pt,ge.readyState=C;var D=new lt("open",{status:h,statusText:c,headers:L});ge.dispatchEvent(D),Mt(ge,ge.onopen,D)}else{var R="";h!==200?(c&&(c=c.replace(/\s+/g," ")),R="EventSource's response has a status "+h+" "+c+" that is not 200. Aborting the connection."):R="EventSource's response has a Content-Type specifying an unsupported type: "+(b==null?"-":b.replace(/\s+/g," "))+". Aborting the connection.",he();var D=new lt("error",{status:h,statusText:c,headers:L});ge.dispatchEvent(D),Mt(ge,ge.onerror,D),console.error(R)}},X=function(h){if(xe===C){for(var c=-1,b=0;b<h.length;b+=1){var L=h.charCodeAt(b);(L===`
`.charCodeAt(0)||L==="\r".charCodeAt(0))&&(c=b)}var D=(c!==-1?Ge:"")+h.slice(0,c+1);Ge=(c===-1?Ge:"")+h.slice(c+1),h!==""&&(j=Date.now(),ce+=h.length);for(var R=0;R<D.length;R+=1){var L=D.charCodeAt(R);if(we===en&&L===`
`.charCodeAt(0))we=tn;else if(we===en&&(we=tn),L==="\r".charCodeAt(0)||L===`
`.charCodeAt(0)){if(we!==tn){we===K&&(rt=R+1);var W=D.slice(Ve,rt-1),k=D.slice(rt+(rt<R&&D.charCodeAt(rt)===" ".charCodeAt(0)?1:0),R);W==="data"?(J+=`
`,J+=k):W==="id"?q=k:W==="event"?Me=k:W==="retry"?(pt=St(k,pt),Ft=pt):W==="heartbeatTimeout"&&($t=St(k,$t),Re!==0&&(m(Re),Re=d(function(){S()},$t)))}if(we===tn){if(J!==""){Xt=q,Me===""&&(Me="message");var ye=new tt(Me,{data:J.slice(1),lastEventId:q});if(ge.dispatchEvent(ye),Me==="open"?Mt(ge,ge.onopen,ye):Me==="message"?Mt(ge,ge.onmessage,ye):Me==="error"&&Mt(ge,ge.onerror,ye),xe===At)return}J="",Me=""}we=L==="\r".charCodeAt(0)?en:tn}else we===tn&&(Ve=R,we=K),we===K?L===":".charCodeAt(0)&&(rt=R+1,we=ct):we===ct&&(we=dt)}}},de=function(h){if(xe===C||xe===rn){xe=ot,Re!==0&&(m(Re),Re=0),Re=d(function(){S()},Ft),Ft=ft(Math.min(pt*16,Ft*2)),ge.readyState=rn;var c=new Yt("error",{error:h});ge.dispatchEvent(c),Mt(ge,ge.onerror,c),h!=null&&console.error(h)}},he=function(){xe=At,Ae!=null&&(Ae.abort(),Ae=void 0),Re!==0&&(m(Re),Re=0),ge.readyState=At},S=function(){if(Re=0,xe!==ot){if(!j&&Ae!=null)de(new Error("No activity within "+$t+" milliseconds. "+(xe===rn?"No response received.":ce+" chars received.")+" Reconnecting.")),Ae!=null&&(Ae.abort(),Ae=void 0);else{var h=Math.max((j||Date.now())+$t-Date.now(),1);j=!1,Re=d(function(){S()},h)}return}j=!1,ce=0,Re=d(function(){S()},$t),xe=rn,J="",Me="",q=Xt,Ge="",Ve=0,rt=0,we=tn;var c=Fe;if(Fe.slice(0,5)!=="data:"&&Fe.slice(0,5)!=="blob:"&&Xt!==""){var b=Fe.indexOf("?");c=b===-1?Fe:Fe.slice(0,b+1)+Fe.slice(b+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(k,ye){return ye===ht?"":k}),c+=(Fe.indexOf("?")===-1?"?":"&")+ht+"="+encodeURIComponent(Xt)}var L=ge.withCredentials,D={};D.Accept="text/event-stream";var R=ge.headers;if(R!=null)for(var W in R)Object.prototype.hasOwnProperty.call(R,W)&&(D[W]=R[W]);try{Ae=G.open(Le,oe,X,de,c,L,D)}catch(k){throw he(),k}};ge.url=Fe,ge.readyState=rn,ge.withCredentials=Ke,ge.headers=Te,ge._close=he,S()}mt.prototype=Object.create(it.prototype),mt.prototype.CONNECTING=rn,mt.prototype.OPEN=C,mt.prototype.CLOSED=At,mt.prototype.close=function(){this._close()},mt.CONNECTING=rn,mt.OPEN=C,mt.CLOSED=At,mt.prototype.withCredentials=void 0;var Nt=r;A!=null&&(r==null||!("withCredentials"in r.prototype))&&(Nt=mt),function(ge){if(typeof fn.exports=="object"){var Fe=ge(Ut);Fe!==void 0&&(fn.exports=Fe)}else l=[Ut],e=ge,y=typeof e=="function"?e.apply(Ut,l):e,y!==void 0&&(fn.exports=y)}(function(ge){ge.EventSourcePolyfill=mt,ge.NativeEventSource=r,ge.EventSource=Nt})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},92573:function(fn,Ut,e){"use strict";e.d(Ut,{E1:function(){return ge},E5:function(){return U},FA:function(){return Ye},GQ:function(){return W},Nd:function(){return xt},Rx:function(){return Rt},US:function(){return Nt},ay:function(){return $e},gK:function(){return K},lt:function(){return Ge},qO:function(){return ht},wy:function(){return Re}});var l=e(30705),y=e(2784),g=e(79692),d=e(50581),m=e(61837),A=e(86619),H=e(4614),je=e(7089),r=e(42494),be=e(84899),ne=e(5806),ie=e(21324),ve=e(56939),Y=e(73698),Ee=e(12231),fe=e(90436),_=e(28899),Ce=e(86136),I=e(49378),Pt=e(95544),Oe=e(77277),pe=e(38402),Se=e(11776),F=e(21853),Je=e(48760),Ct=e(76635),it=e.n(Ct),Bt=e(64279),Ue=e(1849),tt=e(18473),lt=e(88013),Yt=e(69294),ot=e(80236),rn=e(19126),C=e.n(rn),At=e(27742),en=e(35352),tn=e(48834).Buffer;const K=(0,l.T0)({id:"plugin.search.queryservice"});class ct{constructor(B){this.mockedResults=B}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const dt=(0,g.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),Ye=T=>{const{text:B,preTag:V,postTag:me}=T,_e=dt(),at=(0,y.useMemo)(()=>B.split(new RegExp(`(${V}.+?${me})`)),[me,V,B]);return y.createElement(y.Fragment,null,at.map((He,Ot)=>He.includes(V)?y.createElement("mark",{className:_e.highlight,key:Ot},He.replace(new RegExp(`${V}|${me}`,"g"),"")):He))},ut=(0,tt.CT)("search-context"),Rt=()=>{const T=(0,y.useContext)(ut);if(!T)throw new Error("useSearch must be used within a SearchContextProvider");const B=T.atVersion(1);if(!B)throw new Error("No SearchContext v1 found");return B},St=()=>(0,y.useContext)(ut)!==void 0,ft={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Mt=(T=ft)=>{var B,V,me,_e;const at=(0,l.h_)(K),[He,Ot]=(0,y.useState)(T.term),[yt,Tt]=(0,y.useState)(T.types),[Kt,ln]=(0,y.useState)(T.filters),[on,Gt]=(0,y.useState)(T.pageLimit),[wt,It]=(0,y.useState)(T.pageCursor),dn=(0,Ue.Z)(He),hn=(0,Ue.Z)(Kt),yn=(0,Bt.default)(()=>at.query({term:He,types:yt,filters:Kt,pageLimit:on,pageCursor:wt}),[He,yt,Kt,on,wt]),bn=!yn.loading&&!yn.error&&((B=yn.value)==null?void 0:B.nextPageCursor),Ln=!yn.loading&&!yn.error&&((V=yn.value)==null?void 0:V.previousPageCursor),In=(0,y.useCallback)(()=>{var xn;It((xn=yn.value)==null?void 0:xn.nextPageCursor)},[(me=yn.value)==null?void 0:me.nextPageCursor]),On=(0,y.useCallback)(()=>{var xn;It((xn=yn.value)==null?void 0:xn.previousPageCursor)},[(_e=yn.value)==null?void 0:_e.previousPageCursor]);return(0,y.useEffect)(()=>{dn!==void 0&&He!==dn&&It(void 0)},[He,dn,It]),(0,y.useEffect)(()=>{hn!==void 0&&!(0,Ct.isEqual)(Kt,hn)&&It(void 0)},[Kt,hn,It]),{result:yn,term:He,setTerm:Ot,types:yt,setTypes:Tt,filters:Kt,setFilters:ln,pageLimit:on,setPageLimit:Gt,pageCursor:wt,setPageCursor:It,fetchNextPage:bn?In:void 0,fetchPreviousPage:Ln?On:void 0}},mt=T=>{const{initialState:B,children:V}=T,me=Mt(B);return y.createElement(l.fC,{attributes:{searchTypes:me.types.sort().join(",")}},y.createElement(ut.Provider,{value:(0,tt.EI)({1:me})},V))},xt=T=>{const{initialState:B,inheritParentContextIfAvailable:V,children:me}=T;return St()&&V?y.createElement(y.Fragment,null,me):y.createElement(mt,{initialState:B},me)},Wt=({children:T})=>{var B,V;const me=Kt=>(0,Ue.Z)(Kt)!==Kt,_e=(0,l.z$)(),{term:at,result:He}=Rt(),Ot=(V=(B=He.value)==null?void 0:B.numberOfResults)!=null?V:void 0,Tt=me(He.loading)&&!He.loading;return(0,y.useEffect)(()=>{at&&Tt&&_e.captureEvent("search",at,{value:Ot})},[_e,at,Ot,Tt]),y.createElement(y.Fragment,null,T)};function Lt(T){return(0,y.forwardRef)((B,V)=>y.createElement(xt,{inheritParentContextIfAvailable:!0},y.createElement(T,{...B,ref:V})))}const Nt=Lt((0,y.forwardRef)((T,B)=>{const{onChange:V,onKeyDown:me=()=>{},onClear:_e=()=>{},onSubmit:at=()=>{},debounceTime:He=200,clearButton:Ot=!0,fullWidth:yt=!0,value:Tt,label:Kt,placeholder:ln,inputProps:on={},InputProps:Gt={},endAdornment:wt,...It}=T,dn=(0,l.h_)(l.Ds),[hn,yn]=(0,y.useState)("");(0,y.useEffect)(()=>{yn(Kn=>Kn!==Tt?String(Tt):Kn)},[Tt]),(0,Je.Z)(()=>V(hn),He,[hn]);const bn=(0,y.useCallback)(Kn=>{yn(Kn.target.value)},[yn]),Ln=(0,y.useCallback)(Kn=>{me&&me(Kn),at&&Kn.key==="Enter"&&at()},[me,at]),In=(0,y.useCallback)(()=>{V(""),_e&&_e()},[V,_e]),On=Kt?void 0:"Search",Rn=ln!=null?ln:`Search in ${dn.getOptionalString("app.title")||"Backstage"}`,xn=y.createElement(d.Z,{position:"start"},y.createElement(m.Z,{"aria-label":"Query",size:"small",disabled:!0},y.createElement(F.Z,null))),er=y.createElement(d.Z,{position:"end"},y.createElement(Oe.Z,{"aria-label":"Clear",size:"small",onClick:In,onKeyDown:Kn=>{Kn.key==="Enter"&&Kn.stopPropagation()}},"Clear"));return y.createElement(Wt,null,y.createElement(A.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:B,value:hn,label:Kt,placeholder:Rn,InputProps:{startAdornment:xn,endAdornment:Ot?er:wt,...Gt},inputProps:{"aria-label":On,...on},fullWidth:yt,onChange:bn,onKeyDown:Ln,...It}))})),ge=Lt((0,y.forwardRef)((T,B)=>{const{value:V="",onChange:me,..._e}=T,{term:at,setTerm:He}=Rt();(0,y.useEffect)(()=>{V&&He(String(V))},[V,He]);const Ot=(0,y.useCallback)(yt=>{me?me(yt):He(yt)},[me,He]);return y.createElement(l.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},y.createElement(Nt,{..._e,ref:B,value:at,onChange:Ot}))})),Fe=(0,g.Z)(T=>({loading:{right:T.spacing(1),position:"absolute"}})),Xe=T=>B=>y.createElement(xt,{inheritParentContextIfAvailable:!0},y.createElement(T,{...B})),Ke=()=>{const T=Fe();return y.createElement(H.Z,{className:T.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},ht=Xe(function(B){const{loading:V,value:me,onChange:_e=()=>{},options:at=[],getOptionLabel:He=bn=>String(bn),inputPlaceholder:Ot,inputDebounceTime:yt,freeSolo:Tt=!0,fullWidth:Kt=!0,clearOnBlur:ln=!1,"data-testid":on="search-autocomplete",...Gt}=B,{setTerm:wt}=Rt(),It=(0,y.useCallback)(bn=>bn?typeof bn=="string"?bn:He(bn):"",[He]),dn=(0,y.useMemo)(()=>It(me),[me,It]),hn=(0,y.useCallback)((bn,Ln,In,On)=>{wt(It(Ln)),_e(bn,Ln,In,On)},[It,wt,_e]),yn=(0,y.useCallback)(({InputProps:{ref:bn,className:Ln,endAdornment:In},InputLabelProps:On,...Rn})=>y.createElement(ge,{...Rn,ref:bn,clearButton:!1,value:dn,placeholder:Ot,debounceTime:yt,endAdornment:V?y.createElement(Ke,null):In,InputProps:{className:Ln}}),[V,dn,Ot,yt]);return y.createElement(lt.ZP,{...Gt,"data-testid":on,value:me,onChange:hn,options:at,getOptionLabel:He,renderInput:yn,freeSolo:Tt,fullWidth:Kt,clearOnBlur:ln})}),pt=T=>{const{icon:B,primaryText:V,primaryTextTypographyProps:me,secondaryText:_e,secondaryTextTypographyProps:at,disableTextTypography:He}=T;return React.createElement(React.Fragment,null,B?React.createElement(ListItemIcon,null,B):null,React.createElement(ListItemText,{primary:V,primaryTypographyProps:me,secondary:_e,secondaryTypographyProps:at,disableTypography:He}))},$t=(T,B,V=[],me=250)=>{const _e=(0,y.useRef)({}),at=T||(()=>Promise.resolve([])),[He,Ot]=(0,Yt.default)(at,[B],{loading:!0});if((0,Je.Z)(()=>{_e.current[B]===void 0&&(_e.current[B]=Ot(B).then(Tt=>(_e.current[B]=Tt,Tt)))},me,[Ot,B]),V.length)return{loading:!1,value:V};const yt=_e.current[B];return Array.isArray(yt)?{loading:!1,value:yt}:He},Xt=(T,B)=>{const{setFilters:V}=Rt();(0,y.useEffect)(()=>{B&&[B].flat().length>0&&V(me=>({...me,[T]:B}))},[])},Ft=T=>{const{className:B,defaultValue:V,name:me,values:_e,valuesDebounceMs:at,label:He,filterSelectedOptions:Ot,limitTags:yt,multiple:Tt}=T,[Kt,ln]=(0,y.useState)("");Xt(me,V);const on=typeof _e=="function"?_e:void 0,Gt=typeof _e=="function"?void 0:_e,{value:wt,loading:It}=$t(on,Kt,Gt,at),{filters:dn,setFilters:hn}=Rt(),yn=dn[me]||(Tt?[]:null),bn=(On,Rn)=>{hn(xn=>{const{[me]:er,...Kn}=xn;return Rn?{...Kn,[me]:Rn}:{...Kn}})},Ln=On=>y.createElement(A.Z,{...On,name:"search",variant:"outlined",label:He,fullWidth:!0}),In=(On,Rn)=>On.map((xn,er)=>y.createElement(je.Z,{label:xn,color:"primary",...Rn({index:er})}));return y.createElement(lt.ZP,{filterSelectedOptions:Ot,limitTags:yt,multiple:Tt,className:B,id:`${Tt?"multi-":""}select-filter-${me}--select`,options:wt||[],loading:It,value:yn,onChange:bn,onInputChange:(On,Rn)=>ln(Rn),renderInput:Ln,renderTags:In})},j=(0,g.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),ce=T=>{const{className:B,defaultValue:V,label:me,name:_e,values:at=[],valuesDebounceMs:He}=T,Ot=j(),{filters:yt,setFilters:Tt}=Rt();Xt(_e,V);const Kt=typeof at=="function"?at:void 0,ln=typeof at=="function"?void 0:at,{value:on=[],loading:Gt}=$t(Kt,"",ln,He),wt=It=>{const{target:{value:dn,checked:hn}}=It;Tt(yn=>{const{[_e]:bn,...Ln}=yn,In=(bn||[]).filter(Rn=>Rn!==dn),On=hn?[...In,dn]:In;return On.length?{...Ln,[_e]:On}:Ln})};return y.createElement(r.Z,{className:B,disabled:Gt,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},me?y.createElement(be.Z,{className:Ot.label},me):null,on.map(It=>{var dn;return y.createElement(ne.Z,{key:It,classes:{root:Ot.checkboxWrapper,label:Ot.textWrapper},label:It,control:y.createElement(ie.Z,{color:"primary",inputProps:{"aria-labelledby":It},value:It,name:It,onChange:wt,checked:((dn=yt[_e])!=null?dn:[]).includes(It)})})}))},Te=T=>{const{className:B,defaultValue:V,label:me,name:_e,values:at,valuesDebounceMs:He}=T,Ot=j();Xt(_e,V);const yt=typeof at=="function"?at:void 0,Tt=typeof at=="function"?void 0:at,{value:Kt=[],loading:ln}=$t(yt,"",Tt,He),{filters:on,setFilters:Gt}=Rt(),wt=It=>{const{target:{value:dn}}=It;Gt(hn=>{const{[_e]:yn,...bn}=hn;return dn?{...bn,[_e]:dn}:bn})};return y.createElement(r.Z,{disabled:ln,className:B,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},me?y.createElement(ve.Z,{className:Ot.label,margin:"dense"},me):null,y.createElement(Y.Z,{variant:"outlined",value:on[_e]||"",onChange:wt},y.createElement(Ee.Z,{value:""},y.createElement("em",null,"All")),Kt.map(It=>y.createElement(Ee.Z,{key:It,value:It},y.createElement(fe.Z,{variant:"inherit",noWrap:!0},It)))))},$e=T=>{const{component:B,...V}=T;return y.createElement(B,{...V})};$e.Checkbox=T=>y.createElement($e,{...T,component:ce}),$e.Select=T=>y.createElement($e,{...T,component:Te}),$e.Autocomplete=T=>y.createElement($e,{...T,component:Ft});const Le=T=>tn.from(T.toString(),"utf-8").toString("base64"),G=T=>T?Number(tn.from(T,"base64").toString("utf-8")):0,Ae=T=>{const{total:B=-1,cursor:V,hasNextPage:me,onCursorChange:_e,limit:at=25,limitLabel:He="Results per page:",limitText:Ot=({from:wt,to:It})=>B>0?`of ${B}`:`${wt}-${It}`,limitOptions:yt,onLimitChange:Tt,...Kt}=T,ln=(0,y.useMemo)(()=>G(V),[V]),on=(0,y.useCallback)((wt,It)=>{_e==null||_e(Le(It))},[_e]),Gt=(0,y.useCallback)(wt=>{const It=wt.target.value;Tt==null||Tt(parseInt(It,10))},[Tt]);return y.createElement(_.Z,{...Kt,component:"div",count:B,page:ln,nextIconButtonProps:{...me!==void 0&&{disabled:!me}},onPageChange:on,rowsPerPage:at,labelRowsPerPage:He,labelDisplayedRows:Ot,rowsPerPageOptions:yt,onRowsPerPageChange:Gt})},Re=T=>{const{pageLimit:B,setPageLimit:V,pageCursor:me,setPageCursor:_e,fetchNextPage:at}=Rt(),He=(0,y.useCallback)(Ot=>{V(Ot),_e(void 0)},[V,_e]);return y.createElement(Ae,{...T,hasNextPage:!!at,limit:B,onLimitChange:He,cursor:me,onCursorChange:_e})},xe=T=>{const{children:B}=T,V=Rt(),{result:me,..._e}=V;return B(me,_e)},J=T=>{const{query:B,children:V}=T,me=(0,l.h_)(K),_e=(0,Bt.default)(()=>{const{term:at="",types:He=[],filters:Ot={},...yt}=B;return me.query({...yt,term:at,types:He,filters:Ot})},[B]);return V(_e,B)},q=T=>{const{query:B,children:V}=T;return B?y.createElement(J,{query:B},V):y.createElement(xe,null,V)},Me=T=>{const{query:B,children:V,noResultsComponent:me=y.createElement(ot.ub,{missing:"data",title:"Sorry, no results were found"}),..._e}=T;return y.createElement(q,{query:B},({loading:at,error:He,value:Ot})=>at?y.createElement(ot.Ex,null):He?y.createElement(ot.Gk,{title:"Error encountered while fetching search results",error:He}):Ot!=null&&Ot.results.length?(0,Ct.isFunction)(V)?V(Ot):y.createElement(te,{..._e,results:Ot.results},V):me)},Ge=T=>y.createElement(l.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},y.createElement(Me,{...T})),we=({result:T,highlight:B,icon:V,secondaryAction:me,lineClamp:_e=5})=>T?y.createElement(y.Fragment,null,V&&y.createElement(Ce.Z,null,V),y.createElement(I.Z,{primaryTypographyProps:{variant:"h6"},primary:y.createElement(ot.rU,{noTrack:!0,to:T.location},B!=null&&B.fields.title?y.createElement(Ye,{text:(B==null?void 0:B.fields.title)||"",preTag:(B==null?void 0:B.preTag)||"",postTag:(B==null?void 0:B.postTag)||""}):T.title),secondary:y.createElement(fe.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:_e,overflow:"hidden"},color:"textSecondary",variant:"body2"},B!=null&&B.fields.text?y.createElement(Ye,{text:B.fields.text,preTag:B.preTag,postTag:B.postTag}):T.text)}),me&&y.createElement(Pt.Z,{alignItems:"flex-end"},me)):null,Ve=T=>y.createElement(l.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},y.createElement(we,{...T})),rt=T=>{const{error:B,loading:V,resultItems:me,renderResultItem:_e=yt=>React.createElement(Ve,{key:yt.document.location,result:yt.document}),disableRenderingWithNoResults:at,noResultsComponent:He=at?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ot}=T;return V?React.createElement(Progress,null):B?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:B}):me!=null&&me.length?React.createElement(List,{...Ot},me.map(_e)):React.createElement(React.Fragment,null,He)},oe=T=>{const{query:B,renderResultItem:V,children:me,..._e}=T,at=Z(me);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(q,{query:B},({loading:He,error:Ot,value:yt})=>React.createElement(rt,{..._e,error:Ot,loading:He,resultItems:yt==null?void 0:yt.results,renderResultItem:V!=null?V:at})))},X=(0,g.Z)(T=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:T.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:T.palette.text.secondary,margin:T.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:T.palette.text.secondary,margin:T.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:T.spacing(.5)}})),de=T=>{const B=X(),{label:V,children:me,..._e}=T;return React.createElement(Chip,{..._e,className:B.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,V,": ",me)})},he=()=>null,S=(0,g.Z)(T=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:T.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:T.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),h=T=>{const B=S(),{label:V,value:me="None",onChange:_e,onDelete:at}=T,He=useCallback(Ot=>{_e(Ot.target.value)},[_e]);return React.createElement(de,{label:V,onDelete:at},React.createElement(Typography,{role:"textbox",component:"span",className:B.root,onChange:He,contentEditable:!0,suppressContentEditableWarning:!0},me))},c=(0,g.Z)(T=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:T.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),b=T=>{const B=c(),{label:V,value:me="none",onChange:_e,onDelete:at,children:He}=T,Ot=useCallback(yt=>{_e(yt.target.value)},[_e]);return React.createElement(de,{label:V,onDelete:at},React.createElement(Select,{className:B.root,value:me,onChange:Ot,input:React.createElement(InputBase,null),IconComponent:he},React.createElement(MenuItem,{value:"none"},"None"),He))};function L(T){const B=X(),[V,me]=useState(null),{error:_e,loading:at,icon:He,title:Ot,titleProps:yt={},link:Tt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:B.listSubheaderLinkIcon})),linkProps:Kt={},filterOptions:ln,renderFilterOption:on=On=>React.createElement(MenuItem,{key:String(On),value:String(On)},On),filterFields:Gt,renderFilterField:wt,resultItems:It,renderResultItem:dn=On=>React.createElement(Ve,{key:On.document.location,result:On.document}),disableRenderingWithNoResults:hn,noResultsComponent:yn=hn?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...bn}=T,Ln=useCallback(On=>{me(On.currentTarget)},[]),In=useCallback(()=>{me(null)},[]);return at?React.createElement(Progress,null):_e?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:_e}):It!=null&&It.length?React.createElement(List,{...bn},React.createElement(ListSubheader,{className:B.listSubheader},He,React.createElement(Typography,{className:B.listSubheaderName,component:"strong",...yt},Ot),ln?React.createElement(Chip,{className:B.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Ln}):null,ln?React.createElement(Menu,{id:"filters-menu",anchorEl:V,open:Boolean(V),onClose:In,onClick:In,keepMounted:!0},ln.map(on)):null,Gt==null?void 0:Gt.map(On=>{var Rn;return(Rn=wt==null?void 0:wt(On))!=null?Rn:null}),React.createElement(Link,{className:B.listSubheaderLink,to:"/search",...Kt},Tt)),It.map(dn)):React.createElement(React.Fragment,null,yn)}function D(T){const{query:B,children:V,renderResultItem:me,linkProps:_e={},...at}=T,He=Z(V);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(q,{query:B},({loading:Ot,error:yt,value:Tt},{term:Kt,types:ln,pageCursor:on,filters:Gt={}})=>{const wt=`/search?${qs.stringify({term:Kt,types:ln,filters:Gt,pageCursor:on,query:Kt},{arrayFormat:"brackets"})}`;return React.createElement(L,{...at,error:yt,loading:Ot,linkProps:{to:wt,..._e},filterFields:Object.keys(Gt),resultItems:Tt==null?void 0:Tt.results,renderResultItem:me!=null?me:He})}))}const R=(0,g.Z)(T=>({root:{display:"flex",justifyContent:"space-between",gap:T.spacing(2),margin:T.spacing(2,0)}})),W=()=>{const{fetchNextPage:T,fetchPreviousPage:B}=Rt(),V=R();return!T&&!B?y.createElement(y.Fragment,null):y.createElement("nav",{"aria-label":"pagination navigation",className:V.root},y.createElement(Oe.Z,{"aria-label":"previous page",disabled:!B,onClick:B,startIcon:y.createElement(en.Z,null)},"Previous"),y.createElement(Oe.Z,{"aria-label":"next page",disabled:!T,onClick:T,endIcon:y.createElement(At.Z,null)},"Next"))},k="search.results.list.items.extensions.v1",ye=(T,B)=>{for(const V of T){if(!(0,y.isValidElement)(V))continue;const me=(0,l.IY)(V,k);if(me!=null&&me(B))return(0,y.cloneElement)(V,{rank:B.rank,highlight:B.highlight,result:B.document,...V.props})}return null},et=T=>{const{rank:B,result:V,noTrack:me,children:_e,alignItems:at="flex-start",...He}=T,Ot=(0,l.z$)(),yt=(0,y.useCallback)(()=>{me||V&&Ot.captureEvent("discover",V.title,{attributes:{to:V.location},value:B})},[B,V,me,Ot]);return y.createElement(pe.Z,{divider:!0,alignItems:at,onClickCapture:yt,...He},_e)},U=T=>{const{name:B,component:V,predicate:me=()=>!0}=T;return(0,l.YO)({name:B,component:{lazy:()=>V().then(_e=>at=>y.createElement(et,{rank:at.rank,result:at.result,noTrack:at.noTrack},(0,y.createElement)(_e,at)))},data:{[k]:me}})},Z=T=>{const B=(0,l.vJ)(T,V=>V.selectByComponentData({key:k}).getElements(),[T]);return(0,y.useCallback)((V,me)=>{const _e=ye(B,V);return y.createElement(y.Fragment,{key:me},_e!=null?_e:y.createElement(et,{rank:V.rank,result:V.document},y.createElement(Ve,{rank:V.rank,highlight:V.highlight,result:V.document})))},[B])},te=T=>{const{results:B,children:V,...me}=T,_e=Z(V);return y.createElement(Se.Z,{...me},B.map(_e))}},25429:function(fn,Ut,e){"use strict";e.d(Ut,{S:function(){return ce},a:function(){return Xt},b:function(){return pt},c:function(){return Re},e:function(){return ge},f:function(){return Fe},r:function(){return Lt},u:function(){return Ft}});var l=e(80236),y=e(30705),g=e(92573),d=e(60364),m=e(79249),A=e(38724),H=e(60905),je=e(85256),r=e(49429),be=e(8629),ne=e(79692),ie=e(94339),ve=e(32552),Y=e(24579),Ee=e(27616),fe=e(8284),_=e(70660),Ce=e(11776),I=e(38402),Pt=e(86136),Oe=e(49378),pe=e(99152),Se=e(6487),F=e(42494),Je=e(56939),Ct=e(73698),it=e(7089),Bt=e(12231),Ue=e(21324),tt=e(95544),lt=e(77277),Yt=e(61837),ot=e(27597),rn=e(87685),C=e(2784),At=e(73557),en=e(32272),tn=e(19126),K=e.n(tn),ct=e(18473),dt=e(55649),Ye=e(1849),ut=e(62155),Rt=e(38016),St=e(56881),ft=e(64279),Mt=Object.defineProperty,mt=(J,q,Me)=>q in J?Mt(J,q,{enumerable:!0,configurable:!0,writable:!0,value:Me}):J[q]=Me,xt=(J,q,Me)=>(mt(J,typeof q!="symbol"?q+"":q,Me),Me);class Wt{constructor(q){xt(this,"discoveryApi"),xt(this,"identityApi"),this.discoveryApi=q.discoveryApi,this.identityApi=q.identityApi}async query(q){const{token:Me}=await this.identityApi.getCredentials(),Ge=K().stringify(q),we=`${await this.discoveryApi.getBaseUrl("search")}/query?${Ge}`,Ve=await fetch(we,{headers:Me?{Authorization:`Bearer ${Me}`}:{}});if(!Ve.ok)throw await en.VL.fromResponse(Ve);return Ve.json()}}const Lt=(0,y.NT)({id:"search"}),Nt=(0,y.rx)({id:"search",apis:[(0,y.ni)({api:g.gK,deps:{discoveryApi:y.NW,identityApi:y.$4},factory:({discoveryApi:J,identityApi:q})=>new Wt({discoveryApi:J,identityApi:q})})],routes:{root:Lt}}),ge=Nt.provide((0,y.P4)({name:"SearchPage",component:()=>e.e(6447).then(e.bind(e,46447)).then(J=>J.SearchPage),mountPoint:Lt})),Fe=Nt.provide((0,y.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(5645).then(e.bind(e,15645)).then(J=>J.SidebarSearchModal)}})),Xe=Nt.provide((0,y.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8019).then(e.bind(e,18019)).then(J=>J.HomePageSearchBar)}})),Ke=(0,ne.Z)(J=>({dialogTitle:{gap:J.spacing(1),display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto","&> button":{marginTop:J.spacing(1)}},input:{flex:1},button:{"&:hover":{background:"none"}},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:J.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),ht=({toggleModal:J})=>{const q=Ke(),Me=(0,At.s0)(),{transitions:Ge}=(0,d.Z)(),{focusContent:we}=(0,l.r0)(),Ve=(0,y.tg)(Lt)(),rt=(0,C.useRef)(null);(0,C.useEffect)(()=>{var de;(de=rt==null?void 0:rt.current)==null||de.focus()});const oe=(0,C.useCallback)(()=>{setTimeout(we,Ge.duration.leavingScreen)},[we,Ge]),X=(0,C.useCallback)(()=>{var de,he;const S=(he=(de=rt.current)==null?void 0:de.value)!=null?he:"";Me(`${Ve}?query=${S}`),oe()},[Me,oe,Ve]);return C.createElement(C.Fragment,null,C.createElement(m.Z,null,C.createElement(tt.Z,{className:q.dialogTitle},C.createElement(g.E1,{className:q.input,inputProps:{ref:rt},onSubmit:X}),C.createElement(Yt.Z,{"aria-label":"close",onClick:J},C.createElement(rn.Z,null)))),C.createElement(A.Z,null,C.createElement(H.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},C.createElement(H.Z,{item:!0},C.createElement(lt.Z,{className:q.button,color:"primary",endIcon:C.createElement(ot.Z,null),onClick:X,disableRipple:!0},"View Full Results"))),C.createElement(je.Z,null),C.createElement(g.lt,{onClick:oe,onKeyDown:oe})),C.createElement(r.Z,{className:q.dialogActionsContainer},C.createElement(H.Z,{container:!0,direction:"row"},C.createElement(H.Z,{item:!0,xs:12},C.createElement(g.GQ,null)))))},pt=J=>{var q;const{open:Me=!0,hidden:Ge,toggleModal:we,children:Ve}=J,rt=Ke();return C.createElement(be.Z,{classes:{paperFullWidth:rt.paperFullWidth},onClose:we,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:Me,hidden:Ge},Me&&C.createElement(g.Nd,{inheritParentContextIfAvailable:!0},(q=Ve&&Ve({toggleModal:we}))!=null?q:C.createElement(ht,{toggleModal:we})))},$t=(0,ct.CT)("search-modal-context"),Xt=J=>{const q=Ft(J.showInitially),Me=(0,ct.EI)({1:q});return C.createElement($t.Provider,{value:Me},J.children)};function Ft(J=!1){const[q,Me]=(0,C.useState)({hidden:!J,open:J}),Ge=(0,C.useCallback)(()=>Me(he=>({open:!0,hidden:!he.hidden})),[]),we=(0,C.useCallback)(he=>Me(S=>({open:S.open||he,hidden:!he})),[]),Ve=(0,C.useContext)($t),rt=Ve==null?void 0:Ve.atVersion(1),oe=!!(rt!=null&&rt.state),X=(0,At.TH)(),de=`${X.pathname}${X.search}${X.hash}`;return(0,dt.Z)(()=>{Me(he=>({open:he.open,hidden:!0}))},[de]),oe?rt:{state:q,toggleModal:Ge,setOpen:we}}const j=()=>{const J=(0,At.TH)(),{term:q,setTerm:Me,types:Ge,setTypes:we,pageCursor:Ve,setPageCursor:rt,filters:oe,setFilters:X}=(0,g.Rx)(),de=(0,Ye.Z)(J.search);return(0,C.useEffect)(()=>{if(J.search===de)return;const he=K().parse(J.search.substring(1),{arrayLimit:0})||{};he.filters&&X(he.filters),he.query&&Me(he.query),he.pageCursor&&rt(he.pageCursor),he.types&&we(he.types)},[de,J,Me,we,rt,X]),(0,C.useEffect)(()=>{const he=K().stringify({query:q,types:Ge,pageCursor:Ve,filters:oe},{arrayFormat:"brackets"}),S=`${window.location.pathname}?${he}`;window.history.replaceState(null,document.title,S)},[q,Ge,Ve,oe]),null},ce=()=>{const J=(0,At.pC)();return C.createElement(g.Nd,null,C.createElement(j,null),J)},Te=(0,ne.Z)(J=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:J.spacing(1)},icon:{color:J.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:J.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:J.spacing(2,0),"&.Mui-expanded":{margin:J.spacing(2,0)}},accordionDetails:{padding:J.spacing(0,0,1)}})),$e=J=>{const q=Te(),{filters:Me,setPageCursor:Ge,setTypes:we,term:Ve,types:rt}=(0,g.Rx)(),oe=(0,y.h_)(g.gK),[X,de]=(0,C.useState)(!0),{defaultValue:he,name:S,showCounts:h,types:c}=J,b=()=>de(k=>!k),L=k=>()=>{we(k!==""?[k]:[]),Ge(void 0),de(!1)};(0,C.useEffect)(()=>{he&&we([he])},[]);const D=[{value:"",name:"All",icon:C.createElement(St.Z,null)},...c],R=rt[0]||"",{value:W}=(0,ft.default)(async()=>{if(!h)return{};const k=await Promise.all(D.map(ye=>ye.value).map(async ye=>{const{numberOfResults:et}=await oe.query({term:Ve,types:ye?[ye]:[],filters:rt.includes(ye)||!rt.length&&!ye?Me:{},pageLimit:0});return[ye,et!==void 0?`${et>=1e4?">10000":et} results`:" -- "]}));return Object.fromEntries(k)},[Me,h,Ve,rt]);return C.createElement(ie.Z,{className:q.card},C.createElement(ve.Z,{title:S,titleTypographyProps:{variant:"overline"}}),C.createElement(Y.Z,{className:q.cardContent},C.createElement(Ee.Z,{className:q.accordion,expanded:X,onChange:b},C.createElement(fe.Z,{classes:{root:q.accordionSummary,content:q.accordionSummaryContent},expandIcon:C.createElement(Rt.Z,{className:q.icon}),IconButtonProps:{size:"small"}},X?"Collapse":D.filter(k=>k.value===R)[0].name),C.createElement(_.Z,{classes:{root:q.accordionDetails}},C.createElement(Ce.Z,{className:q.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},D.map(k=>C.createElement(C.Fragment,{key:k.value},C.createElement(je.Z,null),C.createElement(I.Z,{selected:rt[0]===k.value||rt.length===0&&k.value==="",onClick:L(k.value),button:!0},C.createElement(Pt.Z,null,(0,C.cloneElement)(k.icon,{className:q.listItemIcon})),C.createElement(Oe.Z,{primary:k.name,secondary:W&&W[k.value]})))))))))},Le=(0,ne.Z)(J=>({tabs:{borderBottom:`1px solid ${J.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:J.typography.fontWeightBold,fontSize:J.typography.pxToRem(13),color:J.palette.text.primary,minWidth:"130px"}})),G=J=>{const q=Le(),{setPageCursor:Me,setTypes:Ge,types:we}=(0,g.Rx)(),{defaultValue:Ve,types:rt}=J,oe=(de,he)=>{Ge(he!==""?[he]:[]),Me(void 0)};(0,C.useEffect)(()=>{Ve&&Ge([Ve])},[]);const X=[{value:"",name:"All"},...rt];return C.createElement(pe.Z,{"aria-label":"List of search types tabs",className:q.tabs,indicatorColor:"primary",value:we.length===0?"":we[0],onChange:oe},X.map((de,he)=>C.createElement(Se.Z,{key:he,className:q.tab,label:de.name,value:de.value})))},Ae=(0,ne.Z)(J=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:J.spacing(1)},chip:{margin:2}})),Re=J=>{const{className:q,defaultValue:Me,name:Ge,values:we=[]}=J,Ve=Ae(),{types:rt,setTypes:oe}=(0,g.Rx)();(0,ut.Z)(()=>{rt.length||(Me&&Array.isArray(Me)?oe(Me):Me&&oe([Me]))});const X=de=>{const he=de.target.value;oe(he)};return C.createElement(F.Z,{className:q,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},C.createElement(Je.Z,{className:Ve.label,margin:"dense"},Ge),C.createElement(Ct.Z,{multiple:!0,variant:"outlined",value:rt,onChange:X,placeholder:"All Results",renderValue:de=>C.createElement("div",{className:Ve.chips},de.map(he=>C.createElement(it.Z,{key:he,label:he,className:Ve.chip,size:"small"})))},we.map(de=>C.createElement(Bt.Z,{key:de,value:de},C.createElement(Ue.Z,{checked:rt.indexOf(de)>-1}),C.createElement(Oe.Z,{primary:de})))))};Re.Accordion=J=>C.createElement($e,{...J}),Re.Tabs=J=>C.createElement(G,{...J});const xe=J=>{const q=useRouteRef(Lt),{focusContent:Me}=useContent(),Ge=useNavigate(),we=useCallback(Ve=>{const rt=qs.stringify({query:Ve},{addQueryPrefix:!0});Me(),Ge(`${q()}${rt}`)},[Me,Ge,q]);return React.createElement(SidebarSearchField,{icon:J.icon,onSearch:we,to:"/search"})}},23778:function(fn,Ut,e){"use strict";e.d(Ut,{Sc:function(){return l.c},YC:function(){return l.f},Z9:function(){return l.e}});var l=e(25429),y=e(80236),g=e(30705),d=e(92573),m=e(2784),A=e(32272),H=e(19126),je=e.n(H),r=e(18473)},44741:function(fn,Ut,e){"use strict";e.d(Ut,{Wf:function(){return Ve}});var l=e(80236),y=e(30705),g=e(2784),d=e(64279),m=e(79692),A=e(38724),H=e(49429),je=e(77277),r=e(29611),be=e(60905),ne=e(8629),ie=e(79249),ve=e(35292),Y=e(37390),Ee=e(97485),fe=e(15584),_=e(91256),Ce=e(58987),I=e(89571),Pt=e(27556),Oe=e(90436),pe=e(90324),Se=e(70595),F=e(43181),Je=e(58238),Ct=e(71346),it=e.n(Ct),Bt=e(62432),Ue=e(26506);const tt=(0,y.T0)({id:"plugin.techradar.service"});var lt=(oe=>(oe[oe.Down=-1]="Down",oe[oe.NoChange=0]="NoChange",oe[oe.Up=1]="Up",oe))(lt||{});const Yt=(0,m.Z)(oe=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:oe.palette.text.primary,fontSize:"25px",fontWeight:800,opacity:.7}}),{name:"PluginTechRadarGrid"}),ot=oe=>{const{radius:X,rings:de}=oe,he=Yt(oe),S=(b,L)=>[g.createElement("circle",{key:`c${b}`,cx:0,cy:0,r:L,className:he.ring}),g.createElement("text",{key:`t${b}`,y:L!==void 0?-L+42:void 0,textAnchor:"middle",className:he.text,style:{fill:de[b].color},"data-testid":"radar-ring-heading"},de[b].name)],h=[g.createElement("line",{key:"x",x1:0,y1:-X,x2:0,y2:X,className:he.axis,"data-testid":"radar-grid-x-line"}),g.createElement("line",{key:"y",x1:-X,y1:0,x2:X,y2:0,className:he.axis,"data-testid":"radar-grid-y-line"})],c=de.map(b=>b.outerRadius).map((b,L)=>S(L,b));return g.createElement(g.Fragment,null,h.concat(...c))};function rn(oe){return Boolean(oe&&oe!=="#"&&oe.length>0)}const C=({url:oe,className:X,children:de})=>rn(oe)?g.createElement(l.rU,{className:X,to:oe},de):g.createElement(g.Fragment,null,de),At=oe=>{const{timeline:X}=oe;return g.createElement(g.Fragment,null,g.createElement(Oe.Z,{variant:"h6",gutterBottom:!0},"History"),g.createElement(_.Z,{component:Pt.Z},g.createElement(Y.Z,{"aria-label":"simple table"},g.createElement(Ce.Z,null,g.createElement(I.Z,null,g.createElement(fe.Z,{align:"left"},"Moved in direction"),g.createElement(fe.Z,{align:"left"},"Moved to ring"),g.createElement(fe.Z,{align:"left"},"Moved on date"),g.createElement(fe.Z,{align:"left"},"Description"))),g.createElement(Ee.Z,null,(X==null?void 0:X.length)===0&&g.createElement(I.Z,{key:"no-timeline"},g.createElement(fe.Z,{component:"th",scope:"row"},"No Timeline")),X==null?void 0:X.map(de=>g.createElement(I.Z,{key:de.description},g.createElement(fe.Z,{component:"th",scope:"row"},de.moved===lt.Up?g.createElement(pe.Z,null):"",de.moved===lt.Down?g.createElement(Se.Z,null):"",de.moved===lt.NoChange?g.createElement(F.Z,null):""),g.createElement(fe.Z,{align:"left"},de.ring.name?de.ring.name:""),g.createElement(fe.Z,{align:"left"},de.date.toLocaleDateString()?de.date.toLocaleDateString():""),g.createElement(fe.Z,{align:"left"},de.description?de.description:"")))))))},en=oe=>{function X(D,R){return rn(D)||Boolean(R&&R.length>0)}const{open:de,onClose:he,title:S,description:h,timeline:c,url:b,links:L}=oe;return g.createElement(ne.Z,{"data-testid":"radar-description",open:de,onClose:he},g.createElement(ie.Z,{"data-testid":"radar-description-dialog-title"},S),g.createElement(A.Z,{dividers:!0},g.createElement(l.SA,{content:h}),g.createElement(At,{timeline:c})),X(b,L)&&g.createElement(H.Z,null,L==null?void 0:L.map(D=>g.createElement(je.Z,{component:l.rU,to:D.url,onClick:he,color:"primary",startIcon:g.createElement(ve.Z,null),key:D.url},D.title)),rn(b)&&g.createElement(je.Z,{component:l.rU,to:b,onClick:he,color:"primary",startIcon:g.createElement(ve.Z,null),key:b},"LEARN MORE")))},tn=(0,m.Z)(oe=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:oe.palette.common.white,textAnchor:"middle"},link:{cursor:"pointer"}})),K=(oe,X)=>{const de={fill:oe};let he=g.createElement("circle",{r:9,style:de});return X&&X>0?he=g.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:de}):X&&X<0&&(he=g.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:de})),he},ct=oe=>{const X=tn(oe),[de,he]=g.useState(!1),{moved:S,description:h,timeline:c,title:b,color:L,url:D,links:R,value:W,x:k,y:ye,onMouseEnter:et,onMouseLeave:U,onClick:Z}=oe,te=K(L,S),T=()=>{he(!0)},B=()=>{he(!1)},V=()=>{he(!de)};return g.createElement("g",{transform:`translate(${k}, ${ye})`,onMouseEnter:et,onMouseLeave:U,onClick:Z,"data-testid":"radar-entry"}," ",de&&g.createElement(en,{open:de,onClose:B,title:b||"no title",description:h||"no description",timeline:c||[],url:D,links:R}),h?g.createElement("a",{className:X.link,onClick:T,role:"button",href:"#",tabIndex:0,onKeyPress:V},te):g.createElement(C,{url:D,className:X.link},te),g.createElement("text",{y:3,className:X.text},W))},dt=(0,m.Z)(oe=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:oe.palette.common.white}})),Ye=oe=>{const X=dt(oe),{visible:de,text:he}=oe,S=(0,g.useRef)(null),h=(0,g.useRef)(null),c=(0,g.useRef)(null),b=(0,g.useRef)(null),L=()=>{if(S.current){const{x:D,y:R}=oe,W=S.current.getBBox(),k=5,ye=4;h.current&&h.current.setAttribute("transform",`translate(${D-W.width/2}, ${R-W.height-ye})`),c.current&&(c.current.setAttribute("x",String(-k)),c.current.setAttribute("y",String(-W.height)),c.current.setAttribute("width",String(W.width+2*k)),c.current.setAttribute("height",String(W.height+ye))),b.current&&b.current.setAttribute("transform",`translate(${W.width/2-k}, ${ye-1})`)}};return(0,g.useLayoutEffect)(()=>{L()}),g.createElement("g",{ref:h,x:0,y:0,className:de?X.visibleBubble:X.bubble,"data-testid":"radar-bubble"},g.createElement("rect",{ref:c,rx:4,ry:4,className:X.background}),g.createElement("text",{ref:S,className:X.text},he),g.createElement("path",{ref:b,d:"M 0,0 10,0 5,8 z",className:X.background}))},ut=(0,m.Z)(oe=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:oe.palette.text.secondary}})),Rt=oe=>{const{x:X,y:de}=oe,he=ut(oe);return g.createElement("text",{"data-testid":"radar-footer",transform:`translate(${X}, ${de})`,className:he.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},St=({url:oe,description:X,title:de,classes:he,active:S,links:h,timeline:c})=>{const[b,L]=g.useState(!1),D=()=>{L(!0)},R=()=>{L(!1)},W=()=>{L(!b)};return X?g.createElement(g.Fragment,null,g.createElement(Oe.Z,{component:"span",className:he.entryLink,onClick:D,role:"button",tabIndex:0,onKeyPress:W},g.createElement(Oe.Z,{component:"span",className:S?he.activeEntry:he.entry},de)),b&&g.createElement(en,{open:b,onClose:R,title:de||"no title",url:oe,description:X,timeline:c||[],links:h})):g.createElement(C,{url:oe,className:he.entryLink},g.createElement(Oe.Z,{component:"span",className:S?he.activeEntry:he.entry},de))},ft=({ring:oe,entries:X,classes:de,onEntryMouseEnter:he,onEntryMouseLeave:S})=>g.createElement("div",{"data-testid":"radar-ring",key:oe.id,className:de.ring},g.createElement("h3",{className:de.ringHeading,style:{color:oe.color},"data-testid":"radar-legend-heading"},oe.name),X.length===0?g.createElement(Je.ZP,{paragraph:!0,className:de.ringEmpty},"(empty)"):g.createElement("ol",{className:de.ringList},X.map(h=>{var c,b;return g.createElement("li",{key:h.id,value:(h.index||0)+1,onMouseEnter:he&&(()=>he(h)),onMouseLeave:S&&(()=>S(h))},g.createElement(St,{classes:de,url:h.url,title:h.title,description:h.description,active:h.active,links:(c=h.links)!=null?c:[],timeline:(b=h.timeline)!=null?b:[]}))}))),Mt=oe=>{const X={};for(const de of oe){const he=de.quadrant.index,S=de.ring.index;let h={};he!==void 0&&(X[he]===void 0&&(X[he]={}),h=X[he]);let c=[];S!==void 0&&(h[S]===void 0&&(h[S]=[]),c=h[S]),c.push(de)}return X},mt=(oe,X,de,he=0)=>{const S=X.index,h=de.index,c=S===void 0?{}:oe[S]||{};return h===void 0?[]:c[h+he]||[]},xt=({segments:oe,quadrant:X,rings:de,classes:he,onEntryMouseEnter:S,onEntryMouseLeave:h})=>g.createElement("foreignObject",{key:X.id,x:X.legendX,y:X.legendY,width:X.legendWidth,height:X.legendHeight,"data-testid":"radar-quadrant"},g.createElement("div",{className:he.quadrant},g.createElement("h2",{className:he.quadrantHeading},X.name),g.createElement("div",{className:he.rings},de.map(c=>g.createElement(ft,{key:c.id,ring:c,classes:he,entries:mt(oe,X,c),onEntryMouseEnter:S,onEntryMouseLeave:h}))))),Wt=(0,m.Z)(oe=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:oe.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:oe.spacing(2)},ringEmpty:{color:oe.palette.text.secondary,fontSize:"12px"},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:oe.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},activeEntry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px",background:"#6f6f6f",color:oe.palette.common.white},entryLink:{pointerEvents:"visiblePainted",cursor:"pointer"}})),Lt=({quadrants:oe,rings:X,entries:de,onEntryMouseEnter:he,onEntryMouseLeave:S,...h})=>{const c=Wt(h);return g.createElement("g",{"data-testid":"radar-legend"},oe.map(b=>g.createElement(xt,{key:b.id,segments:Mt(de),quadrant:b,rings:X,classes:c,onEntryMouseEnter:he,onEntryMouseLeave:S})))},Nt=oe=>{const{width:X,height:de,radius:he,quadrants:S,rings:h,entries:c,activeEntry:b,onEntryMouseEnter:L,onEntryMouseLeave:D}=oe;return g.createElement("g",{"data-testid":"radar-plot"},g.createElement(Lt,{quadrants:S,rings:h,entries:c,onEntryMouseEnter:L&&(R=>L(R)),onEntryMouseLeave:D&&(R=>D(R))}),g.createElement("g",{transform:`translate(${X/2}, ${de/2})`},g.createElement(ot,{radius:he,rings:h}),g.createElement(Rt,{x:-.5*X,y:.5*de}),c.map(R=>g.createElement(ct,{key:R.id,x:R.x||0,y:R.y||0,color:R.color||"",value:((R==null?void 0:R.index)||0)+1,url:R.url,links:R.links,description:R.description,moved:R.moved,title:R.title,timeline:R.timeline,onMouseEnter:L&&(()=>L(R)),onMouseLeave:D&&(()=>D(R))})),g.createElement(Ye,{visible:!!b,text:(b==null?void 0:b.title)||"",x:(b==null?void 0:b.x)||0,y:(b==null?void 0:b.y)||0})))};class ge{constructor(X,de,he,S){this.nextSeed=S,this.polarMin={t:X.radialMin,r:de.innerRadius},this.polarMax={t:X.radialMax,r:de.outerRadius},this.cartesianMin={x:15*X.offsetX,y:15*X.offsetY},this.cartesianMax={x:he*X.offsetX,y:he*X.offsetY}}clipx(X){const de=pt(X,this.cartesianMin,this.cartesianMax),he=ht(Fe(de),this.polarMin.r+15,this.polarMax.r-15);return X.x=Xe(he).x,X.x}clipy(X){const de=pt(X,this.cartesianMin,this.cartesianMax),he=ht(Fe(de),this.polarMin.r+15,this.polarMax.r-15);return X.y=Xe(he).y,X.y}random(){return Xe({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const X=Math.sin(this.nextSeed())*1e4;return X-Math.floor(X)}_randomBetween(X,de){return X+this._random()*(de-X)}_normalBetween(X,de){return X+(this._random()+this._random())*.5*(de-X)}}function Fe({x:oe,y:X}){return{t:Math.atan2(X,oe),r:Math.sqrt(oe*oe+X*X)}}function Xe({r:oe,t:X}){return{x:oe*Math.cos(X),y:oe*Math.sin(X)}}function Ke(oe,X,de){const he=Math.min(X,de),S=Math.max(X,de);return Math.min(Math.max(oe,he),S)}function ht(oe,X,de){return{t:oe.t,r:Ke(oe.r,X,de)}}function pt(oe,X,de){return{x:Ke(oe.x,X.x,de.x),y:Ke(oe.y,X.y,de.y)}}const $t=(oe,X,de,he)=>{const h=[16,de/2-X-16,de/2+X+16,de-16],c=[16,he/2-16,he/2,he-16],b=[{x:h[2],y:c[2],width:h[3]-h[2],height:c[3]-c[2]},{x:h[0],y:c[2],width:h[1]-h[0],height:c[3]-c[2]},{x:h[0],y:c[0],width:h[1]-h[0],height:c[1]-c[0]},{x:h[2],y:c[0],width:h[3]-h[2],height:c[1]-c[0]}];return oe.map((L,D)=>{const R=b[D%4];return{...L,index:D,radialMin:D*Math.PI/2,radialMax:(D+1)*Math.PI/2,offsetX:D%4===0||D%4===3?1:-1,offsetY:D%4===0||D%4===1?1:-1,legendX:R.x,legendY:R.y,legendWidth:R.width,legendHeight:R.height}})},Xt=(oe,X,de,he,S)=>{let h=42;const c=oe.map((L,D)=>{const R=X.find(et=>{const U=typeof L.quadrant=="object"?L.quadrant.id:L.quadrant;return et.id===U}),W=de.find(et=>{const U=typeof L.ring=="object"?L.ring.id:L.ring;return et.id===U});if(!R)throw new Error(`Unknown quadrant ${L.quadrant} for entry ${L.id}!`);if(!W)throw new Error(`Unknown ring ${L.ring} for entry ${L.id}!`);const k=new ge(R,W,he,()=>h++),ye=k==null?void 0:k.random();return{...L,index:D,quadrant:R,ring:W,segment:k,x:ye.x,y:ye.y,color:S&&L.id===(S==null?void 0:S.id)?L.ring.color:it()(L.ring.color).desaturate(.5).lighten(.1).string(),active:!!(S&&L.id===(S==null?void 0:S.id))}}),b=(0,Bt.Z)().nodes(c).velocityDecay(.19).force("collision",(0,Ue.Z)().radius(12).strength(.85)).stop();for(let L=0,D=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));L<D;++L){b.tick();for(const R of c)R.segment&&(R.x=R.segment.clipx(R),R.y=R.segment.clipy(R))}return c},Ft=(oe,X)=>oe.map((de,he)=>({...de,index:he,outerRadius:(he+2)/(oe.length+1)*X,innerRadius:(he===0?0:he+1)/(oe.length+1)*X})),j=({width:oe,height:X,quadrants:de,rings:he,entries:S,...h})=>{const c=Math.min(oe,X)/2,[b,L]=(0,g.useState)(),D=(0,g.useRef)(null),R=(0,g.useMemo)(()=>$t(de,c,oe,X),[de,c,oe,X]),W=(0,g.useMemo)(()=>Ft(he,c),[c,he]),k=(0,g.useMemo)(()=>Xt(S,R,W,c,b),[S,R,W,c,b]);return g.createElement("svg",{ref:D,width:oe,height:X,...h.svgProps},g.createElement(Nt,{width:oe,height:X,radius:c,entries:k,quadrants:R,rings:W,activeEntry:b,onEntryMouseEnter:ye=>L(ye),onEntryMouseLeave:()=>L(void 0)}))},ce=oe=>{const X=(0,y.h_)(y.VE),de=(0,y.h_)(tt),{error:he,value:S,loading:h}=(0,d.default)(async()=>de.load(oe),[de,oe]);return(0,g.useEffect)(()=>{he&&X.post(he)},[he,X]),{loading:h,value:S,error:he}};function Te(oe){const X=oe==null?void 0:oe.toLocaleLowerCase("en-US").split(/\s/).map(de=>de.trim()).filter(Boolean);return X!=null&&X.length?de=>{var he;const S=`${de.title} ${((he=de.timeline[0])==null?void 0:he.description)||""}`.toLocaleLowerCase("en-US");return X.every(h=>S.includes(h))}:()=>!0}function $e(oe){const{loading:X,error:de,value:he}=ce(oe.id),S=h=>h.entries.filter(Te(oe.searchText)).map(c=>({id:c.key,quadrant:h.quadrants.find(b=>b.id===c.quadrant),title:c.title,ring:h.rings.find(b=>b.id===c.timeline[0].ringId),timeline:c.timeline.map(b=>({date:b.date,ring:h.rings.find(L=>L.id===b.ringId),description:b.description,moved:b.moved})),moved:c.timeline[0].moved,description:c.description||c.timeline[0].description,url:c.url,links:c.links}));return g.createElement(g.Fragment,null,X&&g.createElement(l.Ex,null),!X&&!de&&he&&g.createElement(j,{...oe,rings:he.rings,quadrants:he.quadrants,entries:S(he)}))}const Le=(0,m.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function G(oe){const{title:X="Tech Radar",subtitle:de="Pick the recommended technologies for your projects",pageTitle:he="Company Radar",...S}=oe,h=Le(),[c,b]=g.useState("");return g.createElement(l.T3,{themeId:"tool"},g.createElement(l.h4,{title:X,subtitle:de}),g.createElement(l.VY,{className:h.overflowXScroll},g.createElement(l.yW,{title:he},g.createElement(r.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:L=>b(L.target.value)}),g.createElement(l.qt,null,g.createElement(Oe.Z,{paragraph:!0},"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",g.createElement(l.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),g.createElement(be.Z,{container:!0,spacing:3,direction:"row"},g.createElement(be.Z,{item:!0,xs:12,sm:6,md:4},g.createElement($e,{searchText:c,...S})))))}var Ae=Object.freeze({__proto__:null,RadarPage:G});const Re=new Array;Re.push({id:"adopt",name:"ADOPT",color:"#5BA300"}),Re.push({id:"trial",name:"TRIAL",color:"#009EB0"}),Re.push({id:"assess",name:"ASSESS",color:"#C7BA00"}),Re.push({id:"hold",name:"HOLD",color:"#E09B96"});const xe=new Array;xe.push({id:"infrastructure",name:"Infrastructure"}),xe.push({id:"frameworks",name:"Frameworks"}),xe.push({id:"languages",name:"Languages"}),xe.push({id:"process",name:"Process"});const J=new Array;J.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),J.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),J.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),J.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),J.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),J.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),J.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),J.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),J.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const q={entries:J,quadrants:xe,rings:Re};class Me{async load(){return q}}const Ge=(0,y.NT)({id:"tech-radar"}),Ve=(0,y.rx)({id:"tech-radar",routes:{root:Ge},apis:[(0,y.ni)(tt,new Me)]}).provide((0,y.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return Ae}).then(oe=>oe.RadarPage),mountPoint:Ge})),rt=null},65609:function(fn,Ut,e){"use strict";e.d(Ut,{EU:function(){return ce}});var l=e(30705),y=e(66565),g=e(2784),d=e(87370),m=e(15459),A=e(77277),H=e(79692),je=e(8560),r=e(27556),be=e(11433),ne=e(60364),ie=e(12231),ve=e(49378),Y=e(90436),Ee=e(95544),fe=e(61837),_=e(51209),Ce=e(38016),I=e(82717),Pt=e.n(I),Oe=e(1854),pe=e(49462),Se=e(31654),F=e(80236),Je=e(65549),Ct=e(17373),it=e(85224),Bt=e(96103);const Ue=".md-nav__item--nested .md-toggle",tt="@backstage/techdocs-addons/nav-expanded",lt=(0,m.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(A.Z),Yt=(0,m.Z)({root:{height:"20px",width:"20px"}})(_.Z),ot=(0,m.Z)({root:{height:"20px",width:"20px"}})(Ce.Z),rn=()=>{const Le={expandAllNestedNavs:!1},{value:G,set:Ae}=(0,d.Z)(tt,{defaultValue:Le}),[Re,xe]=(0,g.useState)(!1),[...J]=(0,y.pV)([Ue]),q=(0,g.useCallback)(Ge=>{const we=Ge.checked,Ve=G==null?void 0:G.expandAllNestedNavs;return!!(Ve&&!we||!Ve&&we)},[G]);(0,g.useEffect)(()=>{J!=null&&J.length&&(xe(!0),J.forEach(Ge=>{q(Ge)&&Ge.click()}))},[G,q,J]);const Me=()=>{Ae(Ge=>({expandAllNestedNavs:!(Ge!=null&&Ge.expandAllNestedNavs)}))};return g.createElement(g.Fragment,null,Re?g.createElement(lt,{size:"small",onClick:Me,"aria-label":G!=null&&G.expandAllNestedNavs?"collapse-nav":"expand-nav"},G!=null&&G.expandAllNestedNavs?g.createElement(ot,null):g.createElement(Yt,null)):null)},C="techdocs-report-issue",At=`#${C}`,en='[title^="Edit this page"]',tn='[title^="Leave feedback for"]',K='[data-md-component="main"] .md-content',ct=(Le,G)=>G==="github"?(0,Oe.BT)(Le,"blob"):G==="gitlab"?(0,Oe.ah)(Le,"blob"):(console.error(`Invalid SCM type ${G} found in ReportIssue addon for URL ${Le}!`),Le),dt=Le=>{const G=Le.toString().substring(0,70),Ae=G.length===70?"...":"";return`Documentation feedback: ${G}${Ae}`},Ye=(Le,G,Ae)=>{const Re="## Documentation Feedback \u{1F4DD}",xe="#### The highlighted text:",J="#### The comment on the text:",q="_>replace this line with your comment<_",Me=Le.toString().trim().split(`
`).map(we=>`> ${we.trim()}`).join(`
`),Ge=[`${Ae} URL: <${window.location.href}> 
Markdown URL: <${G}>`];return`${Re}

 ${xe} 

 ${Me}

 ${J} 
 ${q}

 ___
${Ge}`},ut=Le=>{var G,Ae;const Re={title:"",body:""},xe=(0,y.oi)(Le),[J]=(0,y.pV)([en]),q=(G=J==null?void 0:J.href)!=null?G:"",Me=(0,l.h_)(pe.q3),we=(0,l.h_)(l.Ds).getOptionalString("app.title")||"Backstage";if(!xe||!q)return Re;const Ve=(Ae=Me.byUrl(q))==null?void 0:Ae.type;return Ve?{title:dt(xe),body:Ye(xe,ct(q,Ve),we)}:Re},Rt=()=>{var Le,G;const Ae=(0,l.h_)(pe.q3),[Re]=(0,y.pV)([en]),xe=(Le=Re==null?void 0:Re.href)!=null?Le:"";if(!xe)return null;const J=(G=Ae.byUrl(xe))==null?void 0:G.type;return J?{...Pt()(ct(xe,J)),type:J}:null},St=(0,H.Z)(Le=>({root:{display:"grid",gridGap:Le.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Le.palette.common.black,fontSize:Le.typography.button.fontSize}})),ft=({type:Le})=>Le==="github"?F.fy:Se.Z,Mt=({type:Le})=>Le==="github"?"Github":"Gitlab",mt=(Le,G)=>{const{title:Ae,body:Re}=G,xe=encodeURIComponent(Ae),J=encodeURIComponent(Re),{protocol:q,resource:Me,owner:Ge,name:we,type:Ve}=Le,rt=`${q}://${Me}/${Ge}/${we}`,oe=encodeURI(rt);return Ve==="github"?`${oe}/issues/new?title=${xe}&body=${J}`:`${oe}/issues/new?issue[title]=${xe}&issue[description]=${J}`},xt=({template:Le,repository:G})=>{const Ae=St(),Re=ft(G),xe=mt(G,Le);return g.createElement(F.rU,{className:Ae.root,to:xe,target:"_blank"},g.createElement(Re,null)," Open new ",Mt(G)," issue")},Wt=(0,H.Z)(Le=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Le.spacing(1),zIndex:Le.zIndex.tooltip,background:Le.palette.common.white}})),Lt=({debounceTime:Le=500,templateBuilder:G})=>{const Ae=Wt(),[Re,xe]=(0,g.useState)(),J=Rt(),q=ut(Le),Me=(0,y.oi)(Le),[Ge,we]=(0,y.pV)([K,tn]);let[Ve]=(0,y.pV)([At]);return we&&(we.style.display="none"),(0,g.useEffect)(()=>{if(!J||!Me||!Me.containsNode(Ge,!0)||Me!=null&&Me.containsNode(Ve,!0))return;const rt=Ge.getBoundingClientRect(),oe=Me.getRangeAt(0).getBoundingClientRect();xe({top:`${oe.top-rt.top-16}px`,left:`${oe.left+oe.width/2}px`})},[Me,Ge,Ve]),!Me||!J||!["github","gitlab"].includes(J.type)?null:(Ve||(Ve=document.createElement("div"),Ve.setAttribute("id",C),Ge.prepend(Ve)),g.createElement(je.Z,{container:Ve},g.createElement(r.Z,{"data-testid":"report-issue-addon",className:Ae.root,style:Re},g.createElement(xt,{repository:J,template:G?G({selection:Me}):q}))))},Nt="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",ge=(0,m.Z)(Le=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Le.palette.common.white,boxShadow:Nt,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:Nt}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Le.palette.common.black,fontSize:Le.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(be.Z),Fe={key:"techdocs.addons.settings.textsize",defaultValue:100},Xe=[{value:90},{value:100},{value:115},{value:130},{value:150}],Ke=(0,H.Z)(Le=>({container:{color:Le.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Le.spacing(1)},increaseButton:{marginLeft:Le.spacing(1)}})),ht=()=>{const Le=Ke(),G=(0,ne.Z)(),[Ae]=(0,y.pV)(["body"]),[Re,xe]=(0,g.useState)(()=>{const X=localStorage==null?void 0:localStorage.getItem(Fe.key);return X?parseInt(X,10):Fe.defaultValue}),J=(0,g.useMemo)(()=>Xe.map(X=>X.value),[]),q=(0,g.useMemo)(()=>J.indexOf(Re),[J,Re]),Me=(0,g.useMemo)(()=>J[0],[J]),Ge=(0,g.useMemo)(()=>J[J.length-1],[J]),we=(0,g.useCallback)(()=>`${Re}%`,[Re]),Ve=(0,g.useCallback)((X,de)=>{Array.isArray(de)||(xe(de),localStorage==null||localStorage.setItem(Fe.key,String(de)))},[xe]),rt=(0,g.useCallback)(X=>{Ve(X,J[q-1])},[q,J,Ve]),oe=(0,g.useCallback)(X=>{Ve(X,J[q+1])},[q,J,Ve]);return(0,g.useEffect)(()=>{var X,de;if(!Ae)return;const he=(de=(X=G.typography)==null?void 0:X.htmlFontSize)!=null?de:16;Ae.style.setProperty("--md-typeset-font-size",`${he*(Re/100)}px`)},[Ae,Re,G]),g.createElement(ie.Z,{className:Le.menuItem,button:!0,disableRipple:!0},g.createElement(ve.Z,{primary:g.createElement(Y.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:g.createElement(Ee.Z,{className:Le.container},g.createElement(fe.Z,{className:Le.decreaseButton,size:"small",edge:"start",disabled:Re===Me,onClick:rt,"aria-label":"Decrease text size"},g.createElement(Ct.Z,null)),g.createElement(ge,{value:Re,"aria-labelledby":"text-size-slider",getAriaValueText:we,valueLabelDisplay:"on",valueLabelFormat:we,marks:Xe,step:null,min:Me,max:Ge,onChangeCommitted:Ve}),g.createElement(fe.Z,{className:Le.increaseButton,size:"small",edge:"end",disabled:Re===Ge,onClick:oe,"aria-label":"Increase text size"},g.createElement(Je.Z,null))),disableTypography:!0}))};function pt(Le,G){G===void 0&&(G={});var Ae=G.insertAt;if(!(!Le||typeof document=="undefined")){var Re=document.head||document.getElementsByTagName("head")[0],xe=document.createElement("style");xe.type="text/css",Ae==="top"&&Re.firstChild?Re.insertBefore(xe,Re.firstChild):Re.appendChild(xe),xe.styleSheet?xe.styleSheet.cssText=Le:xe.appendChild(document.createTextNode(Le))}}var $t=`.pswp {
  --pswp-bg: #f8f8f8;
}
.pswp__counter {
  color: rgba(0, 0, 0, 0.87);
  text-shadow: none;
}

.pswp__img {
  cursor: pointer !important;
}
`;pt($t);const Xt=()=>{const Le=(0,y.pV)(["img"]);return(0,g.useEffect)(()=>{let G=null,Ae=new it.Z({pswpModule:Bt.Z,wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon" aria-label="fontSize large"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></svg>'});return Le.forEach((Re,xe)=>{Re.onclick=()=>(G===null&&(G=Le.map(J=>({element:J,src:J.src,msrc:J.src,alt:J.alt,width:J.clientWidth,height:J.clientHeight}))),Ae.loadAndOpen(xe,G),!1)}),Ae.init(),()=>{Ae.destroy(),Ae=null}},[Le]),null},Ft=(0,l.rx)({id:"techdocsModuleAddonsContrib"}),j=Ft.provide((0,y.KY)({name:"ExpandableNavigation",location:y.oZ.PrimarySidebar,component:rn})),ce=Ft.provide((0,y.KY)({name:"ReportIssue",location:y.oZ.Content,component:Lt})),Te=Ft.provide((0,y.KY)({name:"TextSize",location:y.oZ.Settings,component:ht})),$e=Ft.provide((0,y.KY)({name:"LightBox",location:y.oZ.Content,component:Xt}))},66565:function(fn,Ut,e){"use strict";e.d(Ut,{$L:function(){return pe},DR:function(){return fe},Dl:function(){return F},KY:function(){return Ce},Ox:function(){return Yt},VA:function(){return C},ZS:function(){return Ue},Zz:function(){return Ee},gT:function(){return Se},jM:function(){return Y},oZ:function(){return lt},oi:function(){return K},pV:function(){return en},ux:function(){return rn},x1:function(){return tt}});var l=e(2784),y=e(73557),g=e(30705),d=e(64279),m=e(77446),A=e(34520),H=e(18473),je=e(70882),r=e(50236),be=e(19219),ne=e(80236),ie=e(54073),ve=e.n(ie);const Y="techdocs.addons.addon.v1",Ee="techdocs.addons.wrapper.v1",fe=()=>null;(0,g.R5)(fe,Ee,!0);const _=ct=>`${Y}.${ct.toLocaleLowerCase("en-US")}`;function Ce(ct){const{name:dt,component:Ye}=ct;return(0,g.YO)({name:dt,component:{sync:ut=>l.createElement(Ye,{...ut})},data:{[Y]:ct,[_(dt)]:!0}})}const I=(ct,dt)=>ct.selectByComponentData({key:dt}).getElements()[0],Pt=ct=>ct.selectByComponentData({key:Ee}).selectByComponentData({key:Y}),Oe=ct=>ct.selectByComponentData({key:Ee}).findComponentData({key:Y}),pe=()=>{const ct=(0,y.pC)(),dt=(0,g.vJ)(ct,Pt),Ye=(0,g.vJ)(ct,Oe),ut=(0,l.useCallback)(ft=>{var Mt;if(!dt||!ft)return null;const mt=_(ft.name);return(Mt=I(dt,mt))!=null?Mt:null},[dt]),Rt=(0,l.useCallback)(ft=>{const Mt=Ye.find(mt=>mt.name===ft);return Mt?ut(Mt):null},[Ye,ut]),St=(0,l.useCallback)(ft=>{const Mt=Ye.filter(mt=>mt.location===ft);return Mt.length?Mt.map(ut):null},[Ye,ut]);return{renderComponentByName:Rt,renderComponentsByLocation:St}},Se=(0,g.T0)({id:"plugin.techdocs.service"}),F=(0,g.T0)({id:"plugin.techdocs.storageservice"});function Je(ct,dt){return dt.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(ct.kind=ct.kind.toLocaleLowerCase(),ct.name=ct.name.toLocaleLowerCase(),ct.namespace=ct.namespace.toLocaleLowerCase()),ct}const Ct=(ct,dt)=>(0,A.eE)(ct)===(0,A.eE)(dt),it={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Bt=(0,H.CT)("techdocs-reader-page-context"),Ue=(0,l.memo)(ct=>{const{entityRef:dt,children:Ye}=ct,ut=(0,g.h_)(Se),Rt=(0,g.h_)(g.Ds),St=(0,d.default)(async()=>ut.getEntityMetadata(dt),[dt]),ft=(0,m.Z)(async()=>ut.getTechDocsMetadata(dt),[dt]),[Mt,mt]=(0,l.useState)(it.title),[xt,Wt]=(0,l.useState)(it.subtitle),[Lt,Nt]=(0,l.useState)(it.shadowRoot);(0,l.useEffect)(()=>{Lt&&!ft.value&&!ft.loading&&ft.retry()},[ft.value,ft.loading,Lt,ft.retry,ft]);const ge={metadata:ft,entityRef:Je(dt,Rt),entityMetadata:St,shadowRoot:Lt,setShadowRoot:Nt,title:Mt,setTitle:mt,subtitle:xt,setSubtitle:Wt},Fe=(0,H.EI)({1:ge});return l.createElement(g.fC,{attributes:{entityRef:(0,A.eE)(dt)}},l.createElement(Bt.Provider,{value:Fe},Ye instanceof Function?Ye(ge):Ye))},(ct,dt)=>Ct(ct.entityRef,dt.entityRef)),tt=()=>{const ct=(0,l.useContext)(Bt);if(ct===void 0)return it;const dt=ct.atVersion(1);if(dt===void 0)throw new Error("No context found for version 1.");return dt},lt=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Yt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",ot=ct=>{(0,l.useEffect)(()=>{var dt;if(!ct)return()=>{};const Ye=ct.querySelectorAll('head > link[rel="stylesheet"]');let ut=(dt=Ye==null?void 0:Ye.length)!=null?dt:0;const Rt=new CustomEvent(Yt);if(!ut)return ct.dispatchEvent(Rt),()=>{};const St=()=>{--ut===0&&ct.dispatchEvent(Rt)};return Ye==null||Ye.forEach(ft=>{ft.addEventListener("load",St)}),()=>{Ye==null||Ye.forEach(ft=>{ft.removeEventListener("load",St)})}},[ct])},rn=ct=>{const[dt,Ye]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!ct)return()=>{};Ye(!0);const ut=ct.style;ut.setProperty("opacity","0");const Rt=()=>{Ye(!1),ut.setProperty("opacity","1")};return ct.addEventListener(Yt,Rt),()=>{ct.removeEventListener(Yt,Rt)}},[ct]),dt},C=ct=>{const{element:dt,onAppend:Ye,children:ut}=ct,[Rt,St]=(0,l.useState)((0,je.Ue)({...(0,r.Z)(),insertionPoint:void 0}));ot(dt);const ft=rn(dt),Mt=(0,l.useCallback)(mt=>{if(!dt||!mt)return;St((0,je.Ue)({...(0,r.Z)(),insertionPoint:dt.querySelector("head")||void 0}));let xt=mt.shadowRoot;xt||(xt=mt.attachShadow({mode:"open"})),xt.replaceChildren(dt),typeof Ye=="function"&&Ye(xt)},[dt,Ye]);return l.createElement(l.Fragment,null,ft&&l.createElement(ne.Ex,null),l.createElement(be.ZP,{jss:Rt,sheetsManager:new Map},l.createElement("div",{ref:Mt,"data-testid":"techdocs-native-shadowroot"}),ut))},At=()=>{const{shadowRoot:ct}=tt();return ct},en=ct=>{const dt=At();return dt?ct.map(Ye=>dt==null?void 0:dt.querySelectorAll(Ye)).filter(Ye=>Ye.length).map(Ye=>Array.from(Ye)).flat():[]},tn=ct=>ct.toString()&&ct.rangeCount&&ct.getRangeAt(0).getBoundingClientRect().top,K=(ct=0)=>{const dt=At(),[Ye,ut]=(0,l.useState)(null),Rt=(0,l.useMemo)(()=>ve()(()=>{const St=dt,ft=St.getSelection?St.getSelection():document.getSelection();ft&&tn(ft)?ut(ft):ut(null)},ct),[dt,ut,ct]);return(0,l.useEffect)(()=>(window.document.addEventListener("selectionchange",Rt),()=>{Rt.cancel(),window.document.removeEventListener("selectionchange",Rt)}),[Rt]),Ye}},49849:function(fn,Ut,e){"use strict";e.d(Ut,{D:function(){return An},E:function(){return Wn},T:function(){return Cn},a:function(){return nt},b:function(){return se},c:function(){return Br},e:function(){return sr},g:function(){return jn},h:function(){return Fn},t:function(){return Sn}});var l=e(30705),y=e(32272),g=e(76372),d=e.n(g),m=e(2784),A=e(73557),H=e(66565),je=e(64279),r=e(77446),be=e(80236),ne=e(79692),ie=e(49378),ve=e(86136),Y=e(12420),Ee=e(60905),fe=e(90436),_=e(61837),Ce=e(77277),I=e(4190),Pt=e(4614),Oe=e(41128),pe=e(60364),Se=e(15459),F=e(80030),Je=e(72379),Ct=e(41547),it=e(41156),Bt=e(8560),Ue=e(15223),tt=e(95544),lt=e(48348),Yt=e(94339),ot=e(16111),rn=e(24579),C=e(14503),At=e(92573),en=e(99688),tn=e(98069),K=e(87685),ct=e(49462),dt=e(35368),Ye=e.n(dt),ut=e(1854),Rt=e(67097),St=e(28316),ft=e(82717),Mt=e.n(ft),mt=e(44882),xt=e(95074),Wt=e(18671),Lt=e(73250),Nt=e(64304),ge=e(34520),Fe=e(76635),Xe=e.n(Fe),Ke=e(47603),ht=e(39981),pt=e(2337),$t=e(11640),Xt=e(28347);const Ft=(0,l.T0)({id:"plugin.techdocs.storageservice"}),j=(0,l.T0)({id:"plugin.techdocs.service"});var ce=Object.defineProperty,Te=(i,p,P)=>p in i?ce(i,p,{enumerable:!0,configurable:!0,writable:!0,value:P}):i[p]=P,$e=(i,p,P)=>(Te(i,typeof p!="symbol"?p+"":p,P),P);class Le{constructor(p){$e(this,"configApi"),$e(this,"discoveryApi"),$e(this,"fetchApi"),this.configApi=p.configApi,this.discoveryApi=p.discoveryApi,this.fetchApi=p.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(p){const{kind:P,namespace:$,name:re}=p,Ne=`${await this.getApiOrigin()}/metadata/techdocs/${$}/${P}/${re}`,vt=await this.fetchApi.fetch(`${Ne}`);if(!vt.ok)throw await y.VL.fromResponse(vt);return await vt.json()}async getEntityMetadata(p){const{kind:P,namespace:$,name:re}=p,Ne=`${await this.getApiOrigin()}/metadata/entity/${$}/${P}/${re}`,vt=await this.fetchApi.fetch(`${Ne}`);if(!vt.ok)throw await y.VL.fromResponse(vt);return await vt.json()}}class G{constructor(p){$e(this,"configApi"),$e(this,"discoveryApi"),$e(this,"identityApi"),$e(this,"fetchApi"),this.configApi=p.configApi,this.discoveryApi=p.discoveryApi,this.identityApi=p.identityApi,this.fetchApi=p.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var p;return(p=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?p:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(p,P){const{kind:$,namespace:re,name:ue}=p,vt=`${await this.getStorageUrl()}/${re}/${$}/${ue}/${P}`,Ht=await this.fetchApi.fetch(`${vt.endsWith("/")?vt:`${vt}/`}index.html`);let pn="";switch(Ht.status){case 404:throw pn="Page not found. ",P||(pn+="This could be because there is no index.md file in the root of the docs directory of this repository."),new y.dR(pn);case 500:throw pn="Could not generate documentation or an error in the TechDocs backend. ",new Error(pn)}return Ht.text()}async syncEntityDocs(p,P=()=>{}){const{kind:$,namespace:re,name:ue}=p,vt=`${await this.getApiOrigin()}/sync/${re}/${$}/${ue}`,{token:Ht}=await this.identityApi.getCredentials();return new Promise((pn,Jt)=>{const vn=new g.EventSourcePolyfill(vt,{withCredentials:!0,headers:Ht?{Authorization:`Bearer ${Ht}`}:{}});vn.addEventListener("log",nn=>{nn.data&&P(JSON.parse(nn.data))}),vn.addEventListener("finish",nn=>{let Zn=!1;nn.data&&({updated:Zn}=JSON.parse(nn.data)),pn(Zn?"updated":"cached")}),vn.onerror=nn=>{switch(vn.close(),nn.status){case 404:Jt(new y.dR(nn.message));return;default:Jt(new Error(nn.data));return}}})}async getBaseUrl(p,P,$){const{kind:re,namespace:ue,name:Ne}=P,Ht=`${await this.getApiOrigin()}/static/docs/${ue}/${re}/${Ne}/${$}`;return new URL(p,Ht.endsWith("/")?Ht:`${Ht}/`).toString()}}function Ae({contentLoading:i,content:p,activeSyncState:P}){return i||P==="BUILD_READY_RELOAD"||!p&&P==="CHECKING"?"CHECKING":!p&&P==="BUILDING"?"INITIAL_BUILD":p?P==="BUILDING"?"CONTENT_STALE_REFRESHING":P==="BUILD_READY"?"CONTENT_STALE_READY":P==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Re(i,p){const P={...i};switch(p.type){case"sync":p.state==="CHECKING"&&(P.buildLog=[]),P.activeSyncState=p.state,P.syncError=p.syncError;break;case"contentLoading":P.contentLoading=!0,P.contentError=void 0;break;case"content":typeof p.path=="string"&&(P.path=p.path),P.contentLoading=!1,P.content=p.content,P.contentError=p.contentError;break;case"buildLog":P.buildLog=P.buildLog.concat(p.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(P.activeSyncState)&&["contentLoading","content"].includes(p.type)&&(P.activeSyncState="UP_TO_DATE",P.buildLog=[]),P}function xe(i,p,P,$){var re,ue;const[Ne,vt]=(0,m.useReducer)(Re,{activeSyncState:"CHECKING",path:$,contentLoading:!0,buildLog:[]}),Ht=(0,l.h_)(H.Dl),{retry:pn}=(0,r.Z)(async()=>{vt({type:"contentLoading"});try{const nn=await Ht.getEntityDocs({kind:i,namespace:p,name:P},$);return vt({type:"content",content:nn,path:$}),nn}catch(nn){vt({type:"content",contentError:nn,path:$})}},[Ht,i,p,P,$]),Jt=(0,m.useRef)({content:void 0,reload:()=>{}});return Jt.current={content:Ne.content,reload:pn},(0,je.default)(async()=>{vt({type:"sync",state:"CHECKING"});const nn=setTimeout(()=>{vt({type:"sync",state:"BUILDING"})},1e3);try{switch(await Ht.syncEntityDocs({kind:i,namespace:p,name:P},Mn=>{vt({type:"buildLog",log:Mn})})){case"updated":Jt.current.content?vt({type:"sync",state:"BUILD_READY"}):(Jt.current.reload(),vt({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":vt({type:"sync",state:"UP_TO_DATE"});break;default:vt({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(Zn){vt({type:"sync",state:"ERROR",syncError:Zn})}finally{clearTimeout(nn)}},[i,P,p,Ht,vt,Jt]),{state:(0,m.useMemo)(()=>Ae({activeSyncState:Ne.activeSyncState,contentLoading:Ne.contentLoading,content:Ne.content}),[Ne.activeSyncState,Ne.content,Ne.contentLoading]),contentReload:pn,path:Ne.path,content:Ne.content,contentErrorMessage:(re=Ne.contentError)==null?void 0:re.toString(),syncErrorMessage:(ue=Ne.syncError)==null?void 0:ue.toString(),buildLog:Ne.buildLog}}const J=(0,m.createContext)({}),q=()=>(0,m.useContext)(J),Me=i=>{const{children:p}=i,{"*":P=""}=(0,A.UO)(),{entityRef:$}=(0,H.x1)(),{kind:re,namespace:ue,name:Ne}=$,vt=xe(re,ue,Ne,P);return m.createElement(J.Provider,{value:vt},p instanceof Function?p(vt):p)},Ge=i=>p=>m.createElement(Me,null,m.createElement(i,{...p})),we=(0,ne.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ve=i=>{const{result:p,highlight:P,lineClamp:$=5,asListItem:re=!0,asLink:ue=!0,title:Ne,icon:vt}=i,Ht=we(),pn=({children:nn})=>ue?m.createElement(be.rU,{noTrack:!0,to:p.location},nn):m.createElement(m.Fragment,null,nn),Jt=()=>{const nn=P!=null&&P.fields.title?m.createElement(At.FA,{text:P.fields.title,preTag:P.preTag,postTag:P.postTag}):p.title,Zn=P!=null&&P.fields.entityTitle?m.createElement(At.FA,{text:P.fields.entityTitle,preTag:P.preTag,postTag:P.postTag}):p.entityTitle,Mn=P!=null&&P.fields.name?m.createElement(At.FA,{text:P.fields.name,preTag:P.preTag,postTag:P.postTag}):p.name;return p?m.createElement(ie.Z,{className:Ht.itemText,primaryTypographyProps:{variant:"h6"},primary:m.createElement(pn,null,Ne||m.createElement(m.Fragment,null,nn," | ",Zn!=null?Zn:Mn," docs")),secondary:m.createElement(fe.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:$,overflow:"hidden"},color:"textSecondary",variant:"body2"},P!=null&&P.fields.text?m.createElement(At.FA,{text:P.fields.text,preTag:P.preTag,postTag:P.postTag}):p.text)}):null},vn=({children:nn})=>re?m.createElement(m.Fragment,null,vt&&m.createElement(ve.Z,null,typeof vt=="function"?vt(p):vt),m.createElement("div",{className:Ht.flexContainer},nn)):m.createElement(m.Fragment,null,nn);return m.createElement(vn,null,m.createElement(Jt,null))};var rt=Object.freeze({__proto__:null,TechDocsSearchResultListItem:Ve});const oe=i=>i==null?void 0:i.document,X=i=>{const{entityId:p,entityTitle:P,debounceTime:$=150}=i,[re,ue]=(0,m.useState)(!1),Ne=(0,A.s0)(),{setFilters:vt,result:{loading:Ht,value:pn}}=(0,At.Rx)(),[Jt,vn]=(0,m.useState)([]);(0,m.useEffect)(()=>{let Gn=!0;if(Gn&&pn){const yr=pn.results.slice(0,10);vn(yr)}return()=>{Gn=!1}},[Ht,pn]);const{kind:nn,name:Zn,namespace:Mn}=p;(0,m.useEffect)(()=>{vt(Gn=>({...Gn,kind:nn,namespace:Mn,name:Zn}))},[nn,Mn,Zn,vt]);const lr=(Gn,yr)=>{if(oe(yr)){const{location:Fr}=yr.document;Ne(Fr)}};return m.createElement(At.qO,{"data-testid":"techdocs-search-bar",size:"small",open:re,getOptionLabel:()=>"",filterOptions:Gn=>Gn,onClose:()=>{ue(!1)},onFocus:()=>{ue(!0)},onChange:lr,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Jt,renderOption:({document:Gn,highlight:yr})=>m.createElement(Ve,{result:Gn,lineClamp:3,asListItem:!1,asLink:!1,title:Gn.title,highlight:yr}),loading:Ht,inputDebounceTime:$,inputPlaceholder:`Search ${P||p.name} docs`,freeSolo:!1})},de=i=>{const p={term:"",types:["techdocs"],pageCursor:"",filters:i.entityId};return m.createElement(At.Nd,{initialState:p},m.createElement(X,{...i}))},he=(0,ne.Z)(i=>(0,Y.Z)({paper:{width:"100%",[i.breakpoints.up("sm")]:{width:"75%"},[i.breakpoints.up("md")]:{width:"50%"},padding:i.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:i.palette.background.default}})),S=({buildLog:i,onClose:p})=>{const P=he(),$=i.length===0?"Waiting for logs...":i.join(`
`);return m.createElement(Ee.Z,{container:!0,direction:"column",className:P.root,spacing:0,wrap:"nowrap"},m.createElement(Ee.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},m.createElement(fe.Z,{variant:"h5"},"Build Details"),m.createElement(_.Z,{key:"dismiss",title:"Close the drawer",onClick:p,color:"inherit"},m.createElement(K.Z,null))),m.createElement(Ee.Z,{item:!0,xs:!0},m.createElement(be.nU,{text:$,classes:{root:P.logs}})))},h=({buildLog:i})=>{const p=he(),[P,$]=(0,m.useState)(!1);return m.createElement(m.Fragment,null,m.createElement(Ce.Z,{color:"inherit",onClick:()=>$(!0)},"Show Build Logs"),m.createElement(I.ZP,{classes:{paper:p.paper},anchor:"right",open:P,onClose:()=>$(!1)},m.createElement(S,{buildLog:i,onClose:()=>$(!1)})))},c=({errorMessage:i})=>{const p=(0,l.h_)(l.Ds).getOptionalString("techdocs.builder");let P="";return p!=="local"&&(P="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),m.createElement(be.mf,{status:"404",statusMessage:i||"Documentation not found",additionalInfo:P})},b=(0,ne.Z)(i=>({root:{marginBottom:i.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),L=()=>{let i=null;const p=b(),{state:P,contentReload:$,contentErrorMessage:re,syncErrorMessage:ue,buildLog:Ne}=q();return P==="INITIAL_BUILD"&&(i=m.createElement(en.Z,{classes:{root:p.root},variant:"outlined",severity:"info",icon:m.createElement(Pt.Z,{size:"24px"}),action:m.createElement(h,{buildLog:Ne})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),P==="CONTENT_STALE_REFRESHING"&&(i=m.createElement(en.Z,{variant:"outlined",severity:"info",icon:m.createElement(Pt.Z,{size:"24px"}),action:m.createElement(h,{buildLog:Ne}),classes:{root:p.root}},"A newer version of this documentation is being prepared and will be available shortly.")),P==="CONTENT_STALE_READY"&&(i=m.createElement(en.Z,{variant:"outlined",severity:"success",action:m.createElement(Ce.Z,{color:"inherit",onClick:()=>$()},"Refresh"),classes:{root:p.root}},"A newer version of this documentation is now available, please refresh to view.")),P==="CONTENT_STALE_ERROR"&&(i=m.createElement(en.Z,{variant:"outlined",severity:"error",action:m.createElement(h,{buildLog:Ne}),classes:{root:p.root,message:p.message}},"Building a newer version of this documentation failed."," ",ue)),P==="CONTENT_NOT_FOUND"&&(i=m.createElement(m.Fragment,null,ue&&m.createElement(en.Z,{variant:"outlined",severity:"error",action:m.createElement(h,{buildLog:Ne}),classes:{root:p.root,message:p.message}},"Building a newer version of this documentation failed."," ",ue),m.createElement(c,{errorMessage:re}))),i},D=/main\.[A-Fa-f0-9]{8}\.min\.css$/,R=/^https:\/\/fonts\.googleapis\.com/,W=/^https:\/\/fonts\.gstatic\.com/,k=i=>i.nodeName==="LINK",ye=i=>{const p=(i==null?void 0:i.getAttribute("href"))||"",P=p.match(D),$=p.match(R),re=p.match(W);return P||$||re},et=i=>(k(i)&&!ye(i)&&i.remove(),i),U=i=>i.nodeName==="IFRAME",Z=(i,p)=>{const P=i.getAttribute("src")||"";try{const{host:$}=new URL(P);return p.includes($)}catch{return!1}},te=i=>p=>(U(p)&&!Z(p,i)&&p.remove(),p),T=()=>{const i=(0,l.h_)(l.Ds);return(0,m.useMemo)(()=>i.getOptionalConfig("techdocs.sanitizer"),[i])},B=()=>{const i=T();return(0,m.useCallback)(async p=>{const P=i==null?void 0:i.getOptionalStringArray("allowedIframeHosts");Ye().addHook("beforeSanitizeElements",et);const $=["link"];return P&&($.push("iframe"),Ye().addHook("beforeSanitizeElements",te(P))),Ye().sanitize(p.outerHTML,{ADD_TAGS:$,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[i])};var V=({theme:i})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${i.palette.text.primary};
  --md-default-fg-color--light: ${i.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,Oe.$n)(i.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,Oe.$n)(i.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${i.palette.background.default};
  --md-default-bg-color--light: ${i.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,Oe.$n)(i.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,Oe.$n)(i.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${i.palette.primary.main};
  --md-primary-fg-color--light: ${i.palette.primary.light};
  --md-primary-fg-color--dark: ${i.palette.primary.dark};
  --md-primary-bg-color: ${i.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,Oe.$n)(i.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${i.shadows[1]};
  --md-shadow-z2: ${i.shadows[2]};
  --md-shadow-z3: ${i.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${i.palette.text.primary};
  --md-code-bg-color: ${i.palette.background.paper};
  --md-code-hl-color: ${(0,Oe.Fq)(i.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${i.palette.type==="dark"?i.palette.primary.light:i.palette.primary.dark};
  --md-code-hl-function-color: ${i.palette.type==="dark"?i.palette.secondary.light:i.palette.secondary.dark};
  --md-code-hl-string-color: ${i.palette.type==="dark"?i.palette.success.light:i.palette.success.dark};
  --md-code-hl-number-color: ${i.palette.type==="dark"?i.palette.error.light:i.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${i.palette.link};
  --md-typeset-table-color: ${i.palette.text.primary};
  --md-typeset-del-color: ${i.palette.type==="dark"?(0,Oe.Fq)(i.palette.error.dark,.5):(0,Oe.Fq)(i.palette.error.light,.5)};
  --md-typeset-ins-color: ${i.palette.type==="dark"?(0,Oe.Fq)(i.palette.success.dark,.5):(0,Oe.Fq)(i.palette.success.light,.5)};
  --md-typeset-mark-color: ${i.palette.type==="dark"?(0,Oe.Fq)(i.palette.warning.dark,.5):(0,Oe.Fq)(i.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,me=({theme:i})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${i.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const _e="224px";var at=({theme:i,sidebar:p})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${i.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${i.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${p.isPinned?`calc(-12.1rem + ${_e})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const He=["h1","h2","h3","h4","h5","h6"];var Ot=({theme:i})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${He.reduce((p,P)=>{var $;const re=($=i.typography.htmlFontSize)!=null?$:16,ue=i.typography[P],{lineHeight:Ne,fontFamily:vt,fontWeight:Ht,fontSize:pn}=ue,Jt=vn=>{let nn=1;return typeof vn=="number"&&(nn=vn/re*.6),typeof vn=="string"&&(nn=vn.replace("rem","")),`calc(${nn} * var(--md-typeset-font-size))`};return p.concat(`
    .md-typeset ${P} {
      color: var(--md-default-fg-color);
      line-height: ${Ne};
      font-family: ${vt};
      font-weight: ${Ht};
      font-size: ${Jt(pn)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${i.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,yt=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,Tt=({theme:i})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${i.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${i.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${i.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${i.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${i.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Kt=[V,me,at,Ot,yt,Tt],ln=()=>(0,be.Pf)(),on=()=>{const i=ln(),p=(0,pe.Z)();return(0,m.useMemo)(()=>{const P={theme:p,sidebar:i};return Kt.reduce(($,re)=>$+re(P),"")},[p,i])},Gt=()=>{const i=on();return(0,m.useCallback)(p=>(p.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${i}</style>`),p),[i])},wt=(i,p,P)=>{const $=i==="src"&&p.endsWith(".svg"),re=!p.match(/^([a-z]*:)?\/\//i),ue=p.startsWith(P);return $&&(re||ue)},It=({techdocsStorageApi:i,entityId:p,path:P})=>async $=>{const re=await i.getApiOrigin(),ue=async(Ne,vt)=>{for(const Ht of Ne)if(Ht.hasAttribute(vt)){const pn=Ht.getAttribute(vt);if(!pn)return;const Jt=await i.getBaseUrl(pn,p,P);if(wt(vt,pn,re))try{const nn=await(await fetch(Jt,{credentials:"include"})).text();Ht.setAttribute(vt,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(nn)))}`)}catch{Ht.setAttribute("alt",`Error: ${pn}`)}else Ht.setAttribute(vt,Jt)}};return await Promise.all([ue($.querySelectorAll("img"),"src"),ue($.querySelectorAll("script"),"src"),ue($.querySelectorAll("source"),"src"),ue($.querySelectorAll("link"),"href"),ue($.querySelectorAll("a[download]"),"href")]),$},dn=i=>p=>{var P;const $=p.querySelector('[title="Edit this page"]');if(!$||!$.href)return p;const re=new URL($.href),ue=i.byUrl(re);if((ue==null?void 0:ue.type)!=="github"&&(ue==null?void 0:ue.type)!=="gitlab")return p;const Ne=((P=p.querySelector("article>h1"))==null?void 0:P.childNodes[0].textContent)||"",vt=encodeURIComponent(`Documentation Feedback: ${Ne}`),Ht=encodeURIComponent(`Page source:
${$.href}

Feedback:`),pn=(ue==null?void 0:ue.type)==="github"?(0,ut.BT)(re.href,"blob"):re.href,Jt=Mt()(pn),vn=`/${Jt.organization}/${Jt.name}`,nn=$.cloneNode();switch(ue==null?void 0:ue.type){case"gitlab":nn.href=`${re.origin}${vn}/issues/new?issue[title]=${vt}&issue[description]=${Ht}`;break;case"github":nn.href=`${re.origin}${vn}/issues/new?title=${vt}&body=${Ht}`;break;default:return p}return St.render(m.createElement(Rt.Z),nn),nn.style.paddingLeft="5px",nn.title="Leave feedback for this page",nn.id="git-feedback-link",$==null||$.insertAdjacentElement("beforebegin",nn),p},hn=()=>i=>{const p=i.querySelector('.md-header label[for="__drawer"]'),P=i.querySelector("article");if(!p||!P)return i;const $=p.cloneNode();return St.render(m.createElement(mt.Z),$),$.id="toggle-sidebar",$.title="Toggle Sidebar",$.classList.add("md-content__button"),$.style.setProperty("padding","0 0 0 5px"),$.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),P==null||P.prepend($),i},yn=()=>i=>(((P,$)=>{Array.from(P).filter(re=>re.hasAttribute($)).forEach(re=>{const ue=re.getAttribute($);if(ue){ue.match(/^https?:\/\//i)&&re.setAttribute("target","_blank");try{const Ne=bn(window.location.href);re.setAttribute($,new URL(ue,Ne).toString())}catch{re.replaceWith(re.textContent||ue)}}})})(Array.from(i.getElementsByTagName("a")),"href"),i);function bn(i){const p=new URL(i);return!p.pathname.endsWith("/")&&!p.pathname.endsWith(".html")&&(p.pathname+="/"),p.toString()}const Ln=({baseUrl:i,onClick:p})=>P=>(Array.from(P.getElementsByTagName("a")).forEach($=>{$.addEventListener("click",re=>{const Ne=$.getAttribute("href");Ne&&Ne.startsWith(i)&&!$.hasAttribute("download")&&(re.preventDefault(),p(re,Ne))})}),P),In=(0,Se.Z)(i=>({tooltip:{fontSize:"inherit",color:i.palette.text.primary,margin:0,padding:i.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(F.ZP),On=()=>m.createElement(Je.Z,null,m.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Rn=({text:i})=>{const[p,P]=(0,m.useState)(!1),[,$]=(0,xt.Z)(),re=(0,m.useCallback)(()=>{$(i),P(!0)},[i,$]),ue=(0,m.useCallback)(()=>{P(!1)},[P]);return m.createElement(In,{title:"Copied to clipboard",placement:"left",open:p,onClose:ue,leaveDelay:1e3},m.createElement(_.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:re},m.createElement(On,null)))},xn=i=>p=>{var P;const $=p.querySelectorAll("pre > code");for(const re of $){const ue=re.textContent||"",Ne=document.createElement("div");(P=re==null?void 0:re.parentElement)==null||P.prepend(Ne),St.render(m.createElement(Ct.Z,{theme:i},m.createElement(Rn,{text:ue})),Ne)}return p},er=()=>i=>{var p;return(p=i.querySelector(".md-header"))==null||p.remove(),i},Kn=()=>i=>{var p,P;return(p=i.querySelector(".md-footer .md-copyright"))==null||p.remove(),(P=i.querySelector(".md-footer-copyright"))==null||P.remove(),i},Zr=({onLoading:i,onLoaded:p})=>P=>(i(),P.addEventListener(H.Ox,function $(){p(),P.removeEventListener(H.Ox,$)}),P),ur=()=>i=>(i.addEventListener(H.Ox,function p(){var P;if(window.location.hash){const $=window.location.hash.slice(1);(P=i==null?void 0:i.querySelector(`[id="${$}"]`))==null||P.scrollIntoView()}i.removeEventListener(H.Ox,p)}),i),$r=()=>i=>(setTimeout(()=>{const p=i==null?void 0:i.querySelectorAll("li.md-nav__item--active");p.length!==0&&(p.forEach($=>{const re=$==null?void 0:$.querySelector("input");re!=null&&re.checked||re==null||re.click()}),p[p.length-1].scrollIntoView())},200),i),Ir=async(i,p)=>{let P;if(typeof i=="string")P=new DOMParser().parseFromString(i,"text/html").documentElement;else if(i instanceof Element)P=i;else throw new Error("dom is not a recognized type");for(const $ of p)P=await $(P);return P};function Wr(i,p){const P=new URL(p),$=`${P.origin}${P.pathname.replace(/\/$/,"")}`,re=i.replace($,"").replace(/^\/+/,""),ue=new URL(`http://localhost/${re}`);return`${ue.pathname}${ue.search}${ue.hash}`}function Jn(){const i=(0,A.s0)(),P=(0,l.h_)(l.Ds).getOptionalString("app.baseUrl");return(0,m.useCallback)(re=>{let ue=re;if(P)try{ue=Wr(re,P)}catch{}i(ue)},[i,P])}const br="screen and (max-width: 76.1875em)",Mr=i=>{const p=Jn(),P=(0,pe.Z)(),$=(0,it.Z)(br),re=B(),ue=Gt(),Ne=(0,l.z$)(),vt=(0,l.h_)(H.Dl),Ht=(0,l.h_)(ct.q3),{state:pn,path:Jt,content:vn}=q(),[nn,Zn]=(0,m.useState)(null),Mn=(0,H.ux)(nn),lr=(0,m.useCallback)(()=>{if(!nn)return;nn.querySelectorAll(".md-sidebar").forEach(Vn=>{var nr,Ur,Sr;if($)Vn.style.top="0px";else{const fr=document==null?void 0:document.querySelector(".techdocs-reader-page"),Gr=(nr=fr==null?void 0:fr.getBoundingClientRect().top)!=null?nr:0;let Hr=(Ur=nn.getBoundingClientRect().top)!=null?Ur:0;const Jr=nn.querySelector(".md-container > .md-tabs"),pa=(Sr=Jr==null?void 0:Jr.getBoundingClientRect().height)!=null?Sr:0;Hr<Gr&&(Hr=Gr),Vn.style.top=`${Math.max(Hr,0)+pa}px`}Vn.style.setProperty("opacity","1")})},[nn,$]);(0,m.useEffect)(()=>(window.addEventListener("resize",lr),window.addEventListener("scroll",lr,!0),()=>{window.removeEventListener("resize",lr),window.removeEventListener("scroll",lr,!0)}),[nn,lr]);const Gn=(0,m.useCallback)(()=>{if(!nn)return;const Qn=nn.querySelector(".md-footer");Qn&&(Qn.style.width=`${nn.getBoundingClientRect().width}px`)},[nn]);(0,m.useEffect)(()=>(window.addEventListener("resize",Gn),()=>{window.removeEventListener("resize",Gn)}),[nn,Gn]),(0,m.useEffect)(()=>{Mn||(Gn(),lr())},[pn,Mn,Gn,lr]);const yr=(0,m.useCallback)((Qn,Vn)=>Ir(Qn,[re,It({techdocsStorageApi:vt,entityId:i,path:Vn}),yn(),hn(),er(),Kn(),dn(Ht),ue]),[i,Ht,vt,re,ue]),Fr=(0,m.useCallback)(async Qn=>Ir(Qn,[ur(),$r(),xn(P),Ln({baseUrl:window.location.origin,onClick:(Vn,nr)=>{var Ur,Sr;const fr=Vn.ctrlKey||Vn.metaKey,Gr=new URL(nr),Hr=((Ur=Vn.target)==null?void 0:Ur.innerText)||nr,Jr=nr.replace(window.location.origin,"");Ne.captureEvent("click",Hr,{attributes:{to:Jr}}),Gr.hash?fr?window.open(nr,"_blank"):(p(nr),(Sr=Qn==null?void 0:Qn.querySelector(`[id="${Gr.hash.slice(1)}"]`))==null||Sr.scrollIntoView()):fr?window.open(nr,"_blank"):p(nr)}}),Zr({onLoading:()=>{},onLoaded:()=>{var Vn;(Vn=Qn.querySelector(".md-nav__title"))==null||Vn.removeAttribute("for")}}),Zr({onLoading:()=>{Array.from(Qn.querySelectorAll(".md-sidebar")).forEach(nr=>{nr.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[P,p,Ne]);return(0,m.useEffect)(()=>{if(!vn)return()=>{};let Qn=!0;return yr(vn,Jt).then(async Vn=>{if(!(Vn!=null&&Vn.innerHTML)||!Qn)return;window.scroll({top:0});const nr=await Fr(Vn);Zn(nr)}),()=>{Qn=!1}},[vn,Jt,yr,Fr]),nn},wr=()=>{const i=(0,H.$L)(),{shadowRoot:p}=(0,H.x1)(),P=p==null?void 0:p.querySelector('[data-md-component="content"]'),$=p==null?void 0:p.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let re=$==null?void 0:$.querySelector('[data-techdocs-addons-location="primary sidebar"]');re||(re=document.createElement("div"),re.setAttribute("data-techdocs-addons-location","primary sidebar"),$==null||$.prepend(re));const ue=p==null?void 0:p.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Ne=ue==null?void 0:ue.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Ne||(Ne=document.createElement("div"),Ne.setAttribute("data-techdocs-addons-location","secondary sidebar"),ue==null||ue.prepend(Ne)),m.createElement(m.Fragment,null,m.createElement(Bt.Z,{container:re},i.renderComponentsByLocation(H.oZ.PrimarySidebar)),m.createElement(Bt.Z,{container:P},i.renderComponentsByLocation(H.oZ.Content)),m.createElement(Bt.Z,{container:Ne},i.renderComponentsByLocation(H.oZ.SecondarySidebar)))},Ar=(0,ne.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),vr=Ge(i=>{var p;const{withSearch:P=!0,onReady:$}=i,re=Ar(),{entityMetadata:{value:ue,loading:Ne},entityRef:vt,setShadowRoot:Ht}=(0,H.x1)(),pn=Mr(vt),Jt=(0,m.useCallback)(vn=>{Ht(vn),$ instanceof Function&&$()},[Ht,$]);return Ne===!1&&!ue?m.createElement(be.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):pn?m.createElement(be.VY,null,m.createElement(Ee.Z,{container:!0},m.createElement(Ee.Z,{xs:12,item:!0},m.createElement(L,null)),P&&m.createElement(Ee.Z,{className:re.search,xs:"auto",item:!0},m.createElement(de,{entityId:vt,entityTitle:(p=ue==null?void 0:ue.metadata)==null?void 0:p.title})),m.createElement(Ee.Z,{xs:12,item:!0},m.createElement(H.VA,{element:pn,onAppend:Jt},m.createElement(wr,null))))):m.createElement(be.VY,null,m.createElement(Ee.Z,{container:!0},m.createElement(Ee.Z,{xs:12,item:!0},m.createElement(L,null))))}),Lr=null,hr=(0,l.NT)({id:"techdocs:index-page"}),Nn=(0,l.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Rr=(0,l.NT)({id:"techdocs:catalog-reader-view"}),xr=m.createElement(tn.Z,{animation:"wave",variant:"text",height:40}),jr=i=>{const{palette:{common:{white:p}}}=(0,pe.Z)(),{children:P}=i,$=(0,H.$L)(),re=(0,l.h_)(l.Ds),{title:ue,setTitle:Ne,subtitle:vt,setSubtitle:Ht,entityRef:pn,metadata:{value:Jt,loading:vn},entityMetadata:{value:nn,loading:Zn}}=(0,H.x1)();(0,m.useEffect)(()=>{Jt&&(Ne(Jt.site_name),Ht(()=>{let{site_description:fr}=Jt;return(!fr||fr==="None")&&(fr=""),fr}))},[Jt,Ne,Ht]);const Mn=re.getOptional("app.title")||"Backstage",lr=[ue,vt,Mn].filter(Boolean).join(" | "),{locationMetadata:Gn,spec:yr}=nn||{},Fr=yr==null?void 0:yr.lifecycle,Qn=nn?(0,Nt.hF)(nn,ge.S4):[],Vn=(0,l.tg)(hr)(),nr=m.createElement(m.Fragment,null,m.createElement(be.i9,{label:(0,Fe.capitalize)((nn==null?void 0:nn.kind)||"entity"),value:m.createElement(Nt.dx,{color:"inherit",entityRef:pn,title:nn==null?void 0:nn.metadata.title,defaultKind:"Component"})}),Qn.length>0&&m.createElement(be.i9,{label:"Owner",value:m.createElement(Nt.rI,{color:"inherit",entityRefs:Qn,defaultKind:"group"})}),Fr?m.createElement(be.i9,{label:"Lifecycle",value:Fr}):null,Gn&&Gn.type!=="dir"&&Gn.type!=="file"?m.createElement(be.i9,{label:"",value:m.createElement(Ee.Z,{container:!0,direction:"column",alignItems:"center",style:{color:p}},m.createElement(Ee.Z,{style:{padding:0},item:!0},m.createElement(Lt.Z,{style:{marginTop:"-25px"}})),m.createElement(Ee.Z,{style:{padding:0},item:!0},"Source")),url:Gn.target}):null);return!Zn&&nn===void 0||!vn&&Jt===void 0?null:m.createElement(be.h4,{type:"Documentation",typeLink:Vn,title:ue||xr,subtitle:vt===""?void 0:vt||xr},m.createElement(Wt.Z,{titleTemplate:"%s"},m.createElement("title",null,lr)),nr,P,$.renderComponentsByLocation(H.oZ.Header))},kr=(0,ne.Z)(i=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:i.spacing(3,3,0),"@media print":{display:"none"}}})),Nr=i=>{const p=kr(),[P,$]=(0,m.useState)(null),re=(0,m.useCallback)(vn=>{$(vn.currentTarget)},[]),ue=(0,m.useCallback)(()=>{$(null)},[]),{entityMetadata:{value:Ne,loading:vt}}=(0,H.x1)(),Ht=(0,H.$L)(),pn=Ht.renderComponentsByLocation(H.oZ.Subheader),Jt=Ht.renderComponentsByLocation(H.oZ.Settings);return!pn&&!Jt||vt===!1&&!Ne?null:m.createElement(Ue.Z,{classes:p,...i.toolbarProps},m.createElement(tt.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},pn,Jt?m.createElement(m.Fragment,null,m.createElement(F.ZP,{title:"Settings"},m.createElement(_.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:re},m.createElement(Ke.Z,null))),m.createElement(lt.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:P,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(P),onClose:ue,keepMounted:!0},m.createElement("div",null,Jt))):null))},Br=i=>{const{withSearch:p,withHeader:P=!0}=i;return m.createElement(be.T3,{themeId:"documentation"},P&&m.createElement(jr,null),m.createElement(Nr,null),m.createElement(vr,{withSearch:p}))},se=i=>{const{kind:p,name:P,namespace:$}=(0,l.Oi)(Nn),{children:re,entityRef:ue={kind:p,name:P,namespace:$}}=i,Ne=(0,A.pC)();if(!re){const pn=(Ne?m.Children.toArray(Ne.props.children):[]).flatMap(Jt=>{var vn,nn;return(nn=(vn=Jt==null?void 0:Jt.props)==null?void 0:vn.children)!=null?nn:[]}).find(Jt=>!(0,l.IY)(Jt,H.Zz)&&!(0,l.IY)(Jt,H.jM));return m.createElement(H.ZS,{entityRef:ue},pn||m.createElement(Br,null))}return m.createElement(H.ZS,{entityRef:ue},({metadata:vt,entityMetadata:Ht,onReady:pn})=>m.createElement("div",{className:"techdocs-reader-page"},m.createElement(be.T3,{themeId:"documentation"},re instanceof Function?re({entityRef:ue,techdocsMetadataValue:vt.value,entityMetadataValue:Ht.value,onReady:pn}):re)))};function ze(i,p){return p.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?i:i.toLocaleLowerCase("en-US")}const nt=i=>{const{entities:p}=i,P=(0,l.tg)(Nn),$=(0,l.h_)(l.Ds);return p?m.createElement(be.Oh,{"data-testid":"docs-explore"},p!=null&&p.length?p.map((re,ue)=>{var Ne,vt;return m.createElement(Yt.Z,{key:ue},m.createElement(ot.Z,null,m.createElement(be.hu,{title:(Ne=re.metadata.title)!=null?Ne:re.metadata.name})),m.createElement(rn.Z,null,re.metadata.description),m.createElement(C.Z,null,m.createElement(be.Qj,{to:P({namespace:ze((vt=re.metadata.namespace)!=null?vt:"default",$),kind:ze(re.kind,$),name:ze(re.metadata.name,$)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},Et={title:"All Documentation",filterPredicate:()=>!0},Qt=i=>{const{entities:p,group:P}=i,{loading:$,isOwnedEntity:re}=useEntityOwnership(),ue=p.filter(vt=>P.filterPredicate==="ownedByUser"?$?!1:re(vt):typeof P.filterPredicate=="function"&&P.filterPredicate(vt)),Ne=(()=>typeof P.title=="string"?React.createElement(ContentHeader,{title:P.title}):P.title)();return ue.length===0?null:React.createElement(Content,null,Ne,React.createElement(nt,{entities:ue}))},zt=i=>{const{loading:p,error:P,entities:$}=useEntityList();return P?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:P.toString()})):p?React.createElement(Progress,null):$.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography$1,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):($.sort((re,ue)=>{var Ne,vt;return((Ne=re.metadata.title)!=null?Ne:re.metadata.name).localeCompare((vt=ue.metadata.title)!=null?vt:ue.metadata.name)}),React.createElement(Content,null,(i.groups||[Et]).map((re,ue)=>React.createElement(Qt,{entities:$,group:re,key:`${re.title}-${ue}`}))))},qt=(0,pt.Z)({root:{color:"#f3ba37"}})($t.Z),mn={createCopyDocsUrlAction(i){return p=>({icon:()=>m.createElement(ht.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>i(`${window.location.origin}${p.resolved.docsUrl}`)})},createStarEntityAction(i,p){return P=>{const $=P.entity,re=i($);return{cellStyle:{paddingLeft:"1em"},icon:()=>re?m.createElement(qt,null):m.createElement(Xt.Z,null),tooltip:re?"Remove from favorites":"Add to favorites",onClick:()=>p($)}}}};function cn(i){return i.metadata.title||i.metadata.name}const an={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:i=>m.createElement(be.uw,{value:m.createElement(be.rU,{to:i.resolved.docsUrl},cn(i.entity)),subvalue:i.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:i})=>m.createElement(Nt.rI,{entityRefs:i.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},An=i=>{const{entities:p,title:P,loading:$,columns:re,actions:ue,options:Ne}=i,[,vt]=(0,xt.Z)(),Ht=(0,l.tg)(Nn),pn=(0,l.h_)(l.Ds);if(!p)return null;const Jt=p.map(Zn=>{var Mn;const lr=(0,Nt.hF)(Zn,ge.S4);return{entity:Zn,resolved:{docsUrl:Ht({namespace:ze((Mn=Zn.metadata.namespace)!=null?Mn:"default",pn),kind:ze(Zn.kind,pn),name:ze(Zn.metadata.name,pn)}),ownedByRelations:lr,ownedByRelationsTitle:lr.map(Gn=>(0,Nt.$3)(Gn,{defaultKind:"group"})).join(", ")}}}),vn=[an.createNameColumn(),an.createOwnerColumn(),an.createTypeColumn()],nn=[mn.createCopyDocsUrlAction(vt)];return m.createElement(m.Fragment,null,$||Jt&&Jt.length>0?m.createElement(be.iA,{isLoading:$,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1,...Ne},data:Jt,columns:re||vn,actions:ue||nn,title:P?`${P} (${Jt.length})`:`All (${Jt.length})`}):m.createElement(be.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:m.createElement(be.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};An.columns=an,An.actions=mn;const _n=i=>{var p,P;const{columns:$,actions:re,options:ue}=i,{loading:Ne,error:vt,entities:Ht,filters:pn}=(0,Nt.wp)(),{isStarredEntity:Jt,toggleStarredEntity:vn}=(0,Nt.CR)(),[,nn]=(0,xt.Z)(),Zn=(0,Fe.capitalize)((P=(p=pn.user)==null?void 0:p.value)!=null?P:"all"),Mn=[mn.createCopyDocsUrlAction(nn),mn.createStarEntityAction(Jt,vn)];return vt?m.createElement(be.GB,{severity:"error",title:"Could not load available documentation."},m.createElement(be.Oi,{language:"text",text:vt.toString()})):m.createElement(An,{title:Zn,entities:Ht,loading:Ne,actions:re||Mn,columns:$,options:ue})};_n.columns=an,_n.actions=mn;const Cn=i=>{var p;const{children:P}=i,re=`Documentation available in ${(p=(0,l.h_)(l.Ds).getOptionalString("organization.name"))!=null?p:"Backstage"}`;return m.createElement(be.g9,{title:"Documentation",subtitle:re,themeId:"documentation"},P)};class Un{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":Nt.n3}}}const Tn=()=>{const{updateFilters:i}=(0,Nt.wp)();return(0,m.useEffect)(()=>{i({techdocs:new Un})},[i]),null},Bn=i=>{const{initialFilter:p="owned",columns:P,actions:$}=i;return m.createElement(Cn,null,m.createElement(be.VY,null,m.createElement(be.yW,{title:""},m.createElement(be.qt,null,"Discover documentation in your ecosystem.")),m.createElement(Nt.UO,null,m.createElement(Nt._i,null,m.createElement(Nt._i.Filters,null,m.createElement(Tn,null),m.createElement(Nt.EW,{initialFilter:p}),m.createElement(Nt.dq,null),m.createElement(Nt.xE,null)),m.createElement(Nt._i.Content,null,m.createElement(_n,{actions:$,columns:P}))))))},Sn=(0,l.rx)({id:"techdocs",apis:[(0,l.ni)({api:H.Dl,deps:{configApi:l.Ds,discoveryApi:l.NW,identityApi:l.$4,fetchApi:l.gP},factory:({configApi:i,discoveryApi:p,identityApi:P,fetchApi:$})=>new G({configApi:i,discoveryApi:p,identityApi:P,fetchApi:$})}),(0,l.ni)({api:H.gT,deps:{configApi:l.Ds,discoveryApi:l.NW,fetchApi:l.gP},factory:({configApi:i,discoveryApi:p,fetchApi:P})=>new Le({configApi:i,discoveryApi:p,fetchApi:P})})],routes:{root:hr,docRoot:Nn,entityContent:Rr}}),or=Sn.provide((0,l.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return s}).then(i=>i.Router),mountPoint:hr})),Wn=Sn.provide((0,l.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return s}).then(i=>i.EmbeddedDocsRouter),mountPoint:Rr})),zn=Sn.provide((0,l.P4)({name:"TechDocsCustomHome",component:()=>e.e(7202).then(e.bind(e,57202)).then(i=>i.TechDocsCustomHome),mountPoint:hr})),sr=Sn.provide((0,l.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return tr}).then(i=>i.TechDocsIndexPage),mountPoint:hr})),jn=Sn.provide((0,l.P4)({name:"TechDocsReaderPage",component:()=>e.e(2503).then(e.bind(e,12503)).then(i=>i.TechDocsReaderPage),mountPoint:Nn})),Fn=Sn.provide((0,At.E5)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(function(){return rt}).then(i=>i.TechDocsSearchResultListItem),predicate:i=>i.type==="techdocs"})),Hn=({entity:i})=>{const p=(0,ge.iB)(i);return m.createElement(jn,{entityRef:p},m.createElement(Nr,null),m.createElement(vr,{withSearch:!1}))},dr=i=>(0,A.pC)()||m.createElement(Bn,{...i});var tr=Object.freeze({__proto__:null,TechDocsIndexPage:dr});const Pr="backstage.io/techdocs-ref";var s=Object.freeze({__proto__:null,isTechDocsAvailable:i=>{var p,P;return Boolean((P=(p=i==null?void 0:i.metadata)==null?void 0:p.annotations)==null?void 0:P[Pr])},Router:()=>m.createElement(A.Z5,null,m.createElement(A.AW,{path:"/",element:m.createElement(dr,null)}),m.createElement(A.AW,{path:"/:namespace/:kind/:name/*",element:m.createElement(se,null)})),EmbeddedDocsRouter:i=>{var p;const{children:P}=i,{entity:$}=(0,Nt.X2)(),re=(0,A.V$)([{path:"/*",element:m.createElement(Hn,{entity:$}),children:[{path:"*",element:P}]}]);return((p=$.metadata.annotations)==null?void 0:p[Pr])?re:m.createElement(be.sk,{annotation:Pr})}})},70557:function(fn,Ut,e){"use strict";e.d(Ut,{$d:function(){return l.E},I6:function(){return l.g},Jl:function(){return l.e},bf:function(){return l.h},s4:function(){return l.t}});var l=e(49849),y=e(30705),g=e(32272),d=e(76372),m=e.n(d),A=e(2784),H=e(66565),je=e(80236),r=e(92573),be=e(49462),ne=e(35368),ie=e.n(ne),ve=e(1854),Y=e(28316),Ee=e(82717),fe=e.n(Ee),_=e(18671),Ce=e(64304),I=e(34520),Pt=e(76635),Oe=e.n(Pt)},43229:function(fn,Ut,e){"use strict";e.d(Ut,{F0:function(){return X},H2:function(){return Rt},Zr:function(){return St},kG:function(){return j}});var l=e(53907),y=e(32272),g=e(82394),d=e.n(g),m=e(30705),A=e(2784),H=e(47603),je=e(80236),r=e(73557),be=e(90436),ne=e(77277),ie=e(79692),ve=e(43434),Y=e(38402),Ee=e(86136),fe=e(49378),_=e(80030),Ce=e(60905),I=e(9520),Pt=e(11776),Oe=e(82938),pe=e(86619),Se=e(61837),F=e(48348),Je=e(12231),Ct=e(11640),it=e(33375),Bt=e(64279),Ue=e(71554),tt=e(43054),lt=e(72164),Yt=e(59324),ot=e(13737),rn=e(31168),C=e(64304),At=Object.defineProperty,en=(S,h,c)=>h in S?At(S,h,{enumerable:!0,configurable:!0,writable:!0,value:c}):S[h]=c,tn=(S,h,c)=>(en(S,typeof h!="symbol"?h+"":h,c),c);const K={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},ct=new Map;class dt{constructor(h,c,b,L,D,R){this.namespace=h,this.fetchApi=c,this.discoveryApi=b,this.errorApi=L,this.identityApi=D,this.fallback=R,tn(this,"subscribers",new Set),tn(this,"observables",new Map)}static create(h){var c;return new dt((c=h.namespace)!=null?c:"default",h.fetchApi,h.discoveryApi,h.errorApi,h.identityApi,WebStorage.create({namespace:h.namespace,errorApi:h.errorApi}))}forBucket(h){const c=`${this.namespace}.${h}`;return ct.has(c)||ct.set(c,new dt(c,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),ct.get(c)}async remove(h){const c=await this.getFetchUrl(h),b=await this.fetchApi.fetch(c,{method:"DELETE"});if(!b.ok&&b.status!==404)throw await ResponseError.fromResponse(b);this.notifyChanges({key:h,presence:"absent"})}async set(h,c){if(!await this.isSignedIn()){await this.fallback.set(h,c),this.notifyChanges({key:h,presence:"present",value:c});return}const b=await this.getFetchUrl(h),L=await this.fetchApi.fetch(b,{method:"PUT",headers:K,body:JSON.stringify({value:c})});if(!L.ok)throw await ResponseError.fromResponse(L);const{value:D}=await L.json();this.notifyChanges({key:h,value:D,presence:"present"})}observe$(h){return this.observables.has(h)||this.observables.set(h,new ObservableImpl(c=>(this.subscribers.add(c),Promise.resolve().then(()=>this.get(h)).then(b=>c.next(b)).catch(b=>this.errorApi.post(b)),()=>{this.subscribers.delete(c)})).filter(({key:c})=>c===h)),this.observables.get(h)}snapshot(h){return{key:h,presence:"unknown"}}async get(h){if(!await this.isSignedIn())return this.fallback.snapshot(h);const c=await this.getFetchUrl(h),b=await this.fetchApi.fetch(c);if(b.status===404)return{key:h,presence:"absent"};if(!b.ok)throw await ResponseError.fromResponse(b);try{const{value:L}=await b.json(),D=JSON.parse(JSON.stringify(L),(R,W)=>(typeof W=="object"&&W!==null&&Object.freeze(W),W));return{key:h,presence:"present",value:D}}catch{return{key:h,presence:"absent"}}}async getFetchUrl(h){const c=await this.discoveryApi.getBaseUrl("user-settings"),b=encodeURIComponent(this.namespace),L=encodeURIComponent(h);return`${c}/buckets/${b}/keys/${L}`}async notifyChanges(h){for(const c of this.subscribers)try{c.next(h)}catch{}}async isSignedIn(){try{const h=await this.identityApi.getCredentials();return!!(h!=null&&h.token)}catch{return!1}}}const Ye=(0,m.NT)({id:"user-settings"}),Rt=(0,m.rx)({id:"user-settings",routes:{settingsPage:Ye}}).provide((0,m.P4)({name:"UserSettingsPage",component:()=>e.e(9513).then(e.bind(e,49513)).then(S=>S.SettingsPage),mountPoint:Ye})),St=S=>{const h=(0,m.tg)(Ye),c=S.icon?S.icon:H.Z;return A.createElement(je.R6,{text:"Settings",to:h(),icon:c})},ft=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Mt=()=>A.createElement(je.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:A.createElement(A.Fragment,null,A.createElement(be.Z,{variant:"body1"},"Open ",A.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),A.createElement(je.Oi,{text:ft,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),A.createElement(ne.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),mt=(0,ie.Z)(S=>({avatar:{width:({size:h})=>h,height:({size:h})=>h,fontSize:({size:h})=>h*.7,border:`1px solid ${S.palette.textSubtle}`}})),xt=({size:S,picture:h})=>{const{iconSize:c}=je.sidebarConfig,b=mt(S?{size:S}:{size:c});return A.createElement(ve.Z,{src:h,className:b.avatar})},Wt={},Lt=S=>{const{title:h,description:c,icon:b,apiRef:L}=S,D=(0,m.h_)(L),R=(0,m.h_)(m.VE),[W,k]=(0,A.useState)(!1),[ye,et]=(0,A.useState)(Wt);return(0,A.useEffect)(()=>{let U=!1;const Z=D.sessionState$().subscribe(te=>{te!==m.sM.SignedIn&&(et(Wt),k(!1)),U||D.getProfile({optional:!0}).then(T=>{U||(te===m.sM.SignedIn&&k(!0),T&&et(T))})});return()=>{U=!0,Z.unsubscribe()}},[D]),A.createElement(Y.Z,null,A.createElement(Ee.Z,null,A.createElement(b,null)),A.createElement(fe.Z,{primary:h,secondary:A.createElement(_.ZP,{placement:"top",arrow:!0,title:c},A.createElement(Ce.Z,{container:!0,spacing:6},A.createElement(Ce.Z,{item:!0},A.createElement(xt,{size:48,picture:ye.picture})),A.createElement(Ce.Z,{item:!0,xs:12,sm:!0,container:!0},A.createElement(Ce.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},A.createElement(Ce.Z,{item:!0,xs:!0},A.createElement(be.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},ye.displayName),A.createElement(be.Z,{variant:"body2",color:"textSecondary"},ye.email),A.createElement(be.Z,{variant:"body2",color:"textSecondary"},c)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),A.createElement(I.Z,null,A.createElement(_.ZP,{placement:"top",arrow:!0,title:W?`Sign out from ${h}`:`Sign in to ${h}`},A.createElement(ne.Z,{variant:"outlined",color:"primary",onClick:()=>{(W?D.signOut():D.signIn()).catch(Z=>R.post(Z))}},W?"Sign out":"Sign in"))))},Nt=S=>{const{configuredProviders:h}=S;return A.createElement(A.Fragment,null,h.includes("google")&&A.createElement(Lt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:m.Kp,icon:Ct.Z}),h.includes("microsoft")&&A.createElement(Lt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:m.p_,icon:Ct.Z}),h.includes("github")&&A.createElement(Lt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:m.F4,icon:Ct.Z}),h.includes("gitlab")&&A.createElement(Lt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:m.ux,icon:Ct.Z}),h.includes("okta")&&A.createElement(Lt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:m.D,icon:Ct.Z}),h.includes("bitbucket")&&A.createElement(Lt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:m.bq,icon:Ct.Z}),h.includes("onelogin")&&A.createElement(Lt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:m.gW,icon:Ct.Z}),h.includes("atlassian")&&A.createElement(Lt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:m.uB,icon:Ct.Z}),h.includes("bitbucketServer")&&A.createElement(Lt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:m.Km,icon:Ct.Z}))},ge=S=>{const{providerSettings:h}=S,b=(0,m.h_)(m.Ds).getOptionalConfig("auth.providers"),L=(b==null?void 0:b.keys())||[],D=h!=null?h:A.createElement(Nt,{configuredProviders:L});return!h&&!(L!=null&&L.length)?A.createElement(Mt,null):A.createElement(je.rJ,{title:"Available Providers"},A.createElement(Pt.Z,{dense:!0},D))},Fe=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,Xe=()=>A.createElement(je.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:A.createElement(A.Fragment,null,A.createElement(be.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),A.createElement(je.Oi,{text:Fe,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),A.createElement(ne.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Ke=S=>S.description?S.description:S.pluginId?`Registered in ${S.pluginId} plugin`:"Registered in the application",ht=({flag:S,enabled:h,toggleHandler:c})=>A.createElement(Y.Z,{divider:!0,button:!0,onClick:()=>c(S.name)},A.createElement(Ee.Z,null,A.createElement(_.ZP,{placement:"top",arrow:!0,title:h?"Disable":"Enable"},A.createElement(Oe.Z,{color:"primary",checked:h,name:S.name}))),A.createElement(fe.Z,{primary:S.name,secondary:Ke(S)})),pt=(S,h)=>{const c=S.filter(L=>h.isActive(L.name)),b=S.filter(L=>!h.isActive(L.name));return[...c,...b]},$t=()=>{const S=(0,m.h_)(m.W0),h=A.useRef(),c=S.getRegisteredFlags(),b=pt(c,S),[L]=(0,A.useState)(b),D=Object.fromEntries(L.map(({name:T})=>[T,S.isActive(T)])),[R,W]=(0,A.useState)(D),[k,ye]=(0,A.useState)(""),et=(0,A.useCallback)(T=>{const B=S.isActive(T)?m.CL.None:m.CL.Active;S.save({states:{[T]:B},merge:!0}),W(V=>({...V,[T]:B===m.CL.Active}))},[S]);if(!L.length)return A.createElement(Xe,null);const U=()=>{var T;ye(""),(T=h==null?void 0:h.current)==null||T.focus()},Z=L.filter(T=>T.name.toLocaleLowerCase("en-US").includes(k.toLocaleLowerCase("en-US"))),te=()=>A.createElement(Ce.Z,{container:!0,style:{justifyContent:"space-between"}},A.createElement(Ce.Z,{item:!0,xs:6,md:8},A.createElement(be.Z,{variant:"h5"},"Feature Flags"),A.createElement(be.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),L.length>=10&&A.createElement(Ce.Z,{item:!0,xs:6,md:4},A.createElement(pe.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:T=>T&&T.focus(),InputProps:{...k.length&&{endAdornment:A.createElement(Se.Z,{"aria-label":"Clear filter",onClick:U,edge:"end"},A.createElement(it.Z,null))}},onChange:T=>ye(T.target.value),value:k})));return A.createElement(je.rJ,{title:A.createElement(te,null)},A.createElement(Pt.Z,{dense:!0},Z.map(T=>{const B=Boolean(R[T.name]);return A.createElement(ht,{key:T.name,flag:T,enabled:B,toggleHandler:et})})))},Xt=()=>{var S;const h=(0,m.h_)(m.$4),c=(0,m.h_)(m.$v),{value:b,loading:L,error:D}=(0,Bt.default)(async()=>({profile:await h.getProfileInfo(),identity:await h.getBackstageIdentity()}),[]);return(0,A.useEffect)(()=>{D&&c.post({message:`Failed to load user identity: ${D}`,severity:"error"})},[D,c]),L||D?{profile:{},displayName:"",loading:L}:{profile:b.profile,backstageIdentity:b.identity,displayName:(S=b.profile.displayName)!=null?S:b.identity.userEntityRef,loading:L}},Ft=(0,ie.Z)(S=>({avatar:{width:({size:h})=>h,height:({size:h})=>h,fontSize:({size:h})=>h*.7,border:`1px solid ${S.palette.textSubtle}`}})),j=S=>{const{size:h}=S,{iconSize:c}=je.sidebarConfig,b=Ft(h?{size:h}:{size:c}),{profile:L}=Xt();return A.createElement(ve.Z,{src:L.picture,className:b.avatar,alt:"Profile picture"})},ce=()=>{const S=(0,m.h_)(m.VE),h=(0,m.h_)(m.$4),[c,b]=A.useState(!1),[L,D]=A.useState(void 0),R=k=>{D(k.currentTarget),b(!0)},W=()=>{D(void 0),b(!1)};return A.createElement(A.Fragment,null,A.createElement(Se.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:R},A.createElement(tt.Z,null)),A.createElement(F.Z,{anchorEl:L,open:c,onClose:W},A.createElement(Je.Z,{"data-testid":"sign-out",onClick:()=>h.signOut().catch(k=>S.post(k))},A.createElement(Ee.Z,null,A.createElement(Ue.Z,null)),"Sign Out")))},Te=()=>{const{profile:S,displayName:h}=Xt();return A.createElement(je.rJ,{title:"Profile",variant:"gridItem"},A.createElement(Ce.Z,{container:!0,spacing:6},A.createElement(Ce.Z,{item:!0},A.createElement(j,{size:96})),A.createElement(Ce.Z,{item:!0,xs:12,sm:!0,container:!0},A.createElement(Ce.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},A.createElement(Ce.Z,{item:!0,xs:!0},A.createElement(be.Z,{variant:"subtitle1",gutterBottom:!0},h),A.createElement(be.Z,{variant:"body2",color:"textSecondary"},S.email))),A.createElement(Ce.Z,{item:!0},A.createElement(ce,null)))))},$e=()=>{const{isPinned:S,toggleSidebarPinState:h}=(0,je.Pf)();return A.createElement(Y.Z,null,A.createElement(fe.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),A.createElement(I.Z,null,A.createElement(_.ZP,{placement:"top",arrow:!0,title:`${S?"Unpin":"Pin"} Sidebar`},A.createElement(Oe.Z,{color:"primary",checked:S,onChange:()=>h(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},Le=({id:S,activeId:h,icon:c})=>c?(0,A.cloneElement)(c,{color:h===S?"primary":void 0}):A.createElement(Yt.Z,{color:h===S?"primary":void 0}),G=(0,ie.Z)(S=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[S.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[S.breakpoints.down("xs")]:{paddingLeft:0}}})),Ae=({children:S,title:h,value:c,...b})=>A.createElement(_.ZP,{placement:"top",arrow:!0,title:h},A.createElement(ot.Z,{value:c,...b},S)),Re=()=>{const S=G(),h=(0,m.h_)(m.hg),c=(0,lt.Z)(h.activeThemeId$(),h.getActiveThemeId()),b=h.getInstalledThemes(),L=(D,R)=>{b.some(W=>W.id===R)?h.setActiveThemeId(R):h.setActiveThemeId(void 0)};return A.createElement(Y.Z,{className:S.list,classes:{container:S.container}},A.createElement(fe.Z,{className:S.listItemText,primary:"Theme",secondary:"Change the theme mode"}),A.createElement(I.Z,{className:S.listItemSecondaryAction},A.createElement(rn.Z,{exclusive:!0,size:"small",value:c!=null?c:"auto",onChange:L},b.map(D=>{var R;const W=(R=b.find(k=>k.id===D.id))==null?void 0:R.icon;return A.createElement(Ae,{key:D.id,title:`Select ${D.title}`,value:D.id},A.createElement(A.Fragment,null,D.title,"\xA0",A.createElement(Le,{id:D.id,icon:W,activeId:c})))}),A.createElement(_.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},A.createElement(ot.Z,{value:"auto",selected:c===void 0},"Auto\xA0",A.createElement(Yt.Z,{color:c===void 0?"primary":void 0}))))))},xe=()=>{const{isMobile:S}=(0,je.Pf)();return A.createElement(je.rJ,{title:"Appearance",variant:"gridItem"},A.createElement(Pt.Z,{dense:!0},A.createElement(Re,null),!S&&A.createElement($e,null)))},J=()=>{const{backstageIdentity:S}=Xt();return S?A.createElement(Ce.Z,{container:!0,spacing:1},A.createElement(Ce.Z,{item:!0,xs:12},A.createElement(be.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",A.createElement(C.rI,{entityRefs:[S.userEntityRef],getTitle:h=>h}))),A.createElement(Ce.Z,{item:!0,xs:12},A.createElement(be.Z,{variant:"subtitle1"},"Ownership Entities:"," ",A.createElement(C.rI,{entityRefs:S.ownershipEntityRefs,getTitle:h=>h})))):A.createElement(be.Z,null,"No Backstage Identity")},q=()=>A.createElement(je.rJ,{title:"Backstage Identity"},A.createElement(J,null)),Me=()=>A.createElement(Ce.Z,{container:!0,direction:"row",spacing:3},A.createElement(Ce.Z,{item:!0,xs:12,md:6},A.createElement(Te,null)),A.createElement(Ce.Z,{item:!0,xs:12,md:6},A.createElement(xe,null)),A.createElement(Ce.Z,{item:!0,xs:12,md:6},A.createElement(q,null))),Ge="plugin.user-settings.settingsLayout",we="plugin.user-settings.settingsLayoutRoute",Ve=()=>null;(0,m.R5)(Ve,we,!0),(0,m.R5)(Ve,"core.gatherMountPoints",!0);const rt=S=>{const{title:h,children:c}=S,{isMobile:b}=(0,je.Pf)(),L=(0,m.vJ)(c,D=>D.selectByComponentData({key:we,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(R=>R.props));return A.createElement(je.T3,{themeId:"home"},!b&&A.createElement(je.h4,{title:h!=null?h:"Settings"}),A.createElement(je.tn,{routes:L}))};(0,m.R5)(rt,Ge,!0),rt.Route=Ve;const oe=S=>{const{providerSettings:h,tabs:c}=S;return A.createElement(rt,null,A.createElement(rt.Route,{path:"general",title:"General"},A.createElement(Me,null)),A.createElement(rt.Route,{path:"auth-providers",title:"Authentication Providers"},A.createElement(ge,{providerSettings:h})),A.createElement(rt.Route,{path:"feature-flags",title:"Feature Flags"},A.createElement($t,null)),c)},X=S=>{const{providerSettings:h}=S,c=(0,r.pC)(),b=(0,m.vJ)(c,D=>D.selectByComponentData({key:Ge}).getElements()),L=(0,m.vJ)(c,D=>D.selectByComponentData({key:we}).getElements());return A.createElement(A.Fragment,null,b.length!==0&&b||A.createElement(oe,{tabs:L,providerSettings:h}))},de=we,he=S=>A.createElement(rt.Route,{path:S.path,title:S.title},A.createElement(A.Fragment,null,"props.children"));(0,m.R5)(he,de,"UserSettingsTab")},18473:function(fn,Ut,e){"use strict";e.d(Ut,{CT:function(){return H},EI:function(){return A},Vt:function(){return je},uW:function(){return m}});var l=e(2784);function y(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const g=y(),d=be=>`__@backstage/${be}__`;function m(be,ne){const ie=d(be);let ve=g[ie];return ve||(ve=ne(),g[ie]=ve,ve)}function A(be){Object.freeze(be);const ne={atVersion(ie){return be[ie]}};return Object.defineProperty(ne,"$map",{configurable:!0,enumerable:!0,get(){return be}}),ne}function H(be){return m(be,()=>(0,l.createContext)(void 0))}function je(be){return(0,l.useContext)(H(be))}function r(be){return{set(ne){globalThis[`__@backstage/${be}__`]=createContext(A(ne))},reset(){delete globalThis[`__@backstage/${be}__`]}}}},52059:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/createComponent.975d1e1e..svg"},79265:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/missingAnnotation.67f79e98..svg"},38225:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/noBuild.1715fa71..svg"},85910:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/noInformation.4b426325..svg"},53305:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/mic-drop.fe3ef4d0..svg"},33901:function(fn,Ut,e){"use strict";fn.exports=e.p+"static/JenkinsLogo.e154121e..svg"}}]);})();

//# sourceMappingURL=module-backstage.0b66f2c9.js.map