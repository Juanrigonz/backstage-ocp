"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1639],{61639:function(Ie,L,o){o.r(L),o.d(L,{RealLogViewer:function(){return Be}});var v=o(95544),P=o(61837),z=o(19353),b=o(72779),B=o.n(b),c=o(2784),j=o(73557),H=o(6738),V=o(50166),G=o(46212),$=o(74600),I=o.n($),Y=o(63494),J=o(70811),Q=o(86619),X=o(90436),w=o(48049),q=o(51209),R=o(36444),ee=o(79692),T=o(41128),O=o(31754),A=o(66054),K=o(81463),U=o(34505),W=o(57186),x=o(32720),y=o(92901),p=o(45410),te=o(60186),S=o(30705),ne=o(95074),oe=o(19928),Re=o.n(oe),se=o(76635),Te=o.n(se),Ae=o(13725),re=o(46506),Ke=o.n(re),le=o(54073),Ue=o.n(le),ae=o(19574),We=o.n(ae),xe=o(16628),ye=o(30001),pe=o(50576),Se=o(68095),Ze=o(28316),Fe=o(32272),ie=o(15277),ke=o.n(ie),Ne=o(39307),ce=o(19126),ze=o.n(ce),be=o(18671),je=o(67222),_e=o(44311),He=o.n(_e),Ve=o(15703),Ge=o(18473),ue=o(45455),$e=o.n(ue),de=Object.defineProperty,Ee=(e,t,n)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t,n)=>(Ee(e,typeof t!="symbol"?t+"":t,n),n);const Z=(0,G.Z)(),F=/\n\r?/g,k=Object.fromEntries(Object.entries({1:e=>({...e,bold:!0}),3:e=>({...e,italic:!0}),4:e=>({...e,underline:!0}),22:({bold:e,...t})=>t,23:({italic:e,...t})=>t,24:({underline:e,...t})=>t,30:e=>({...e,foreground:"black"}),31:e=>({...e,foreground:"red"}),32:e=>({...e,foreground:"green"}),33:e=>({...e,foreground:"yellow"}),34:e=>({...e,foreground:"blue"}),35:e=>({...e,foreground:"magenta"}),36:e=>({...e,foreground:"cyan"}),37:e=>({...e,foreground:"white"}),39:({foreground:e,...t})=>t,90:e=>({...e,foreground:"grey"}),40:e=>({...e,background:"black"}),41:e=>({...e,background:"red"}),42:e=>({...e,background:"green"}),43:e=>({...e,background:"yellow"}),44:e=>({...e,background:"blue"}),45:e=>({...e,background:"magenta"}),46:e=>({...e,background:"cyan"}),47:e=>({...e,background:"white"}),49:({background:e,...t})=>t}).map(([e,t])=>[`\x1B[${e}m`,t]));class C{constructor(t=1,n=[]){this.lineNumber=t,this.chunks=n,M(this,"text"),this.text=n.map(s=>s.text).join("").toLocaleLowerCase("en-US")}lastChunk(){return this.chunks[this.chunks.length-1]}replaceLastChunk(t){t&&(this.chunks.splice(this.chunks.length-1,1,...t),this.text=this.chunks.map(n=>n.text).join("").toLocaleLowerCase("en-US"))}}class he{constructor(){M(this,"text",""),M(this,"lines",[]),M(this,"processLines",(t,n={},s=1)=>{var r;const l=[];let a=n,_=s,i=0;for(F.lastIndex=0;;){const u=F.exec(t);if(!u){const h=this.processText(t.slice(i),a);return l.push(new C(_,h)),l}const d=t.slice(i,u.index);i=u.index+u[0].length;const E=this.processText(d,a);l.push(new C(_,E)),a=(r=E[E.length-1].modifiers)!=null?r:a,_+=1}}),M(this,"processText",(t,n)=>{const s=[];let r=n,l=0;for(Z.lastIndex=0;;){const a=Z.exec(t);if(!a)return s.push({text:t.slice(l),modifiers:r}),s;const _=t.slice(l,a.index);s.push({text:_,modifiers:r}),l=a.index+a[0].length,r=this.processCode(a[0],r)}}),M(this,"processCode",(t,n)=>{var s,r;return(r=(s=k[t])==null?void 0:s.call(k,n))!=null?r:n})}process(t){var n,s,r;if(this.text===t)return this.lines;if(t.startsWith(this.text)){const l=this.lines.length>0?this.lines.length-1:0,a=(n=this.lines[l])!=null?n:new C,_=a.lastChunk(),i=this.processLines(((s=_==null?void 0:_.text)!=null?s:"")+t.slice(this.text.length),_==null?void 0:_.modifiers,a==null?void 0:a.lineNumber);a.replaceLastChunk((r=i[0])==null?void 0:r.chunks),this.lines[l]=a,this.lines.push(...i.slice(1))}else this.lines=this.processLines(t);return this.text=t,this.lines}}function fe(e,t){const n=new Array;if(t.bold&&n.push(e.modifierBold),t.italic&&n.push(e.modifierItalic),t.underline&&n.push(e.modifierUnderline),t.foreground){const s=`modifierForeground${I()(t.foreground)}`;n.push(e[s])}if(t.background){const s=`modifierBackground${I()(t.background)}`;n.push(e[s])}return n.length>0?n.join(" "):void 0}function me(e,t){if(!t||!e.includes(t))return;const n=new Array;let s=0;for(;;){const r=e.indexOf(t,s);if(r===-1)break;const l=r+t.length;n.push({start:r,end:l}),s=l}return n}function ge(e,t){const n=me(e.text,t);if(!n)return e.chunks;const s=new Array;let r=0,l=0,a=n[l];for(const _ of e.chunks){const{text:i,modifiers:u}=_;if(!a||r+i.length<a.start){s.push(_),r+=i.length;continue}let d=0;for(;a;){const h=Math.max(a.start-r,0);if(h>i.length)break;const m=Math.min(a.end-r,i.length);if(h>d&&s.push({text:i.slice(d,h),modifiers:u}),m>h&&s.push({modifiers:u,highlight:l,text:i.slice(h,m)}),d=m,a.end-r===m)l+=1,a=n[l];else break}d<i.length&&s.push({text:i.slice(d),modifiers:u}),r+=i.length}return s}const Me=({attributes:e,content:t})=>{const{href:n,...s}=e;return c.createElement(J.rU,{to:n,...s},t)};function Pe({line:e,classes:t,searchText:n,highlightResultIndex:s}){const r=(0,c.useMemo)(()=>ge(e,n),[e,n]),l=(0,c.useMemo)(()=>r.map(({text:a,modifiers:_,highlight:i},u)=>c.createElement("span",{key:u,className:B()(fe(t,_),i!==void 0&&(i===s?t.textSelectedHighlight:t.textHighlight))},c.createElement(Y.Z,{options:{render:Me}},a))),[r,s,t]);return c.createElement(c.Fragment,null,l)}function Oe(e){var t;const{resultCount:n,resultIndexStep:s,toggleShouldFilter:r}=e,l=(t=e.resultIndex)!=null?t:0,a=_=>{_.key==="Enter"&&(_.metaKey||_.ctrlKey||_.altKey?r():s(_.shiftKey))};return c.createElement(c.Fragment,null,n!==void 0&&c.createElement(c.Fragment,null,c.createElement(P.Z,{size:"small",onClick:()=>s(!0)},c.createElement(w.Z,null)),c.createElement(X.Z,null,Math.min(l+1,n),"/",n),c.createElement(P.Z,{size:"small",onClick:()=>s()},c.createElement(q.Z,null))),c.createElement(Q.Z,{size:"small",variant:"standard",placeholder:"Search",value:e.searchInput,onKeyPress:a,onChange:_=>e.setSearchInput(_.target.value)}),c.createElement(P.Z,{size:"small",onClick:r},e.shouldFilter?c.createElement(R.Z,{color:"primary"}):c.createElement(R.Z,{color:"disabled"})))}const N=40,De=(0,ee.Z)(e=>({root:{background:e.palette.background.paper},header:{height:N,display:"flex",alignItems:"center",justifyContent:"flex-end"},log:{fontFamily:'"Monaco", monospace',fontSize:e.typography.pxToRem(12)},line:{position:"relative",whiteSpace:"pre","&:hover":{background:e.palette.action.hover}},lineSelected:{background:e.palette.action.selected,"&:hover":{background:e.palette.action.selected}},lineCopyButton:{position:"absolute",paddingTop:0,paddingBottom:0},lineNumber:{display:"inline-block",textAlign:"end",width:60,marginRight:e.spacing(1),cursor:"pointer"},textHighlight:{background:(0,T.Fq)(e.palette.info.main,.15)},textSelectedHighlight:{background:(0,T.Fq)(e.palette.info.main,.4)},modifierBold:{fontWeight:e.typography.fontWeightBold},modifierItalic:{fontStyle:"italic"},modifierUnderline:{textDecoration:"underline"},modifierForegroundBlack:{color:O.Z.black},modifierForegroundRed:{color:A.Z[500]},modifierForegroundGreen:{color:K.Z[500]},modifierForegroundYellow:{color:U.Z[500]},modifierForegroundBlue:{color:W.Z[500]},modifierForegroundMagenta:{color:x.Z[500]},modifierForegroundCyan:{color:y.Z[500]},modifierForegroundWhite:{color:O.Z.white},modifierForegroundGrey:{color:p.Z[500]},modifierBackgroundBlack:{background:O.Z.black},modifierBackgroundRed:{background:A.Z[500]},modifierBackgroundGreen:{background:K.Z[500]},modifierBackgroundYellow:{background:U.Z[500]},modifierBackgroundBlue:{background:W.Z[500]},modifierBackgroundMagenta:{background:x.Z[500]},modifierBackgroundCyan:{background:y.Z[500]},modifierBackgroundWhite:{background:O.Z.white},modifierBackgroundGrey:{background:p.Z[500]}}),{name:"BackstageLogViewer"});function ve(e,t){if(!t)return{lines:e};const n=[],s=[];for(const r of e)if(r.text.includes(t)){n.push(r);let l=0,a=0;for(;;){const _=r.text.indexOf(t,l);if(_===-1)break;s.push({lineNumber:r.lineNumber,lineIndex:a++}),l=_+t.length}}return{lines:n,results:s}}function Ce(e){var t;const[n,s]=(0,c.useState)(""),r=n.toLocaleLowerCase("en-US"),[l,a]=(0,c.useState)(0),[_,i]=(0,te.O)(!1),u=(0,c.useMemo)(()=>ve(e,r),[e,r]),d=u.results?u.results[Math.min(l,u.results.length-1)]:void 0,E=(t=u.results)==null?void 0:t.length,h=m=>{if(m){if(E!==void 0){const f=Math.min(l-1,E-2);a(f<0?E-1:f)}}else if(E!==void 0){const f=l+1;a(f>=E?0:f)}};return{lines:_?u.lines:e,searchText:r,searchInput:n,setSearchInput:s,shouldFilter:_,toggleShouldFilter:i,resultCount:E,resultIndex:l,resultIndexStep:h,resultLine:d==null?void 0:d.lineNumber,resultLineIndex:d==null?void 0:d.lineIndex}}function Le(e){const t=(0,S.h_)(S.VE),[n,s]=(0,c.useState)(),r=n?Math.min(n.start,n.end):void 0,l=n?Math.max(n.start,n.end):void 0,[{error:a},_]=(0,ne.Z)();return(0,c.useEffect)(()=>{a&&t.post(a)},[a,t]),{shouldShowButton(i){return r===i||l===i},isSelected(i){return n?r<=i&&i<=l:!1},setSelection(i,u){s(u?d=>d?{start:d.start,end:i}:{start:i,end:i}:d=>(d==null?void 0:d.start)===i&&(d==null?void 0:d.end)===i?void 0:{start:i,end:i})},copySelection(){if(n){const i=e.slice(Math.min(n.start,n.end)-1,Math.max(n.start,n.end)).map(u=>u.chunks.map(d=>d.text).join("")).join(`
`);_(i),s(void 0)}}}}function Be(e){const t=De({classes:e.classes}),n=(0,c.useRef)(null),r=(0,c.useMemo)(()=>new he,[]).process(e.text),l=Ce(r),a=Le(r),_=(0,j.TH)();(0,c.useEffect)(()=>{l.resultLine!==void 0&&n.current&&n.current.scrollToItem(l.resultLine-1,"center")},[l.resultLine]),(0,c.useEffect)(()=>{if(_.hash){const u=parseInt(_.hash.replace(/\D/g,""),10);a.setSelection(u,!1)}},[]);const i=(u,d)=>{a.setSelection(u,d.shiftKey)};return c.createElement(H.ZP,null,({height:u,width:d})=>c.createElement(v.Z,{style:{width:d,height:u},className:t.root},c.createElement(v.Z,{className:t.header},c.createElement(Oe,{...l})),c.createElement(V.t7,{ref:n,className:t.log,height:(u||480)-N,width:d||640,itemData:l.lines,itemSize:20,itemCount:l.lines.length},({index:E,style:h,data:m})=>{const f=m[E],{lineNumber:g}=f;return c.createElement(v.Z,{style:{...h},className:B()(t.line,{[t.lineSelected]:a.isSelected(g)})},a.shouldShowButton(g)&&c.createElement(P.Z,{"data-testid":"copy-button",size:"small",className:t.lineCopyButton,onClick:()=>a.copySelection()},c.createElement(z.Z,{fontSize:"inherit"})),c.createElement("a",{role:"row",target:"_self",href:`#line-${g}`,className:t.lineNumber,onClick:D=>i(g,D),onKeyPress:D=>i(g,D)},g),c.createElement(Pe,{line:f,classes:t,searchText:l.searchText,highlightResultIndex:l.resultLine===g?l.resultLineIndex:void 0}))})))}}}]);})();

//# sourceMappingURL=1639.bab9fb6d.chunk.js.map