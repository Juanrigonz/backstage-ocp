{"version":3,"file":"static/module-backstage.0b66f2c9.js","mappings":"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CA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,CACD,CACD,CACD,EACIC,GAAuB,CAC1B,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,EACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,CACb,EAEIE,GAAY,yCACZC,GAAQ,SACRC,GAAgB,yEAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,GAAS,SACTC,GAAa,CAChB,aACA,OACA,UACD,EACIC,GAAyB,GACzBC,GAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,YACP,EACA,KAAM,CACL,KAAM,SACN,YAAa,sDACd,EACA,UAAW,CACV,KAAM,QACN,YAAa,0DACb,MAAO,CACN,KAAM,iBACP,CACD,EACA,OAAQ,CACP,KAAM,eACP,CACD,EACIC,GAAe,CAClB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,aACRC,GAAgB,0DAChBC,GAAa,CAChB,CACC,IAAK,uCACL,KAAM,2BACN,KAAM,mBACN,UAAW,gBACX,OAAQ,CACP,sBAAuB,YACxB,EACA,YAAa,CACZ,uBAAwB,YACzB,EACA,KAAM,CACL,OACA,MACD,CACD,CACD,EACIC,GAAS,SACTC,GAAW,CACd,MACD,EACIC,GAAuB,GACvBC,GAAa,CAChB,IAAK,CACJ,KAAM,SACN,YAAa,iXACb,SAAU,CACT,sCACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,mbACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,iHACb,SAAU,CACT,oBACD,EACA,UAAW,CACZ,EACA,YAAa,CACZ,KAAM,SACN,YAAa,kFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,YAAa,CACZ,KAAM,SACN,YAAa,mFACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,kNACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,KACD,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,+BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,iBACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,UACA,gBACA,OACA,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,EACIC,GAAmB,CACtB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,KAAMC,GACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,SACRvF,GAAO,SACPwF,EAAgB,kDAChBC,GAAc,CACjB,UAAW,CACV,IAAK,aACL,KAAM,SACN,YAAa,yCACb,SAAU,CACT,OACA,YACA,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gCACb,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,8CACb,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACb,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,IAAK,YACL,KAAM,SACN,YAAa,kDACb,SAAU,CACT,OACA,WACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,EACX,QAAS,SACT,YAAa,uBACd,EACA,OAAQ,CACP,KAAM,aACN,WAAY,EACb,EACA,UAAW,CACV,KAAM,SACN,UAAW,EACX,YAAa,gDACd,CACD,CACD,EACA,OAAQ,CACP,IAAK,UACL,KAAM,SACN,YAAa,mEACb,SAAU,CACV,EACA,qBAAsB,GACtB,WAAY,CACX,MAAO,CACN,KAAM,QACN,MAAO,CACN,KAAM,aACP,CACD,CACD,CACD,EACA,WAAY,CACX,IAAK,cACL,KAAM,SACN,YAAa,iDACb,SAAU,CACT,OACA,QACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,CACZ,EACA,MAAO,CACN,KAAM,eACN,YAAa,iDACd,EACA,QAAS,CACR,KAAM,SACN,YAAa,wEACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,4DACd,CACD,CACD,EACA,YAAa,CACZ,IAAK,eACL,KAAM,SACN,YAAa,6BACb,KAAQ,CACP,OACA,UACA,OACD,CACD,EACA,MAAO,CACN,IAAK,SACL,KAAM,SACN,YAAa,6BACb,SAAU,CACT,OACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,SAAU,CACT,QACA,YACD,EACA,YAAa,6BACb,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,0BACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,sBACd,CAC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ACD,CACD,CACD,CACD,EACIC,EAAW,CACd,QAASL,EACT,IAAKC,EACL,YAAaC,GACb,SAAUC,EACV,MAAOC,CACR,EAEA,SAASE,GAA+B3D,GAAQ,CAC9C,IAAIkC,EACJ,MAAO,CACL,MAAM,MAAMlB,EAAM,CAChB,OAAKkB,IACHA,EAAYjB,EAA0BjB,EAAM,GAEvCkC,EAAUlB,CAAI,IAAMA,CAC7B,CACF,CACF,CAEA,MAAM4C,GAA6BD,GAA+BD,CAAQ,EAE1E,IAAIG,GAAY,yCACZC,GAAQ,oBACRC,GAAgB,4PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,WACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,YACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,yBACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,wCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,mEACb,UAAW,CACZ,EACA,eAAgB,CACf,KAAM,SACN,YAAa,6EACb,UAAW,CACZ,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,UAAW,CACV,KAAM,QACN,YAAa,sFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAmCR,GAA+BO,EAAQ,EAEhF,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,kJAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,UACN,YAAa,0BACd,EACA,KAAM,CACL,MAAO,uBACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCf,GAA+Bc,EAAQ,EAE7E,IAAIE,GAAY,yCACZC,GAAQ,gBACRC,GAAgB,kNAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,QACN,SAAU,CACT,KAAM,iBACN,YAAa,yBACd,EACA,KAAM,CACL,KAAM,gBACN,QAAS,CACR,YAAa,iBACb,MAAO,6BACP,QAAS,mDACV,EACA,OAAQ,MACR,SAAU,CACT,YACA,OACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,OACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,UACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,2LACb,SAAU,CACT,OACA,gBACA,eACA,MACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,uYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,4BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,mDACb,SAAU,CACT,mDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,4NACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,SAAU,CACT,KAAM,QACN,YAAa,mSACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,YACA,OACD,EACA,UAAW,CACZ,CACD,EACA,QAAS,CACR,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,MACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAA+BtB,GAA+BqB,EAAQ,EAE5E,IAAIE,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,gFAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,UACP,EACA,KAAM,CACL,KAAM,MACN,QAAS,CACR,0EACA,+EACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gLACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6NACb,SAAU,CACT,6BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,QACN,YAAa,sOACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,8BACA,yEACD,EACA,UAAW,CACZ,CACD,EACA,SAAU,CACT,KAAM,SACN,YAAa,sHACb,QAAW,WACX,SAAU,CACT,UACD,EACA,KAAQ,CACP,WACA,UACD,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkC7B,GAA+B4B,EAAQ,EAEzEE,GAAoB,UACpBC,GAAoB,UACpBC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAwB,cACxBC,GAA2B,gBAC3BC,GAAsB,YACtBC,GAAyB,eACzBC,GAAqB,WACrBC,GAAoB,UACpBC,GAAqB,WACrBC,GAAsB,YACtBC,GAAmB,SACnBC,GAAoB,UAE1B,IAAIC,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,8PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,aACN,YAAa,uBACd,EACA,KAAM,CACL,KAAM,WACN,MAAO,wBACP,OAAQ,0BACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,wBACb,SAAU,CACT,WACA,YACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,oDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,QACN,YAAa,qFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,kEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkClD,GAA+BiD,EAAQ,EAE/E,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,uXAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,2BACN,YAAa,yCACd,EACA,KAAM,CACL,MAAO,wBACP,OAAQ,SACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,gEACb,SAAU,CACT,SACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCzD,GAA+BwD,EAAQ,EAE7E,IAAIE,GAAU,yCACVC,GAAM,eACNC,GAAc,8SACdC,GAAW,CACd,CACC,WAAY,wBACZ,KAAM,OACN,SAAU,CACT,KAAM,MACP,EACA,KAAM,CACL,QAAS,CACR,YAAa,YACb,MAAO,wBACP,QAAS,qDACV,EACA,SAAU,CACT,SACA,WACD,CACD,CACD,CACD,EACIC,GAAQ,CACX,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,MACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,UACD,EACA,WAAY,CACX,QAAS,CACR,KAAM,SACN,YAAa,wYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,WACD,EACA,UAAW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,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,+YACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,4CACb,UAAW,CACZ,EACA,WAAY,CACX,MAAO,CACN,CACC,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,EACA,CACC,KAAM,QACN,YAAa,kDACb,MAAO,CACN,KAAM,SACN,YAAa,yDACb,WAAY,CACX,wBAAyB,CACxB,KAAM,SACN,YAAa,4CACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,CACD,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,8BACb,MAAO,CACN,KAAM,SACN,YAAa,wCACb,SAAU,CACT,QACD,EACA,WAAY,CACX,GAAI,CACH,KAAM,SACN,YAAa,gEACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,oCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,yDACd,EACA,GAAM,CACL,KAAM,CACL,SACA,SACD,EACA,YAAa,gOACd,EACA,wBAAyB,CACxB,KAAM,SACN,YAAa,uCACb,WAAY,CACX,KAAM,CACL,KAAM,QACN,MAAO,CACN,KAAM,QACP,CACD,CACD,CACD,CACD,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,WAAY,CACX,MAAO,CACN,KAAM,QACN,YAAa,oGACb,MAAO,CACN,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,uCACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,mDACb,SAAU,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","sources":["webpack://app/../../node_modules/@backstage/theme/dist/index.esm.js","webpack://app/../../node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-client/dist/index.esm.js","webpack://app/../../node_modules/@backstage/catalog-model/dist/index.esm.js","webpack://app/../../node_modules/@backstage/config/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/esm/usePluginOptions-68e31f9f.esm.js","webpack://app/../../node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/../../node_modules/@backstage/errors/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/integration/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-api-docs/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-common/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-graph/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-import/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/alpha.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/esm/useEntity-de64059a.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useMountEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useSyncedRef/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useUnmountEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useDebouncedCallback/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/node_modules/@react-hookz/web/esm/useDebouncedEffect/index.js","webpack://app/../../node_modules/@backstage/plugin-catalog-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-catalog/dist/esm/index-54253ffe.esm.js","webpack://app/../../node_modules/@backstage/plugin-github-actions/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-home-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-home/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-jenkins-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-jenkins/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-org/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-common/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/esm/ref-6fdfc121.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/TaskPage-e70ca2f8.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/TemplateTypePicker-efec8c34.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/esm/plugin-e86ee6a1.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-scaffolder/node_modules/event-source-polyfill/src/eventsource.js","webpack://app/../../node_modules/@backstage/plugin-search-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-search/dist/esm/index-625b4401.esm.js","webpack://app/../../node_modules/@backstage/plugin-tech-radar/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-module-addons-contrib/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs-react/dist/index.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/index-8bf02c1c.esm.js","webpack://app/../../node_modules/@backstage/plugin-user-settings/dist/index.esm.js","webpack://app/../../node_modules/@backstage/version-bridge/dist/index.esm.js"],"sourcesContent":["import { createTheme as createTheme$2, createGenerateClassName, StylesProvider, ThemeProvider } from '@material-ui/core/styles';\nimport { darken, lighten, createTheme as createTheme$1, adaptV4Theme, StyledEngineProvider, ThemeProvider as ThemeProvider$1 } from '@mui/material/styles';\nimport React from 'react';\nimport { unstable_ClassNameGenerator } from '@mui/material/className';\nimport { CssBaseline } from '@material-ui/core';\n\nconst __v5Spacing = (defaultSpacing) => (...argsInput) => {\n  const args = argsInput.length === 0 ? [1] : argsInput;\n  const transform = (argument, themeSpacing) => {\n    if (typeof argument === \"string\") {\n      return argument;\n    }\n    return themeSpacing * argument;\n  };\n  return args.map((argument) => {\n    const output = transform(argument, defaultSpacing);\n    return typeof output === \"number\" ? `${output}px` : output;\n  }).join(\" \");\n};\nfunction adaptV5CssBaselineOverride(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  const styles = typeof overrides === \"function\" ? overrides(theme) : overrides;\n  if (styles) {\n    return { \"@global\": styles };\n  }\n  return void 0;\n}\nfunction adaptV5Override(theme, overrides) {\n  if (!overrides || typeof overrides === \"string\") {\n    return void 0;\n  }\n  if (typeof overrides === \"object\") {\n    const _theme = { ...theme };\n    const defaultSpacing = theme.spacing(1);\n    if (typeof defaultSpacing === \"number\") {\n      _theme.spacing = __v5Spacing(defaultSpacing);\n    }\n    return Object.fromEntries(\n      Object.entries(overrides).map(([className, style]) => {\n        if (typeof style === \"function\") {\n          return [className, style({ theme: _theme })];\n        }\n        return [className, style];\n      })\n    );\n  }\n  return overrides;\n}\nconst stateStyleKeyPattern = /^&.Mui-([\\w-]+)$/;\nfunction extractV5StateOverrides(overrides) {\n  let output = overrides;\n  if (!overrides || typeof overrides !== \"object\") {\n    return output;\n  }\n  for (const className of Object.keys(overrides)) {\n    const styles = overrides[className];\n    if (!styles || typeof styles !== \"object\") {\n      continue;\n    }\n    for (const _styleKey of Object.keys(styles)) {\n      const styleKey = _styleKey;\n      const match = styleKey.match(stateStyleKeyPattern);\n      if (match) {\n        const [, state] = match;\n        const { [styleKey]: stateStyles, ...restStyles } = styles;\n        if (stateStyles) {\n          output = {\n            ...output,\n            [className]: restStyles,\n            [state]: stateStyles\n          };\n        }\n      }\n    }\n  }\n  return output;\n}\nfunction transformV5ComponentThemesToV4(theme, components = {}) {\n  const overrides = {};\n  const props = {};\n  for (const name of Object.keys(components)) {\n    const component = components[name];\n    if (!component) {\n      continue;\n    }\n    if (\"styleOverrides\" in component) {\n      if (name === \"MuiCssBaseline\") {\n        overrides[name] = adaptV5CssBaselineOverride(\n          theme,\n          component.styleOverrides\n        );\n      } else {\n        overrides[name] = extractV5StateOverrides(\n          adaptV5Override(theme, component.styleOverrides)\n        );\n      }\n    }\n    if (\"defaultProps\" in component) {\n      props[name] = component.defaultProps;\n    }\n  }\n  return { overrides, props };\n}\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"],\n  greens: [\"#4BB8A5\", \"#187656\"]\n};\nfunction genPageTheme(props) {\n  var _a;\n  const { colors, shape, options } = props;\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  const fontColor = (_a = options == null ? void 0 : options.fontColor) != null ? _a : \"#FFFFFF\";\n  return {\n    colors,\n    shape,\n    backgroundImage,\n    fontColor\n  };\n}\nconst pageTheme = {\n  home: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave }),\n  documentation: genPageTheme({\n    colors: colorVariants.pinkSea,\n    shape: shapes.wave2\n  }),\n  tool: genPageTheme({ colors: colorVariants.purpleSky, shape: shapes.round }),\n  service: genPageTheme({\n    colors: colorVariants.marineBlue,\n    shape: shapes.wave\n  }),\n  website: genPageTheme({ colors: colorVariants.veryBlue, shape: shapes.wave }),\n  library: genPageTheme({ colors: colorVariants.rubyRed, shape: shapes.wave }),\n  other: genPageTheme({ colors: colorVariants.darkGrey, shape: shapes.wave }),\n  app: genPageTheme({ colors: colorVariants.toastyOrange, shape: shapes.wave }),\n  apis: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave2 }),\n  card: genPageTheme({ colors: colorVariants.greens, shape: shapes.wave })\n};\n\nconst DEFAULT_HTML_FONT_SIZE = 16;\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nconst DEFAULT_PAGE_THEME = \"home\";\nfunction createBaseThemeOptions(options) {\n  const {\n    palette,\n    htmlFontSize = DEFAULT_HTML_FONT_SIZE,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme = DEFAULT_PAGE_THEME,\n    pageTheme: pageTheme$1 = pageTheme,\n    typography\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  const defaultTypography = {\n    htmlFontSize,\n    fontFamily,\n    h1: {\n      fontSize: 54,\n      fontWeight: 700,\n      marginBottom: 10\n    },\n    h2: {\n      fontSize: 40,\n      fontWeight: 700,\n      marginBottom: 8\n    },\n    h3: {\n      fontSize: 32,\n      fontWeight: 700,\n      marginBottom: 6\n    },\n    h4: {\n      fontWeight: 700,\n      fontSize: 28,\n      marginBottom: 6\n    },\n    h5: {\n      fontWeight: 700,\n      fontSize: 24,\n      marginBottom: 4\n    },\n    h6: {\n      fontWeight: 700,\n      fontSize: 20,\n      marginBottom: 2\n    }\n  };\n  return {\n    palette,\n    typography: typography != null ? typography : defaultTypography,\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\n\nconst defaultComponentThemes = {\n  MuiCssBaseline: {\n    styleOverrides: (theme) => ({\n      html: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily\n      },\n      body: {\n        height: \"100%\",\n        fontFamily: theme.typography.fontFamily,\n        overscrollBehaviorY: \"none\",\n        fontSize: \"0.875rem\",\n        lineHeight: 1.43\n      },\n      a: {\n        color: \"inherit\",\n        textDecoration: \"none\"\n      }\n    })\n  },\n  MuiGrid: {\n    defaultProps: {\n      spacing: 2\n    }\n  },\n  MuiSwitch: {\n    defaultProps: {\n      color: \"primary\"\n    }\n  },\n  MuiTableRow: {\n    styleOverrides: {\n      // Alternating row backgrounds\n      root: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      }),\n      // Use pointer for hoverable rows\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      // Alternating head backgrounds\n      head: ({ theme }) => ({\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      })\n    }\n  },\n  // Tables are more dense than default mui tables\n  MuiTableCell: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      }),\n      sizeSmall: ({ theme }) => ({\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      }),\n      head: ({ theme }) => ({\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        color: theme.palette.textSubtle,\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      })\n    }\n  },\n  MuiTabs: {\n    styleOverrides: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24\n      }\n    }\n  },\n  MuiTab: {\n    styleOverrides: {\n      // Tabs are smaller and have a hover background\n      root: ({ theme }) => ({\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      }),\n      textColorPrimary: ({ theme }) => ({\n        color: theme.palette.link\n      })\n    }\n  },\n  MuiTableSortLabel: {\n    styleOverrides: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        },\n        \"&:focus\": {\n          color: \"inherit\"\n        },\n        // Bold font for highlighting selected column\n        \"&.Mui-active\": {\n          fontWeight: \"bold\",\n          color: \"inherit\"\n        }\n      }\n    }\n  },\n  MuiListItemText: {\n    styleOverrides: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    }\n  },\n  MuiButton: {\n    styleOverrides: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: void 0\n      }\n    }\n  },\n  MuiChip: {\n    styleOverrides: {\n      root: ({ theme }) => ({\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1)\n      }),\n      label: ({ theme }) => ({\n        lineHeight: theme.spacing(2.5),\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: theme.spacing(1.75)\n      }),\n      labelSmall: ({ theme }) => ({\n        fontSize: theme.spacing(1.5)\n      }),\n      deleteIcon: ({ theme }) => ({\n        width: theme.spacing(3),\n        height: theme.spacing(3),\n        margin: theme.spacing(0, 0.75, 0, -0.75)\n      }),\n      deleteIconSmall: ({ theme }) => ({\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        margin: theme.spacing(0, 0.5, 0, -0.5)\n      })\n    }\n  },\n  MuiCard: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    }\n  },\n  MuiCardHeader: {\n    styleOverrides: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0\n      }\n    }\n  },\n  MuiCardContent: {\n    styleOverrides: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    }\n  },\n  MuiCardActions: {\n    styleOverrides: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: \"flex-end\"\n      }\n    }\n  },\n  MuiLink: {\n    defaultProps: {\n      underline: \"hover\"\n    }\n  }\n};\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _themes;\nclass UnifiedThemeHolder {\n  constructor(v4, v5) {\n    __privateAdd(this, _themes, /* @__PURE__ */ new Map());\n    __privateSet(this, _themes, /* @__PURE__ */ new Map());\n    if (v4) {\n      __privateGet(this, _themes).set(\"v4\", v4);\n    }\n    if (v5) {\n      __privateGet(this, _themes).set(\"v5\", v5);\n    }\n  }\n  getTheme(version) {\n    return __privateGet(this, _themes).get(version);\n  }\n}\n_themes = new WeakMap();\nfunction createUnifiedTheme(options) {\n  const themeOptions = createBaseThemeOptions(options);\n  const components = { ...defaultComponentThemes, ...options.components };\n  const v5Theme = createTheme$1({ ...themeOptions, components });\n  const v4Overrides = transformV5ComponentThemesToV4(v5Theme, components);\n  const v4Theme = { ...createTheme$2(themeOptions), ...v4Overrides };\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\nfunction createUnifiedThemeFromV4(options) {\n  const v5Theme = adaptV4Theme(options);\n  const v4Theme = createTheme$2(options);\n  return new UnifiedThemeHolder(v4Theme, v5Theme);\n}\n\nconst palettes = {\n  light: {\n    type: \"light\",\n    mode: \"light\",\n    background: {\n      default: \"#F8F8F8\",\n      paper: \"#FFFFFF\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#1F5493\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#1F5493\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  dark: {\n    type: \"dark\",\n    mode: \"dark\",\n    background: {\n      default: \"#333333\",\n      paper: \"#424242\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: \"#FFD600\",\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  }\n};\n\nconst themes = {\n  light: createUnifiedTheme({ palette: palettes.light }),\n  dark: createUnifiedTheme({ palette: palettes.dark })\n};\n\nunstable_ClassNameGenerator.configure((componentName) => {\n  return `v5-${componentName}`;\n});\n\nconst generateV4ClassName = createGenerateClassName({\n  productionPrefix: \"jss4-\"\n});\nfunction UnifiedThemeProvider(props) {\n  const { children, theme, noCssBaseline = false } = props;\n  const v4Theme = theme.getTheme(\"v4\");\n  const v5Theme = theme.getTheme(\"v5\");\n  let cssBaseline = void 0;\n  if (!noCssBaseline) {\n    cssBaseline = /* @__PURE__ */ React.createElement(CssBaseline, null);\n  }\n  let result = /* @__PURE__ */ React.createElement(React.Fragment, null, cssBaseline, children);\n  if (v4Theme) {\n    result = /* @__PURE__ */ React.createElement(StylesProvider, { generateClassName: generateV4ClassName }, /* @__PURE__ */ React.createElement(ThemeProvider, { theme: v4Theme }, result));\n  }\n  if (v5Theme) {\n    result = /* @__PURE__ */ React.createElement(StyledEngineProvider, { injectFirst: true }, /* @__PURE__ */ React.createElement(ThemeProvider$1, { theme: v5Theme }, result));\n  }\n  return result;\n}\n\nfunction createThemeOptions(options) {\n  var _a, _b, _c, _d;\n  return {\n    props: {\n      MuiGrid: (_b = (_a = defaultComponentThemes) == null ? void 0 : _a.MuiGrid) == null ? void 0 : _b.defaultProps,\n      MuiSwitch: (_d = (_c = defaultComponentThemes) == null ? void 0 : _c.MuiSwitch) == null ? void 0 : _d.defaultProps\n    },\n    ...createBaseThemeOptions(options)\n  };\n}\nfunction createThemeOverrides(theme) {\n  return transformV5ComponentThemesToV4(\n    // Safe but we have to make sure we don't use mui5 specific stuff in the default component themes\n    theme,\n    defaultComponentThemes\n  ).overrides;\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$2(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: palettes.light\n});\nconst darkTheme = createTheme({\n  palette: palettes.dark\n});\n\nexport { UnifiedThemeProvider, colorVariants, createBaseThemeOptions, createTheme, createThemeOptions, createThemeOverrides, createUnifiedTheme, createUnifiedThemeFromV4, darkTheme, defaultComponentThemes, genPageTheme, lightTheme, pageTheme, palettes, shapes, themes, transformV5ComponentThemesToV4 };\n//# sourceMappingURL=index.esm.js.map\n","import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, BitbucketServerAuth, AtlassianAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, bitbucketServerAuthApiRef, atlassianAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport MuiWorkIcon from '@material-ui/icons/Work';\nimport { UnifiedThemeProvider, themes as themes$1 } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(\n      `${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`\n    )\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketServerAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketServerAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"REPO_READ\"]\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        configApi,\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, { status: \"501\", statusMessage: message }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n      defaultExpanded: true,\n      error\n    },\n    /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", onClick: resetError }, \"Retry\")\n  );\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  \"kind:resource\": MuiWorkIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.light, children })\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(UnifiedThemeProvider, { theme: themes$1.dark, children })\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c, _d;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    featureFlags: (_c = options == null ? void 0 : options.featureFlags) != null ? _c : [],\n    themes: (_d = options == null ? void 0 : options.themes) != null ? _d : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyLocationRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\n\nconst CATALOG_FILTER_EXISTS = Symbol.for(\n  // Random UUID to ensure no collisions\n  \"CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111\"\n);\n\nfunction isQueryEntitiesInitialRequest(request) {\n  return !request.cursor;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityAncestors}\n   */\n  async getEntityAncestors(request, options) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}/ancestry`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationById}\n   */\n  async getLocationById(id, options) {\n    return await this.requestOptional(\n      \"GET\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntities}\n   */\n  async getEntities(request, options) {\n    const {\n      filter = [],\n      fields = [],\n      order,\n      offset,\n      limit,\n      after\n    } = request != null ? request : {};\n    const params = this.getParams(filter);\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n    }\n    if (order) {\n      for (const directive of [order].flat()) {\n        if (directive) {\n          params.push(\n            `order=${encodeURIComponent(directive.order)}:${encodeURIComponent(\n              directive.field\n            )}`\n          );\n        }\n      }\n    }\n    if (offset !== void 0) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== void 0) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== void 0) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    const entities = await this.requestRequired(\n      \"GET\",\n      `/entities${query}`,\n      options\n    );\n    const refCompare = (a, b) => {\n      var _a, _b;\n      if (((_a = a.metadata) == null ? void 0 : _a.name) === void 0 || a.kind === void 0 || ((_b = b.metadata) == null ? void 0 : _b.name) === void 0 || b.kind === void 0) {\n        return 0;\n      }\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n    return { items: entities.sort(refCompare) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntitiesByRefs}\n   */\n  async getEntitiesByRefs(request, options) {\n    var _a;\n    const body = { entityRefs: request.entityRefs };\n    if ((_a = request.fields) == null ? void 0 : _a.length) {\n      body.fields = request.fields;\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"catalog\");\n    const url = `${baseUrl}/entities/by-refs`;\n    const response = await this.fetchApi.fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { items } = await response.json();\n    return { items: items.map((i) => i != null ? i : void 0) };\n  }\n  /**\n   * {@inheritdoc CatalogApi.queryEntities}\n   */\n  async queryEntities(request = {}, options) {\n    var _a, _b;\n    const params = [];\n    if (isQueryEntitiesInitialRequest(request)) {\n      const {\n        fields = [],\n        filter,\n        limit,\n        orderFields,\n        fullTextFilter\n      } = request;\n      params.push(...this.getParams(filter));\n      if (limit !== void 0) {\n        params.push(`limit=${limit}`);\n      }\n      if (orderFields !== void 0) {\n        (Array.isArray(orderFields) ? orderFields : [orderFields]).forEach(\n          ({ field, order }) => params.push(`orderField=${field},${order}`)\n        );\n      }\n      if (fields.length) {\n        params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n      }\n      const normalizedFullTextFilterTerm = (_a = fullTextFilter == null ? void 0 : fullTextFilter.term) == null ? void 0 : _a.trim();\n      if (normalizedFullTextFilterTerm) {\n        params.push(`fullTextFilterTerm=${normalizedFullTextFilterTerm}`);\n      }\n      if ((_b = fullTextFilter == null ? void 0 : fullTextFilter.fields) == null ? void 0 : _b.length) {\n        params.push(`fullTextFilterFields=${fullTextFilter.fields.join(\",\")}`);\n      }\n    } else {\n      const { fields = [], limit, cursor } = request;\n      params.push(`cursor=${cursor}`);\n      if (limit !== void 0) {\n        params.push(`limit=${limit}`);\n      }\n      if (fields.length) {\n        params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n      }\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return this.requestRequired(\n      \"GET\",\n      `/entities/by-query${query}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityByRef}\n   */\n  async getEntityByRef(entityRef, options) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  // NOTE(freben): When we deprecate getEntityByName from the interface, we may\n  // still want to leave this implementation in place for quite some time\n  // longer, to minimize the risk for breakages. Suggested date for removal:\n  // August 2022\n  /**\n   * @deprecated Use getEntityByRef instead\n   */\n  async getEntityByName(compoundName, options) {\n    const { kind, namespace = \"default\", name } = compoundName;\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.refreshEntity}\n   */\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/refresh`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entityRef })\n      }\n    );\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n  /**\n   * {@inheritdoc CatalogApi.getEntityFacets}\n   */\n  async getEntityFacets(request, options) {\n    const { filter = [], facets } = request;\n    const params = this.getParams(filter);\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return await this.requestOptional(\"GET\", `/entity-facets${query}`, options);\n  }\n  /**\n   * {@inheritdoc CatalogApi.addLocation}\n   */\n  async addLocation(request, options) {\n    const { type = \"url\", target, dryRun } = request;\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/locations${dryRun ? \"?dryRun=true\" : \"\"}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ type, target })\n      }\n    );\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n    const { location, entities, exists } = await response.json();\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n    return {\n      location,\n      entities,\n      exists\n    };\n  }\n  /**\n   * {@inheritdoc CatalogApi.getLocationByRef}\n   */\n  async getLocationByRef(locationRef, options) {\n    const all = await this.requestRequired(\n      \"GET\",\n      \"/locations\",\n      options\n    );\n    return all.map((r) => r.data).find((l) => locationRef === stringifyLocationRef(l));\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeLocationById}\n   */\n  async removeLocationById(id, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.removeEntityByUid}\n   */\n  async removeEntityByUid(uid, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/entities/by-uid/${encodeURIComponent(uid)}`,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc CatalogApi.validateEntity}\n   */\n  async validateEntity(entity, locationRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/validate-entity`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entity, location: locationRef })\n      }\n    );\n    if (response.ok) {\n      return {\n        valid: true\n      };\n    }\n    if (response.status !== 400) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { errors = [] } = await response.json();\n    return {\n      valid: false,\n      errors\n    };\n  }\n  //\n  // Private methods\n  //\n  async requestIgnored(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async requestRequired(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  async requestOptional(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      if (response.status === 404) {\n        return void 0;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  getParams(filter = []) {\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`\n            );\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    return params;\n  }\n}\n\nconst ENTITY_STATUS_CATALOG_PROCESSING_TYPE = \"backstage.io/catalog-processing\";\n\nexport { CATALOG_FILTER_EXISTS, CatalogClient, ENTITY_STATUS_CATALOG_PROCESSING_TYPE };\n//# sourceMappingURL=index.esm.js.map\n","import lodash from 'lodash';\nimport Ajv from 'ajv';\n\nfunction isApiEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"API\";\n}\nfunction isComponentEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"COMPONENT\";\n}\nfunction isDomainEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"DOMAIN\";\n}\nfunction isGroupEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"GROUP\";\n}\nfunction isLocationEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"LOCATION\";\n}\nfunction isResourceEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"RESOURCE\";\n}\nfunction isSystemEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"SYSTEM\";\n}\nfunction isUserEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"USER\";\n}\n\nconst DEFAULT_NAMESPACE = \"default\";\nconst ANNOTATION_VIEW_URL = \"backstage.io/view-url\";\nconst ANNOTATION_EDIT_URL = \"backstage.io/edit-url\";\nconst ANNOTATION_KUBERNETES_API_SERVER = \"kubernetes.io/api-server\";\nconst ANNOTATION_KUBERNETES_API_SERVER_CA = \"kubernetes.io/api-server-certificate-authority\";\nconst ANNOTATION_KUBERNETES_AUTH_PROVIDER = \"kubernetes.io/auth-provider\";\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultNamespaceEntityPolicy {\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    __publicField$4(this, \"namespace\");\n    this.namespace = namespace;\n  }\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n\nfunction parseRefString(ref) {\n  let colonI = ref.indexOf(\":\");\n  const slashI = ref.indexOf(\"/\");\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n  const kind = colonI === -1 ? void 0 : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? void 0 : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n  if (kind === \"\" || namespace === \"\" || name === \"\") {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`\n    );\n  }\n  return { kind, namespace, name };\n}\nfunction getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\nfunction parseEntityRef(ref, context) {\n  var _a, _b, _c, _d;\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n  const defaultKind = context == null ? void 0 : context.defaultKind;\n  const defaultNamespace = (context == null ? void 0 : context.defaultNamespace) || DEFAULT_NAMESPACE;\n  let kind;\n  let namespace;\n  let name;\n  if (typeof ref === \"string\") {\n    const parsed = parseRefString(ref);\n    kind = (_a = parsed.kind) != null ? _a : defaultKind;\n    namespace = (_b = parsed.namespace) != null ? _b : defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = (_c = ref.kind) != null ? _c : defaultKind;\n    namespace = (_d = ref.namespace) != null ? _d : defaultNamespace;\n    name = ref.name;\n  }\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n  return { kind, namespace, name };\n}\nfunction stringifyEntityRef(ref) {\n  var _a, _b;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in ref) {\n    kind = ref.kind;\n    namespace = (_a = ref.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = (_b = ref.namespace) != null ? _b : DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n  return `${kind.toLocaleLowerCase(\"en-US\")}:${namespace.toLocaleLowerCase(\n    \"en-US\"\n  )}/${name.toLocaleLowerCase(\"en-US\")}`;\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GroupDefaultParentEntityPolicy {\n  constructor(parentEntityRef) {\n    __publicField$3(this, \"parentRef\");\n    const { kind, namespace, name } = parseEntityRef(parentEntityRef, {\n      defaultKind: \"Group\",\n      defaultNamespace: DEFAULT_NAMESPACE\n    });\n    if (kind.toLocaleUpperCase(\"en-US\") !== \"GROUP\") {\n      throw new TypeError(\"group parent must be a group\");\n    }\n    this.parentRef = stringifyEntityRef({\n      kind,\n      namespace,\n      name\n    });\n  }\n  async enforce(entity) {\n    if (entity.kind !== \"Group\") {\n      return entity;\n    }\n    const group = entity;\n    if (group.spec.parent) {\n      return group;\n    }\n    if (stringifyEntityRef(group) !== this.parentRef) {\n      group.spec.parent = this.parentRef;\n    }\n    return group;\n  }\n}\n\nclass CommonValidatorFunctions {\n  /**\n   * Checks that the value is on the form `<suffix>` or `<prefix><separator><suffix>`, and validates\n   * those parts separately.\n   *\n   * @param value - The value to check\n   * @param separator - The separator between parts\n   * @param isValidPrefix - Checks that the part before the separator is valid, if present\n   * @param isValidSuffix - Checks that the part after the separator (or the entire value if there is no separator) is valid\n   */\n  static isValidPrefixAndOrSuffix(value, separator, isValidPrefix, isValidSuffix) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n    return false;\n  }\n  /**\n   * Checks that the value can be safely transferred as JSON.\n   *\n   * @param value - The value to check\n   */\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a valid DNS subdomain name.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsSubdomain(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 253 && value.split(\".\").every(CommonValidatorFunctions.isValidDnsLabel);\n  }\n  /**\n   * Checks that the value is a valid DNS label.\n   *\n   * @param value - The value to check\n   * @see https://tools.ietf.org/html/rfc1123\n   */\n  static isValidDnsLabel(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9]+(?:\\-+[a-z0-9]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid tag.\n   *\n   * @deprecated This will be removed in a future release\n   * @param value - The value to check\n   */\n  static isValidTag(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value);\n  }\n  /**\n   * Checks that the value is a valid string URL.\n   *\n   * @param value - The value to check\n   */\n  static isValidUrl(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    try {\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Checks that the value is a non empty string value.\n   *\n   * @deprecated use isNonEmptyString instead\n   * @param value - The value to check\n   */\n  static isValidString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n  /**\n   * Checks that the value is a string value that's not empty.\n   *\n   * @param value - The value to check\n   */\n  static isNonEmptyString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n}\n\nvar $schema$b = \"http://json-schema.org/draft-07/schema\";\nvar $id$b = \"EntityEnvelope\";\nvar description$b = \"The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.\";\nvar examples$a = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\"\n\t\t}\n\t}\n];\nvar type$3 = \"object\";\nvar required$2 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$2 = true;\nvar properties$2 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"metadata-proxy\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\t\t\"default\": \"default\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"default\",\n\t\t\t\t\t\"admin\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityEnvelopeSchema = {\n\t$schema: $schema$b,\n\t$id: $id$b,\n\tdescription: description$b,\n\texamples: examples$a,\n\ttype: type$3,\n\trequired: required$2,\n\tadditionalProperties: additionalProperties$2,\n\tproperties: properties$2\n};\n\nvar $schema$a = \"http://json-schema.org/draft-07/schema\";\nvar $id$a = \"Entity\";\nvar description$a = \"The parts of the format that's common to all versions/kinds of entity.\";\nvar examples$9 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar type$2 = \"object\";\nvar required$1 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$1 = false;\nvar properties$1 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\t$ref: \"EntityMeta\"\n\t},\n\tspec: {\n\t\ttype: \"object\",\n\t\tdescription: \"The specification data describing the entity itself.\"\n\t},\n\trelations: {\n\t\ttype: \"array\",\n\t\tdescription: \"The relations that this entity has with other entities.\",\n\t\titems: {\n\t\t\t$ref: \"common#relation\"\n\t\t}\n\t},\n\tstatus: {\n\t\t$ref: \"common#status\"\n\t}\n};\nvar entitySchema = {\n\t$schema: $schema$a,\n\t$id: $id$a,\n\tdescription: description$a,\n\texamples: examples$9,\n\ttype: type$2,\n\trequired: required$1,\n\tadditionalProperties: additionalProperties$1,\n\tproperties: properties$1\n};\n\nvar $schema$9 = \"http://json-schema.org/draft-07/schema\";\nvar $id$9 = \"EntityMeta\";\nvar description$9 = \"Metadata fields common to all versions/kinds of entity.\";\nvar examples$8 = [\n\t{\n\t\tuid: \"e01199ab-08cc-44c2-8e19-5c29ded82521\",\n\t\tetag: \"lsndfkjsndfkjnsdfkjnsd==\",\n\t\tname: \"my-component-yay\",\n\t\tnamespace: \"the-namespace\",\n\t\tlabels: {\n\t\t\t\"backstage.io/custom\": \"ValueStuff\"\n\t\t},\n\t\tannotations: {\n\t\t\t\"example.com/bindings\": \"are-secret\"\n\t\t},\n\t\ttags: [\n\t\t\t\"java\",\n\t\t\t\"data\"\n\t\t]\n\t}\n];\nvar type$1 = \"object\";\nvar required = [\n\t\"name\"\n];\nvar additionalProperties = true;\nvar properties = {\n\tuid: {\n\t\ttype: \"string\",\n\t\tdescription: \"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.\",\n\t\texamples: [\n\t\t\t\"e01199ab-08cc-44c2-8e19-5c29ded82521\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tetag: {\n\t\ttype: \"string\",\n\t\tdescription: \"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.\",\n\t\texamples: [\n\t\t\t\"lsndfkjsndfkjnsdfkjnsd==\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tname: {\n\t\ttype: \"string\",\n\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\texamples: [\n\t\t\t\"metadata-proxy\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tnamespace: {\n\t\ttype: \"string\",\n\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\"default\": \"default\",\n\t\texamples: [\n\t\t\t\"default\",\n\t\t\t\"admin\"\n\t\t],\n\t\tminLength: 1\n\t},\n\ttitle: {\n\t\ttype: \"string\",\n\t\tdescription: \"A display name of the entity, to be presented in user interfaces instead of the name property, when available.\",\n\t\texamples: [\n\t\t\t\"React SSR Template\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tdescription: {\n\t\ttype: \"string\",\n\t\tdescription: \"A short (typically relatively few words, on one line) description of the entity.\"\n\t},\n\tlabels: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of identifying information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\tannotations: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of non-identifying auxiliary information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\ttags: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of single-valued strings, to for example classify catalog entities in various ways.\",\n\t\titems: {\n\t\t\ttype: \"string\",\n\t\t\tminLength: 1\n\t\t}\n\t},\n\tlinks: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.\",\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\t\"url\"\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"https://admin.example-org.com\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"Admin Dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"An optional value to categorize links into specific groups.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"runbook\",\n\t\t\t\t\t\t\"documentation\",\n\t\t\t\t\t\t\"logs\",\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityMetaSchema = {\n\t$schema: $schema$9,\n\t$id: $id$9,\n\tdescription: description$9,\n\texamples: examples$8,\n\ttype: type$1,\n\trequired: required,\n\tadditionalProperties: additionalProperties,\n\tproperties: properties\n};\n\nvar $schema$8 = \"http://json-schema.org/draft-07/schema\";\nvar $id$8 = \"common\";\nvar type = \"object\";\nvar description$8 = \"Common definitions to import from other schemas\";\nvar definitions = {\n\treference: {\n\t\t$id: \"#reference\",\n\t\ttype: \"object\",\n\t\tdescription: \"A reference by name to another entity.\",\n\t\trequired: [\n\t\t\t\"kind\",\n\t\t\t\"namespace\",\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\tkind: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The kind field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.namespace field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.name field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t},\n\trelation: {\n\t\t$id: \"#relation\",\n\t\ttype: \"object\",\n\t\tdescription: \"A directed relation from one entity to another.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"targetRef\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tpattern: \"^\\\\w+$\",\n\t\t\t\tdescription: \"The type of relation.\"\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\t$ref: \"#reference\",\n\t\t\t\tdeprecated: true\n\t\t\t},\n\t\t\ttargetRef: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tdescription: \"The entity ref of the target of this relation.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatus: {\n\t\t$id: \"#status\",\n\t\ttype: \"object\",\n\t\tdescription: \"The current status of the entity, as claimed by various sources.\",\n\t\trequired: [\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\titems: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\t$ref: \"#statusItem\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tstatusItem: {\n\t\t$id: \"#statusItem\",\n\t\ttype: \"object\",\n\t\tdescription: \"A specific status item on a well known format.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"level\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\t$ref: \"#statusLevel\",\n\t\t\t\tdescription: \"The status level / severity of the status item.\"\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"A brief message describing the status, intended for human consumption.\"\n\t\t\t},\n\t\t\terror: {\n\t\t\t\t$ref: \"#error\",\n\t\t\t\tdescription: \"An optional serialized error object related to the status.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatusLevel: {\n\t\t$id: \"#statusLevel\",\n\t\ttype: \"string\",\n\t\tdescription: \"A status level / severity.\",\n\t\t\"enum\": [\n\t\t\t\"info\",\n\t\t\t\"warning\",\n\t\t\t\"error\"\n\t\t]\n\t},\n\terror: {\n\t\t$id: \"#error\",\n\t\ttype: \"object\",\n\t\tdescription: \"A serialized error object.\",\n\t\trequired: [\n\t\t\t\"name\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"Error\",\n\t\t\t\t\t\"InputError\"\n\t\t\t\t],\n\t\t\t\tdescription: \"The type name of the error\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The message of the error\"\n\t\t\t},\n\t\t\tcode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error code associated with the error\"\n\t\t\t},\n\t\t\tstack: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error stack trace\"\n\t\t\t}\n\t\t}\n\t}\n};\nvar commonSchema = {\n\t$schema: $schema$8,\n\t$id: $id$8,\n\ttype: type,\n\tdescription: description$8,\n\tdefinitions: definitions\n};\n\nconst compiledSchemaCache = /* @__PURE__ */ new Map();\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema\n];\nfunction throwAjvError(errors) {\n  if (!(errors == null ? void 0 : errors.length)) {\n    throw new TypeError(\"Unknown error\");\n  }\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || \"<root>\"} ${error.message}${error.params ? ` - ${Object.entries(error.params).map(([key, val]) => `${key}: ${val}`).join(\", \")}` : \"\"}`\n  );\n}\nfunction compileAjvSchema(schema, options = {}) {\n  var _a;\n  const disableCache = (_a = options == null ? void 0 : options.disableCache) != null ? _a : false;\n  const cacheKey = disableCache ? \"\" : JSON.stringify(schema);\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, void 0, void 0, true);\n  }\n  const compiled = ajv.compile(schema);\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n  return compiled;\n}\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== \"object\") {\n    return [];\n  }\n  const seen = /* @__PURE__ */ new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n  const selected = new Array();\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n        const match = refDependencyCandidates.find((c) => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n  return selected;\n}\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === \"object\" && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === \"$ref\" && typeof value === \"string\") {\n          yield value.split(\"#\")[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n\nfunction entityEnvelopeSchemaValidator(schema) {\n  const validate = compileAjvSchema(\n    schema ? schema : entityEnvelopeSchema\n  );\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entityKindSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema);\n  return (data) => {\n    var _a;\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    const softCandidates = (_a = validate.errors) == null ? void 0 : _a.filter(\n      (e) => [\"/kind\", \"/apiVersion\"].includes(e.instancePath)\n    );\n    if ((softCandidates == null ? void 0 : softCandidates.length) && softCandidates.every((e) => e.keyword === \"enum\")) {\n      return false;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entitySchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entitySchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nclass KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      (n) => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n)\n    );\n  }\n  static isValidKind(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-zA-Z][a-z0-9A-Z]*$/.test(value);\n  }\n  static isValidObjectName(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value);\n  }\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidLabelValue(value) {\n    return value === \"\" || KubernetesValidatorFunctions.isValidObjectName(value);\n  }\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidAnnotationValue(value) {\n    return typeof value === \"string\";\n  }\n}\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value);\n  }\n};\nfunction makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides\n  };\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass FieldFormatEntityPolicy {\n  constructor(validators = makeValidator()) {\n    __publicField$2(this, \"validators\");\n    this.validators = validators;\n  }\n  async enforce(entity) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    function require2(field, value, validator) {\n      if (value === void 0 || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n      if (!isValid) {\n        let expectation;\n        switch (validator.name) {\n          case \"isValidLabelValue\":\n          case \"isValidObjectName\":\n            expectation = \"a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total\";\n            break;\n          case \"isValidLabelKey\":\n          case \"isValidApiVersion\":\n          case \"isValidAnnotationKey\":\n            expectation = \"a valid prefix and/or suffix\";\n            break;\n          case \"isValidNamespace\":\n          case \"isValidDnsLabel\":\n            expectation = \"a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidTag\":\n            expectation = \"a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidAnnotationValue\":\n            expectation = \"a string\";\n            break;\n          case \"isValidKind\":\n            expectation = \"a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total\";\n            break;\n          case \"isValidUrl\":\n            expectation = \"a string that is a valid url\";\n            break;\n          case \"isValidString\":\n          case \"isNonEmptyString\":\n            expectation = \"a non empty string\";\n            break;\n          default:\n            expectation = void 0;\n            break;\n        }\n        const message = expectation ? ` expected ${expectation} but found \"${value}\".` : \"\";\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`\n        );\n      }\n    }\n    function optional(field, value, validator) {\n      return value === void 0 || require2(field, value, validator);\n    }\n    require2(\"apiVersion\", entity.apiVersion, this.validators.isValidApiVersion);\n    require2(\"kind\", entity.kind, this.validators.isValidKind);\n    require2(\"metadata.name\", entity.metadata.name, this.validators.isValidEntityName);\n    optional(\n      \"metadata.namespace\",\n      entity.metadata.namespace,\n      this.validators.isValidNamespace\n    );\n    for (const [k, v] of Object.entries((_a = entity.metadata.labels) != null ? _a : [])) {\n      require2(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require2(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n    for (const [k, v] of Object.entries((_b = entity.metadata.annotations) != null ? _b : [])) {\n      require2(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require2(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n    const tags = (_c = entity.metadata.tags) != null ? _c : [];\n    for (let i = 0; i < tags.length; ++i) {\n      require2(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n    const links = (_d = entity.metadata.links) != null ? _d : [];\n    for (let i = 0; i < links.length; ++i) {\n      require2(`links.${i}.url`, (_e = links[i]) == null ? void 0 : _e.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        (_f = links[i]) == null ? void 0 : _f.title,\n        CommonValidatorFunctions.isNonEmptyString\n      );\n      optional(\n        `links.${i}.icon`,\n        (_g = links[i]) == null ? void 0 : _g.icon,\n        KubernetesValidatorFunctions.isValidObjectName\n      );\n    }\n    return entity;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst defaultKnownFields = [\"apiVersion\", \"kind\", \"metadata\", \"spec\"];\nclass NoForeignRootFieldsEntityPolicy {\n  constructor(knownFields = defaultKnownFields) {\n    __publicField$1(this, \"knownFields\");\n    this.knownFields = knownFields;\n  }\n  async enforce(entity) {\n    for (const field of Object.keys(entity)) {\n      if (!this.knownFields.includes(field)) {\n        throw new Error(`Unknown field ${field}`);\n      }\n    }\n    return entity;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SchemaValidEntityPolicy {\n  constructor() {\n    __publicField(this, \"validate\");\n  }\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv.addSchema([commonSchema, entityMetaSchema], void 0, void 0, true).compile(entitySchema);\n    }\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || \"<root>\"} ${error.message}`\n    );\n  }\n}\n\nclass AllEntityPolicies {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\nclass AnyEntityPolicy {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\nconst EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  }\n};\n\nvar $schema$7 = \"http://json-schema.org/draft-07/schema\";\nvar $id$7 = \"ApiV1alpha1\";\nvar description$7 = \"An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.\";\nvar examples$7 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"API\",\n\t\tmetadata: {\n\t\t\tname: \"artist-api\",\n\t\t\tdescription: \"Retrieve artist details\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"openapi\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\",\n\t\t\tdefinition: \"openapi: \\\"3.0.0\\\"\\ninfo:...\"\n\t\t}\n\t}\n];\nvar allOf$7 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"API\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\",\n\t\t\t\t\t\"definition\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of the API definition.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"openapi\",\n\t\t\t\t\t\t\t\"asyncapi\",\n\t\t\t\t\t\t\t\"graphql\",\n\t\t\t\t\t\t\t\"grpc\",\n\t\t\t\t\t\t\t\"trpc\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the API belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdefinition: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The definition of the API, based on the format defined by the type.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$7 = {\n\t$schema: $schema$7,\n\t$id: $id$7,\n\tdescription: description$7,\n\texamples: examples$7,\n\tallOf: allOf$7\n};\n\nfunction ajvCompiledJsonSchemaValidator(schema) {\n  let validator;\n  return {\n    async check(data) {\n      if (!validator) {\n        validator = entityKindSchemaValidator(schema);\n      }\n      return validator(data) === data;\n    }\n  };\n}\n\nconst apiEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$7);\n\nvar $schema$6 = \"http://json-schema.org/draft-07/schema\";\nvar $id$6 = \"ComponentV1alpha1\";\nvar description$6 = \"A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a \\\"unit of software\\\", usually with a distinct deployable or linkable artifact.\";\nvar examples$6 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar allOf$6 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Component\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the component belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsubcomponentOf: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to another component of which the component is a part.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprovidesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are provided by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tconsumesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are consumed by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the component depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$6 = {\n\t$schema: $schema$6,\n\t$id: $id$6,\n\tdescription: description$6,\n\texamples: examples$6,\n\tallOf: allOf$6\n};\n\nconst componentEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$6);\n\nvar $schema$5 = \"http://json-schema.org/draft-07/schema\";\nvar $id$5 = \"DomainV1alpha1\";\nvar description$5 = \"A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.\";\nvar examples$5 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Domain\",\n\t\tmetadata: {\n\t\t\tname: \"artists\",\n\t\t\tdescription: \"Everything about artists\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\"\n\t\t}\n\t}\n];\nvar allOf$5 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Domain\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$5 = {\n\t$schema: $schema$5,\n\t$id: $id$5,\n\tdescription: description$5,\n\texamples: examples$5,\n\tallOf: allOf$5\n};\n\nconst domainEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$5);\n\nvar $schema$4 = \"http://json-schema.org/draft-07/schema\";\nvar $id$4 = \"GroupV1alpha1\";\nvar description$4 = \"A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.\";\nvar examples$4 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Group\",\n\t\tmetadata: {\n\t\t\tname: \"infrastructure\",\n\t\t\tdescription: \"The infra business unit\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"business-unit\",\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Infrastructure\",\n\t\t\t\temail: \"infrastructure@example.com\",\n\t\t\t\tpicture: \"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t},\n\t\t\tparent: \"ops\",\n\t\t\tchildren: [\n\t\t\t\t\"backstage\",\n\t\t\t\t\"other\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$4 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Group\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"children\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"team\",\n\t\t\t\t\t\t\t\"business-unit\",\n\t\t\t\t\t\t\t\"product-area\",\n\t\t\t\t\t\t\t\"root\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Infrastructure\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this entity can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"infrastructure@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this entity.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparent: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"ops\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"backstage\",\n\t\t\t\t\t\t\t\t\"other\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmembers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The users that are members of this group. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"jdoe\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$4 = {\n\t$schema: $schema$4,\n\t$id: $id$4,\n\tdescription: description$4,\n\texamples: examples$4,\n\tallOf: allOf$4\n};\n\nconst groupEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$4);\n\nvar $schema$3 = \"http://json-schema.org/draft-07/schema\";\nvar $id$3 = \"LocationV1alpha1\";\nvar description$3 = \"A location is a marker that references other places to look for catalog data.\";\nvar examples$3 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Location\",\n\t\tmetadata: {\n\t\t\tname: \"org-data\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"url\",\n\t\t\ttargets: [\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\",\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$3 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Location\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"url\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"./details/catalog-info.yaml\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttargets: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"./details/catalog-info.yaml\",\n\t\t\t\t\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tpresence: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Whether the presence of the location target is required and it should be considered an error if it can not be found\",\n\t\t\t\t\t\t\"default\": \"required\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"required\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"required\",\n\t\t\t\t\t\t\t\"optional\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$3 = {\n\t$schema: $schema$3,\n\t$id: $id$3,\n\tdescription: description$3,\n\texamples: examples$3,\n\tallOf: allOf$3\n};\n\nconst locationEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$3);\n\nconst RELATION_OWNED_BY = \"ownedBy\";\nconst RELATION_OWNER_OF = \"ownerOf\";\nconst RELATION_CONSUMES_API = \"consumesApi\";\nconst RELATION_API_CONSUMED_BY = \"apiConsumedBy\";\nconst RELATION_PROVIDES_API = \"providesApi\";\nconst RELATION_API_PROVIDED_BY = \"apiProvidedBy\";\nconst RELATION_DEPENDS_ON = \"dependsOn\";\nconst RELATION_DEPENDENCY_OF = \"dependencyOf\";\nconst RELATION_PARENT_OF = \"parentOf\";\nconst RELATION_CHILD_OF = \"childOf\";\nconst RELATION_MEMBER_OF = \"memberOf\";\nconst RELATION_HAS_MEMBER = \"hasMember\";\nconst RELATION_PART_OF = \"partOf\";\nconst RELATION_HAS_PART = \"hasPart\";\n\nvar $schema$2 = \"http://json-schema.org/draft-07/schema\";\nvar $id$2 = \"ResourceV1alpha1\";\nvar description$2 = \"A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.\";\nvar examples$2 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Resource\",\n\t\tmetadata: {\n\t\t\tname: \"artists-db\",\n\t\t\tdescription: \"Stores artist details\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"database\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\"\n\t\t}\n\t}\n];\nvar allOf$2 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Resource\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"database\",\n\t\t\t\t\t\t\t\"s3-bucket\",\n\t\t\t\t\t\t\t\"cluster\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the resource depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the resource belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$2 = {\n\t$schema: $schema$2,\n\t$id: $id$2,\n\tdescription: description$2,\n\texamples: examples$2,\n\tallOf: allOf$2\n};\n\nconst resourceEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$2);\n\nvar $schema$1 = \"http://json-schema.org/draft-07/schema\";\nvar $id$1 = \"SystemV1alpha1\";\nvar description$1 = \"A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.\";\nvar examples$1 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"System\",\n\t\tmetadata: {\n\t\t\tname: \"artist-engagement-portal\",\n\t\t\tdescription: \"Handy tools to keep artists in the loop\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tdomain: \"artists\"\n\t\t}\n\t}\n];\nvar allOf$1 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"System\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdomain: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the domain that the system belongs to.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artists\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$1 = {\n\t$schema: $schema$1,\n\t$id: $id$1,\n\tdescription: description$1,\n\texamples: examples$1,\n\tallOf: allOf$1\n};\n\nconst systemEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$1);\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"UserV1alpha1\";\nvar description = \"A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"User\",\n\t\tmetadata: {\n\t\t\tname: \"jdoe\"\n\t\t},\n\t\tspec: {\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Jenny Doe\",\n\t\t\t\temail: \"jenny-doe@example.com\",\n\t\t\t\tpicture: \"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t},\n\t\t\tmemberOf: [\n\t\t\t\t\"team-b\",\n\t\t\t\t\"employees\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"User\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"memberOf\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Jenny Doe\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this user can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"jenny-doe@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this user.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmemberOf: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"team-b\",\n\t\t\t\t\t\t\t\t\"employees\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst userEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema);\n\nconst ANNOTATION_LOCATION = \"backstage.io/managed-by-location\";\nconst ANNOTATION_ORIGIN_LOCATION = \"backstage.io/managed-by-origin-location\";\nconst ANNOTATION_SOURCE_LOCATION = \"backstage.io/source-location\";\n\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nfunction parseLocationRef(ref) {\n  if (typeof ref !== \"string\") {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`\n    );\n  }\n  const splitIndex = ref.indexOf(\":\");\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  if (type === \"http\" || type === \"https\") {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`\n    );\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${ref}', target is a javascript: URL`\n    );\n  }\n  return { type, target };\n}\nfunction stringifyLocationRef(ref) {\n  const { type, target } = ref;\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n  if (scriptProtocolPattern.test(target)) {\n    throw new TypeError(\n      `Invalid location ref '${type}:${target}', target is a javascript: URL`\n    );\n  }\n  return `${type}:${target}`;\n}\nfunction getEntitySourceLocation(entity) {\n  var _a, _b, _c, _d, _e;\n  const locationRef = (_e = (_b = (_a = entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[ANNOTATION_SOURCE_LOCATION]) != null ? _e : (_d = (_c = entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`\n    );\n  }\n  return parseLocationRef(locationRef);\n}\n\nexport { ANNOTATION_EDIT_URL, ANNOTATION_KUBERNETES_API_SERVER, ANNOTATION_KUBERNETES_API_SERVER_CA, ANNOTATION_KUBERNETES_AUTH_PROVIDER, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION, ANNOTATION_SOURCE_LOCATION, ANNOTATION_VIEW_URL, CommonValidatorFunctions, DEFAULT_NAMESPACE, DefaultNamespaceEntityPolicy, EntityPolicies, FieldFormatEntityPolicy, GroupDefaultParentEntityPolicy, KubernetesValidatorFunctions, NoForeignRootFieldsEntityPolicy, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_CHILD_OF, RELATION_CONSUMES_API, RELATION_DEPENDENCY_OF, RELATION_DEPENDS_ON, RELATION_HAS_MEMBER, RELATION_HAS_PART, RELATION_MEMBER_OF, RELATION_OWNED_BY, RELATION_OWNER_OF, RELATION_PARENT_OF, RELATION_PART_OF, RELATION_PROVIDES_API, SchemaValidEntityPolicy, apiEntityV1alpha1Validator, componentEntityV1alpha1Validator, domainEntityV1alpha1Validator, entityEnvelopeSchemaValidator, entityKindSchemaValidator, entitySchemaValidator, getCompoundEntityRef, getEntitySourceLocation, groupEntityV1alpha1Validator, isApiEntity, isComponentEntity, isDomainEntity, isGroupEntity, isLocationEntity, isResourceEntity, isSystemEntity, isUserEntity, locationEntityV1alpha1Validator, makeValidator, parseEntityRef, parseLocationRef, resourceEntityV1alpha1Validator, stringifyEntityRef, stringifyLocationRef, systemEntityV1alpha1Validator, userEntityV1alpha1Validator };\n//# sourceMappingURL=index.esm.js.map\n","import cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    this.notifiedFilteredKeys = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"boolean\" || typeof val === \"number\" || typeof val === \"string\" || { expected: \"boolean\" }\n    );\n    if (typeof value === \"boolean\" || value === void 0) {\n      return value;\n    }\n    const valueString = String(value).trim();\n    if (/^(?:y|yes|true|1|on)$/i.test(valueString)) {\n      return true;\n    }\n    if (/^(?:n|no|false|0|off)$/i.test(valueString)) {\n      return false;\n    }\n    throw new Error(errors.convert(this.fullKey(key), this.context, \"boolean\"));\n  }\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, createContext, useEffect, useState, Children, isValidElement, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, AnalyticsContext, useAnalytics, useApp, useApi, configApiRef, getComponentData, attachComponentData, featureFlagsApiRef, appThemeApiRef, identityApiRef, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { createRoutesFromChildren, Route, useLocation, matchRoutes, Routes, generatePath, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport useObservable from 'react-use/lib/useObservable';\n\nvar __defProp$l = Object.defineProperty;\nvar __defNormalProp$l = (obj, key, value) => key in obj ? __defProp$l(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$l = (obj, key, value) => {\n  __defNormalProp$l(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiAggregator {\n  constructor(...holders) {\n    __publicField$l(this, \"holders\");\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(\n    ApiContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: holder }),\n      children\n    }\n  );\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nvar __defProp$k = Object.defineProperty;\nvar __defNormalProp$k = (obj, key, value) => key in obj ? __defProp$k(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$k = (obj, key, value) => {\n  __defNormalProp$k(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    __publicField$k(this, \"apis\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar __defProp$j = Object.defineProperty;\nvar __defNormalProp$j = (obj, key, value) => key in obj ? __defProp$j(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$j = (obj, key, value) => {\n  __defNormalProp$j(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    __publicField$j(this, \"factories\", /* @__PURE__ */ new Map());\n  }\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nvar __defProp$i = Object.defineProperty;\nvar __defNormalProp$i = (obj, key, value) => key in obj ? __defProp$i(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$i = (obj, key, value) => {\n  __defNormalProp$i(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nlet warned$1 = false;\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    __publicField$i(this, \"discoveryApi\");\n    __publicField$i(this, \"environment\");\n    __publicField$i(this, \"provider\");\n    __publicField$i(this, \"joinScopesFunc\");\n    __publicField$i(this, \"authRequester\");\n    __publicField$i(this, \"sessionTransform\");\n    __publicField$i(this, \"enableExperimentalRedirectFlow\");\n    __publicField$i(this, \"popupOptions\");\n    var _a;\n    const {\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id,\n      popupOptions\n    } = options;\n    if (!warned$1 && !configApi) {\n      console.warn(\n        \"DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor.\"\n      );\n      warned$1 = true;\n    }\n    this.enableExperimentalRedirectFlow = configApi ? (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false : false;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: async (scopes) => {\n        if (!this.enableExperimentalRedirectFlow) {\n          return this.showPopup(scopes);\n        }\n        return this.executeRedirect(scopes);\n      }\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n    this.popupOptions = popupOptions;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      if (this.enableExperimentalRedirectFlow) {\n        return this.executeRedirect(options.scopes);\n      }\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession(scopes) {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", {\n        optional: true,\n        ...scopes && { scope: this.joinScopesFunc(scopes) }\n      }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      flow: \"popup\"\n    });\n    const width = ((_b = (_a = this.popupOptions) == null ? void 0 : _a.size) == null ? void 0 : _b.fullscreen) ? window.screen.width : ((_d = (_c = this.popupOptions) == null ? void 0 : _c.size) == null ? void 0 : _d.width) || 450;\n    const height = ((_f = (_e = this.popupOptions) == null ? void 0 : _e.size) == null ? void 0 : _f.fullscreen) ? window.screen.height : ((_h = (_g = this.popupOptions) == null ? void 0 : _g.size) == null ? void 0 : _h.height) || 730;\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width,\n      height\n    });\n    return await this.sessionTransform(payload);\n  }\n  async executeRedirect(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    window.location.href = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      redirectUrl: window.location.href,\n      flow: \"redirect\"\n    });\n    return new Promise(() => {\n    });\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nvar __defProp$h = Object.defineProperty;\nvar __defNormalProp$h = (obj, key, value) => key in obj ? __defProp$h(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$h = (obj, key, value) => {\n  __defNormalProp$h(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DirectAuthConnector {\n  constructor(options) {\n    __publicField$h(this, \"discoveryApi\");\n    __publicField$h(this, \"environment\");\n    __publicField$h(this, \"provider\");\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nvar __defProp$g = Object.defineProperty;\nvar __defNormalProp$g = (obj, key, value) => key in obj ? __defProp$g(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$g = (obj, key, value) => {\n  __defNormalProp$g(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PublishSubject {\n  constructor() {\n    __publicField$g(this, \"isClosed\", false);\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\", new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    __publicField$g(this, \"isClosed\");\n    __publicField$g(this, \"currentValue\");\n    __publicField$g(this, \"terminatingError\");\n    __publicField$g(this, \"observable\");\n    __publicField$g(this, \"subscribers\", /* @__PURE__ */ new Set());\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nvar __defProp$f = Object.defineProperty;\nvar __defNormalProp$f = (obj, key, value) => key in obj ? __defProp$f(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$f = (obj, key, value) => {\n  __defNormalProp$f(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SessionStateTracker {\n  constructor() {\n    __publicField$f(this, \"subject\", new BehaviorSubject(\n      SessionState.SignedOut\n    ));\n    __publicField$f(this, \"signedIn\", false);\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$e = Object.defineProperty;\nvar __defNormalProp$e = (obj, key, value) => key in obj ? __defProp$e(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$e = (obj, key, value) => {\n  __defNormalProp$e(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    __publicField$e(this, \"connector\");\n    __publicField$e(this, \"helper\");\n    __publicField$e(this, \"sessionScopesFunc\");\n    __publicField$e(this, \"sessionShouldRefreshFunc\");\n    __publicField$e(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$e(this, \"refreshPromise\");\n    __publicField$e(this, \"currentSession\");\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh(\n          options.scopes\n        );\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh(options.scopes);\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh(scopes) {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession(scopes);\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nvar __defProp$d = Object.defineProperty;\nvar __defNormalProp$d = (obj, key, value) => key in obj ? __defProp$d(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$d = (obj, key, value) => {\n  __defNormalProp$d(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass StaticAuthSessionManager {\n  constructor(options) {\n    __publicField$d(this, \"connector\");\n    __publicField$d(this, \"helper\");\n    __publicField$d(this, \"stateTracker\", new SessionStateTracker());\n    __publicField$d(this, \"currentSession\");\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AuthSessionStore {\n  constructor(options) {\n    __publicField$c(this, \"manager\");\n    __publicField$c(this, \"storageKey\");\n    __publicField$c(this, \"schema\");\n    __publicField$c(this, \"sessionShouldRefreshFunc\");\n    __publicField$c(this, \"helper\");\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$a = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  constructor(options) {\n    __publicField$b(this, \"sessionManager\");\n    __publicField$b(this, \"scopeTransform\");\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$a,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x,\n      popupOptions\n    } = options;\n    const connector = new DefaultAuthConnector({\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1e3\n            )\n          }\n        };\n      },\n      popupOptions\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec = (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3;\n        return expiresInSec < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: /* @__PURE__ */ new Set([\"openid\"])\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$5 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULT_PROVIDER$4 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nconst _MicrosoftAuth = class _MicrosoftAuth {\n  constructor(options) {\n    __publicField$a(this, \"oauth2\");\n    __publicField$a(this, \"configApi\");\n    __publicField$a(this, \"environment\");\n    __publicField$a(this, \"provider\");\n    __publicField$a(this, \"oauthRequestApi\");\n    __publicField$a(this, \"discoveryApi\");\n    __publicField$a(this, \"scopeTransform\");\n    const {\n      configApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ],\n      scopeTransform = (scopes) => scopes.concat(\"offline_access\")\n    } = options;\n    this.configApi = configApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.oauthRequestApi = oauthRequestApi;\n    this.discoveryApi = discoveryApi;\n    this.scopeTransform = scopeTransform;\n    this.oauth2 = {\n      [_MicrosoftAuth.MicrosoftGraphID]: OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform,\n        defaultScopes\n      })\n    };\n  }\n  static create(options) {\n    return new _MicrosoftAuth(options);\n  }\n  microsoftGraph() {\n    return this.oauth2[_MicrosoftAuth.MicrosoftGraphID];\n  }\n  static resourceForScopes(scope) {\n    var _a;\n    const audiences = [\n      ...new Set(\n        scope.split(\" \").map(_MicrosoftAuth.resourceForScope).filter((aud) => aud !== \"openid\")\n      )\n    ];\n    if (audiences.length > 1) {\n      return Promise.reject(\n        new Error(\n          `Requested access token with scopes from multiple Azure resources: ${audiences.join(\n            \", \"\n          )}. Access tokens can only have a single audience.`\n        )\n      );\n    }\n    const audience = (_a = audiences[0]) != null ? _a : _MicrosoftAuth.MicrosoftGraphID;\n    return Promise.resolve(audience);\n  }\n  static resourceForScope(scope) {\n    var _a;\n    const groups = (_a = scope.match(/^(?<resourceURI>.*)\\/(?<scp>[^\\/]*)$/)) == null ? void 0 : _a.groups;\n    if (groups) {\n      const { resourceURI } = groups;\n      const aud = resourceURI.replace(/^api:\\/\\//, \"\");\n      return aud;\n    }\n    switch (scope) {\n      case \"email\":\n      case \"openid\":\n      case \"offline_access\":\n      case \"profile\": {\n        return \"openid\";\n      }\n      default:\n        return _MicrosoftAuth.MicrosoftGraphID;\n    }\n  }\n  async getAccessToken(scope, options) {\n    const aud = scope === void 0 ? _MicrosoftAuth.MicrosoftGraphID : await _MicrosoftAuth.resourceForScopes(\n      Array.isArray(scope) ? scope.join(\" \") : scope\n    );\n    if (!(aud in this.oauth2)) {\n      this.oauth2[aud] = OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform\n      });\n    }\n    return this.oauth2[aud].getAccessToken(scope, options);\n  }\n  getIdToken(options) {\n    return this.microsoftGraph().getIdToken(options);\n  }\n  getProfile(options) {\n    return this.microsoftGraph().getProfile(options);\n  }\n  getBackstageIdentity(options) {\n    return this.microsoftGraph().getBackstageIdentity(options);\n  }\n  signIn() {\n    return this.microsoftGraph().signIn();\n  }\n  signOut() {\n    return this.microsoftGraph().signOut();\n  }\n  sessionState$() {\n    return this.microsoftGraph().sessionState$();\n  }\n};\n__publicField$a(_MicrosoftAuth, \"MicrosoftGraphID\", \"00000003-0000-0000-c000-000000000000\");\nlet MicrosoftAuth = _MicrosoftAuth;\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi,\n      defaultScopes = [\"team\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"bitbucketServer\",\n  title: \"Bitbucket Server\",\n  icon: () => null\n};\nclass BitbucketServerAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi,\n      defaultScopes = [\"PROJECT_ADMIN\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass AlertApiForwarder {\n  constructor() {\n    __publicField$9(this, \"subject\", new PublishSubject());\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst STORAGE_KEY = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    __publicField$8(this, \"activeThemeId\");\n    __publicField$8(this, \"subject\", new BehaviorSubject(void 0));\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(encodeURIComponent(pluginId));\n  }\n}\n\nclass FrontendHostDiscovery {\n  constructor(endpoints, defaultEndpoint) {\n    this.endpoints = endpoints;\n    this.defaultEndpoint = defaultEndpoint;\n  }\n  /**\n   * Creates a new FrontendHostDiscovery discovery instance by reading\n   * the external target URL from the `discovery.endpoints` config section.\n   *\n   * eg.\n   * ```yaml\n   * discovery:\n   *  endpoints:\n   *    - target: https://internal.example.com/internal-catalog\n   *      plugins: [catalog]\n   *    - target: https://internal.example.com/secure/api/{{pluginId}}\n   *      plugins: [auth, permissions]\n   *    - target:\n   *        internal: https://internal.example.com/search\n   *        external: https://example.com/search\n   *      plugins: [search]\n   * ```\n   *\n   * If a plugin is not declared in the config, the discovery will fall back to using the baseUrl with\n   * the provided `pathPattern` appended. The default path pattern is `\"/api/{{ pluginId }}\"`.\n   */\n  static fromConfig(config, options) {\n    var _a, _b;\n    const path = (_a = options == null ? void 0 : options.pathPattern) != null ? _a : \"/api/{{ pluginId }}\";\n    const baseUrl = config.getString(\"backend.baseUrl\");\n    const endpoints = (_b = config.getOptionalConfigArray(\"discovery.endpoints\")) == null ? void 0 : _b.flatMap((e) => {\n      const target = typeof e.get(\"target\") === \"object\" ? e.getString(\"target.external\") : e.getString(\"target\");\n      const discovery = UrlPatternDiscovery.compile(target);\n      return e.getStringArray(\"plugins\").map((pluginId) => [pluginId, discovery]);\n    });\n    return new FrontendHostDiscovery(\n      new Map(endpoints),\n      UrlPatternDiscovery.compile(`${baseUrl}${path}`)\n    );\n  }\n  async getBaseUrl(pluginId) {\n    const endpoint = this.endpoints.get(pluginId);\n    if (endpoint) {\n      return endpoint.getBaseUrl(pluginId);\n    }\n    return this.defaultEndpoint.getBaseUrl(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ErrorApiForwarder {\n  constructor() {\n    __publicField$7(this, \"subject\", new PublishSubject());\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    __publicField$6(this, \"registeredFeatureFlags\", []);\n    __publicField$6(this, \"flags\");\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    __publicField$5(this, \"requests\", []);\n    __publicField$5(this, \"subject\", new BehaviorSubject(\n      this.getCurrentPending()\n    ));\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass OAuthRequestManager {\n  constructor() {\n    __publicField$4(this, \"subject\", new BehaviorSubject([]));\n    __publicField$4(this, \"currentRequests\", []);\n    __publicField$4(this, \"handlerCount\", 0);\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst buckets = /* @__PURE__ */ new Map();\nconst _WebStorage = class _WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    __publicField$3(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$3(this, \"observable\", new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  static create(options) {\n    var _a;\n    return new _WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  static addStorageEventListener() {\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      for (const [bucketPath, webStorage] of buckets.entries()) {\n        if ((_a = event.key) == null ? void 0 : _a.startsWith(bucketPath)) {\n          webStorage.handleStorageChange(event.key);\n        }\n      }\n    });\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new _WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    if (!_WebStorage.hasSubscribed) {\n      _WebStorage.addStorageEventListener();\n      _WebStorage.hasSubscribed = true;\n    }\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  handleStorageChange(eventKey) {\n    if (!(eventKey == null ? void 0 : eventKey.startsWith(this.namespace))) {\n      return;\n    }\n    const trimmedKey = eventKey == null ? void 0 : eventKey.slice(`${this.namespace}/`.length);\n    if (!trimmedKey.includes(\"/\")) {\n      this.notifyChanges(decodeURIComponent(trimmedKey));\n    }\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n};\n__publicField$3(_WebStorage, \"hasSubscribed\", false);\nlet WebStorage = _WebStorage;\n\nconst InternalAppContext = createContext(void 0);\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\n\nconst getExtensionContext = (pathname, routes) => {\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeMatch = matches == null ? void 0 : matches.filter((match) => {\n      var _a;\n      return ((_a = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a.size) > 0;\n    }).pop();\n    const routeObject = routeMatch == null ? void 0 : routeMatch.route;\n    if (!routeObject) {\n      return void 0;\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    let plugin;\n    if (routeObject.plugins.size === 1) {\n      plugin = routeObject.plugins.values().next().value;\n    }\n    const params = Object.entries(\n      (routeMatch == null ? void 0 : routeMatch.params) || {}\n    ).reduce((acc, [key, value]) => {\n      if (value !== void 0) {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n    return {\n      extension: \"App\",\n      pluginId: (plugin == null ? void 0 : plugin.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {},\n      _routeNodeType: routeObject.element,\n      params\n    };\n  } catch {\n    return void 0;\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n  attributes\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`, {\n      attributes\n    });\n  }, [analytics, pathname, search, hash, attributes]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  const { params, ...attributes } = getExtensionContext(\n    pathname,\n    routeObjects\n  ) || { params: {} };\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(\n    TrackNavigation,\n    {\n      pathname,\n      search,\n      hash,\n      attributes: params\n    }\n  ));\n};\n\nfunction getBasePath(configApi) {\n  if (!isReactRouterBeta()) {\n    return \"\";\n  }\n  return readBasePath(configApi);\n}\nfunction readBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://sample.dev\"\n    // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction SignInPageWrapper({\n  component: Component,\n  appIdentityProxy,\n  children\n}) {\n  const [identityApi, setIdentityApi] = useState();\n  const configApi = useApi(configApiRef);\n  const basePath = getBasePath(configApi);\n  if (!identityApi) {\n    return /* @__PURE__ */ React.createElement(Component, { onSignInSuccess: setIdentityApi });\n  }\n  appIdentityProxy.setTarget(identityApi, {\n    signOutTargetUrl: basePath || \"/\"\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction AppRouter(props) {\n  const { Router: RouterComponent, SignInPage: SignInPageComponent } = useApp().getComponents();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  const mountPath = `${basePath}/*`;\n  const internalAppContext = useContext(InternalAppContext);\n  if (!internalAppContext) {\n    throw new Error(\"AppRouter must be rendered within the AppProvider\");\n  }\n  const { routeObjects, appIdentityProxy } = internalAppContext;\n  if (!SignInPageComponent) {\n    appIdentityProxy.setTarget(\n      {\n        getUserId: () => \"guest\",\n        getIdToken: async () => void 0,\n        getProfile: () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getProfileInfo: async () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getBackstageIdentity: async () => ({\n          type: \"user\",\n          userEntityRef: \"user:default/guest\",\n          ownershipEntityRefs: [\"user:default/guest\"]\n        }),\n        getCredentials: async () => ({}),\n        signOut: async () => {\n        }\n      },\n      { signOutTargetUrl: basePath || \"/\" }\n    );\n    if (isReactRouterBeta()) {\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) })));\n    }\n    return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), props.children);\n  }\n  if (isReactRouterBeta()) {\n    return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n      SignInPageWrapper,\n      {\n        component: SignInPageComponent,\n        appIdentityProxy\n      },\n      /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) }))\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n    SignInPageWrapper,\n    {\n      component: SignInPageComponent,\n      appIdentityProxy\n    },\n    props.children\n  ));\n}\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  // These elements aren't used, so we add in a bit of debug information\n  routeRefs: /* @__PURE__ */ new Set(),\n  plugins: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nconst pluginSet = (plugin) => {\n  const set = /* @__PURE__ */ new Set();\n  if (plugin) {\n    set.add(plugin);\n  }\n  return set;\n};\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(plugin)\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      const mountPointPlugin = getComponentData(\n        node,\n        \"core.plugin\"\n      );\n      if (mountPointPlugin) {\n        (_g = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _g.plugins.add(mountPointPlugin);\n      }\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugins: pluginSet(\n            getComponentData(\n              node.props.element,\n              \"core.plugin\"\n            )\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugins: ((_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugins) || /* @__PURE__ */ new Set()\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      return joinPaths(basePath, generatePath(targetPath, params));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, { value: versionedValue }, children);\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, { value: versionedValue, children });\n};\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    __publicField$2(this, \"target\");\n    __publicField$2(this, \"waitForTarget\");\n    __publicField$2(this, \"resolveTarget\", () => {\n    });\n    __publicField$2(this, \"signOutTargetUrl\", \"/\");\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    window.location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, { children });\n}\n\nconst defaultConfigLoader = async (runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n};\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ApiRegistryBuilder {\n  constructor() {\n    __publicField$1(this, \"apis\", []);\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _getProviderCalled;\nfunction createLocalBaseUrl(fullUrl) {\n  const url = new URL(fullUrl);\n  url.protocol = document.location.protocol;\n  url.hostname = document.location.hostname;\n  url.port = document.location.port;\n  return url.toString().replace(/\\/$/, \"\");\n}\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-config\", error: config.error });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi) }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  let configReader;\n  if ((_a = config.value) == null ? void 0 : _a.length) {\n    const urlConfigReader = ConfigReader.fromConfigs(config.value);\n    const appBaseUrl = urlConfigReader.getOptionalString(\"app.baseUrl\");\n    const backendBaseUrl = urlConfigReader.getOptionalString(\"backend.baseUrl\");\n    let configs = config.value;\n    const relativeResolverConfig = {\n      data: {},\n      context: \"relative-resolver\"\n    };\n    if (appBaseUrl && backendBaseUrl) {\n      const appOrigin = new URL(appBaseUrl).origin;\n      const backendOrigin = new URL(backendBaseUrl).origin;\n      if (appOrigin === backendOrigin) {\n        const newBackendBaseUrl = createLocalBaseUrl(backendBaseUrl);\n        if (backendBaseUrl !== newBackendBaseUrl) {\n          relativeResolverConfig.data.backend = { baseUrl: newBackendBaseUrl };\n        }\n      }\n    }\n    if (appBaseUrl) {\n      const newAppBaseUrl = createLocalBaseUrl(appBaseUrl);\n      if (appBaseUrl !== newAppBaseUrl) {\n        relativeResolverConfig.data.app = { baseUrl: newAppBaseUrl };\n      }\n    }\n    if (Object.keys(relativeResolverConfig.data).length) {\n      configs = configs.concat([relativeResolverConfig]);\n    }\n    configReader = ConfigReader.fromConfigs(configs);\n  } else {\n    configReader = ConfigReader.fromConfigs([]);\n  }\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    __publicField(this, \"apiHolder\");\n    __publicField(this, \"configApi\");\n    __publicField(this, \"apis\");\n    __publicField(this, \"icons\");\n    __publicField(this, \"plugins\");\n    __publicField(this, \"featureFlags\");\n    __publicField(this, \"components\");\n    __publicField(this, \"themes\");\n    __publicField(this, \"configLoader\");\n    __publicField(this, \"defaultApis\");\n    __publicField(this, \"bindRoutes\");\n    __publicField(this, \"appIdentityProxy\", new AppIdentityProxy());\n    __publicField(this, \"apiFactoryRegistry\");\n    __privateAdd(this, _getProviderCalled, false);\n    var _a, _b, _c, _d, _e;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.featureFlags = (_c = options.featureFlags) != null ? _c : [];\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_d = options.configLoader) != null ? _d : defaultConfigLoader;\n    this.defaultApis = (_e = options.defaultApis) != null ? _e : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  createRoot(element) {\n    const AppProvider = this.getProvider();\n    const AppRoot = () => {\n      return /* @__PURE__ */ React.createElement(AppProvider, null, element);\n    };\n    return AppRoot;\n  }\n  getProvider() {\n    if (__privateGet(this, _getProviderCalled)) {\n      throw new Error(\n        \"app.getProvider() or app.createRoot() has already been called, and can only be called once\"\n      );\n    }\n    __privateSet(this, _getProviderCalled, true);\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const needsFeatureFlagRegistrationRef = useRef(true);\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: isReactRouterBeta() ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      if (hasConfigApi && needsFeatureFlagRegistrationRef.current) {\n        needsFeatureFlagRegistrationRef.current = false;\n        const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n        if (featureFlagsApi) {\n          for (const flag of this.featureFlags) {\n            featureFlagsApi.registerFlag({\n              ...flag,\n              pluginId: \"\"\n            });\n          }\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          const registeredFlags = featureFlagsApi.getRegisteredFlags();\n          const flagNames = new Set(registeredFlags.map((f) => f.name));\n          for (const name of featureFlags) {\n            if (!flagNames.has(name)) {\n              featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n            }\n          }\n        }\n      }\n      const { ThemeProvider = AppThemeProvider } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, { apis: this.getApiHolder() }, /* @__PURE__ */ React.createElement(AppContextProvider, { appContext }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(\n        RoutingProvider,\n        {\n          routePaths: routing.paths,\n          routeParents: routing.parents,\n          routeObjects: routing.objects,\n          routeBindings,\n          basePath: getBasePath(loadedConfig.api)\n        },\n        /* @__PURE__ */ React.createElement(\n          InternalAppContext.Provider,\n          {\n            value: {\n              routeObjects: routing.objects,\n              appIdentityProxy: this.appIdentityProxy\n            }\n          },\n          children\n        )\n      ))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n_getProviderCalled = new WeakMap();\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          // Each route matches any sub route, except for the explicit root path\n          path,\n          element,\n          children: child.props.children ? [\n            // These are the children of each route, which we all add in under a catch-all\n            // subroute in order to make them available to `useOutlet`\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              // The root path must require an exact match\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppRouter, AppThemeSelector, AtlassianAuth, BitbucketAuth, BitbucketServerAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, FrontendHostDiscovery, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, alertApiRef, useAnalytics, configApiRef, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, attachComponentData, useElementFilter, discoveryApiRef } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport pluralize from 'pluralize';\nimport React, { useState, useEffect, useRef, useCallback, useLayoutEffect, lazy, Suspense, useMemo, Component as Component$3, Children, isValidElement, useContext, Fragment, forwardRef, createContext } from 'react';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { makeStyles, useTheme, darken, lighten, withStyles, createStyles, styled, alpha, ThemeProvider } from '@material-ui/core/styles';\nimport Button$1 from '@material-ui/core/Button';\nimport MaterialLink from '@material-ui/core/Link';\nimport classNames from 'classnames';\nimport { trimEnd, isEqual, transform, orderBy, isMatch } from 'lodash';\nimport { Link as Link$1, createRoutesFromChildren, Route as Route$1, useSearchParams, useNavigate, useParams, useRoutes, matchRoutes, useLocation, useResolvedPath as useResolvedPath$1, resolvePath } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useLocalStorageValue, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport TabUI from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Collapse from '@material-ui/core/Collapse';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  const {\n    anchorOrigin = { vertical: \"top\", horizontal: \"center\" },\n    transientTimeoutMs\n  } = props;\n  const timeoutMs = transientTimeoutMs != null ? transientTimeoutMs : 5e3;\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  const [firstMessage] = messages;\n  useEffect(() => {\n    if (firstMessage && firstMessage.display === \"transient\") {\n      const timeout = setTimeout(() => {\n        setMessages((msgs) => {\n          const newMsgs = msgs.filter((msg) => msg !== firstMessage);\n          return newMsgs.length === msgs.length ? msgs : newMsgs;\n        });\n      }, timeoutMs);\n      return () => clearTimeout(timeout);\n    }\n    return void 0;\n  }, [firstMessage, timeoutMs]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, { open: true, anchorOrigin }, /* @__PURE__ */ React.createElement(\n    Alert,\n    {\n      action: /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          color: \"inherit\",\n          size: \"small\",\n          onClick: handleClose,\n          \"data-testid\": \"error-button-close\"\n        },\n        /* @__PURE__ */ React.createElement(CloseIcon, null)\n      ),\n      severity: firstMessage.severity\n    },\n    /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, String(firstMessage.message), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\n      \"message\",\n      messages.length - 1\n    )})`))\n  ));\n}\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.slice(-2);\n  }\n  return color;\n}\nfunction extractInitials(value) {\n  var _a;\n  return (_a = value.match(/(?<!\\p{L})\\p{L}/gu)) == null ? void 0 : _a.join(\"\").slice(0, 2);\n}\n\nconst useStyles$O = makeStyles(\n  (theme) => ({\n    avatar: {\n      width: \"4rem\",\n      height: \"4rem\",\n      color: theme.palette.common.white\n    },\n    avatarText: {\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: \"1px\",\n      textTransform: \"uppercase\"\n    }\n  }),\n  { name: \"BackstageAvatar\" }\n);\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$O();\n  let styles = { ...customStyles };\n  const fontStyles = {\n    fontFamily: styles.fontFamily,\n    fontSize: styles.fontSize,\n    fontWeight: styles.fontWeight\n  };\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || \"\"),\n      ...customStyles\n    };\n  }\n  return /* @__PURE__ */ React.createElement(\n    MaterialAvatar,\n    {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles\n    },\n    displayName && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"span\",\n        className: classes.avatarText,\n        style: fontStyles\n      },\n      extractInitials(displayName)\n    )\n  );\n}\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route$1, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\nconst useStyles$N = makeStyles(\n  {\n    visuallyHidden: {\n      clip: \"rect(0 0 0 0)\",\n      clipPath: \"inset(50%)\",\n      overflow: \"hidden\",\n      position: \"absolute\",\n      whiteSpace: \"nowrap\",\n      height: 1,\n      width: 1\n    },\n    externalLink: {\n      position: \"relative\"\n    }\n  },\n  { name: \"Link\" }\n);\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nconst originalWindowOpen = window.open;\nif (originalWindowOpen && !originalWindowOpen.__backstage) {\n  const newOpen = function open(...args) {\n    const url = String(args[0]);\n    if (scriptProtocolPattern.test(url)) {\n      throw new Error(\n        \"Rejected window.open() with a javascript: URL as a security precaution\"\n      );\n    }\n    return originalWindowOpen.apply(this, args);\n  };\n  newOpen.__backstage = true;\n  window.open = newOpen;\n}\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString(\"app.baseUrl\");\n  } catch {\n    return void 0;\n  }\n};\nconst useBasePath = () => {\n  var _a;\n  const base = \"http://sample.dev\";\n  const url = (_a = useBaseUrl()) != null ? _a : \"/\";\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, \"/\");\n};\nconst useResolvedPath = (uri) => {\n  let resolvedPath = String(uri);\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n  return resolvedPath;\n};\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles$N();\n    const analytics = useAnalytics();\n    const to = isReactRouterBeta() ? useResolvedPath(props.to) : props.to;\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n    if (scriptProtocolPattern.test(to)) {\n      throw new Error(\n        \"Link component rejected javascript: URL as a security precaution\"\n      );\n    }\n    const handleClick = (event) => {\n      onClick == null ? void 0 : onClick(event);\n      if (!noTrack) {\n        analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n      }\n    };\n    return external ? (\n      // External links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n          ...props,\n          ...props[\"aria-label\"] ? { \"aria-label\": `${props[\"aria-label\"]}, Opens in a new window` } : {},\n          ref,\n          href: to,\n          onClick: handleClick,\n          className: classNames(classes.externalLink, props.className)\n        },\n        props.children,\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.visuallyHidden }, \", Opens in a new window\")\n      )\n    ) : (\n      // Interact with React Router for internal links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...props,\n          ref,\n          component: Link$1,\n          to,\n          onClick: handleClick\n        }\n      )\n    );\n  }\n);\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, { ref, ...props, color: \"initial\" }));\nconst LinkButton = React.forwardRef(\n  (props, ref) => /* @__PURE__ */ React.createElement(Button$1, { ref, component: LinkWrapper, ...props })\n);\nconst Button = LinkButton;\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\",\n    \"aria-label\": ariaLabel = \"Copy text\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      id: \"copy-test-tooltip\",\n      title: tooltipText,\n      placement: \"top\",\n      leaveDelay: tooltipDelay,\n      onClose: () => setOpen(false),\n      open\n    },\n    /* @__PURE__ */ React.createElement(IconButton, { onClick: handleCopyClick, \"aria-label\": ariaLabel }, /* @__PURE__ */ React.createElement(CopyIcon, null))\n  ));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(Box, { position: \"relative\" }, /* @__PURE__ */ React.createElement(\n    LightAsync,\n    {\n      customStyle,\n      language,\n      style: mode,\n      showLineNumbers,\n      wrapLines: true,\n      lineNumberStyle: { color: theme.palette.textVerySubtle },\n      lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n        style: {\n          backgroundColor: highlightColor\n        }\n      } : {}\n    },\n    text\n  ), showCopyCodeButton && /* @__PURE__ */ React.createElement(Box, { position: \"absolute\", top: 0, right: 0 }, /* @__PURE__ */ React.createElement(CopyTextButton, { text })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link$1,\n      color: \"primary\",\n      title,\n      size: \"small\",\n      to\n    },\n    /* @__PURE__ */ React.createElement(AddCircleOutline, null)\n  ) : /* @__PURE__ */ React.createElement(Button$1, { component: Link$1, variant: \"contained\", color: \"primary\", to }, title);\n}\n\nvar DependencyGraphTypes;\n((DependencyGraphTypes2) => {\n  ((Direction2) => {\n    Direction2[\"TOP_BOTTOM\"] = \"TB\";\n    Direction2[\"BOTTOM_TOP\"] = \"BT\";\n    Direction2[\"LEFT_RIGHT\"] = \"LR\";\n    Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  })(DependencyGraphTypes2.Direction || (DependencyGraphTypes2.Direction = {}));\n  ((Alignment2) => {\n    Alignment2[\"UP_LEFT\"] = \"UL\";\n    Alignment2[\"UP_RIGHT\"] = \"UR\";\n    Alignment2[\"DOWN_LEFT\"] = \"DL\";\n    Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  })(DependencyGraphTypes2.Alignment || (DependencyGraphTypes2.Alignment = {}));\n  ((Ranker2) => {\n    Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n    Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n    Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  })(DependencyGraphTypes2.Ranker || (DependencyGraphTypes2.Ranker = {}));\n  ((LabelPosition2) => {\n    LabelPosition2[\"LEFT\"] = \"l\";\n    LabelPosition2[\"RIGHT\"] = \"r\";\n    LabelPosition2[\"CENTER\"] = \"c\";\n  })(DependencyGraphTypes2.LabelPosition || (DependencyGraphTypes2.LabelPosition = {}));\n})(DependencyGraphTypes || (DependencyGraphTypes = {}));\n\nconst useStyles$M = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    text: {\n      fill: theme.palette.primary.contrastText\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultNode\" }\n);\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$M();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classes.node,\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classes.text,\n      y: paddedHeight / 2,\n      x: paddedWidth / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    id\n  ));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$L = makeStyles$1(\n  (theme) => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphNode\" }\n);\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, { ...props });\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$L();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: nodeRef,\n      \"data-testid\": NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`\n    },\n    render({ node: nodeProps })\n  );\n}\n\nconst useStyles$K = makeStyles$1(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultLabel\" }\n);\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, label);\n}\n\nconst useStyles$J = makeStyles$1(\n  (theme) => ({\n    path: {\n      strokeWidth: 1,\n      stroke: theme.palette.textSubtle,\n      fill: \"none\",\n      transition: `${theme.transitions.duration.shortest}ms`\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphEdge\" }\n);\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, { ...props });\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$J();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  const createPath = React.useMemo(\n    () => d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape[curve]),\n    [curve]\n  );\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y)\n    );\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\"path\", { \"data-testid\": EDGE_TEST_ID, className: classes.path, d: path }), labelProps.label ? /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: labelRef,\n      \"data-testid\": LABEL_TEST_ID,\n      className: classes.label,\n      transform: `translate(${x},${y})`\n    },\n    render({ edge: labelProps })\n  ) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = DependencyGraphTypes.Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = DependencyGraphTypes.Ranker.NETWORK_SIMPLEX,\n    labelPosition = DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    curve = \"curveMonotoneX\",\n    fit = \"grow\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(new dagre.graphlib.Graph());\n  const [graphWidth, setGraphWidth] = React.useState(\n    ((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    ((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const minHeight = Math.min(graphHeight, containerHeight);\n  const scalableHeight = fit === \"grow\" ? maxHeight : minHeight;\n  const containerRef = React.useMemo(\n    () => debounce((node) => {\n      if (!node) {\n        return;\n      }\n      const container = d3Selection.select(node);\n      const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n      function enableZoom() {\n        container.call(\n          d3Zoom.zoom().scaleExtent([1, Infinity]).on(\"zoom\", (event) => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k\n              )\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k\n              )\n            );\n            workspace.attr(\"transform\", event.transform);\n          })\n        );\n      }\n      if (zoom === \"enabled\") {\n        enableZoom();\n      } else if (zoom === \"enable-on-click\") {\n        container.on(\"click\", () => enableZoom());\n      }\n      const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n      if (containerWidth !== newContainerWidth) {\n        setContainerWidth(newContainerWidth);\n      }\n      if (containerHeight !== newContainerHeight) {\n        setContainerHeight(newContainerHeight);\n      }\n    }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom]\n  );\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some(\n        (edge) => edge.from === e.v && edge.to === e.w\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(\n    () => debounce(\n      () => {\n        dagre.layout(graph.current);\n        const { height, width } = graph.current.graph();\n        const newHeight = Math.max(0, height || 0);\n        const newWidth = Math.max(0, width || 0);\n        setGraphWidth(newWidth);\n        setGraphHeight(newHeight);\n        setGraphNodes(graph.current.nodes());\n        setGraphEdges(graph.current.edges());\n      },\n      250,\n      { leading: true }\n    ),\n    []\n  );\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: scalableHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`\n    },\n    /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\n      \"marker\",\n      {\n        id: ARROW_MARKER_ID,\n        viewBox: \"0 0 24 24\",\n        markerWidth: \"14\",\n        markerHeight: \"14\",\n        refX: \"16\",\n        refY: \"12\",\n        orient: \"auto\",\n        markerUnits: \"strokeWidth\"\n      },\n      /* @__PURE__ */ React.createElement(\n        \"path\",\n        {\n          fill: theme.palette.textSubtle,\n          d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n        }\n      )\n    ), defs),\n    /* @__PURE__ */ React.createElement(\"g\", { id: WORKSPACE_ID }, /* @__PURE__ */ React.createElement(\n      \"svg\",\n      {\n        width: graphWidth,\n        height: graphHeight,\n        y: maxHeight / 2 - graphHeight / 2,\n        x: maxWidth / 2 - graphWidth / 2,\n        viewBox: `0 0 ${graphWidth} ${graphHeight}`\n      },\n      graphEdges.map((e) => {\n        const edge = graph.current.edge(e);\n        if (!edge)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Edge,\n          {\n            key: `${e.v}-${e.w}`,\n            id: e,\n            setEdge,\n            render: renderLabel,\n            edge,\n            curve\n          }\n        );\n      }),\n      graphNodes.map((id) => {\n        const node = graph.current.node(id);\n        if (!node)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Node,\n          {\n            key: id,\n            setNode,\n            render: renderNode,\n            node\n          }\n        );\n      })\n    ))\n  );\n}\n\nconst useStyles$I = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      root: {\n        padding: theme.spacing(0),\n        marginBottom: theme.spacing(0),\n        marginTop: theme.spacing(0),\n        display: \"flex\",\n        flexFlow: \"row nowrap\"\n      },\n      // showing on top\n      topPosition: {\n        position: \"relative\",\n        marginBottom: theme.spacing(6),\n        marginTop: -theme.spacing(3),\n        zIndex: \"unset\"\n      },\n      icon: {\n        fontSize: theme.typography.h6.fontSize\n      },\n      content: {\n        width: \"100%\",\n        maxWidth: \"inherit\",\n        flexWrap: \"nowrap\",\n        color: theme.palette.banner.text\n      },\n      message: {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& a\": {\n          color: theme.palette.banner.link\n        }\n      },\n      button: {\n        color: (_a = theme.palette.banner.closeButtonColor) != null ? _a : \"inherit\"\n      },\n      info: {\n        backgroundColor: theme.palette.banner.info\n      },\n      error: {\n        backgroundColor: theme.palette.banner.error\n      },\n      warning: {\n        backgroundColor: (_b = theme.palette.banner.warning) != null ? _b : theme.palette.banner.error\n      }\n    };\n  },\n  { name: \"BackstageDismissableBanner\" }\n);\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$I();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners)\n  );\n  const observedItems = useObservable(\n    notificationsStore.observe$(\"dismissedBanners\")\n  );\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Snackbar,\n    {\n      anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      SnackbarContent,\n      {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message\n        },\n        message,\n        action: [\n          /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              key: \"dismiss\",\n              title: \"Permanently dismiss this message\",\n              className: classes.button,\n              onClick: handleClick\n            },\n            /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.icon })\n          )\n        ]\n      }\n    )\n  );\n};\n\nconst useStyles$H = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$H();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"\n        }\n      );\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: noInformation,\n          alt: \"no Information\",\n          className: classes.generalImg\n        }\n      );\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: createComponent,\n          alt: \"create Component\",\n          className: classes.generalImg\n        }\n      );\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", { src: noBuild, alt: \"no Build\", className: classes.generalImg });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$G = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$G();\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2\n    },\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"column\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, title)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, description)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, className: classes.action }, action))),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer }, typeof missing === \"string\" ? /* @__PURE__ */ React.createElement(EmptyStateImage, { missing }) : missing.customImage)\n  );\n}\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)[0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split(\"\\n\").findIndex(\n  (line) => ANNOTATION_REGEXP.test(line)\n);\nconst useStyles$F = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateLineNumbers(lineCount) {\n  return Array.from(Array(lineCount + 1).keys(), (i) => i + ANNOTATION_LINE);\n}\nfunction generateComponentYaml(annotations) {\n  const annotationYaml = annotations.map((ann) => ANNOTATION_YAML.replace(\"ANNOTATION\", ann)).join(\"\\n\");\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\nfunction generateDescription(annotations) {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your component if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles$F();\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: generateComponentYaml(annotations),\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: generateLineNumbers(annotations.length),\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(\n      severity,\n      theme\n    )\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, { classes });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, { classes });\n};\nconst useStyles$E = makeStyles(\n  (theme) => ({\n    panel: {\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      ),\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      verticalAlign: \"middle\"\n    },\n    summary: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    summaryText: {\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      fontWeight: theme.typography.fontWeightBold\n    },\n    message: {\n      width: \"100%\",\n      display: \"block\",\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      )\n    },\n    details: {\n      width: \"100%\",\n      display: \"block\",\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2),\n      fontFamily: \"sans-serif\"\n    }\n  }),\n  { name: \"BackstageWarningPanel\" }\n);\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$E({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n      className: classes.panel,\n      role: \"alert\"\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, { severity }),\n        className: classes.summary\n      },\n      /* @__PURE__ */ React.createElement(ErrorOutlineStyled, { severity }),\n      /* @__PURE__ */ React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\" }, subTitle)\n    ),\n    (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, message && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography, { className: classes.message, variant: \"body1\" }, message)), children && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, className: classes.details }, children)))\n  );\n}\n\nconst useStyles$D = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageErrorPanel\" }\n);\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$D();\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Error\",\n      secondary: error\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: error })), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Message\",\n      secondary: message\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: message })), stack && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Stack Trace\",\n      secondary: stack\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: stack })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return /* @__PURE__ */ React.createElement(\n    WarningPanel,\n    {\n      severity: \"error\",\n      title: title != null ? title : error.message,\n      defaultExpanded\n    },\n    /* @__PURE__ */ React.createElement(\n      ErrorList,\n      {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children\n      }\n    )\n  );\n}\n\nconst useStyles$C = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageResponseErrorPanel\" }\n);\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$C();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: title != null ? title : error.message,\n        defaultExpanded,\n        error\n      }\n    );\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString }\n    },\n    requestString && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Request\",\n        secondary: request ? `${requestString}` : void 0\n      }\n    ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: requestString })),\n    /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, { component: \"li\", className: classes.divider }), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Full Error as JSON\"\n      }\n    )), /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true }))\n  );\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(\n    function setupElement() {\n      const existingParent = document.querySelector(`#${id}`);\n      const parentElem = existingParent || createRootElement(id);\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n      parentElem.appendChild(rootElemRef.current);\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id]\n  );\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$B = makeStyles(\n  (theme) => ({\n    \"@keyframes pulsateSlightly\": {\n      \"0%\": { transform: \"scale(1.0)\" },\n      \"100%\": { transform: \"scale(1.1)\" }\n    },\n    \"@keyframes pulsateAndFade\": {\n      \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n      \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n    },\n    featureWrapper: {\n      position: \"relative\"\n    },\n    backdrop: {\n      zIndex: 2e3,\n      position: \"fixed\",\n      overflow: \"hidden\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    dot: {\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"1px solid rgba(103, 146, 180, 0.98)\",\n      boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n    },\n    pulseCircle: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: `2px solid ${theme.palette.common.white}`,\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n    },\n    text: {\n      position: \"absolute\",\n      color: theme.palette.common.white,\n      zIndex: 2003\n    }\n  }),\n  { name: \"BackstageFeatureCalloutCircular\" }\n);\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$B();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.featureWrapper, ...{ ref: wrapperRef } }, children), createPortal(\n    /* @__PURE__ */ React.createElement(Box, { className: classes.backdrop }, /* @__PURE__ */ React.createElement(ClickAwayListener, { onClickAway: hide }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.dot,\n        \"data-testid\": \"dot\",\n        style: {\n          left: placement == null ? void 0 : placement.dotLeft,\n          top: placement == null ? void 0 : placement.dotTop,\n          width: placement == null ? void 0 : placement.dotSize,\n          height: placement == null ? void 0 : placement.dotSize,\n          borderWidth: placement == null ? void 0 : placement.borderWidth\n        },\n        onClick: hide,\n        onKeyDown: hide,\n        role: \"button\",\n        tabIndex: 0\n      },\n      /* @__PURE__ */ React.createElement(Box, { className: classes.pulseCircle })\n    ), /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.text,\n        \"data-testid\": \"text\",\n        style: {\n          left: placement == null ? void 0 : placement.textLeft,\n          top: placement == null ? void 0 : placement.textTop,\n          width: placement == null ? void 0 : placement.textWidth\n        }\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", paragraph: true }, title),\n      /* @__PURE__ */ React.createElement(Typography, null, description)\n    )))),\n    portalElement\n  ));\n}\n\nconst useIconStyles = makeStyles(\n  (theme) => ({\n    link: {\n      display: \"grid\",\n      justifyItems: \"center\",\n      gridGap: 4,\n      textAlign: \"center\"\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: \"default\"\n    },\n    primary: {\n      color: theme.palette.primary.main\n    },\n    secondary: {\n      color: theme.palette.secondary.main\n    },\n    label: {\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 1.2\n    }\n  }),\n  { name: \"BackstageIconLinkVertical\" }\n);\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Box, { title, className: classNames(classes.link, classes.disabled) }, icon, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"caption\",\n        component: \"span\",\n        className: classes.label\n      },\n      label\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      title,\n      className: classNames(classes.link, classes[color]),\n      to: href,\n      onClick\n    },\n    icon,\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", component: \"span\", className: classes.label }, label)\n  );\n}\n\nconst useStyles$A = makeStyles(\n  (theme) => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridAutoColumns: \"min-content\",\n      gridGap: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageHeaderIconLinkRow\" }\n);\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$A();\n  return /* @__PURE__ */ React.createElement(\"nav\", { className: classes.links }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, { key: index + 1, ...link })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$z = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\"\n    },\n    container: {\n      overflow: \"auto\",\n      scrollbarWidth: 0,\n      // hide in FF\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n        // hide in Chrome\n      }\n    },\n    fade: {\n      position: \"absolute\",\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: \"opacity 300ms\",\n      pointerEvents: \"none\"\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeHidden: {\n      opacity: 0\n    },\n    button: {\n      position: \"absolute\"\n    },\n    buttonLeft: {\n      left: -theme.spacing(2)\n    },\n    buttonRight: {\n      right: -theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageHorizontalScrollGrid\" }\n);\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = window.performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$z(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { ...otherProps, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      wrap: \"nowrap\",\n      className: classes.container,\n      ref\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeLeft, {\n        [classes.fadeHidden]: scrollLeft === 0\n      })\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeRight, {\n        [classes.fadeHidden]: scrollRight === 0\n      })\n    }\n  ), scrollLeft > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Left\",\n      onClick: () => handleScrollClick(false),\n      className: classNames(classes.button, classes.buttonLeft, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)\n  ), scrollRight > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Right\",\n      onClick: () => handleScrollClick(true),\n      className: classNames(classes.button, classes.buttonRight, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronRight, null)\n  ));\n}\n\nconst useStyles$y = makeStyles(\n  (theme) => ({\n    alpha: {\n      color: theme.palette.common.white,\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    },\n    beta: {\n      color: \"#4d65cc\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    }\n  }),\n  { name: \"BackstageLifecycle\" }\n);\nfunction Lifecycle(props) {\n  const classes = useStyles$y(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classes[alpha ? \"alpha\" : \"beta\"],\n      style: { fontSize: \"120%\" }\n    },\n    alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")\n  ) : /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes[alpha ? \"alpha\" : \"beta\"] }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(\n  () => import('./esm/RealLogViewer-89b4d8e7.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(RealLogViewer, { ...props }));\n}\n\nconst useStyles$x = makeStyles(\n  (theme) => ({\n    markdown: {\n      \"& table\": {\n        borderCollapse: \"collapse\",\n        border: `1px solid ${theme.palette.border}`\n      },\n      \"& th, & td\": {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1)\n      },\n      \"& td\": {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      \"& th\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr:nth-child(odd)\": {\n        backgroundColor: theme.palette.background.default\n      },\n      \"& a\": {\n        color: theme.palette.link\n      },\n      \"& img\": {\n        maxWidth: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstageMarkdownContent\" }\n);\nconst flatten = (text, child) => {\n  if (!child)\n    return text;\n  return typeof child === \"string\" ? text + child : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\nconst headingRenderer = ({ level, children }) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, \"\");\n  const slug = text.toLocaleLowerCase(\"en-US\").replace(/\\W/g, \"-\");\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, { language: match[1], text }) : /* @__PURE__ */ React.createElement(\"code\", { className, ...props }, children);\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer\n};\nfunction MarkdownContent(props) {\n  const {\n    content,\n    dialect = \"gfm\",\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className\n  } = props;\n  const classes = useStyles$x();\n  return /* @__PURE__ */ React.createElement(\n    ReactMarkdown,\n    {\n      remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n      className: `${classes.markdown} ${className}`,\n      children: content,\n      components,\n      linkTarget,\n      transformLinkUri,\n      transformImageUri\n    }\n  );\n}\n\nconst useItemStyles = makeStyles(\n  (theme) => ({\n    root: {\n      paddingLeft: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageLoginRequestListItem\" }\n);\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, { disabled: busy, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, { fontSize: \"large\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: request.provider.title,\n      secondary: error && /* @__PURE__ */ React.createElement(Typography, { color: \"error\" }, error)\n    }\n  ), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"contained\", onClick: handleContinue }, \"Log in\"));\n};\n\nconst useStyles$w = makeStyles(\n  (theme) => ({\n    dialog: {\n      paddingTop: theme.spacing(1)\n    },\n    title: {\n      minWidth: 0\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize\n    },\n    contentList: {\n      padding: 0\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0)\n    }\n  }),\n  { name: \"OAuthRequestDialog\" }\n);\nfunction OAuthRequestDialog(_props) {\n  var _a;\n  const classes = useStyles$w();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const configApi = useApi(configApiRef);\n  const authRedirect = (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false;\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    []\n  );\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      \"aria-labelledby\": \"oauth-req-dialog-title\"\n    },\n    /* @__PURE__ */ React.createElement(\"main\", null, /* @__PURE__ */ React.createElement(\n      DialogTitle,\n      {\n        classes: { root: classes.title },\n        id: \"oauth-req-dialog-title\"\n      },\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          className: classes.titleHeading,\n          variant: \"h1\",\n          variantMapping: { h1: \"span\" }\n        },\n        \"Login Required\"\n      ),\n      authRedirect ? /* @__PURE__ */ React.createElement(Typography, null, \"This will trigger a http redirect to OAuth Login.\") : null\n    ), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList } }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(\n      LoginRequestListItem,\n      {\n        key: request.provider.title,\n        request,\n        busy,\n        setBusy\n      }\n    ))))),\n    /* @__PURE__ */ React.createElement(DialogActions, { classes: { root: classes.actionButtons } }, /* @__PURE__ */ React.createElement(Button$1, { onClick: handleRejectAll }, \"Reject All\"))\n  );\n}\n\nconst useStyles$v = makeStyles(\n  {\n    container: {\n      overflow: \"visible !important\"\n    }\n  },\n  { name: \"BackstageOverflowTooltip\" }\n);\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$v();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      title: (_a = props.title) != null ? _a : props.text || \"\",\n      placement: props.placement,\n      disableHoverListener: !hover\n    },\n    /* @__PURE__ */ React.createElement(\n      TextTruncate,\n      {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container\n      }\n    )\n  );\n}\n\nfunction Progress(props) {\n  const theme = useTheme();\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(\n      () => setIsVisible(true),\n      theme.transitions.duration.short\n    );\n    return () => clearTimeout(handle);\n  }, [theme.transitions.duration.short]);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, { ...props, \"data-testid\": \"progress\" }) : /* @__PURE__ */ React.createElement(Box, { display: \"none\" });\n}\n\nconst useStyles$u = makeStyles(\n  (theme) => ({\n    root: {\n      maxWidth: \"fit-content\",\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle\n    },\n    arrow: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageBottomLink\" }\n);\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, { to: link, onClick, underline: \"none\" }, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1 }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, { className: classes.arrow }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(LinkButton, { to: slackChannel.href, variant: \"contained\" }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: \"Something Went Wrong\", error }, /* @__PURE__ */ React.createElement(SlackLink, { slackChannel }));\n  }\n};\n\nconst useStyles$t = makeStyles(\n  (theme) => ({\n    noPadding: {\n      padding: 0,\n      \"&:last-child\": {\n        paddingBottom: 0\n      }\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    headerTitle: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1)\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: \"flex\"\n    }\n  }),\n  { name: \"BackstageInfoCard\" }\n);\nconst CardActionsTopRight = withStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-block\",\n      padding: theme.spacing(8, 8, 0, 0),\n      float: \"right\"\n    }\n  }),\n  { name: \"BackstageInfoCardCardActionsTopRight\" }\n)(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      // for pages without content header\n      marginBottom: \"10px\",\n      breakInside: \"avoid-page\",\n      \"@media print\": {\n        height: \"auto\"\n      }\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$t();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    if (!subheader && !icon) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: classes.headerSubheader,\n        \"data-testid\": \"info-card-subheader\"\n      },\n      subheader && /* @__PURE__ */ React.createElement(\"div\", { className: classes.subheader }, subheader),\n      icon\n    );\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, { style: calculatedStyle, className }, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      classes: {\n        root: classes.header,\n        title: classes.headerTitle,\n        subheader: classes.headerSubheader,\n        avatar: classes.headerAvatar,\n        action: classes.headerAction,\n        content: classes.headerContent\n      },\n      title,\n      subheader: cardSubTitle(),\n      action,\n      style: { ...headerStyle },\n      titleTypographyProps,\n      ...headerProps\n    }\n  ), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    CardContent,\n    {\n      className: classNames(cardClassName, {\n        [classes.noPadding]: noPadding\n      }),\n      style: calculatedCardStyle\n    },\n    children\n  ), actions && /* @__PURE__ */ React.createElement(CardActions, { className: actionsClassName }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\n\nconst useStyles$s = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      lineHeight: 0\n    },\n    overlay: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -60%)\",\n      fontSize: theme.typography.pxToRem(45),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.textContrast\n    },\n    description: {\n      fontSize: \"100%\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      position: \"absolute\",\n      wordBreak: \"break-all\",\n      display: \"inline-block\"\n    },\n    circle: {\n      width: \"80%\",\n      transform: \"translate(10%, 0)\"\n    },\n    colorUnknown: {}\n  }),\n  { name: \"BackstageGauge\" }\n);\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$s(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(Box, { ...{ ref: setHoverRef }, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Circle,\n    {\n      strokeLinecap: \"butt\",\n      percent: asPercentage,\n      strokeWidth: 12,\n      trailWidth: 12,\n      strokeColor: getColor({ palette, value: asActual, inverse, max }),\n      className: classes.circle\n    }\n  ), description && isHovering ? /* @__PURE__ */ React.createElement(Box, { className: classes.description }, description) : /* @__PURE__ */ React.createElement(Box, { className: classes.overlay }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$r = makeStyles(\n  {\n    root: {\n      height: \"100%\",\n      width: 250\n    }\n  },\n  { name: \"BackstageGaugeCard\" }\n);\nfunction GaugeCard(props) {\n  const classes = useStyles$r(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      subheader,\n      deepLink,\n      variant,\n      icon\n    },\n    /* @__PURE__ */ React.createElement(Gauge, { ...gaugeProps })\n  ));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor, width = \"thick\" } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const lineWidth = width === \"thick\" ? 4 : 1;\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: `${percent}%` }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, /* @__PURE__ */ React.createElement(\n    Line,\n    {\n      percent,\n      strokeWidth: lineWidth,\n      trailWidth: lineWidth,\n      strokeColor\n    }\n  )));\n}\n\nconst useStyles$q = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageClosedDropdown\" }\n);\nconst ClosedDropdown = () => {\n  const classes = useStyles$q();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst useStyles$p = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageOpenedDropdown\" }\n);\nconst OpenedDropdown = () => {\n  const classes = useStyles$p();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst BootstrapInput = withStyles(\n  (theme) => createStyles({\n    root: {\n      \"label + &\": {\n        marginTop: theme.spacing(3)\n      },\n      \"&.Mui-focused > div[role=button]\": {\n        borderColor: theme.palette.primary.main\n      }\n    },\n    input: {\n      borderRadius: theme.shape.borderRadius,\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid #ced4da\",\n      fontSize: theme.typography.body1.fontSize,\n      padding: theme.spacing(1.25, 3.25, 1.25, 1.5),\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      fontFamily: \"Helvetica Neue\",\n      \"&:focus\": {\n        background: theme.palette.background.paper,\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  }),\n  { name: \"BackstageSelectInputBase\" }\n)(InputBase);\nconst useStyles$o = makeStyles(\n  (theme) => createStyles({\n    formControl: {\n      margin: theme.spacing(1, 0),\n      maxWidth: 300\n    },\n    label: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    formLabel: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    chip: {\n      margin: 2\n    },\n    checkbox: {},\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }),\n  { name: \"BackstageSelect\" }\n);\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin\n  } = props;\n  const classes = useStyles$o();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : \"\")\n  );\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    setValue(selected || (multiple ? [] : \"\"));\n  }, [selected, multiple]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleOpen = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(FormControl, { className: classes.formControl }, /* @__PURE__ */ React.createElement(InputLabel, { className: classes.formLabel }, label), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      \"aria-label\": label,\n      value,\n      native,\n      disabled,\n      \"data-testid\": \"select\",\n      displayEmpty: true,\n      multiple,\n      margin,\n      onChange: handleChange,\n      open: isOpen,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n      label,\n      renderValue: (s) => {\n        var _a;\n        return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(Box, { className: classes.chips }, s.map((selectedValue) => {\n          var _a2, _b;\n          return /* @__PURE__ */ React.createElement(\n            Chip,\n            {\n              key: (_a2 = items.find((el) => el.value === selectedValue)) == null ? void 0 : _a2.value,\n              label: (_b = items.find((el) => el.value === selectedValue)) == null ? void 0 : _b.label,\n              clickable: true,\n              onDelete: handleDelete(selectedValue),\n              className: classes.chip\n            }\n          );\n        })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n      },\n      IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n      MenuProps: {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\"\n        },\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"left\"\n        },\n        getContentAnchorEl: null\n      }\n    },\n    placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, { value: [] }, placeholder),\n    native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", { value: item.value, key: item.value }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, { key: item.value, value: item.value }, multiple && /* @__PURE__ */ React.createElement(\n      Checkbox,\n      {\n        color: \"primary\",\n        checked: value.includes(item.value) || false,\n        className: classes.checkbox\n      }\n    ), item.label))\n  )));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    VerticalStepperContext.Provider,\n    {\n      value: {\n        stepIndex,\n        setStepIndex,\n        stepHistory,\n        setStepHistory,\n        onStepChange,\n        stepperLength: Children.count(children)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      MuiStepper,\n      {\n        activeStep: stepIndex,\n        orientation: \"vertical\",\n        elevation: elevated ? 2 : 0\n      },\n      steps\n    )\n  ), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$n = makeStyles(\n  (theme) => ({\n    root: {\n      marginTop: theme.spacing(3),\n      \"& button\": {\n        marginRight: theme.spacing(1)\n      }\n    }\n  }),\n  { name: \"BackstageSimpleStepperFooter\" }\n);\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, { onClick: handleClick }, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `nextButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || (last ? \"Finish\" : \"Next\")\n);\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `skipButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || \"Skip\"\n);\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    onClick: handleClick,\n    \"data-testid\": `backButton-${stepIndex}`,\n    disabled\n  },\n  text || \"Back\"\n);\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$n();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    BackBtn,\n    {\n      text: actions.backText,\n      handleClick: handleBack,\n      disabled: stepIndex === 0,\n      stepIndex\n    }\n  ), actions.showSkip && /* @__PURE__ */ React.createElement(\n    SkipBtn,\n    {\n      text: actions.skipText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canSkip && !actions.canSkip(),\n      stepIndex\n    }\n  ), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(\n    NextBtn,\n    {\n      text: actions.nextText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n      stepIndex\n    }\n  ), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    RestartBtn,\n    {\n      text: actions.restartText,\n      handleClick: handleRestart,\n      stepIndex\n    }\n  ), children);\n};\n\nconst useStyles$m = makeStyles(\n  (theme) => ({\n    end: {\n      padding: theme.spacing(3)\n    }\n  }),\n  { name: \"SimpleStepperStep\" }\n);\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$m();\n  return end ? /* @__PURE__ */ React.createElement(Box, { className: classes.end }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions: { ...actions || {}, showNext: false } })) : /* @__PURE__ */ React.createElement(MuiStep, { ...muiProps }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions })));\n}\n\nconst useStyles$l = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      \"&::before\": {\n        width: \"0.7em\",\n        height: \"0.7em\",\n        display: \"inline-block\",\n        marginRight: theme.spacing(1),\n        borderRadius: \"50%\",\n        content: '\"\"'\n      }\n    },\n    ok: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.ok\n      }\n    },\n    warning: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.warning\n      }\n    },\n    error: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.error\n      }\n    },\n    pending: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.pending\n      }\n    },\n    running: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.running\n      }\n    },\n    aborted: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.aborted\n      }\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.ok),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.warning),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusError(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.error),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusPending(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.pending),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.running),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.aborted),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: theme.typography.fontWeightBold,\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    margin: theme.spacing(0, 0, -1, 0)\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, { size: dense ? \"small\" : \"medium\" }, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest }, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(List, { disablePadding: true, className: classes.root }, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(ListItem, { className: classes.root }, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, { key: index }, toValue(item)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, nested, options) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], true);\n    const fmtKey = options && options.titleFormat ? options.titleFormat(key) : startCase(key);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, { key }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, `${fmtKey}: `), value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    MetadataTableItem,\n    {\n      title: options && options.titleFormat ? options.titleFormat(title) : startCase(title)\n    },\n    /* @__PURE__ */ React.createElement(ItemValue, { value, options })\n  );\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, { key, title: key, value: info[key], options }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return /* @__PURE__ */ React.createElement(MetadataTable, { dense }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName)\n  );\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState(\n      (oldState) => isEqual(newState, oldState) ? oldState : newState\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState\n      );\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime\n  );\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap(\n          (linkConf) => ({\n            url: linkConf.getString(\"url\"),\n            title: linkConf.getString(\"title\")\n          })\n        )\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, { ...props }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, { ...props });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$k = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400\n    }\n  },\n  { name: \"BackstageSupportButton\" }\n);\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, { to: link.url }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(MenuItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, { icon: item.icon })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: item.title,\n      secondary: (_a = item.links) == null ? void 0 : _a.reduce(\n        (prev, link, idx) => [\n          ...prev,\n          idx > 0 && /* @__PURE__ */ React.createElement(\"br\", { key: idx }),\n          /* @__PURE__ */ React.createElement(SupportLink, { link, key: link.url })\n        ],\n        []\n      )\n    }\n  ));\n};\nfunction SupportButton(props) {\n  const { title, items, children } = props;\n  const { items: configItems } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$k();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", ml: 1 }, isSmallScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      color: \"primary\",\n      size: \"small\",\n      onClick: onClickHandler,\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\"\n    },\n    /* @__PURE__ */ React.createElement(HelpIcon, null)\n  ) : /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\",\n      color: \"primary\",\n      onClick: onClickHandler,\n      startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n    },\n    \"Support\"\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"data-testid\": \"support-button-popover\",\n      open: popoverOpen,\n      anchorEl,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"right\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      onClose: popoverCloseHandler\n    },\n    /* @__PURE__ */ React.createElement(\n      MenuList,\n      {\n        className: classes.popoverList,\n        autoFocusItem: Boolean(anchorEl)\n      },\n      title && /* @__PURE__ */ React.createElement(MenuItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, title)),\n      React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(MenuItem, { alignItems: \"flex-start\", key: `child-${i}` }, child)),\n      (items != null ? items : configItems).map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, { item, key: `item-${i}` }))\n    ),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        onClick: popoverCloseHandler,\n        \"aria-label\": \"Close\"\n      },\n      \"Close\"\n    ))\n  ));\n}\n\nconst useStyles$j = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: \"pageContent\",\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3)\n      }\n    },\n    stretch: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexGrow: 1\n    },\n    noPadding: {\n      padding: 0\n    }\n  }),\n  { name: \"BackstageContent\" }\n);\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const classes = useStyles$j();\n  return /* @__PURE__ */ React.createElement(\n    \"article\",\n    {\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding\n      })\n    },\n    children\n  );\n}\n\nconst useStyles$i = makeStyles(\n  (theme) => ({\n    tabsWrapper: {\n      gridArea: \"pageSubheader\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary\n    },\n    selected: {\n      color: theme.palette.text.primary\n    },\n    tabRoot: {\n      \"&:hover\": {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary\n      }\n    }\n  }),\n  { name: \"BackstageHeaderTabs\" }\n);\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$i();\n  const handleChange = useCallback(\n    (_, index) => {\n      if (selectedIndex === void 0) {\n        setSelectedTab(index);\n      }\n      if (onChange && selectedIndex !== index)\n        onChange(index);\n    },\n    [selectedIndex, onChange]\n  );\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(Box, { className: styles.tabsWrapper }, /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      indicatorColor: \"primary\",\n      textColor: \"inherit\",\n      variant: \"scrollable\",\n      scrollButtons: \"auto\",\n      \"aria-label\": \"tabs\",\n      onChange: handleChange,\n      value: selectedTab\n    },\n    tabs.map((tab, index) => /* @__PURE__ */ React.createElement(\n      TabUI,\n      {\n        ...tab.tabProps,\n        \"data-testid\": `header-tab-${index}`,\n        label: tab.label,\n        key: tab.id,\n        value: index,\n        className: styles.defaultTab,\n        classes: { selected: styles.selected, root: styles.tabRoot }\n      }\n    ))\n  ));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c, _d;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort(\n    (a, b) => (\n      // remove \"/*\" symbols from path end before comparing\n      b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\"))\n    )\n  );\n  const element = (_a = useRoutes(sortedRoutes)) != null ? _a : subRoutes[0].children;\n  let currentRoute = (_b = params[\"*\"]) != null ? _b : \"\";\n  if (!currentRoute.startsWith(\"/\")) {\n    currentRoute = `/${currentRoute}`;\n  }\n  const [matchedRoute] = (_c = matchRoutes(sortedRoutes, currentRoute)) != null ? _c : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_d = subRoutes[foundIndex]) != null ? _d : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () => routes.map((t) => ({\n      id: t.path,\n      label: t.title,\n      tabProps: t.tabProps\n    })),\n    [routes]\n  );\n  const onTabChange = (tabIndex) => {\n    let { path } = routes[tabIndex];\n    path = path.replace(/\\/\\*$/, \"\");\n    path = path.replace(/^\\//, \"\");\n    navigate(path);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderTabs,\n    {\n      tabs: headerTabs,\n      selectedIndex: index,\n      onChange: onTabChange\n    }\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, { title: route.title }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, { path: \"\", title: \"\" }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, { routes });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles(\n  (theme) => ({\n    value: {\n      marginBottom: theme.spacing(0.75)\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: \"normal\"\n    }\n  }),\n  { name: \"BackstageSubvalueCell\" }\n);\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, value), /* @__PURE__ */ React.createElement(Box, { className: classes.subvalue }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      height: \"100%\",\n      width: \"315px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginRight: theme.spacing(3)\n    },\n    value: {\n      fontWeight: \"bold\",\n      fontSize: 18\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: theme.spacing(7.5),\n      justifyContent: \"space-between\",\n      borderBottom: `1px solid ${theme.palette.grey[500]}`\n    },\n    filters: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      \"& > *\": {\n        marginTop: theme.spacing(2)\n      }\n    }\n  }),\n  { name: \"BackstageTableFilters\" }\n);\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", onClick: handleClick }, \"Clear all\")), /* @__PURE__ */ React.createElement(Box, { className: classes.filters }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(\n    SelectComponent,\n    {\n      triggerReset: reset,\n      key: filter.element.label,\n      ...filter.element,\n      selected: selectedFilters[filter.element.label],\n      onChange: (el) => setSelectedFilters({\n        ...selectedFilters,\n        [filter.element.label]: el\n      })\n    }\n  ))));\n};\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, { ...props, ref })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, { ...props, ref })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, { ...props, ref })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, { ...props, ref })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, { ...props, ref })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, { ...props, ref })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, { ...props, ref })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, { ...props, ref })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, { ...props, ref })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, { ...props, ref })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, { ...props, ref }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles(\n  (theme) => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      fontWeight: theme.typography.fontWeightBold,\n      position: \"static\",\n      wordBreak: \"normal\"\n    }\n  }),\n  { name: \"BackstageTableHeader\" }\n)(MTableHeader);\nconst StyledMTableToolbar = withStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5)\n    },\n    title: {\n      \"& > h6\": {\n        fontWeight: theme.typography.fontWeightBold\n      }\n    },\n    searchField: {\n      paddingRight: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageTableToolbar\" }\n)(MTableToolbar);\nconst useFilterStyles = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\"\n    },\n    title: {\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: 18,\n      whiteSpace: \"nowrap\"\n    }\n  }),\n  { name: \"BackstageTableFiltersContainer\" }\n);\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"start\"\n    }\n  }),\n  { name: \"BackstageTable\" }\n);\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    var _a;\n    const headerStyle = (_a = column.headerStyle) != null ? _a : {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch]\n  );\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(IconButton, { onClick: toggleFilters, \"aria-label\": \"filter list\" }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, { className: filtersClasses.title }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(\n      StyledMTableToolbar,\n      {\n        ...toolbarProps,\n        ref: toolbarRef,\n        onSearchChanged\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    StyledMTableToolbar,\n    {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }\n  );\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    components,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen((v) => !v),\n    [setFiltersOpen]\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters\n  );\n  const MTColumns = convertColumns(columns, theme);\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters\n        },\n        defaultInitialState\n      );\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: \"uppercase\"\n    }\n  };\n  const getFieldByTitle = useCallback(\n    (titleValue) => {\n      var _a;\n      return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n    },\n    [columns]\n  );\n  useEffect(() => {\n    if (typeof data === \"function\") {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data);\n      return;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter(\n        (el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n          const fieldValue = extractValueByField(\n            el,\n            getFieldByTitle(key)\n          );\n          if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n            return fieldValue.some((v) => filterValue.includes(v));\n          } else if (Array.isArray(fieldValue)) {\n            return fieldValue.includes(filterValue);\n          } else if (Array.isArray(filterValue)) {\n            return filterValue.includes(fieldValue);\n          }\n          return fieldValue === filterValue;\n        })\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n  const constructFilters = (filterConfig, dataValue) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = /* @__PURE__ */ new Set();\n      const addValue = (value) => {\n        if (value !== void 0 && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n      if (dataValue) {\n        dataValue.forEach((el) => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field)\n          );\n          if (Array.isArray(value)) {\n            value.forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n      return distinctValues;\n    };\n    const constructSelect = (filter) => {\n      return {\n        placeholder: \"All results\",\n        label: filter.column,\n        multiple: filter.type === \"multiple-select\",\n        items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n          label: value,\n          value\n        }))\n      };\n    };\n    return filterConfig.map((filter) => ({\n      type: filter.type,\n      element: constructSelect(filter)\n    }));\n  };\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback(\n    (toolbarProps) => {\n      return /* @__PURE__ */ React.createElement(\n        TableToolbar,\n        {\n          setSearch,\n          hasFilters,\n          selectedFiltersLength,\n          toggleFilters,\n          ...toolbarProps\n        }\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch]\n  );\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    (bodyProps) => {\n      if (emptyContent && hasNoRows) {\n        return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: columnCount }, emptyContent)));\n      }\n      return /* @__PURE__ */ React.createElement(MTableBody, { ...bodyProps });\n    },\n    [hasNoRows, emptyContent, columnCount]\n  );\n  return /* @__PURE__ */ React.createElement(Box, { className: tableClasses.root }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(\n    Filters,\n    {\n      filters: constructFilters(filters, data),\n      selectedFilters,\n      onChangeFilters: setSelectedFilters\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MTable,\n    {\n      components: {\n        Header: StyledMTableHeader,\n        Toolbar,\n        Body,\n        ...components\n      },\n      options: { ...defaultOptions, ...options },\n      columns: MTColumns,\n      icons: tableIcons,\n      title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h2\" }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\" }, subtitle)),\n      data: typeof data === \"function\" ? data : tableData,\n      style: { width: \"100%\" },\n      localization: {\n        toolbar: { searchPlaceholder: \"Filter\", searchTooltip: \"Filter\" }\n      },\n      ...restProps\n    }\n  ));\n}\nTable.icons = Object.freeze(tableIcons);\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, { color: (_a = props.color) != null ? _a : color(props.data, theme) }));\n}\n\nconst useStyles$h = (props) => makeStyles(\n  (theme) => ({\n    container: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign\n    },\n    leftItemsBox: {\n      flex: \"1 1 auto\",\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    rightItemsBox: {\n      flex: \"0 1 auto\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\",\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    description: {},\n    title: {\n      display: \"inline-flex\",\n      marginBottom: 0\n    }\n  }),\n  { name: \"BackstageContentHeader\" }\n);\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(\n  Typography,\n  {\n    variant: \"h4\",\n    component: \"h2\",\n    className,\n    \"data-testid\": \"header-title\"\n  },\n  title\n);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$h({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, { title, className: classes.title });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { title }), /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, { className: classes.description, variant: \"body2\" }, description)), /* @__PURE__ */ React.createElement(Box, { className: classes.rightItemsBox }, children)));\n}\n\nconst useStyles$g = makeStyles(\n  (theme) => ({\n    micDrop: {\n      maxWidth: \"60%\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down(\"xs\")]: {\n        maxWidth: \"96%\",\n        bottom: \"unset\",\n        right: \"unset\",\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageMicDrop\" }\n);\nconst MicDrop = () => {\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\n    \"img\",\n    {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"\n    }\n  );\n};\n\nconst useStyles$f = makeStyles(\n  (theme) => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down(\"xs\")]: {\n        padding: theme.spacing(2)\n      }\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize\n      }\n    },\n    subtitle: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageErrorPage\" }\n);\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles$f();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0, className: classes.container }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      \"data-testid\": \"error\",\n      variant: \"body1\",\n      className: classes.subtitle\n    },\n    \"ERROR \",\n    status,\n    \": \",\n    statusMessage\n  ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", className: classes.subtitle }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.title }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", \"data-testid\": \"go-back-link\", onClick: () => navigate(-1) }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, { to: supportUrl || support.url }, \"contact support\"), \" if you think this is a bug.\")), /* @__PURE__ */ React.createElement(MicDrop, null));\n}\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      cursor: \"pointer\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsClickableText\" }\n)(Typography);\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      color: \"inherit\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsStyledBox\" }\n)(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null\n  );\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, { \"aria-label\": \"breadcrumb\", ...restProps }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, { onClick: handleClick }, \"...\"), /* @__PURE__ */ React.createElement(Box, { style: { fontStyle: \"italic\" } }, currentPage)), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl,\n      onClose: handleClose,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index, button: true }, /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, pageLink))))\n  ));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {\n  }\n};\nconst LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext\n);\nconst VersionedSidebarContext = createVersionedContext(\"sidebar-open-state-context\");\nfunction SidebarOpenStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n  if (versionedOpenStateContext === void 0) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return openStateContext;\n};\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n};\nconst LegacySidebarPinStateContext = createContext(defaultSidebarPinStateContext);\nconst VersionedSidebarPinStateContext = createVersionedContext(\"sidebar-pin-state-context\");\nfunction SidebarPinStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarPinStateContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarPinStateContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n  if (versionedPinStateContext === void 0) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return pinStateContext;\n};\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color\n    },\n    selected: (props) => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: \"-1px\"\n    }),\n    label: {\n      display: \"none\"\n    }\n  })\n);\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$e({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    /* @__PURE__ */ React.createElement(\n      BottomNavigationAction,\n      {\n        \"aria-label\": label,\n        label,\n        icon,\n        component: Link,\n        to: to ? to : location.pathname,\n        onChange,\n        value,\n        selected,\n        classes\n      }\n    )\n  );\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, { to, label, icon, value }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$d = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"fixed\",\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: \"1px solid #383838\",\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    overlay: (props) => ({\n      background: theme.palette.navigation.background,\n      width: \"100%\",\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: \"0 1 auto\",\n      overflow: \"auto\"\n    }),\n    overlayHeader: {\n      display: \"flex\",\n      color: theme.palette.text.primary,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(2, 3)\n    },\n    overlayHeaderClose: {\n      color: theme.palette.text.primary\n    },\n    marginMobileSidebar: (props) => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n    })\n  })\n);\nconst sortSidebarGroupsForPriority = (children) => orderBy(\n  children,\n  ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1,\n  \"desc\"\n);\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$d({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      anchor: \"bottom\",\n      open,\n      onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay\n      }\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.overlayHeader }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h3\" }, label), /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        onClick: onClose,\n        classes: { root: classes.overlayHeaderClose }\n      },\n      /* @__PURE__ */ React.createElement(CloseIcon, null)\n    )),\n    /* @__PURE__ */ React.createElement(Box, { component: \"nav\" }, children)\n  );\n};\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$d({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(\n    children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType)\n  );\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(\n      /* @__PURE__ */ React.createElement(SidebarGroup, { key: \"default_menu\", icon: /* @__PURE__ */ React.createElement(MenuIcon, null) }, children)\n    );\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {\n  } } }, /* @__PURE__ */ React.createElement(\n    MobileSidebarContext.Provider,\n    {\n      value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n    },\n    /* @__PURE__ */ React.createElement(\n      OverlayMenu,\n      {\n        label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n        open: shouldShowGroupChildren,\n        onClose: () => setSelectedMenuItemIndex(-1)\n      },\n      sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children\n    ),\n    /* @__PURE__ */ React.createElement(\n      BottomNavigation,\n      {\n        className: classes.root,\n        \"data-testid\": \"mobile-sidebar-root\",\n        component: \"nav\"\n      },\n      sidebarGroups\n    )\n  ));\n};\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\"\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      \"sidebarPinState\" /* SIDEBAR_PIN_STATE */,\n      JSON.stringify(state)\n    );\n  }\n};\n\nconst useStyles$c = makeStyles(\n  (theme) => ({\n    root: {\n      width: \"100%\",\n      transition: \"padding-left 0.1s ease-out\",\n      isolation: \"isolate\",\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: (props) => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: (props) => props.sidebarConfig.mobileSidebarHeight\n      },\n      \"@media print\": {\n        padding: \"0px !important\"\n      }\n    },\n    content: {\n      zIndex: 0,\n      isolation: \"isolate\",\n      \"&:focus\": {\n        outline: 0\n      }\n    }\n  }),\n  { name: \"BackstageSidebarPage\" }\n);\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(\n    () => LocalStorage.getSidebarPinState()\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef\n      }\n    }),\n    [contentRef]\n  );\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\"),\n    { noSsr: true }\n  );\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$c({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    SidebarPinStateProvider,\n    {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile\n      }\n    },\n    /* @__PURE__ */ React.createElement(PageContext.Provider, { value: pageContext }, /* @__PURE__ */ React.createElement(Box, { className: classes.root }, props.children))\n  );\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst useStyles$b = makeStyles(\n  (theme) => ({\n    drawer: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      }),\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      },\n      \"@media print\": {\n        display: \"none\"\n      }\n    },\n    drawerWidth: (props) => ({\n      width: props.sidebarConfig.drawerWidthClosed\n    }),\n    drawerOpen: (props) => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter\n      })\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: \"absolute\",\n      zIndex: 1e3,\n      transform: \"translateY(-200%)\",\n      \"&:focus\": {\n        transform: \"translateY(5px)\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebar\" }\n);\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$b({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"nav\", { style: {}, \"aria-label\": \"sidebar nav\" }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen } }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classes.root,\n      \"data-testid\": \"sidebar-root\",\n      onMouseEnter: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onFocus: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onMouseLeave: disableExpandOnHover ? () => {\n      } : handleClose,\n      onBlur: disableExpandOnHover ? () => {\n      } : handleClose\n    },\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classNames(classes.drawer, classes.drawerWidth, {\n          [classes.drawerOpen]: isOpen\n        })\n      },\n      children\n    )\n  )));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig(\n    (_a = props.sidebarOptions) != null ? _a : {}\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    (_b = props.submenuOptions) != null ? _b : {}\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig } }, /* @__PURE__ */ React.createElement(\n    DesktopSidebar,\n    {\n      openDelayMs,\n      closeDelayMs,\n      disableExpandOnHover\n    },\n    children\n  ));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$b({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classNames(classes.visuallyHidden)\n    },\n    \"Skip to content\"\n  );\n}\n\nfunction isLocationMatch(currentLocation, toLocation, exact = false) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const queryStringMatcher = exact ? isEqual : isMatch;\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && queryStringMatcher(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$a = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      item: {\n        height: 48,\n        width: \"100%\",\n        \"&:hover\": {\n          background: ((_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        },\n        display: \"flex\",\n        alignItems: \"center\",\n        color: theme.palette.navigation.color,\n        padding: theme.spacing(2.5),\n        cursor: \"pointer\",\n        position: \"relative\",\n        background: \"none\",\n        border: \"none\"\n      },\n      itemContainer: {\n        width: \"100%\"\n      },\n      selected: {\n        background: \"#6f6f6f\",\n        color: theme.palette.common.white\n      },\n      label: {\n        margin: theme.spacing(1.75),\n        marginLeft: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\",\n        lineHeight: 1\n      },\n      subtitle: {\n        fontSize: 10,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      dropdownArrow: {\n        position: \"absolute\",\n        right: 21\n      },\n      dropdown: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"end\"\n      },\n      dropdownItem: {\n        width: \"100%\",\n        padding: \"10px 0 10px 0\",\n        \"&:hover\": {\n          background: ((_b = theme.palette.navigation.navItem) == null ? void 0 : _b.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        }\n      },\n      textContent: {\n        color: theme.palette.navigation.color,\n        paddingLeft: theme.spacing(4),\n        paddingRight: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      }\n    };\n  },\n  { name: \"BackstageSidebarSubmenuItem\" }\n);\nconst SidebarSubmenuItem = (props) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems, exact } = props;\n  const classes = useStyles$a();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath$1(to != null ? to : \"\");\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation, exact);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath, exact);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        onClick: handleClickDropdown,\n        onTouchStart: (e) => e.stopPropagation(),\n        className: classNames(\n          classes.item,\n          isActive ? classes.selected : void 0\n        )\n      },\n      Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          component: \"span\",\n          className: classes.label\n        },\n        title,\n        /* @__PURE__ */ React.createElement(\"br\", null),\n        subtitle && /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            variant: \"caption\",\n            component: \"span\",\n            className: classes.subtitle\n          },\n          subtitle\n        )\n      ),\n      showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow })\n    )), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(Box, { className: classes.dropdown }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        key,\n        title: object.title,\n        enterDelay: 500,\n        enterNextDelay: 500\n      },\n      /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          to: object.to,\n          underline: \"none\",\n          className: classes.dropdownItem,\n          onClick: closeSubmenu,\n          onTouchStart: (e) => e.stopPropagation()\n        },\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.textContent }, object.title)\n      )\n    ))));\n  }\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      to,\n      underline: \"none\",\n      className: classNames(\n        classes.item,\n        isActive ? classes.selected : void 0\n      ),\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation()\n    },\n    Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n    /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"subtitle1\",\n        component: \"span\",\n        className: classes.label\n      },\n      title,\n      /* @__PURE__ */ React.createElement(\"br\", null),\n      subtitle && /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"caption\",\n          component: \"span\",\n          className: classes.subtitle\n        },\n        subtitle\n      )\n    )\n  )));\n};\n\nconst useStyles$9 = makeStyles(\n  (theme) => ({\n    root: {\n      zIndex: 1e3,\n      position: \"relative\",\n      overflow: \"visible\",\n      width: theme.spacing(7) + 1\n    },\n    drawer: (props) => {\n      var _a, _b;\n      return {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        alignItems: \"flex-start\",\n        position: \"fixed\",\n        [theme.breakpoints.up(\"sm\")]: {\n          marginLeft: props.left,\n          transition: theme.transitions.create(\"margin-left\", {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.shortest\n          })\n        },\n        top: 0,\n        bottom: 0,\n        padding: 0,\n        background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n        overflowX: \"hidden\",\n        msOverflowStyle: \"none\",\n        scrollbarWidth: \"none\",\n        cursor: \"default\",\n        width: props.submenuConfig.drawerWidthClosed,\n        transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n        \"& > *\": {\n          flexShrink: 0\n        },\n        \"&::-webkit-scrollbar\": {\n          display: \"none\"\n        }\n      };\n    },\n    drawerOpen: (props) => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n        position: \"relative\",\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0\n      }\n    }),\n    title: {\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.common.white,\n      padding: theme.spacing(2.5),\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebarSubmenu\" }\n);\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$9({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen\n      })\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"span\", className: classes.title }, props.title),\n    props.children\n  );\n};\n\nconst useStyles$8 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$8();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst useStyles$7 = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles(\n  (theme) => {\n    var _a, _b, _c, _d;\n    return {\n      root: {\n        color: theme.palette.navigation.color,\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        alignItems: \"center\",\n        height: 48,\n        cursor: \"pointer\"\n      },\n      buttonItem: {\n        background: \"none\",\n        border: \"none\",\n        width: \"100%\",\n        margin: 0,\n        padding: 0,\n        textAlign: \"inherit\",\n        font: \"inherit\",\n        textTransform: \"none\"\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: \"center\"\n      },\n      open: {\n        [theme.breakpoints.up(\"sm\")]: {\n          width: sidebarConfig.drawerWidthOpen\n        }\n      },\n      highlightable: {\n        \"&:hover\": {\n          background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n        }\n      },\n      highlighted: {\n        background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: \"bold\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"auto\",\n        flex: \"3 1 auto\",\n        width: \"110px\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      iconContainer: {\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        lineHeight: \"0\"\n      },\n      searchRoot: {\n        marginBottom: 12\n      },\n      searchField: {\n        color: \"#b5b5b5\",\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: theme.typography.fontSize\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2)\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: \"center\",\n        marginRight: theme.spacing(1)\n      },\n      closedItemIcon: {\n        width: \"100%\",\n        justifyContent: \"center\"\n      },\n      submenuArrow: {\n        display: \"flex\"\n      },\n      expandButton: {\n        background: \"none\",\n        border: \"none\",\n        color: theme.palette.navigation.color,\n        width: \"100%\",\n        cursor: \"pointer\",\n        position: \"relative\",\n        height: 48\n      },\n      arrows: {\n        position: \"absolute\",\n        right: 10\n      },\n      selected: {\n        \"&$root\": {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor\n        },\n        \"&$closed\": {\n          width: sidebarConfig.drawerWidthClosed\n        },\n        \"& $closedItemIcon\": {\n          paddingRight: sidebarConfig.selectedIndicatorWidth\n        },\n        \"& $iconContainer\": {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth\n        }\n      }\n    };\n  },\n  { name: \"BackstageSidebarItem\" }\n);\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig]\n  );\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(\n  submenu.props.children,\n  (elements) => {\n    let active = false;\n    elements.getElements().forEach(\n      ({\n        props: { to, dropdownItems }\n      }) => {\n        if (!active) {\n          if (dropdownItems == null ? void 0 : dropdownItems.length) {\n            dropdownItems.forEach(\n              ({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to))\n            );\n            return;\n          }\n          if (to) {\n            active = isLocationMatch(location, resolvePath(to));\n          }\n        }\n      }\n    );\n    return active;\n  },\n  [location.pathname]\n);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath$1(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(\n    Link$1,\n    {\n      ...rest,\n      to,\n      ref,\n      \"aria-current\": ariaCurrent,\n      style: { ...style, ...isActive ? activeStyle : void 0 },\n      className: classNames([\n        className,\n        isActive ? activeClassName : void 0\n      ])\n    }\n  );\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    noTrack,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useSidebarOpenState();\n  const divStyle = !isOpen && hasSubmenu ? { display: \"flex\", marginLeft: \"20px\" } : { lineHeight: \"0\" };\n  const displayItemIcon = /* @__PURE__ */ React.createElement(Box, { style: divStyle }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), !isOpen && hasSubmenu ? /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(React.Fragment, null));\n  const itemIcon = /* @__PURE__ */ React.createElement(\n    Badge,\n    {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classNames({ [classes.closedItemIcon]: !isOpen })\n    },\n    displayItemIcon\n  );\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { \"data-testid\": \"login-button\", className: classes.iconContainer }, itemIcon), text && /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.label\n    },\n    text\n  ), /* @__PURE__ */ React.createElement(\"div\", { className: classes.secondaryAction }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight }\n    )\n  };\n  const analyticsApi = useAnalytics();\n  const { pathname: to } = useResolvedPath$1(\n    !isButtonItem(props) && props.to ? props.to : \"\"\n  );\n  const handleClick = useCallback(\n    (event) => {\n      if (!noTrack) {\n        const action = \"click\";\n        const subject = text != null ? text : \"Sidebar Item\";\n        const options = to ? { attributes: { to } } : void 0;\n        analyticsApi.captureEvent(action, subject, options);\n      }\n      onClick == null ? void 0 : onClick(event);\n    },\n    [analyticsApi, text, to, noTrack, onClick]\n  );\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        \"aria-label\": text,\n        ...childProps,\n        ref,\n        onClick: handleClick\n      },\n      content\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    WorkaroundNavLink,\n    {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : \"\",\n      ref,\n      \"aria-label\": text ? text : props.to,\n      ...navLinkProps,\n      onClick: handleClick\n    },\n    content\n  );\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { fontSize: \"small\", className: classes.submenuArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { fontSize: \"small\", className: classes.submenuArrow });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow });\n  };\n  return /* @__PURE__ */ React.createElement(\n    SidebarItemWithSubmenuContext.Provider,\n    {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        \"data-testid\": \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classNames(isHoveredOn && classes.highlighted)\n      },\n      /* @__PURE__ */ React.createElement(\n        SidebarItemBase,\n        {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : \"\",\n          ...props\n        },\n        arrowIcon()\n      ),\n      isHoveredOn && children\n    )\n  );\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(\n    props.children,\n    (elements) => (\n      // Directly comparing child.type with SidebarSubmenu will not work with in\n      // combination with react-hot-loader\n      //\n      // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n      elements.getElements().filter((child) => child.type === sidebarSubmenuType)\n    )\n  );\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, { ...props }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, { ...props, ref });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.searchRoot }, /* @__PURE__ */ React.createElement(\n    SidebarItem,\n    {\n      icon: Icon,\n      to: props.to,\n      onClick: handleItemClick,\n      disableHighlight: true\n    },\n    /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        placeholder: \"Search\",\n        value: input,\n        onClick: handleInputClick,\n        onChange: handleInput,\n        onKeyDown: handleEnter,\n        className: classes.searchContainer,\n        InputProps: {\n          disableUnderline: true,\n          className: classes.searchField\n        },\n        inputProps: {\n          className: classes.searchFieldHTMLInput\n        }\n      }\n    )\n  ));\n}\nconst SidebarSpace = styled(\"div\")(\n  {\n    flex: 1\n  },\n  { name: \"BackstageSidebarSpace\" }\n);\nconst SidebarSpacer = styled(\"div\")(\n  {\n    height: 8\n  },\n  { name: \"BackstageSidebarSpacer\" }\n);\nconst SidebarDivider = styled(\"hr\")(\n  ({ theme }) => ({\n    height: 1,\n    width: \"100%\",\n    background: \"#383838\",\n    border: \"none\",\n    margin: theme.spacing(1.2, 0)\n  }),\n  { name: \"BackstageSidebarDivider\" }\n);\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.secondary,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    // 5px space to the right of the scrollbar\n    width: \"calc(100% - 5px)\",\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      role: \"button\",\n      onClick: handleClick,\n      className: classes.expandButton,\n      \"aria-label\": \"Expand Sidebar\",\n      \"data-testid\": \"sidebar-expand-button\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.arrows }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null))\n  );\n};\n\nconst useStyles$6 = makeStyles(\n  (theme) => ({\n    introCard: (props) => ({\n      color: \"#b5b5b5\",\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: theme.spacing(2.25),\n      marginBottom: theme.spacing(1.5),\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding\n    }),\n    introDismiss: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginTop: theme.spacing(1.5)\n    },\n    introDismissLink: {\n      color: \"#dddddd\",\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(0.5),\n      \"&:hover\": {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create(\"color\", {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest\n        })\n      }\n    },\n    introDismissText: {\n      fontSize: \"0.7rem\",\n      fontWeight: \"bold\",\n      textTransform: \"uppercase\",\n      letterSpacing: 1\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: theme.spacing(1.5)\n    }\n  }),\n  { name: \"BackstageSidebarIntro\" }\n);\nfunction IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$6({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.introCard }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, text), /* @__PURE__ */ React.createElement(Box, { className: classes.introDismiss }, /* @__PURE__ */ React.createElement(IconButton, { onClick: handleClose, className: classes.introDismissLink }, /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.introDismissIcon }), /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.introDismissText }, \"Dismiss\"))));\n}\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return /* @__PURE__ */ React.createElement(Collapse, { in: !collapsing, onExited: onDismiss }, /* @__PURE__ */ React.createElement(IntroCard, { text, onClose: startDismissing }));\n};\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (\\u2B50) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText = \"And your recently viewed plugins will pop up here!\";\nfunction SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false\n  };\n  const { value: dismissedIntro, set: setDismissedIntro } = useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } = dismissedIntro != null ? dismissedIntro : {};\n  const dismissStarred = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true\n    }));\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !starredItemsDismissed && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: starredIntroText,\n      onDismiss: dismissStarred\n    }\n  ), /* @__PURE__ */ React.createElement(SidebarDivider, null)), !recentlyViewedItemsDismissed && /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: recentlyViewedIntroText,\n      onDismiss: dismissRecentlyViewed\n    }\n  ));\n}\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    header: {\n      gridArea: \"pageHeader\",\n      padding: theme.spacing(3),\n      width: \"100%\",\n      boxShadow: theme.shadows[4],\n      position: \"relative\",\n      zIndex: 100,\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      [theme.breakpoints.down(\"sm\")]: {\n        flexWrap: \"wrap\"\n      }\n    },\n    leftItemsBox: {\n      maxWidth: \"100%\",\n      flexGrow: 1\n    },\n    rightItemsBox: {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: \"break-word\",\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: \"inline-block\",\n      // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: \"75ch\"\n    },\n    type: {\n      textTransform: \"uppercase\",\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor\n    },\n    breadcrumb: {\n      color: theme.page.fontColor\n    },\n    breadcrumbType: {\n      fontSize: \"inherit\",\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    },\n    breadcrumbTitle: {\n      fontSize: \"inherit\",\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageHeader\" }\n);\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, { className: classes.type }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, { className: classes.breadcrumb }, /* @__PURE__ */ React.createElement(Link, { to: typeLink }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const { contentRef } = useContent();\n  const FinalTitle = /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      ref: contentRef,\n      tabIndex: -1,\n      className: classes.title,\n      variant: \"h1\"\n    },\n    pageTitle\n  );\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: tooltip, placement: \"top-start\" }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\"\n    },\n    subtitle\n  );\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { titleTemplate, defaultTitle }), /* @__PURE__ */ React.createElement(\"header\", { style, className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, /* @__PURE__ */ React.createElement(\n    TypeFragment,\n    {\n      classes,\n      type,\n      typeLink,\n      pageTitle\n    }\n  ), /* @__PURE__ */ React.createElement(\n    TitleFragment,\n    {\n      classes,\n      pageTitle,\n      tooltip\n    }\n  ), /* @__PURE__ */ React.createElement(SubtitleFragment, { classes, subtitle })), /* @__PURE__ */ React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4 }, children)));\n}\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick\n}) => {\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      \"data-testid\": \"header-action-item\",\n      disabled,\n      button: true,\n      onClick: (event) => {\n        if (onClick) {\n          onClick(event);\n        }\n      }\n    },\n    icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon),\n    /* @__PURE__ */ React.createElement(ListItemText, { primary: label, secondary: secondaryLabel })\n  ));\n};\nfunction HeaderActionMenu(props) {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme();\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      onClick: () => setOpen(true),\n      \"data-testid\": \"header-action-menu\",\n      ref: anchorElRef,\n      style: {\n        color: white,\n        height: 56,\n        width: 56,\n        marginRight: -4,\n        padding: 0\n      }\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl: anchorElRef.current,\n      anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n      transformOrigin: { horizontal: \"right\", vertical: \"top\" },\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(List, null, actionItems.map((actionItem, i) => {\n      return /* @__PURE__ */ React.createElement(ActionItem, { key: `header-action-menu-${i}`, ...actionItem });\n    }))\n  ));\n}\n\nconst useStyles$4 = makeStyles(\n  (theme) => ({\n    root: {\n      textAlign: \"left\"\n    },\n    label: {\n      color: theme.page.fontColor,\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1\n    },\n    value: {\n      color: alpha(theme.page.fontColor, 0.8),\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1\n    }\n  }),\n  { name: \"BackstageHeaderLabel\" }\n);\nconst HeaderLabelContent = ({ value, className }) => {\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: typeof value === \"string\" ? \"p\" : \"span\",\n      className\n    },\n    value\n  );\n};\nfunction HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(\n    HeaderLabelContent,\n    {\n      className: classes.value,\n      value: value || \"<Unknown>\"\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.root }, /* @__PURE__ */ React.createElement(Typography, { className: classes.label }, label), url ? /* @__PURE__ */ React.createElement(Link, { to: url }, content) : content));\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\" }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"h4\" }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, { title, subtitle: subtitle || type })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, { size: \"small\", label: tag, key: i }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(LinkButton, { to: \"#\", onClick, color: \"primary\" }, label), href && /* @__PURE__ */ React.createElement(LinkButton, { to: href, color: \"primary\" }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root, ...otherProps }, children);\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"grid\",\n      gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: \"max-content auto 1fr\",\n      gridTemplateColumns: \"auto 1fr auto\",\n      overflowY: \"auto\",\n      height: \"100vh\",\n      [theme.breakpoints.down(\"xs\")]: {\n        height: \"100%\"\n      },\n      \"@media print\": {\n        display: \"block\",\n        height: \"auto\",\n        overflowY: \"inherit\"\n      }\n    }\n  }),\n  { name: \"BackstagePage\" }\n);\nfunction Page(props) {\n  const { themeId, children } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    ThemeProvider,\n    {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId })\n      })\n    },\n    /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, children)\n  );\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId }, /* @__PURE__ */ React.createElement(Header, { ...restProps }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(window.atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    __publicField$1(this, \"options\");\n    __publicField$1(this, \"abortController\");\n    __publicField$1(this, \"state\");\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && /* @__PURE__ */ new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then(\n      (session) => {\n        this.state = {\n          type: \"active\",\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token)\n        };\n        return session;\n      },\n      (error) => {\n        this.state = {\n          type: \"failed\",\n          error\n        };\n        throw error;\n      }\n    );\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const headers = typeof this.options.headers === \"function\" ? await this.options.headers() : this.options.headers;\n    const mergedHeaders = new Headers(headers);\n    mergedHeaders.set(\"X-Requested-With\", \"XMLHttpRequest\");\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: mergedHeaders,\n        credentials: \"include\"\n      }\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n      headers: props.headers\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n        error\n      }\n    );\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(window.atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n    __publicField(this, \"profilePromise\");\n  }\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        \"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\"\n      );\n    }\n    return this.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: \"none\"\n    },\n    item: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      maxWidth: \"400px\",\n      margin: 0,\n      padding: 0\n    }\n  },\n  { name: \"BackstageSignInPage\" }\n);\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, { component: \"li\", item: true, classes }, children);\n};\n\nconst Component$2 = ({\n  config,\n  onSignInStarted,\n  onSignInSuccess,\n  onSignInFailure\n}) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      onSignInStarted();\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        onSignInFailure();\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`\n        );\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi\n        })\n      );\n    } catch (error) {\n      onSignInFailure();\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      variant: \"fullHeight\",\n      title,\n      actions: /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"outlined\", onClick: handleLogin }, \"Sign In\")\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, message)\n  ));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInStarted, onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n  InfoCard,\n  {\n    title: \"Guest\",\n    variant: \"fullHeight\",\n    actions: /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        variant: \"outlined\",\n        onClick: () => {\n          onSignInStarted();\n          onSignInSuccess(new GuestUserIdentity());\n        }\n      },\n      \"Enter\"\n    )\n  },\n  /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")\n));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles(\n  (theme) => ({\n    form: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\"\n    },\n    button: {\n      alignSelf: \"center\",\n      marginTop: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageCustomProvider\" }\n);\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInStarted, onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId, idToken }) => {\n    onSignInStarted();\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        getIdToken: idToken !== void 0 ? async () => idToken : void 0,\n        profile: {\n          email: `${userId}@example.com`\n        }\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, { title: \"Custom User\", variant: \"fullHeight\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", { className: classes.form, onSubmit: handleSubmit(handleResult) }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(register(\"userId\", { required: true })),\n      label: \"User ID\",\n      margin: \"normal\",\n      error: Boolean(errors.userId)\n    }\n  ), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(\n        register(\"idToken\", {\n          required: false,\n          validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n        })\n      ),\n      label: \"ID Token (optional)\",\n      margin: \"normal\",\n      autoComplete: \"off\",\n      error: Boolean(errors.idToken)\n    }\n  ), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.idToken.message)), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      type: \"submit\",\n      color: \"primary\",\n      variant: \"outlined\",\n      className: classes.button,\n      disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n    },\n    \"Continue\"\n  ))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`\n    );\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === \"string\") {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n        return acc;\n      }\n      const { id } = config;\n      validateIDs(id, acc);\n      acc[id] = { components: signInProviders.common, id, config };\n      return acc;\n    },\n    {}\n  );\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            var _a;\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n          }\n        })\n      );\n    },\n    [onSignInSuccess]\n  );\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY\n    );\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      if (didCancel) {\n        return;\n      }\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(\n    () => Object.keys(providers).map((key) => {\n      const provider = providers[key];\n      const { Component } = provider.components;\n      const handleSignInSuccess = (result) => {\n        handleWrappedResult(result);\n      };\n      const handleSignInStarted = () => {\n        var _a;\n        localStorage.setItem(\n          PROVIDER_STORAGE_KEY,\n          ((_a = provider == null ? void 0 : provider.config) == null ? void 0 : _a.id) || provider.id\n        );\n      };\n      const handleSignInFailure = () => {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      };\n      return /* @__PURE__ */ React.createElement(\n        Component,\n        {\n          key: provider.id,\n          config: provider.config,\n          onSignInStarted: handleSignInStarted,\n          onSignInSuccess: handleSignInSuccess,\n          onSignInFailure: handleSignInFailure\n        }\n      );\n    }),\n    [providers, handleWrappedResult]\n  );\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, { title, textAlign: align }), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: align === \"center\" ? align : \"flex-start\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    providerElements\n  )));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`\n          );\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile\n        })\n      );\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: \"center\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n      InfoCard,\n      {\n        variant: \"fullHeight\",\n        title: provider.title,\n        actions: /* @__PURE__ */ React.createElement(\n          Button$1,\n          {\n            color: \"primary\",\n            variant: \"outlined\",\n            onClick: () => {\n              login({ showPopup: true });\n            }\n          },\n          \"Sign In\"\n        )\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, provider.message),\n      error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"error\" }, error.message)\n    ))\n  ))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, { ...props });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, { ...props });\n}\n\nconst useTabsStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3)\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageTabbedCard\" }\n);\nconst BoldHeader = withStyles(\n  (theme) => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) }\n  }),\n  { name: \"BackstageTabbedCardBoldHeader\" }\n)(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(BoldHeader, { title }), /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      classes: tabsClasses,\n      value: value || selectedIndex,\n      onChange: handleChange\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\nconst useCardTabStyles = makeStyles(\n  (theme) => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: \"none\",\n      \"&:hover\": {\n        opacity: 1,\n        backgroundColor: \"transparent\",\n        color: theme.palette.text.primary\n      }\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold\n    }\n  }),\n  { name: \"BackstageCardTab\" }\n);\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(TabUI, { disableRipple: true, classes, ...restProps });\n}\n\nexport { AlertDisplay, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderActionMenu, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HorizontalScrollGrid, InfoCard, IntroCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LinkButton, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, LegacySidebarContext as SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarIntro, SidebarItem, SidebarOpenStateProvider, SidebarPage, LegacySidebarPinStateContext as SidebarPinStateContext, SidebarPinStateProvider, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSidebarOpenState, useSidebarPinState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport React from 'react';\n\nconst contextKey = \"plugin-context\";\nconst PluginProvider = (props) => {\n  const { children, plugin } = props;\n  const { Provider } = createVersionedContext(contextKey);\n  return /* @__PURE__ */ React.createElement(\n    Provider,\n    {\n      value: createVersionedValueMap({\n        1: {\n          plugin\n        }\n      })\n    },\n    children\n  );\n};\nfunction usePluginOptions() {\n  const versionedHolder = useVersionedContext(\n    contextKey\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Plugin Options context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"Plugin Options v1 is not available\");\n  }\n  return value.plugin.getPluginOptions();\n}\n\nexport { PluginProvider as P, usePluginOptions as u };\n//# sourceMappingURL=usePluginOptions-68e31f9f.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, useEffect, Children, isValidElement, Fragment } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { P as PluginProvider } from './esm/usePluginOptions-68e31f9f.esm.js';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue }, children);\n};\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new Error(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, { ...props, ...impls });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`\n      );\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst bitbucketServerAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket-server\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nconst globalEvents = getOrCreateGlobalSingleton(\n  \"core-plugin-api:analytics-tracker-events\",\n  () => ({\n    mostRecentGatheredNavigation: void 0,\n    mostRecentRoutableExtensionRender: void 0,\n    beforeUnloadRegistered: false\n  })\n);\nconst routableExtensionRenderedEvent = \"_ROUTABLE-EXTENSION-RENDERED\";\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n    if (!globalEvents.beforeUnloadRegistered) {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (globalEvents.mostRecentGatheredNavigation) {\n            this.analyticsApi.captureEvent({\n              ...globalEvents.mostRecentGatheredNavigation,\n              ...globalEvents.mostRecentRoutableExtensionRender\n            });\n            globalEvents.mostRecentGatheredNavigation = void 0;\n            globalEvents.mostRecentRoutableExtensionRender = void 0;\n          }\n        },\n        { once: true, passive: true }\n      );\n      globalEvents.beforeUnloadRegistered = true;\n    }\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    const { _routeNodeType, ...context } = this.context;\n    if (action === routableExtensionRenderedEvent) {\n      if (globalEvents.mostRecentGatheredNavigation) {\n        globalEvents.mostRecentRoutableExtensionRender = {\n          context: {\n            ...context,\n            extension: \"App\"\n          }\n        };\n      }\n      return;\n    }\n    if (globalEvents.mostRecentGatheredNavigation) {\n      try {\n        this.analyticsApi.captureEvent({\n          ...globalEvents.mostRecentGatheredNavigation,\n          ...globalEvents.mostRecentRoutableExtensionRender\n        });\n      } catch (e) {\n        console.warn(\"Error during analytics event capture. %o\", e);\n      }\n      globalEvents.mostRecentGatheredNavigation = void 0;\n      globalEvents.mostRecentRoutableExtensionRender = void 0;\n    }\n    if (action === \"navigate\" && _routeNodeType === \"gathered\" && context.pluginId === \"root\") {\n      globalEvents.mostRecentGatheredNavigation = {\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      };\n      return;\n    }\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\n    \"app-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\n  \"component-data-store\",\n  () => /* @__PURE__ */ new WeakMap()\n);\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`\n    );\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    __publicField$4(this, _a$2, \"absolute\");\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(\n    config.id,\n    (_a2 = config.params) != null ? _a2 : []\n  );\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    __publicField$3(this, _a$1, \"sub\");\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params\n  );\n  return subRouteRef;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    __publicField$2(this, _a, \"external\");\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(\n    options.id,\n    (_a2 = options.params) != null ? _a2 : [],\n    Boolean(options.optional)\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, { pathname }),\n    [resolver, routeRef, pathname]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"state\", { error: void 0 });\n    __publicField$1(this, \"handleErrorReset\", () => {\n      this.setState({ error: void 0 });\n    });\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ErrorBoundaryFallback,\n        {\n          error,\n          resetError: this.handleErrorReset,\n          plugin\n        }\n      );\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then(\n        (InnerComponent) => {\n          const RoutableExtensionWrapper = (props) => {\n            const analytics = useAnalytics();\n            try {\n              useRouteRef(mountPoint);\n            } catch (error) {\n              if (typeof error === \"object\" && error !== null) {\n                const { message } = error;\n                if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                  throw new Error(\n                    `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`\n                  );\n                }\n              }\n              throw error;\n            }\n            useEffect(() => {\n              analytics.captureEvent(routableExtensionRenderedEvent, \"\");\n            }, [analytics]);\n            return /* @__PURE__ */ React.createElement(InnerComponent, { ...props });\n          };\n          const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n          RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n          return RoutableExtensionWrapper;\n        },\n        (error) => {\n          const RoutableExtensionWrapper = (_) => {\n            const app = useApp();\n            const { BootErrorPage } = app.getComponents();\n            return /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-chunk\", error });\n          };\n          return RoutableExtensionWrapper;\n        }\n      )\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\n      \"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\"\n    );\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(\n      () => lazyLoader().then((component) => ({ default: component }))\n    );\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, { app, plugin }, /* @__PURE__ */ React.createElement(\n          AnalyticsContext,\n          {\n            attributes: {\n              pluginId: plugin.getId(),\n              ...name && { extension: name },\n              ...mountPoint && { routeRef: mountPoint.id }\n            }\n          },\n          /* @__PURE__ */ React.createElement(PluginProvider, { plugin }, /* @__PURE__ */ React.createElement(Component, { ...props }))\n        )));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      attachComponentData(Result, \"core.extensionName\", name);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError\n      );\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError\n        );\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError\n    );\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0,\n      query.withStrictError\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0\n    );\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n    __publicField(this, \"options\");\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  __experimentalReconfigure(options) {\n    if (this.config.__experimentalConfigure) {\n      this.options = this.config.__experimentalConfigure(options);\n    }\n  }\n  getPluginOptions() {\n    var _a;\n    if (this.config.__experimentalConfigure && !this.options) {\n      this.options = this.config.__experimentalConfigure();\n    }\n    return (_a = this.options) != null ? _a : {};\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, FeatureFlagState, SessionState, alertApiRef, analyticsApiRef, appThemeApiRef, atlassianAuthApiRef, attachComponentData, bitbucketAuthApiRef, bitbucketServerAuthApiRef, configApiRef, createApiFactory, createApiRef, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, discoveryApiRef, errorApiRef, featureFlagsApiRef, fetchApiRef, getComponentData, githubAuthApiRef, gitlabAuthApiRef, googleAuthApiRef, identityApiRef, microsoftAuthApiRef, oauthRequestApiRef, oktaAuthApiRef, oneloginAuthApiRef, storageApiRef, useAnalytics, useApi, useApiHolder, useApp, useElementFilter, useRouteRef, useRouteRefParams, withApis };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`\n    );\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    /**\n     * An inner error that caused this error to be thrown, if any.\n     */\n    __publicField$2(this, \"cause\");\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    if (!this.name || this.name === \"Error\") {\n      const baseName = this.constructor.name;\n      if (baseName !== \"Error\") {\n        this.name = this.constructor.name;\n      }\n    }\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass InputError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"InputError\");\n  }\n}\nclass AuthenticationError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"AuthenticationError\");\n  }\n}\nclass NotAllowedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotAllowedError\");\n  }\n}\nclass NotFoundError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotFoundError\");\n  }\n}\nclass ConflictError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"ConflictError\");\n  }\n}\nclass NotModifiedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotModifiedError\");\n  }\n}\nclass NotImplementedError extends CustomErrorBase {\n  constructor() {\n    super(...arguments);\n    __publicField$1(this, \"name\", \"NotImplementedError\");\n  }\n}\nclass ServiceUnavailableError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ResponseError extends Error {\n  constructor(props) {\n    super(props.message);\n    /**\n     * The actual response, as seen by the client.\n     *\n     * Note that the body of this response is always consumed. Its parsed form is\n     * in the `body` field.\n     */\n    __publicField(this, \"response\");\n    /**\n     * The parsed JSON error body, as sent by the server.\n     */\n    __publicField(this, \"body\");\n    /**\n     * The Error cause, as seen by the remote server. This is parsed out of the\n     * JSON error body.\n     *\n     * This error always has the plain Error constructor, however all\n     * serializable enumerable fields on the remote error including its name are\n     * preserved. Therefore, if you want to check the error type, use its name\n     * property rather than checking typeof or its constructor or prototype.\n     */\n    __publicField(this, \"cause\");\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotImplementedError, NotModifiedError, ResponseError, ServiceUnavailableError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createApiFactory, githubAuthApiRef, gitlabAuthApiRef, microsoftAuthApiRef, bitbucketAuthApiRef, useApp } from '@backstage/core-plugin-api';\nimport { ScmIntegrations } from '@backstage/integration';\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\n\nconst scmAuthApiRef = createApiRef({\n  id: \"core.scmauth\"\n});\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _providers, _api, _host, _scopeMapping, _providerName;\nclass ScmAuthMux {\n  constructor(providers) {\n    __privateAdd(this, _providers, void 0);\n    __privateSet(this, _providers, providers);\n  }\n  async getCredentials(options) {\n    const url = new URL(options.url);\n    const provider = __privateGet(this, _providers).find((p) => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`\n      );\n    }\n    return provider.getCredentials(options);\n  }\n}\n_providers = new WeakMap();\nconst _ScmAuth = class _ScmAuth {\n  constructor(providerName, api, host, scopeMapping) {\n    __privateAdd(this, _api, void 0);\n    __privateAdd(this, _host, void 0);\n    __privateAdd(this, _scopeMapping, void 0);\n    __privateAdd(this, _providerName, void 0);\n    __privateSet(this, _api, api);\n    __privateSet(this, _host, host);\n    __privateSet(this, _scopeMapping, scopeMapping);\n    __privateSet(this, _providerName, providerName);\n  }\n  /**\n   * Creates an API factory that enables auth for each of the default SCM providers.\n   */\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) => _ScmAuth.merge(\n        _ScmAuth.forGithub(github),\n        _ScmAuth.forGitlab(gitlab),\n        _ScmAuth.forAzure(azure),\n        _ScmAuth.forBitbucket(bitbucket)\n      )\n    });\n  }\n  /**\n   * Creates a general purpose ScmAuth instance with a custom scope mapping.\n   */\n  static forAuthApi(authApi, options) {\n    return new _ScmAuth(\"generic\", authApi, options.host, options.scopeMapping);\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitHub.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `github.com`.\n   *\n   * The default scopes are:\n   *\n   * `repo read:org read:user`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `gist`\n   */\n  static forGithub(githubAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"github.com\";\n    return new _ScmAuth(\"github\", githubAuthApi, host, {\n      default: [\"repo\", \"read:org\", \"read:user\"],\n      repoWrite: [\"gist\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards GitLab.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `gitlab.com`.\n   *\n   * The default scopes are:\n   *\n   * `read_user read_api read_repository`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `write_repository api`\n   */\n  static forGitlab(gitlabAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"gitlab.com\";\n    return new _ScmAuth(\"gitlab\", gitlabAuthApi, host, {\n      default: [\"read_user\", \"read_api\", \"read_repository\"],\n      repoWrite: [\"write_repository\", \"api\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Azure.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `dev.azure.com`.\n   *\n   * The default scopes are:\n   *\n   * `vso.build vso.code vso.graph vso.project vso.profile`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `vso.code_manage`\n   */\n  static forAzure(microsoftAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"dev.azure.com\";\n    return new _ScmAuth(\"azure\", microsoftAuthApi, host, {\n      default: [\n        \"vso.build\",\n        \"vso.code\",\n        \"vso.graph\",\n        \"vso.project\",\n        \"vso.profile\"\n      ],\n      repoWrite: [\"vso.code_manage\"]\n    });\n  }\n  /**\n   * Creates a new ScmAuth instance that handles authentication towards Bitbucket.\n   *\n   * The host option determines which URLs that are handled by this instance and defaults to `bitbucket.org`.\n   *\n   * The default scopes are:\n   *\n   * `account team pullrequest snippet issue`\n   *\n   * If the additional `repoWrite` permission is requested, these scopes are added:\n   *\n   * `pullrequest:write snippet:write issue:write`\n   */\n  static forBitbucket(bitbucketAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"bitbucket.org\";\n    return new _ScmAuth(\"bitbucket\", bitbucketAuthApi, host, {\n      default: [\"account\", \"team\", \"pullrequest\", \"snippet\", \"issue\"],\n      repoWrite: [\"pullrequest:write\", \"snippet:write\", \"issue:write\"]\n    });\n  }\n  /**\n   * Merges together multiple ScmAuth instances into one that\n   * routes requests to the correct instance based on the URL.\n   */\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n  /**\n   * Checks whether the implementation is able to provide authentication for the given URL.\n   */\n  isUrlSupported(url) {\n    return url.host === __privateGet(this, _host);\n  }\n  getAdditionalScopesForProvider(additionalScopes) {\n    var _a, _b;\n    if (!(additionalScopes == null ? void 0 : additionalScopes.customScopes) || __privateGet(this, _providerName) === \"generic\") {\n      return [];\n    }\n    return (_b = (_a = additionalScopes.customScopes) == null ? void 0 : _a[__privateGet(this, _providerName)]) != null ? _b : [];\n  }\n  /**\n   * Fetches credentials for the given resource.\n   */\n  async getCredentials(options) {\n    const { url, additionalScope, ...restOptions } = options;\n    const scopes = __privateGet(this, _scopeMapping).default.slice();\n    if (additionalScope == null ? void 0 : additionalScope.repoWrite) {\n      scopes.push(...__privateGet(this, _scopeMapping).repoWrite);\n    }\n    const additionalScopes = this.getAdditionalScopesForProvider(additionalScope);\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n    const uniqueScopes = [...new Set(scopes)];\n    const token = await __privateGet(this, _api).getAccessToken(uniqueScopes, restOptions);\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }\n};\n_api = new WeakMap();\n_host = new WeakMap();\n_scopeMapping = new WeakMap();\n_providerName = new WeakMap();\nlet ScmAuth = _ScmAuth;\n\nclass ScmIntegrationsApi {\n  /**\n   * Instantiates an {@link @backstage/integration#ScmIntegrationRegistry}.\n   *\n   * @param config - The root of the config hierarchy.\n   */\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\nconst scmIntegrationsApiRef = createApiRef({\n  id: \"integration.scmintegrations\"\n});\n\nconst ScmIntegrationIcon = (props) => {\n  var _a;\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? (_a = app.getSystemIcon(type)) != null ? _a : DefaultIcon : DefaultIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\n\nexport { ScmAuth, ScmIntegrationIcon, ScmIntegrationsApi, scmAuthApiRef, scmIntegrationsApiRef };\n//# sourceMappingURL=index.esm.js.map\n","import parseGitUrl from 'git-url-parse';\nimport { trimEnd, trimStart } from 'lodash';\nimport { ClientSecretCredential, ManagedIdentityCredential } from '@azure/identity';\nimport fetch from 'cross-fetch';\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\nfunction isValidHost(host) {\n  const check = new URL(\"http://example.com\");\n  check.host = host;\n  return check.host === host;\n}\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction basicIntegrations(integrations, getHost) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === \"string\" ? new URL(url) : url;\n        return integrations.find((i) => getHost(i) === parsed.host);\n      } catch {\n        return void 0;\n      }\n    },\n    byHost(host) {\n      return integrations.find((i) => getHost(i) === host);\n    }\n  };\n}\nfunction defaultScmResolveUrl(options) {\n  const { url, base, lineNumber } = options;\n  try {\n    new URL(url);\n    return url;\n  } catch {\n  }\n  let updated;\n  if (url.startsWith(\"/\")) {\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      \"/\"\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    updated = new URL(url, base);\n  }\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n\nconst AMAZON_AWS_HOST = \"amazonaws.com\";\nfunction readAwsS3IntegrationConfig(config) {\n  var _a;\n  const endpoint = config.getOptionalString(\"endpoint\");\n  const s3ForcePathStyle = (_a = config.getOptionalBoolean(\"s3ForcePathStyle\")) != null ? _a : false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`\n      );\n    }\n    if (pathname !== \"/\") {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n  const accessKeyId = config.getOptionalString(\"accessKeyId\");\n  const secretAccessKey = config.getOptionalString(\"secretAccessKey\");\n  const roleArn = config.getOptionalString(\"roleArn\");\n  const externalId = config.getOptionalString(\"externalId\");\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId\n  };\n}\nfunction readAwsS3IntegrationConfigs(configs) {\n  const result = configs.map(readAwsS3IntegrationConfig);\n  if (!result.some((c) => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST\n    });\n  }\n  return result;\n}\n\nvar __defProp$c = Object.defineProperty;\nvar __defNormalProp$c = (obj, key, value) => key in obj ? __defProp$c(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$c = (obj, key, value) => {\n  __defNormalProp$c(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AwsS3Integration = class _AwsS3Integration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"awsS3\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$c(_AwsS3Integration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAwsS3IntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.awsS3\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AwsS3Integration(c)),\n    (i) => i.config.host\n  );\n});\nlet AwsS3Integration = _AwsS3Integration;\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _origin, _owner, _project, _repo, _path, _ref, _baseUrl;\nconst VERSION_PREFIX_GIT_BRANCH = \"GB\";\nconst _AzureUrl = class _AzureUrl {\n  constructor(origin, owner, project, repo, path, ref) {\n    __privateAdd(this, _origin, void 0);\n    __privateAdd(this, _owner, void 0);\n    __privateAdd(this, _project, void 0);\n    __privateAdd(this, _repo, void 0);\n    __privateAdd(this, _path, void 0);\n    __privateAdd(this, _ref, void 0);\n    __privateAdd(this, _baseUrl, (...parts) => {\n      const url = new URL(__privateGet(this, _origin));\n      url.pathname = parts.map((part) => encodeURIComponent(part)).join(\"/\");\n      return url;\n    });\n    __privateSet(this, _origin, origin);\n    __privateSet(this, _owner, owner);\n    __privateSet(this, _project, project);\n    __privateSet(this, _repo, repo);\n    __privateSet(this, _path, path);\n    __privateSet(this, _ref, ref);\n  }\n  /**\n   * Parses an azure URL as copied from the browser address bar.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  static fromRepoUrl(repoUrl) {\n    var _a;\n    const url = new URL(repoUrl);\n    let owner;\n    let project;\n    let repo;\n    const parts = url.pathname.split(\"/\").map((part) => decodeURIComponent(part));\n    if (parts[2] === \"_git\") {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === \"_git\") {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === \"_git\") {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n    if (!owner || !project || !repo) {\n      throw new Error(\"Azure URL must point to a git repository\");\n    }\n    const path = (_a = url.searchParams.get(\"path\")) != null ? _a : void 0;\n    let ref;\n    const version = url.searchParams.get(\"version\");\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== \"GB\") {\n        throw new Error(\"Azure URL version must point to a git branch\");\n      }\n      ref = version.slice(2);\n    }\n    return new _AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n  /**\n   * Returns a repo URL that can be used to navigate to the resource in azure.\n   *\n   * Throws an error if the URL is not a valid azure repo URL.\n   */\n  toRepoUrl() {\n    let url;\n    if (__privateGet(this, _project) === __privateGet(this, _repo)) {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), \"_git\", __privateGet(this, _repo));\n    } else {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_git\", __privateGet(this, _repo));\n    }\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"path\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", VERSION_PREFIX_GIT_BRANCH + __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the file download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a file.\n   */\n  toFileUrl() {\n    if (!__privateGet(this, _path)) {\n      throw new Error(\n        \"Azure URL must point to a specific path to be able to download a file\"\n      );\n    }\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    url.searchParams.set(\"path\", __privateGet(this, _path));\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the archive download URL for this azure resource.\n   *\n   * Throws an error if the URL does not point to a repo.\n   */\n  toArchiveUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"recursionLevel\", \"full\");\n    url.searchParams.set(\"download\", \"true\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"scopePath\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the API url for fetching commits from a branch for this azure resource.\n   *\n   * Throws an error if the URL does not point to a commit.\n   */\n  toCommitsUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"commits\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"searchCriteria.itemVersion.version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  /**\n   * Returns the name of the owner, a user or an organization.\n   */\n  getOwner() {\n    return __privateGet(this, _owner);\n  }\n  /**\n   * Returns the name of the project.\n   */\n  getProject() {\n    return __privateGet(this, _project);\n  }\n  /**\n   * Returns the name of the repo.\n   */\n  getRepo() {\n    return __privateGet(this, _repo);\n  }\n  /**\n   * Returns the file path within the repo if the URL contains one.\n   */\n  getPath() {\n    return __privateGet(this, _path);\n  }\n  /**\n   * Returns the git ref in the repo if the URL contains one.\n   */\n  getRef() {\n    return __privateGet(this, _ref);\n  }\n};\n_origin = new WeakMap();\n_owner = new WeakMap();\n_project = new WeakMap();\n_repo = new WeakMap();\n_path = new WeakMap();\n_ref = new WeakMap();\n_baseUrl = new WeakMap();\nlet AzureUrl = _AzureUrl;\n\nconst AZURE_HOST = \"dev.azure.com\";\nconst isAzureClientSecretCredential = (credential) => {\n  const clientSecretCredential = credential;\n  return Object.keys(credential).length === 3 && clientSecretCredential.clientId !== void 0 && clientSecretCredential.clientSecret !== void 0 && clientSecretCredential.tenantId !== void 0;\n};\nconst isAzureManagedIdentityCredential = (credential) => {\n  return Object.keys(credential).length === 1 && credential.clientId !== void 0;\n};\nfunction readAzureIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : AZURE_HOST;\n  const token = config.getOptionalString(\"token\");\n  const credential = config.getOptional(\"credential\") ? {\n    tenantId: config.getOptionalString(\"credential.tenantId\"),\n    clientId: config.getOptionalString(\"credential.clientId\"),\n    clientSecret: config.getOptionalString(\"credential.clientSecret\")\n  } : void 0;\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`\n    );\n  }\n  if (credential && !isAzureClientSecretCredential(credential) && !isAzureManagedIdentityCredential(credential)) {\n    throw new Error(\n      `Invalid Azure integration config, credential is not valid`\n    );\n  }\n  if (credential && host !== AZURE_HOST) {\n    throw new Error(\n      `Invalid Azure integration config, credential can only be used with ${AZURE_HOST}`\n    );\n  }\n  if (credential && token) {\n    throw new Error(\n      `Invalid Azure integration config, specify either a token or a credential but not both`\n    );\n  }\n  return { host, token, credential };\n}\nfunction readAzureIntegrationConfigs(configs) {\n  const result = configs.map(readAzureIntegrationConfig);\n  if (!result.some((c) => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n  return result;\n}\n\nvar __defProp$b = Object.defineProperty;\nvar __defNormalProp$b = (obj, key, value) => key in obj ? __defProp$b(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$b = (obj, key, value) => {\n  __defNormalProp$b(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _AzureIntegration = class _AzureIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"azure\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  /*\n   * Azure repo URLs on the form with a `path` query param are treated specially.\n   *\n   * Example base URL: https://dev.azure.com/organization/project/_git/repository?path=%2Fcatalog-info.yaml\n   */\n  resolveUrl(options) {\n    var _a;\n    const { url, base } = options;\n    if (isValidUrl(url)) {\n      return url;\n    }\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n      const mockBaseUrl = new URL(`https://a.com${(_a = azureUrl.getPath()) != null ? _a : \"\"}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set(\"path\", updatedPath);\n      if (options.lineNumber) {\n        newUrl.searchParams.set(\"line\", String(options.lineNumber));\n        newUrl.searchParams.set(\"lineEnd\", String(options.lineNumber + 1));\n        newUrl.searchParams.set(\"lineStartColumn\", \"1\");\n        newUrl.searchParams.set(\"lineEndColumn\", \"1\");\n      }\n      return newUrl.toString();\n    } catch {\n      return new URL(url, base).toString();\n    }\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$b(_AzureIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readAzureIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.azure\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AzureIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet AzureIntegration = _AzureIntegration;\n\nfunction getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\nfunction getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\nfunction getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\nasync function getAzureRequestOptions(config, additionalHeaders) {\n  const azureDevOpsScope = \"499b84ac-1321-427f-aa17-267ca6975798/.default\";\n  const headers = additionalHeaders ? { ...additionalHeaders } : {};\n  const { token, credential } = config;\n  if (credential) {\n    if (isAzureClientSecretCredential(credential)) {\n      const servicePrincipal = new ClientSecretCredential(\n        credential.tenantId,\n        credential.clientId,\n        credential.clientSecret\n      );\n      const accessToken = await servicePrincipal.getToken(azureDevOpsScope);\n      headers.Authorization = `Bearer ${accessToken.token}`;\n    } else if (isAzureManagedIdentityCredential(credential)) {\n      const managedIdentity = new ManagedIdentityCredential(\n        credential.clientId\n      );\n      const accessToken = await managedIdentity.getToken(azureDevOpsScope);\n      headers.Authorization = `Bearer ${accessToken.token}`;\n    }\n  } else if (token) {\n    const buffer = Buffer.from(`:${config.token}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return { headers };\n}\n\nconst BITBUCKET_HOST = \"bitbucket.org\";\nconst BITBUCKET_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const appPassword = config.getOptionalString(\"appPassword\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketIntegrationConfig);\n  if (!result.some((c) => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$a = Object.defineProperty;\nvar __defNormalProp$a = (obj, key, value) => key in obj ? __defProp$a(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$a = (obj, key, value) => {\n  __defNormalProp$a(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketIntegration = class _BitbucketIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucket\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n    const url = new URL(resolved);\n    if (this.integrationConfig.host === \"bitbucket.org\") {\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      url.hash = `${options.lineNumber}`;\n    }\n    return url.toString();\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"spa\", \"0\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$a(_BitbucketIntegration, \"factory\", ({\n  config\n}) => {\n  var _a, _b, _c;\n  const configs = readBitbucketIntegrationConfigs(\n    (_c = config.getOptionalConfigArray(\"integrations.bitbucket\")) != null ? _c : [\n      // if integrations.bitbucket was not used assume the use was migrated to the new configs\n      // and backport for the deprecated integration to be usable for other parts of the system\n      // until these got migrated\n      ...(_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : [],\n      ...(_b = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _b : []\n    ]\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketIntegration = _BitbucketIntegration;\n\nasync function getBitbucketDefaultBranch(url, config) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branchUrl = isHosted ? `${config.apiBaseUrl}/repositories/${project}/${repoName}` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  if (response.status === 404 && !isHosted) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath\n  } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  const archiveUrl = isHosted ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n  return archiveUrl;\n}\nfunction getBitbucketFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (config.host === \"bitbucket.org\") {\n      if (!ref) {\n        throw new Error(\"Invalid Bitbucket URL or file path\");\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nconst BITBUCKET_CLOUD_HOST = \"bitbucket.org\";\nconst BITBUCKET_CLOUD_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketCloudIntegrationConfig(config) {\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  const username = config.getString(\"username\");\n  const appPassword = config.getString(\"appPassword\");\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketCloudIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nvar __defProp$9 = Object.defineProperty;\nvar __defNormalProp$9 = (obj, key, value) => key in obj ? __defProp$9(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$9 = (obj, key, value) => {\n  __defNormalProp$9(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketCloudIntegration = class _BitbucketCloudIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketCloud\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\n__publicField$9(_BitbucketCloudIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketCloudIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketCloudIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketCloudIntegration = _BitbucketCloudIntegration;\n\nasync function getBitbucketCloudDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config)\n  );\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketCloudDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource\n  } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\nfunction getBitbucketCloudFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"src\" && filepathtype !== \"raw\") {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (!ref) {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketCloudRequestOptions(config) {\n  const headers = {};\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readBitbucketServerIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    password\n  };\n}\nfunction readBitbucketServerIntegrationConfigs(configs) {\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n\nvar __defProp$8 = Object.defineProperty;\nvar __defNormalProp$8 = (obj, key, value) => key in obj ? __defProp$8(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$8 = (obj, key, value) => {\n  __defNormalProp$8(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _BitbucketServerIntegration = class _BitbucketServerIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketServer\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = options.lineNumber.toString();\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    if (url.includes(\"?\")) {\n      return url.substring(0, url.indexOf(\"?\"));\n    }\n    return url;\n  }\n};\n__publicField$8(_BitbucketServerIntegration, \"factory\", ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketServerIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketServerIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet BitbucketServerIntegration = _BitbucketServerIntegration;\n\nasync function getBitbucketServerDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config)\n  );\n  if (response.status === 404) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketServerDownloadUrl(url, config) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\nfunction getBitbucketServerFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket Server URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketServerRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.password) {\n    const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readGerritIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  let cloneUrl = config.getOptionalString(\"cloneUrl\");\n  let gitilesBaseUrl = config.getOptionalString(\"gitilesBaseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, \"/\");\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, \"/\");\n  } else {\n    cloneUrl = baseUrl;\n  }\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password\n  };\n}\nfunction readGerritIntegrationConfigs(configs) {\n  return configs.map(readGerritIntegrationConfig);\n}\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\nfunction parseGerritGitilesUrl(config, url) {\n  const urlPath = url.replace(config.gitilesBaseUrl, \"\");\n  const parts = urlPath.split(\"/\").filter((p) => !!p);\n  const projectEndIndex = parts.indexOf(\"+\");\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join(\"/\"), \"/\");\n  const branchIndex = parts.indexOf(\"heads\");\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join(\"/\");\n  return {\n    branch,\n    filePath: filePath === \"\" ? \"/\" : filePath,\n    project\n  };\n}\nfunction buildGerritGitilesUrl(config, project, branch, filePath) {\n  return `${config.gitilesBaseUrl}/${project}/+/refs/heads/${branch}/${trimStart(filePath, \"/\")}`;\n}\nfunction getAuthenticationPrefix(config) {\n  return config.password ? \"/a/\" : \"/\";\n}\nfunction getGerritBranchApiUrl(config, url) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\nfunction getGerritCloneRepoUrl(config, url) {\n  const { project } = parseGerritGitilesUrl(config, url);\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\nfunction getGerritFileContentsApiUrl(config, url) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(\n    project\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\nfunction getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\nfunction getGerritRequestOptions(config) {\n  const headers = {};\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n  headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  return {\n    headers\n  };\n}\nasync function parseGerritJsonResponse(response) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`\n  );\n}\n\nvar __defProp$7 = Object.defineProperty;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$7 = (obj, key, value) => {\n  __defNormalProp$7(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GerritIntegration = class _GerritIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gerrit\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith(\"/\")) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return buildGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\n__publicField$7(_GerritIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGerritIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gerrit\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GerritIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GerritIntegration = _GerritIntegration;\n\nfunction readGiteaConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gitea integration config, '${host}' is not a valid host`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  return {\n    host,\n    baseUrl,\n    username,\n    password\n  };\n}\n\nfunction getGiteaEditContentsUrl(config, url) {\n  var _a;\n  try {\n    const baseUrl = (_a = config.baseUrl) != null ? _a : `https://${config.host}`;\n    const [_blank, owner, name, _src, _branch, ref, ...path] = url.replace(baseUrl, \"\").split(\"/\");\n    const pathWithoutSlash = path.join(\"/\").replace(/^\\//, \"\");\n    return `${baseUrl}/${owner}/${name}/_edit/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGiteaFileContentsUrl(config, url) {\n  var _a;\n  try {\n    const baseUrl = (_a = config.baseUrl) != null ? _a : `https://${config.host}`;\n    const [_blank, owner, name, _src, _branch, ref, ...path] = url.replace(baseUrl, \"\").split(\"/\");\n    const pathWithoutSlash = path.join(\"/\").replace(/^\\//, \"\");\n    return `${baseUrl}/api/v1/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGiteaRequestOptions(config) {\n  const headers = {};\n  const { username, password } = config;\n  if (!password) {\n    return headers;\n  }\n  if (username) {\n    headers.Authorization = `basic ${Buffer.from(\n      `${username}:${password}`\n    ).toString(\"base64\")}`;\n  } else {\n    headers.Authorization = `token ${password}`;\n  }\n  return {\n    headers\n  };\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$6 = (obj, key, value) => {\n  __defNormalProp$6(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GiteaIntegration = class _GiteaIntegration {\n  constructor(config) {\n    this.config = config;\n  }\n  get type() {\n    return \"gitea\";\n  }\n  get title() {\n    return this.config.host;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return getGiteaEditContentsUrl(this.config, url);\n  }\n};\n__publicField$6(_GiteaIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = (_a = config.getOptionalConfigArray(\"integrations.gitea\")) != null ? _a : [];\n  const giteaConfigs = configs.map((c) => readGiteaConfig(c));\n  return basicIntegrations(\n    giteaConfigs.map((c) => new _GiteaIntegration(c)),\n    (gitea) => gitea.config.host\n  );\n});\nlet GiteaIntegration = _GiteaIntegration;\n\nconst GITHUB_HOST = \"github.com\";\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\nconst GITHUB_RAW_BASE_URL = \"https://raw.githubusercontent.com\";\nfunction readGithubIntegrationConfig(config) {\n  var _a, _b;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  let rawBaseUrl = config.getOptionalString(\"rawBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const apps = (_b = config.getOptionalConfigArray(\"apps\")) == null ? void 0 : _b.map((c) => ({\n    appId: c.getNumber(\"appId\"),\n    clientId: c.getString(\"clientId\"),\n    clientSecret: c.getString(\"clientSecret\"),\n    webhookSecret: c.getString(\"webhookSecret\"),\n    privateKey: c.getString(\"privateKey\"),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      \"allowedInstallationOwners\"\n    )\n  }));\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\nfunction readGithubIntegrationConfigs(configs) {\n  const result = configs.map(readGithubIntegrationConfig);\n  if (!result.some((c) => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL\n    });\n  }\n  return result;\n}\n\nfunction getGithubFileFetchUrl(url, config, credentials) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || !ref || // GitHub is automatically redirecting tree urls to blob urls so it's\n    // fine to pass a tree url.\n    filepathtype !== \"blob\" && filepathtype !== \"raw\" && filepathtype !== \"tree\") {\n      throw new Error(\"Invalid GitHub URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (chooseEndpoint(config, credentials) === \"api\") {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGitHubRequestOptions(config, credentials) {\n  const headers = {};\n  if (chooseEndpoint(config, credentials) === \"api\") {\n    headers.Accept = \"application/vnd.github.v3.raw\";\n  }\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n  return { headers };\n}\nfunction chooseEndpoint(config, credentials) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return \"api\";\n  }\n  return \"raw\";\n}\n\nvar __defProp$5 = Object.defineProperty;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$5 = (obj, key, value) => {\n  __defNormalProp$5(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Cache {\n  constructor() {\n    __publicField$5(this, \"tokenCache\", /* @__PURE__ */ new Map());\n    __publicField$5(this, \"isExpired\", (date) => DateTime.local() > date);\n  }\n  async getOrCreateToken(owner, repo, supplier) {\n    let existingInstallationData = this.tokenCache.get(owner);\n    if (!existingInstallationData || this.isExpired(existingInstallationData.expiresAt)) {\n      existingInstallationData = await supplier();\n      existingInstallationData.expiresAt = existingInstallationData.expiresAt.minus({ minutes: 10 });\n      this.tokenCache.set(owner, existingInstallationData);\n    }\n    if (!this.appliesToRepo(existingInstallationData, repo)) {\n      throw new Error(\n        `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`\n      );\n    }\n    return { accessToken: existingInstallationData.token };\n  }\n  appliesToRepo(tokenData, repo) {\n    if (repo === void 0) {\n      return true;\n    }\n    if (tokenData.repositories !== void 0) {\n      return tokenData.repositories.includes(repo);\n    }\n    return true;\n  }\n}\nconst HEADERS = {\n  Accept: \"application/vnd.github.machine-man-preview+json\"\n};\nclass GithubAppManager {\n  // undefined allows all installations\n  constructor(config, baseUrl) {\n    __publicField$5(this, \"appClient\");\n    __publicField$5(this, \"baseUrl\");\n    __publicField$5(this, \"baseAuthConfig\");\n    __publicField$5(this, \"cache\", new Cache());\n    __publicField$5(this, \"allowedInstallationOwners\");\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, \"\\n\")\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig\n    });\n  }\n  async getInstallationCredentials(owner, repo) {\n    var _a;\n    if (this.allowedInstallationOwners) {\n      if (!((_a = this.allowedInstallationOwners) == null ? void 0 : _a.includes(owner))) {\n        return { accessToken: void 0 };\n      }\n    }\n    return this.cache.getOrCreateToken(owner, repo, async () => {\n      var _a2;\n      const { installationId, suspended } = await this.getInstallationData(\n        owner\n      );\n      if (suspended) {\n        throw new Error(`The GitHub application for ${owner} is suspended`);\n      }\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS\n      });\n      let repositoryNames;\n      if (result.data.repository_selection === \"selected\") {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation\n        );\n        const repositories = (_a2 = repos.repositories) != null ? _a2 : repos;\n        repositoryNames = repositories.map((repository) => repository.name);\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n        repositories: repositoryNames\n      };\n    });\n  }\n  getInstallations() {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n  async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      (inst) => {\n        var _a;\n        return inst.account && \"login\" in inst.account && ((_a = inst.account.login) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) === owner.toLocaleLowerCase(\"en-US\");\n      }\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by)\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`\n    );\n    notFoundError.name = \"NotFoundError\";\n    throw notFoundError;\n  }\n}\nclass GithubAppCredentialsMux {\n  constructor(config) {\n    __publicField$5(this, \"apps\");\n    var _a, _b;\n    this.apps = (_b = (_a = config.apps) == null ? void 0 : _a.map((ac) => new GithubAppManager(ac, config.apiBaseUrl))) != null ? _b : [];\n  }\n  async getAllInstallations() {\n    if (!this.apps.length) {\n      return [];\n    }\n    const installs = await Promise.all(\n      this.apps.map((app) => app.getInstallations())\n    );\n    return installs.flat();\n  }\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return void 0;\n    }\n    const results = await Promise.all(\n      this.apps.map(\n        (app) => app.getInstallationCredentials(owner, repo).then(\n          (credentials) => ({ credentials, error: void 0 }),\n          (error) => ({ credentials: void 0, error })\n        )\n      )\n    );\n    const result = results.find(\n      (resultItem) => {\n        var _a;\n        return (_a = resultItem.credentials) == null ? void 0 : _a.accessToken;\n      }\n    );\n    if (result) {\n      return result.credentials.accessToken;\n    }\n    const errors = results.map((r) => r.error);\n    const notNotFoundError = errors.find((err) => (err == null ? void 0 : err.name) !== \"NotFoundError\");\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n    return void 0;\n  }\n}\nconst _SingleInstanceGithubCredentialsProvider = class _SingleInstanceGithubCredentialsProvider {\n  constructor(githubAppCredentialsMux, token) {\n    this.githubAppCredentialsMux = githubAppCredentialsMux;\n    this.token = token;\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'github.com/backstage/foobar'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : void 0;\n    let type = \"app\";\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = \"token\";\n      token = this.token;\n    }\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : void 0,\n      token,\n      type\n    };\n  }\n};\n__publicField$5(_SingleInstanceGithubCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGithubCredentialsProvider(\n    new GithubAppCredentialsMux(config),\n    config.token\n  );\n});\nlet SingleInstanceGithubCredentialsProvider = _SingleInstanceGithubCredentialsProvider;\n\nclass DefaultGithubCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.github.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n  /**\n   * Returns {@link GithubCredentials} for a given URL.\n   *\n   * @remarks\n   *\n   * Consecutive calls to this method with the same URL will return cached\n   * credentials.\n   *\n   * The shortest lifetime for a token returned is 10 minutes.\n   *\n   * @example\n   * ```ts\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage/foobar'\n   * })\n   *\n   * const { token, headers } = await getCredentials({\n   *   url: 'https://github.com/backstage'\n   * })\n   * ```\n   *\n   * @param opts - The organization or repository URL\n   * @returns A promise of {@link GithubCredentials}.\n   */\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$4 = (obj, key, value) => {\n  __defNormalProp$4(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GithubIntegration = class _GithubIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"github\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return replaceGithubUrlType(defaultScmResolveUrl(options), \"tree\");\n  }\n  resolveEditUrl(url) {\n    return replaceGithubUrlType(url, \"edit\");\n  }\n};\n__publicField$4(_GithubIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGithubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GithubIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GithubIntegration = _GithubIntegration;\nfunction replaceGithubUrlType(url, type) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    }\n  );\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$3 = (obj, key, value) => {\n  __defNormalProp$3(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst getGitHubFileFetchUrl = getGithubFileFetchUrl;\nclass GitHubIntegration extends GithubIntegration {\n  constructor(integrationConfig) {\n    super(integrationConfig);\n  }\n  get config() {\n    return super.config;\n  }\n}\n__publicField$3(GitHubIntegration, \"factory\", GithubIntegration.factory);\nconst readGitHubIntegrationConfig = readGithubIntegrationConfig;\nconst readGitHubIntegrationConfigs = readGithubIntegrationConfigs;\nconst replaceGitHubUrlType = replaceGithubUrlType;\n\nconst GITLAB_HOST = \"gitlab.com\";\nconst GITLAB_API_BASE_URL = \"https://gitlab.com/api/v4\";\nfunction readGitLabIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  }\n  return { host, token, apiBaseUrl, baseUrl };\n}\nfunction readGitLabIntegrationConfigs(configs) {\n  const result = configs.map(readGitLabIntegrationConfig);\n  if (!result.some((c) => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`\n    });\n  }\n  return result;\n}\nfunction getGitLabIntegrationRelativePath(config) {\n  let relativePath = \"\";\n  if (config.host !== GITLAB_HOST) {\n    relativePath = new URL(config.baseUrl).pathname;\n  }\n  return trimEnd(relativePath, \"/\");\n}\n\nasync function getGitLabFileFetchUrl(url, config) {\n  const projectID = await getProjectId(url, config);\n  return buildProjectUrl(url, projectID, config).toString();\n}\nfunction getGitLabRequestOptions(config) {\n  const { token = \"\" } = config;\n  return {\n    headers: {\n      \"PRIVATE-TOKEN\": token\n    }\n  };\n}\nfunction buildProjectUrl(target, projectID, config) {\n  try {\n    const url = new URL(target);\n    const branchAndFilePath = url.pathname.split(\"/blob/\").slice(1).join(\"/blob/\");\n    const [branch, ...filePath] = branchAndFilePath.split(\"/\");\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    url.pathname = [\n      ...relativePath ? [relativePath] : [],\n      \"api/v4/projects\",\n      projectID,\n      \"repository/files\",\n      encodeURIComponent(decodeURIComponent(filePath.join(\"/\"))),\n      \"raw\"\n    ].join(\"/\");\n    url.search = `?ref=${branch}`;\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nasync function getProjectId(target, config) {\n  const url = new URL(target);\n  if (!url.pathname.includes(\"/blob/\")) {\n    throw new Error(\"Please provide full path to yaml file from GitLab\");\n  }\n  try {\n    let repo = url.pathname.split(\"/-/blob/\")[0].split(\"/blob/\")[0];\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    if (relativePath) {\n      repo = repo.replace(relativePath, \"\");\n    }\n    const repoIDLookup = new URL(\n      `${url.origin}${relativePath}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, \"\")\n      )}`\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config)\n    );\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`\n      );\n    }\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$2 = (obj, key, value) => {\n  __defNormalProp$2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _GitLabIntegration = class _GitLabIntegration {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gitlab\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, \"edit\");\n  }\n};\n__publicField$2(_GitLabIntegration, \"factory\", ({ config }) => {\n  var _a;\n  const configs = readGitLabIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gitlab\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GitLabIntegration(c)),\n    (i) => i.config.host\n  );\n});\nlet GitLabIntegration = _GitLabIntegration;\nfunction replaceGitLabUrlType(url, type) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _SingleInstanceGitlabCredentialsProvider = class _SingleInstanceGitlabCredentialsProvider {\n  constructor(token) {\n    this.token = token;\n  }\n  async getCredentials(_opts) {\n    if (!this.token) {\n      return {};\n    }\n    return {\n      headers: {\n        Authorization: `Bearer ${this.token}`\n      },\n      token: this.token\n    };\n  }\n};\n__publicField$1(_SingleInstanceGitlabCredentialsProvider, \"create\", (config) => {\n  return new _SingleInstanceGitlabCredentialsProvider(config.token);\n});\nlet SingleInstanceGitlabCredentialsProvider = _SingleInstanceGitlabCredentialsProvider;\n\nclass DefaultGitlabCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.gitlab.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGitlabCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGitlabCredentialsProvider(credentialsProviders);\n  }\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitLab integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nfunction readGoogleGcsIntegrationConfig(config) {\n  if (!config) {\n    return {};\n  }\n  if (!config.has(\"clientEmail\") && !config.has(\"privateKey\")) {\n    return {};\n  }\n  const privateKey = config.getString(\"privateKey\").split(\"\\\\n\").join(\"\\n\");\n  const clientEmail = config.getString(\"clientEmail\");\n  return { clientEmail, privateKey };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScmIntegrations {\n  constructor(integrationsByType) {\n    __publicField(this, \"byType\");\n    this.byType = integrationsByType;\n  }\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GithubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config }),\n      gitea: GiteaIntegration.factory({ config })\n    });\n  }\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n  get azure() {\n    return this.byType.azure;\n  }\n  /**\n   * @deprecated in favor of `bitbucketCloud()` and `bitbucketServer()`\n   */\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n  get github() {\n    return this.byType.github;\n  }\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n  get gitea() {\n    return this.byType.gitea;\n  }\n  list() {\n    return Object.values(this.byType).flatMap(\n      (i) => i.list()\n    );\n  }\n  byUrl(url) {\n    let candidates = Object.values(this.byType).map((i) => i.byUrl(url)).filter(Boolean);\n    if (candidates.length > 1) {\n      const filteredCandidates = candidates.filter(\n        (x) => !(x instanceof BitbucketIntegration)\n      );\n      if (filteredCandidates.length !== 0) {\n        candidates = filteredCandidates;\n      }\n    }\n    return candidates[0];\n  }\n  byHost(host) {\n    return Object.values(this.byType).map((i) => i.byHost(host)).find(Boolean);\n  }\n  resolveUrl(options) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n    return integration.resolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n    return integration.resolveEditUrl(url);\n  }\n}\n\nexport { AwsS3Integration, AzureIntegration, BitbucketCloudIntegration, BitbucketIntegration, BitbucketServerIntegration, DefaultGithubCredentialsProvider, DefaultGitlabCredentialsProvider, GerritIntegration, GitHubIntegration, GitLabIntegration, GiteaIntegration, GithubAppCredentialsMux, GithubIntegration, ScmIntegrations, SingleInstanceGithubCredentialsProvider, defaultScmResolveUrl, getAzureCommitsUrl, getAzureDownloadUrl, getAzureFileFetchUrl, getAzureRequestOptions, getBitbucketCloudDefaultBranch, getBitbucketCloudDownloadUrl, getBitbucketCloudFileFetchUrl, getBitbucketCloudRequestOptions, getBitbucketDefaultBranch, getBitbucketDownloadUrl, getBitbucketFileFetchUrl, getBitbucketRequestOptions, getBitbucketServerDefaultBranch, getBitbucketServerDownloadUrl, getBitbucketServerFileFetchUrl, getBitbucketServerRequestOptions, getGerritBranchApiUrl, getGerritCloneRepoUrl, getGerritFileContentsApiUrl, getGerritProjectsApiUrl, getGerritRequestOptions, getGitHubFileFetchUrl, getGitHubRequestOptions, getGitLabFileFetchUrl, getGitLabIntegrationRelativePath, getGitLabRequestOptions, getGiteaFileContentsUrl, getGiteaRequestOptions, getGithubFileFetchUrl, parseGerritGitilesUrl, parseGerritJsonResponse, readAwsS3IntegrationConfig, readAwsS3IntegrationConfigs, readAzureIntegrationConfig, readAzureIntegrationConfigs, readBitbucketCloudIntegrationConfig, readBitbucketCloudIntegrationConfigs, readBitbucketIntegrationConfig, readBitbucketIntegrationConfigs, readBitbucketServerIntegrationConfig, readBitbucketServerIntegrationConfigs, readGerritIntegrationConfig, readGerritIntegrationConfigs, readGitHubIntegrationConfig, readGitHubIntegrationConfigs, readGitLabIntegrationConfig, readGitLabIntegrationConfigs, readGiteaConfig, readGithubIntegrationConfig, readGithubIntegrationConfigs, readGoogleGcsIntegrationConfig, replaceGitHubUrlType, replaceGitLabUrlType, replaceGithubUrlType };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense, useEffect, useState } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { PageWithHeader, Content, ContentHeader, CreateButton, SupportButton, CodeSnippet, TabbedCard, CardTab, Progress, InfoCard, WarningPanel, Link } from '@backstage/core-components';\nimport { createRouteRef, createExternalRouteRef, useApi, configApiRef, useRouteRef, createApiRef, createPlugin, createApiFactory, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { CatalogTable } from '@backstage/plugin-catalog';\nimport { EntityListProvider, CatalogFilterLayout, EntityKindPicker, EntityTypePicker, UserListPicker, EntityOwnerPicker, EntityLifecyclePicker, EntityTagPicker, useEntity, EntityTable, useRelatedEntities } from '@backstage/plugin-catalog-react';\nimport { Alert, ToggleButton } from '@material-ui/lab';\nimport { useTheme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, Dialog, DialogTitle, Typography as Typography$1, DialogContent, Tabs, Tab, DialogActions, Button, Box } from '@material-ui/core';\nimport { RELATION_CONSUMES_API, RELATION_HAS_PART, RELATION_PROVIDES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY } from '@backstage/catalog-model';\nimport ExtensionIcon from '@material-ui/icons/Extension';\n\nconst rootRoute = createRouteRef({\n  id: \"api-docs\"\n});\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\n\nconst defaultColumns = [\n  CatalogTable.columns.createTitleColumn({ hidden: true }),\n  CatalogTable.columns.createNameColumn({ defaultKind: \"API\" }),\n  CatalogTable.columns.createSystemColumn(),\n  CatalogTable.columns.createOwnerColumn(),\n  CatalogTable.columns.createSpecTypeColumn(),\n  CatalogTable.columns.createSpecLifecycleColumn(),\n  CatalogTable.columns.createMetadataDescriptionColumn(),\n  CatalogTable.columns.createTagsColumn()\n];\nconst DefaultApiExplorerPage = (props) => {\n  var _a;\n  const { initiallySelectedFilter = \"all\", columns, actions } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"} API Explorer`;\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  return /* @__PURE__ */ React.createElement(\n    PageWithHeader,\n    {\n      themeId: \"apis\",\n      title: \"APIs\",\n      subtitle: generatedSubtitle,\n      pageTitleOverride: \"APIs\"\n    },\n    /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(\n      CreateButton,\n      {\n        title: \"Register Existing API\",\n        to: registerComponentLink == null ? void 0 : registerComponentLink()\n      }\n    ), /* @__PURE__ */ React.createElement(SupportButton, null, \"All your APIs\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(EntityKindPicker, { initialFilter: \"api\", hidden: true }), /* @__PURE__ */ React.createElement(EntityTypePicker, null), /* @__PURE__ */ React.createElement(UserListPicker, { initialFilter: initiallySelectedFilter }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityLifecyclePicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(\n      CatalogTable,\n      {\n        columns: columns || defaultColumns,\n        actions\n      }\n    )))))\n  );\n};\n\nconst ApiExplorerPage$1 = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultApiExplorerPage, { ...props });\n};\n\nconst apiDocsConfigRef = createApiRef({\n  id: \"plugin.api-docs.config\"\n});\n\nconst PlainApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: props.definition,\n      language: props.language,\n      showCopyCodeButton: true\n    }\n  );\n};\n\nconst ApiDefinitionCard = () => {\n  var _a;\n  const { entity } = useEntity();\n  const config = useApi(apiDocsConfigRef);\n  const { getApiDefinitionWidget } = config;\n  if (!entity) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"Could not fetch the API\");\n  }\n  const definitionWidget = getApiDefinitionWidget(entity);\n  const entityTitle = (_a = entity.metadata.title) != null ? _a : entity.metadata.name;\n  if (definitionWidget) {\n    return /* @__PURE__ */ React.createElement(TabbedCard, { title: entityTitle }, /* @__PURE__ */ React.createElement(CardTab, { label: definitionWidget.title, key: \"widget\" }, definitionWidget.component(entity.spec.definition)), /* @__PURE__ */ React.createElement(CardTab, { label: \"Raw\", key: \"raw\" }, /* @__PURE__ */ React.createElement(\n      PlainApiDefinitionWidget,\n      {\n        definition: entity.spec.definition,\n        language: definitionWidget.rawLanguage || entity.spec.type\n      }\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(\n    TabbedCard,\n    {\n      title: entityTitle,\n      children: [\n        // Has to be an array, otherwise typescript doesn't like that this has only a single child\n        /* @__PURE__ */ React.createElement(CardTab, { label: entity.spec.type, key: \"raw\" }, /* @__PURE__ */ React.createElement(\n          PlainApiDefinitionWidget,\n          {\n            definition: entity.spec.definition,\n            language: entity.spec.type\n          }\n        ))\n      ]\n    }\n  );\n};\n\nconst LazyAsyncApiDefinition = React.lazy(\n  () => import('./esm/AsyncApiDefinition-ed6a859d.esm.js').then((m) => ({\n    default: m.AsyncApiDefinition\n  }))\n);\nconst AsyncApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyAsyncApiDefinition, { ...props }));\n};\n\nconst LazyGraphQlDefinition = React.lazy(\n  () => import('./esm/GraphQlDefinition-a4a9f92e.esm.js').then((m) => ({\n    default: m.GraphQlDefinition\n  }))\n);\nconst GraphQlDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyGraphQlDefinition, { ...props }));\n};\n\nconst LazyOpenApiDefinition = React.lazy(\n  () => import('./esm/OpenApiDefinition-31f0d6c2.esm.js').then((m) => ({\n    default: m.OpenApiDefinition\n  }))\n);\nconst OpenApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(LazyOpenApiDefinition, { ...props }));\n};\n\nconst GrpcApiDefinitionWidget = (props) => {\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: props.definition,\n      language: \"protobuf\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nconst TrpcApiDefinitionWidget = (props) => {\n  const { definition } = props;\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      customStyle: { backgroundColor: theme.palette.background.default },\n      text: definition,\n      language: \"typescript\",\n      showCopyCodeButton: true\n    }\n  );\n};\n\nfunction defaultDefinitionWidgets() {\n  return [\n    {\n      type: \"openapi\",\n      title: \"OpenAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(OpenApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"asyncapi\",\n      title: \"AsyncAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(AsyncApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"graphql\",\n      title: \"GraphQL\",\n      rawLanguage: \"graphql\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GraphQlDefinitionWidget, { definition })\n    },\n    {\n      type: \"grpc\",\n      title: \"gRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GrpcApiDefinitionWidget, { definition })\n    },\n    {\n      type: \"trpc\",\n      title: \"tRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(TrpcApiDefinitionWidget, { definition })\n    }\n  ];\n}\n\nconst ApiTypeTitle = (props) => {\n  const { apiEntity } = props;\n  const config = useApi(apiDocsConfigRef);\n  const definition = config.getApiDefinitionWidget(apiEntity);\n  const type = definition ? definition.title : apiEntity.spec.type;\n  return /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, type);\n};\n\nconst useStyles = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    height: \"100%\"\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  },\n  title: {\n    color: theme.palette.text.primary,\n    wordBreak: \"break-word\",\n    fontSize: theme.typography.h3.fontSize,\n    marginBottom: 0\n  },\n  type: {\n    textTransform: \"uppercase\",\n    fontSize: 11,\n    opacity: 0.8,\n    marginBottom: theme.spacing(1),\n    color: theme.palette.text.primary\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      \"aria-labelledby\": `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other\n    },\n    value === index && /* @__PURE__ */ React.createElement(Box, { pl: 3, pr: 3 }, children)\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction ApiDefinitionDialog(props) {\n  var _a, _b, _c;\n  const { open, entity, onClose } = props;\n  const [activeTab, setActiveTab] = React.useState(0);\n  const classes = useStyles();\n  useEffect(() => {\n    setActiveTab(0);\n  }, [open]);\n  const config = useApi(apiDocsConfigRef);\n  const definitionWidget = config.getApiDefinitionWidget(entity);\n  let tabIndex = 0;\n  let tabPanelIndex = 0;\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open,\n      onClose,\n      \"aria-labelledby\": \"api-definition-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog }\n    },\n    /* @__PURE__ */ React.createElement(DialogTitle, { id: \"api-definition-dialog-title\", disableTypography: true }, /* @__PURE__ */ React.createElement(Typography$1, { className: classes.type }, \"API - \", (_a = definitionWidget == null ? void 0 : definitionWidget.title) != null ? _a : \"Raw\"), /* @__PURE__ */ React.createElement(Typography$1, { className: classes.title, variant: \"h1\" }, (_b = entity.metadata.title) != null ? _b : entity.metadata.name)),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, className: classes.root }, /* @__PURE__ */ React.createElement(\n      Tabs,\n      {\n        orientation: \"vertical\",\n        variant: \"scrollable\",\n        value: activeTab,\n        onChange: (_, newValue) => setActiveTab(newValue),\n        \"aria-label\": \"API definition options\",\n        className: classes.tabs\n      },\n      definitionWidget ? /* @__PURE__ */ React.createElement(Tab, { label: definitionWidget.title, ...a11yProps(tabIndex++) }) : null,\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw\", ...a11yProps(tabIndex++) })\n    ), definitionWidget ? /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: tabPanelIndex++ }, definitionWidget.component(entity.spec.definition)) : null, /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: tabPanelIndex++ }, /* @__PURE__ */ React.createElement(\n      PlainApiDefinitionWidget,\n      {\n        definition: entity.spec.definition,\n        language: (_c = definitionWidget == null ? void 0 : definitionWidget.rawLanguage) != null ? _c : entity.spec.type\n      }\n    ))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Close\"))\n  );\n}\n\nfunction createSpecApiTypeColumn() {\n  return {\n    title: \"Type\",\n    field: \"spec.type\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiTypeTitle, { apiEntity: entity })\n  };\n}\nconst ApiDefinitionButton = ({ apiEntity }) => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ToggleButton, { onClick: () => setDialogOpen(!dialogOpen) }, /* @__PURE__ */ React.createElement(ExtensionIcon, null)), /* @__PURE__ */ React.createElement(\n    ApiDefinitionDialog,\n    {\n      entity: apiEntity,\n      open: dialogOpen,\n      onClose: () => setDialogOpen(false)\n    }\n  ));\n};\nfunction createApiDefinitionColumn() {\n  return {\n    title: \"API Definition\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiDefinitionButton, { apiEntity: entity })\n  };\n}\nconst apiEntityColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createSystemColumn(),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn(),\n  createApiDefinitionColumn()\n];\n\nconst ConsumedApisCard = (props) => {\n  const { variant = \"gridItem\", columns = apiEntityColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_CONSUMES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumed APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumed APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Consumed APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not consume any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst presetColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\nconst HasApisCard = (props) => {\n  const { variant = \"gridItem\", columns = presetColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_HAS_PART,\n    kind: \"API\"\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not contain any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst ProvidedApisCard = (props) => {\n  const { variant = \"gridItem\", columns = apiEntityColumns } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_PROVIDES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Provided APIs\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Provided APIs\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load APIs\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Provided APIs\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not provide any APIs.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\" }, \"Learn how to change this.\"))),\n      columns,\n      entities\n    }\n  );\n};\n\nconst ConsumingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_CONSUMED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumers\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Consumers\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load components\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Consumers\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"No component consumes this API.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\" }, \"Learn how to change this.\"))),\n      columns: EntityTable.componentEntityColumns,\n      entities\n    }\n  );\n};\n\nconst ProvidingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_PROVIDED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Providers\" }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { variant, title: \"Providers\" }, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load components\",\n        message: /* @__PURE__ */ React.createElement(CodeSnippet, { text: `${error}`, language: \"text\" })\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    EntityTable,\n    {\n      title: \"Providers\",\n      variant,\n      emptyContent: /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body1\" }, \"No component provides this API.\"), /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\" }, \"Learn how to change this.\"))),\n      columns: EntityTable.componentEntityColumns,\n      entities\n    }\n  );\n};\n\nconst apiDocsPlugin = createPlugin({\n  id: \"api-docs\",\n  routes: {\n    root: rootRoute\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find((d) => d.type === apiEntity.spec.type);\n          }\n        };\n      }\n    })\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef\n  }\n});\nconst ApiExplorerPage = apiDocsPlugin.provide(\n  createRoutableExtension({\n    name: \"ApiExplorerPage\",\n    component: () => import('./esm/index-e0eb12ef.esm.js').then((m) => m.ApiExplorerIndexPage),\n    mountPoint: rootRoute\n  })\n);\nconst EntityApiDefinitionCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityApiDefinitionCard\",\n    component: {\n      lazy: () => import('./esm/index-667b5b85.esm.js').then((m) => m.ApiDefinitionCard)\n    }\n  })\n);\nconst EntityConsumedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-c169a6bb.esm.js').then((m) => m.ConsumedApisCard)\n    }\n  })\n);\nconst EntityConsumingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-47edd08c.esm.js').then(\n        (m) => m.ConsumingComponentsCard\n      )\n    }\n  })\n);\nconst EntityProvidedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-c169a6bb.esm.js').then((m) => m.ProvidedApisCard)\n    }\n  })\n);\nconst EntityProvidingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-47edd08c.esm.js').then(\n        (m) => m.ProvidingComponentsCard\n      )\n    }\n  })\n);\nconst EntityHasApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasApisCard\",\n    component: {\n      lazy: () => import('./esm/index-c169a6bb.esm.js').then((m) => m.HasApisCard)\n    }\n  })\n);\n\nexport { ApiDefinitionCard, ApiDefinitionDialog, ApiExplorerPage$1 as ApiExplorerIndexPage, ApiExplorerPage, ApiTypeTitle, AsyncApiDefinitionWidget, ConsumedApisCard, ConsumingComponentsCard, DefaultApiExplorerPage, EntityApiDefinitionCard, EntityConsumedApisCard, EntityConsumingComponentsCard, EntityHasApisCard, EntityProvidedApisCard, EntityProvidingComponentsCard, GraphQlDefinitionWidget, HasApisCard, OpenApiDefinitionWidget, PlainApiDefinitionWidget, ProvidedApisCard, ProvidingComponentsCard, TrpcApiDefinitionWidget, apiDocsConfigRef, apiDocsPlugin, defaultDefinitionWidgets, apiDocsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createPermission } from '@backstage/plugin-permission-common';\n\nconst RESOURCE_TYPE_CATALOG_ENTITY = \"catalog-entity\";\nconst catalogEntityReadPermission = createPermission({\n  name: \"catalog.entity.read\",\n  attributes: {\n    action: \"read\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityCreatePermission = createPermission({\n  name: \"catalog.entity.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogEntityDeletePermission = createPermission({\n  name: \"catalog.entity.delete\",\n  attributes: {\n    action: \"delete\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityRefreshPermission = createPermission({\n  name: \"catalog.entity.refresh\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogLocationReadPermission = createPermission({\n  name: \"catalog.location.read\",\n  attributes: {\n    action: \"read\"\n  }\n});\nconst catalogLocationCreatePermission = createPermission({\n  name: \"catalog.location.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogLocationDeletePermission = createPermission({\n  name: \"catalog.location.delete\",\n  attributes: {\n    action: \"delete\"\n  }\n});\nconst catalogPermissions = [\n  catalogEntityReadPermission,\n  catalogEntityCreatePermission,\n  catalogEntityDeletePermission,\n  catalogEntityRefreshPermission,\n  catalogLocationReadPermission,\n  catalogLocationCreatePermission,\n  catalogLocationDeletePermission\n];\n\nexport { RESOURCE_TYPE_CATALOG_ENTITY, catalogEntityCreatePermission, catalogEntityDeletePermission, catalogEntityReadPermission, catalogEntityRefreshPermission, catalogLocationCreatePermission, catalogLocationDeletePermission, catalogLocationReadPermission, catalogPermissions };\n//# sourceMappingURL=alpha.esm.js.map\n","import { RELATION_OWNER_OF, RELATION_OWNED_BY, RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API, RELATION_HAS_PART, RELATION_PART_OF, RELATION_PARENT_OF, RELATION_CHILD_OF, RELATION_HAS_MEMBER, RELATION_MEMBER_OF, RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF, DEFAULT_NAMESPACE, stringifyEntityRef } from '@backstage/catalog-model';\nimport { DependencyGraph, DependencyGraphTypes } from '@backstage/core-components';\nimport { useApp, useApi, errorApiRef, createRouteRef, createExternalRouteRef, createPlugin, createComponentExtension, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { makeStyles as makeStyles$2, useTheme, CircularProgress } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useState, useRef, useLayoutEffect, useCallback, useEffect, useMemo } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { humanizeEntityRef, catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport WorkIcon from '@material-ui/icons/Work';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport limiterFactory from 'p-limit';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\nconst useStyles$2 = makeStyles(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    },\n    secondary: {\n      fill: theme.palette.textSubtle\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomLabel\" }\n);\nfunction CustomLabel({\n  edge: { relations }\n}) {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, relations.map((r, i) => /* @__PURE__ */ React.createElement(\"tspan\", { key: r, className: classNames(i > 0 && classes.secondary) }, i > 0 && /* @__PURE__ */ React.createElement(\"tspan\", null, \" / \"), r)));\n}\n\nfunction EntityKindIcon({\n  kind,\n  ...props\n}) {\n  var _a;\n  const app = useApp();\n  const Icon = (_a = app.getSystemIcon(`kind:${kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : WorkIcon;\n  return /* @__PURE__ */ React.createElement(Icon, { ...props });\n}\n\nconst useStyles$1 = makeStyles$1(\n  (theme) => ({\n    node: {\n      fill: theme.palette.grey[300],\n      stroke: theme.palette.grey[300],\n      \"&.primary\": {\n        fill: theme.palette.primary.light,\n        stroke: theme.palette.primary.light\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.light,\n        stroke: theme.palette.secondary.light\n      }\n    },\n    text: {\n      fill: theme.palette.getContrastText(theme.palette.grey[300]),\n      \"&.primary\": {\n        fill: theme.palette.primary.contrastText\n      },\n      \"&.secondary\": {\n        fill: theme.palette.secondary.contrastText\n      },\n      \"&.focused\": {\n        fontWeight: \"bold\"\n      }\n    },\n    clickable: {\n      cursor: \"pointer\"\n    }\n  }),\n  { name: \"PluginCatalogGraphCustomNode\" }\n);\nfunction CustomNode({\n  node: {\n    id,\n    kind,\n    namespace,\n    name,\n    color = \"default\",\n    focused,\n    title,\n    onClick\n  }\n}) {\n  const classes = useStyles$1();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = kind ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = title != null ? title : kind && name && namespace ? humanizeEntityRef({ kind, name, namespace }) : id;\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classNames(onClick && classes.clickable) }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), kind && /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        focused && \"focused\",\n        color === \"primary\" && \"primary\",\n        color === \"secondary\" && \"secondary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\n\nconst ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF]\n];\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\n\nconst limiter = limiterFactory(10);\nfunction useEntityStore() {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: /* @__PURE__ */ new Set(),\n    outstandingEntities: /* @__PURE__ */ new Map(),\n    cachedEntities: /* @__PURE__ */ new Map()\n  });\n  const [entities, setEntities] = useState({});\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach((entityRef) => {\n      const entity = cachedEntities.get(entityRef);\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, outstandingEntities, cachedEntities } = state.current;\n    await Promise.all(\n      Array.from(requestedEntities).map(\n        (entityRef) => limiter(async () => {\n          if (cachedEntities.has(entityRef)) {\n            return;\n          }\n          if (outstandingEntities.has(entityRef)) {\n            await outstandingEntities.get(entityRef);\n            return;\n          }\n          const promise = catalogClient.getEntityByRef(entityRef);\n          outstandingEntities.set(entityRef, promise);\n          try {\n            const entity = await promise;\n            if (entity) {\n              cachedEntities.set(entityRef, entity);\n              updateEntities();\n            }\n          } finally {\n            outstandingEntities.delete(entityRef);\n          }\n        })\n      )\n    );\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n  const requestEntities = useCallback(\n    (entityRefs) => {\n      const n = new Set(entityRefs);\n      const { requestedEntities } = state.current;\n      if (n.size !== requestedEntities.size || Array.from(n).some((e) => !requestedEntities.has(e))) {\n        state.current.requestedEntities = n;\n        fetch();\n        updateEntities();\n      }\n    },\n    [state, fetch, updateEntities]\n  );\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities\n  };\n}\n\nfunction useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {}\n}) {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n  useEffect(() => {\n    const expectedEntities = /* @__PURE__ */ new Set([...rootEntityRefs]);\n    const processedEntityRefs = /* @__PURE__ */ new Set();\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n    while (nextDepthRefQueue.length > 0 && (!isFinite(maxDepth) || depth < maxDepth)) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n        processedEntityRefs.add(entityRef);\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if ((!relations || relations.includes(rel.type)) && (!kinds || kinds.some(\n              (kind) => rel.targetRef.startsWith(\n                `${kind.toLocaleLowerCase(\"en-US\")}:`\n              )\n            ))) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n      ++depth;\n    }\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS\n}) {\n  const [nodesAndEdges, setNodesAndEdges] = useState({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations\n    }\n  });\n  useDebounce(\n    () => {\n      var _a;\n      if (!entities || Object.keys(entities).length === 0) {\n        setNodesAndEdges({});\n        return;\n      }\n      const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n        var _a2, _b, _c;\n        const focused = rootEntityRefs.includes(entityRef);\n        const node = {\n          id: entityRef,\n          title: (_b = (_a2 = entity.metadata) == null ? void 0 : _a2.title) != null ? _b : void 0,\n          kind: entity.kind,\n          name: entity.metadata.name,\n          namespace: (_c = entity.metadata.namespace) != null ? _c : DEFAULT_NAMESPACE,\n          focused,\n          color: focused ? \"secondary\" : \"primary\"\n        };\n        if (onNodeClick) {\n          node.onClick = (event) => onNodeClick(node, event);\n        }\n        return node;\n      });\n      const edges = [];\n      const visitedNodes = /* @__PURE__ */ new Set();\n      const nodeQueue = [...rootEntityRefs];\n      while (nodeQueue.length > 0) {\n        const entityRef = nodeQueue.pop();\n        const entity = entities[entityRef];\n        visitedNodes.add(entityRef);\n        if (entity) {\n          (_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.forEach((rel) => {\n            var _a2;\n            if (!entities[rel.targetRef]) {\n              return;\n            }\n            if (relations && !relations.includes(rel.type)) {\n              return;\n            }\n            if (kinds && !kinds.some(\n              (kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`)\n            )) {\n              return;\n            }\n            if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n              if (mergeRelations) {\n                const pair = (_a2 = relationPairs.find(\n                  ([l, r]) => l === rel.type || r === rel.type\n                )) != null ? _a2 : [rel.type];\n                const [left] = pair;\n                edges.push({\n                  from: left === rel.type ? entityRef : rel.targetRef,\n                  to: left === rel.type ? rel.targetRef : entityRef,\n                  relations: pair,\n                  label: \"visible\"\n                });\n              } else {\n                edges.push({\n                  from: entityRef,\n                  to: rel.targetRef,\n                  relations: [rel.type],\n                  label: \"visible\"\n                });\n              }\n            }\n            if (!visitedNodes.has(rel.targetRef)) {\n              nodeQueue.push(rel.targetRef);\n              visitedNodes.add(rel.targetRef);\n            }\n          });\n        }\n      }\n      setNodesAndEdges({ nodes, edges });\n    },\n    100,\n    [\n      entities,\n      rootEntityRefs,\n      kinds,\n      relations,\n      unidirectional,\n      mergeRelations,\n      onNodeClick,\n      relationPairs\n    ]\n  );\n  return {\n    loading,\n    error,\n    ...nodesAndEdges\n  };\n}\n\nconst useStyles = makeStyles$2(\n  (theme) => ({\n    progress: {\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      marginLeft: \"-20px\",\n      marginTop: \"-20px\"\n    },\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    graph: {\n      width: \"100%\",\n      flex: 1,\n      // Right now there is no good way to style edges between nodes, we have to\n      // fallback to these hacks:\n      \"& path[marker-end]\": {\n        transition: \"filter 0.1s ease-in-out\"\n      },\n      \"& path[marker-end]:hover\": {\n        filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`\n      },\n      \"& g[data-testid=label]\": {\n        transition: \"transform 0s\"\n      }\n    }\n  }),\n  { name: \"PluginCatalogGraphEntityRelationsGraph\" }\n);\nconst EntityRelationsGraph = (props) => {\n  const {\n    rootEntityNames,\n    maxDepth = 2,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = \"enabled\",\n    renderNode,\n    renderLabel,\n    curve\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(\n    () => (Array.isArray(rootEntityNames) ? rootEntityNames : [rootEntityNames]).map((e) => stringifyEntityRef(e)),\n    [rootEntityNames]\n  );\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classNames(classes.container, className) }, loading && /* @__PURE__ */ React.createElement(CircularProgress, { className: classes.progress }), nodes && edges && /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: renderNode || CustomNode,\n      renderLabel: renderLabel || CustomLabel,\n      direction,\n      className: classes.graph,\n      paddingX: theme.spacing(4),\n      paddingY: theme.spacing(4),\n      labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n      labelOffset: theme.spacing(1),\n      zoom,\n      curve\n    }\n  ));\n};\n\nconst catalogGraphRouteRef = createRouteRef({\n  id: \"catalog-graph\"\n});\nconst catalogEntityRouteRef = createExternalRouteRef({\n  id: \"catalog-entity\",\n  params: [\"namespace\", \"kind\", \"name\"],\n  optional: true\n});\n\nconst catalogGraphPlugin = createPlugin({\n  id: \"catalog-graph\",\n  routes: {\n    catalogGraph: catalogGraphRouteRef\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef\n  }\n});\n\nconst EntityCatalogGraphCard = catalogGraphPlugin.provide(\n  createComponentExtension({\n    name: \"EntityCatalogGraphCard\",\n    component: {\n      lazy: () => import('./esm/index-70faf840.esm.js').then((m) => m.CatalogGraphCard)\n    }\n  })\n);\nconst CatalogGraphPage = catalogGraphPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogGraphPage\",\n    component: () => import('./esm/index-d9ff1b53.esm.js').then((m) => m.CatalogGraphPage),\n    mountPoint: catalogGraphRouteRef\n  })\n);\n\nexport { ALL_RELATION_PAIRS, CatalogGraphPage, Direction, EntityCatalogGraphCard, EntityRelationsGraph, catalogGraphPlugin, catalogGraphRouteRef };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, configApiRef, createRoutableExtension, useApi, useApp, useRouteRef, errorApiRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef, scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { catalogApiRef, humanizeEntityRef, EntityRefLink, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport parseGitUrl from 'git-url-parse';\nimport { InfoCard, LinkButton, Link, CodeSnippet, MarkdownContent, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { Typography, Chip, Button, CircularProgress, List, ListItem, ListItemIcon, ListItemText, ListItemSecondaryAction, IconButton, Collapse, Grid, TextField, FormHelperText, Card, CardHeader, CardContent, Box, Checkbox, StepLabel, FormControlLabel, Stepper, Step, StepContent, useTheme, useMediaQuery } from '@material-ui/core';\nimport React, { useReducer, useState, useCallback, useEffect, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport WorkIcon from '@material-ui/icons/Work';\nimport partition from 'lodash/partition';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\nimport { Autocomplete } from '@material-ui/lab';\nimport YAML from 'yaml';\nimport { trimEnd } from 'lodash';\nimport { assertError } from '@backstage/errors';\nimport useAsync from 'react-use/lib/useAsync';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nconst catalogImportApiRef = createApiRef({\n  id: \"plugin.catalog-import.service\"\n});\n\nconst getGithubIntegrationConfig = (scmIntegrationsApi, location) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return void 0;\n  }\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config\n  };\n};\n\nfunction asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n}\nfunction getCatalogFilename(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.entityFilename\")) != null ? _a : \"catalog-info.yaml\";\n}\nfunction getBranchName(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.pullRequestBranchName\")) != null ? _a : \"backstage-integration\";\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass CatalogImportClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"scmAuthApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"catalogApi\");\n    __publicField(this, \"configApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n  async analyzeUrl(url) {\n    var _a;\n    if (new URL(url).pathname.match(/\\.ya?ml$/) || ((_a = new URL(url).searchParams.get(\"path\")) == null ? void 0 : _a.match(/.ya?ml$/))) {\n      const location = await this.catalogApi.addLocation({\n        type: \"url\",\n        target: url,\n        dryRun: true\n      });\n      return {\n        type: \"locations\",\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map((e) => {\n              var _a2;\n              return {\n                kind: e.kind,\n                namespace: (_a2 = e.metadata.namespace) != null ? _a2 : \"default\",\n                name: e.metadata.name\n              };\n            })\n          }\n        ]\n      };\n    }\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`\n      );\n    }\n    const analyzation = await this.analyzeLocation({\n      repo: url\n    });\n    if (analyzation.existingEntityFiles.length > 0) {\n      const locations = analyzation.existingEntityFiles.reduce((state, curr) => {\n        var _a2;\n        state[curr.location.target] = {\n          target: curr.location.target,\n          exists: curr.isRegistered,\n          entities: [\n            ...curr.location.target in state ? state[curr.location.target].entities : [],\n            {\n              name: curr.entity.metadata.name,\n              namespace: (_a2 = curr.entity.metadata.namespace) != null ? _a2 : \"default\",\n              kind: curr.entity.kind\n            }\n          ]\n        };\n        return state;\n      }, {});\n      return {\n        type: \"locations\",\n        locations: Object.values(locations)\n      };\n    }\n    return {\n      type: \"repository\",\n      integrationType: \"github\",\n      url,\n      generatedEntities: analyzation.generateEntities.map((x) => x.entity)\n    };\n  }\n  async preparePullRequest() {\n    var _a;\n    const appTitle = (_a = this.configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n    const appBaseUrl = this.configApi.getString(\"app.baseUrl\");\n    const catalogFilename = getCatalogFilename(this.configApi);\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${appTitle} software catalog](${appBaseUrl}).\n\nAfter this pull request is merged, the component will become available.\n\nFor more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`\n    };\n  }\n  async submitPullRequest(options) {\n    const { repositoryUrl, fileContent, title, body } = options;\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl\n    );\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body\n      });\n    }\n    throw new Error(\"unimplemented!\");\n  }\n  // TODO: this could be part of the catalog api\n  async analyzeLocation(options) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/analyze-location`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...token && { Authorization: `Bearer ${token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          location: { type: \"url\", target: options.repo },\n          ...this.configApi.getOptionalString(\n            \"catalog.import.entityFilename\"\n          ) && {\n            catalogFilename: this.configApi.getOptionalString(\n              \"catalog.import.entityFilename\"\n            )\n          }\n        })\n      }\n    ).catch((e) => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`\n      );\n    }\n    const payload = await response.json();\n    return payload;\n  }\n  // TODO: extract this function and implement for non-github\n  async submitGitHubPrToRepo(options) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig\n    } = options;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true\n      }\n    });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n    const repoData = await octo.repos.get({\n      owner,\n      repo\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n    });\n    const parentRef = await octo.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${repoData.data.default_branch}`\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\"Couldn't fetch default branch data\", e)\n      );\n    });\n    await octo.git.createRef({\n      owner,\n      repo,\n      ref: `refs/heads/${branchName}`,\n      sha: parentRef.data.object.sha\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a new branch with name '${branchName}'`,\n          e\n        )\n      );\n    });\n    await octo.repos.createOrUpdateFileContents({\n      owner,\n      repo,\n      path: fileName,\n      message: title,\n      content: Base64.encode(fileContent),\n      branch: branchName\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a commit with ${fileName} file added`,\n          e\n        )\n      );\n    });\n    const pullRequestResponse = await octo.pulls.create({\n      owner,\n      repo,\n      title,\n      head: branchName,\n      body,\n      base: repoData.data.default_branch\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a pull request for ${branchName} branch`,\n          e\n        )\n      );\n    });\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`\n    };\n  }\n}\nfunction formatHttpErrorMessage(message, error) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"catalog-import\"\n});\nconst catalogImportPlugin = createPlugin({\n  id: \"catalog-import\",\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi\n      }) => new CatalogImportClient({\n        discoveryApi,\n        scmAuthApi,\n        scmIntegrationsApi,\n        identityApi,\n        catalogApi,\n        configApi\n      })\n    })\n  ],\n  routes: {\n    importPage: rootRouteRef\n  }\n});\nconst CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogImportPage\",\n    component: () => import('./esm/index-c813775b.esm.js').then((m) => m.ImportPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nfunction useCatalogFilename() {\n  const config = useApi(configApiRef);\n  return getCatalogFilename(config);\n}\n\nconst ImportInfoCard = (props) => {\n  const {\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\",\n    exampleRepositoryUrl = \"https://github.com/backstage/backstage\"\n  } = props;\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const hasGithubIntegration = configApi.has(\"integrations.github\");\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: \"Register an existing component\",\n      titleTypographyProps: { component: \"h3\" },\n      deepLink: {\n        title: \"Learn more about the Software Catalog\",\n        link: \"https://backstage.io/docs/features/software-catalog/\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", paragraph: true }, \"Enter the URL to your source code repository to add it to \", appTitle, \".\"),\n    /* @__PURE__ */ React.createElement(Typography, { component: \"h4\", variant: \"h6\" }, \"Link to an existing entity file\"),\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", color: \"textSecondary\", paragraph: true }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleLocationUrl)),\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", paragraph: true }, \"The wizard analyzes the file, previews the entities, and adds them to the \", appTitle, \" catalog.\"),\n    hasGithubIntegration && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { component: \"h4\", variant: \"h6\" }, \"Link to a repository\", \" \", /* @__PURE__ */ React.createElement(Chip, { label: \"GitHub only\", variant: \"outlined\", size: \"small\" })), /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", color: \"textSecondary\", paragraph: true }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleRepositoryUrl)), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", paragraph: true }, \"The wizard discovers all \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" files in the repository, previews the entities, and adds them to the \", appTitle, \" \", \"catalog.\"), catalogImportApi.preparePullRequest && /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", paragraph: true }, \"If no entities are found, the wizard will prepare a Pull Request that adds an example \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" and prepares the \", appTitle, \" catalog to load all entities as soon as the Pull Request is merged.\"))\n  );\n};\n\nfunction init(initialUrl) {\n  return {\n    activeFlow: \"unknown\",\n    activeState: \"analyze\",\n    analysisUrl: initialUrl,\n    previousStates: []\n  };\n}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"onAnalysis\": {\n      if (state.activeState !== \"analyze\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [activeFlow, analysisUrl, analyzeResult, opts] = action.args;\n      return {\n        ...state,\n        analysisUrl,\n        activeFlow,\n        analyzeResult,\n        prepareResult: opts == null ? void 0 : opts.prepareResult,\n        activeState: (opts == null ? void 0 : opts.prepareResult) === void 0 ? \"prepare\" : \"review\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onPrepare\": {\n      if (state.activeState !== \"prepare\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [prepareResult, opts] = action.args;\n      return {\n        ...state,\n        prepareResult,\n        activeState: \"review\",\n        previousStates: (opts == null ? void 0 : opts.notRepeatable) ? [] : previousStates.concat(activeState)\n      };\n    }\n    case \"onReview\": {\n      if (state.activeState !== \"review\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [reviewResult] = action.args;\n      return {\n        ...state,\n        reviewResult,\n        activeState: \"finish\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onGoBack\": {\n      const { activeState, previousStates } = state;\n      return {\n        ...state,\n        activeState: previousStates.length > 0 ? previousStates[previousStates.length - 1] : activeState,\n        previousStates: previousStates.slice(0, previousStates.length - 1)\n      };\n    }\n    case \"onReset\":\n      return {\n        ...init(action.initialUrl),\n        // we keep the old prepareResult since the form is animated and an\n        // undefined value might crash the last step.\n        prepareResult: state.prepareResult\n      };\n    default:\n      throw new Error();\n  }\n}\nconst useImportState = (options) => {\n  const [state, dispatch] = useReducer(reducer, options == null ? void 0 : options.initialUrl, init);\n  const { activeFlow, activeState, analysisUrl, previousStates } = state;\n  return {\n    activeFlow,\n    activeState,\n    activeStepNumber: [\"analyze\", \"prepare\", \"review\", \"finish\"].indexOf(\n      activeState\n    ),\n    analysisUrl,\n    analyzeResult: state.analyzeResult,\n    prepareResult: state.prepareResult,\n    reviewResult: state.reviewResult,\n    onAnalysis: (flow, url, result, opts) => dispatch({\n      type: \"onAnalysis\",\n      args: [flow, url, result, opts]\n    }),\n    onPrepare: (result, opts) => dispatch({\n      type: \"onPrepare\",\n      args: [result, opts]\n    }),\n    onReview: (result) => dispatch({ type: \"onReview\", args: [result] }),\n    onGoBack: previousStates.length > 0 ? () => dispatch({ type: \"onGoBack\" }) : void 0,\n    onReset: () => dispatch({ type: \"onReset\", initialUrl: options == null ? void 0 : options.initialUrl })\n  };\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    position: \"relative\"\n  },\n  buttonProgress: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  }\n}));\nconst NextButton = (props) => {\n  const { loading, ...buttonProps } = props;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.wrapper }, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      color: \"primary\",\n      variant: \"contained\",\n      ...buttonProps,\n      disabled: props.disabled || props.loading\n    }\n  ), props.loading && /* @__PURE__ */ React.createElement(CircularProgress, { size: \"1.5rem\", className: classes.buttonProgress }), props.loading);\n};\nconst BackButton = (props) => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", className: classes.button, ...props }, props.children || \"Back\");\n};\nconst ViewComponentButton = (props) => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\n    LinkButton,\n    {\n      color: \"primary\",\n      variant: \"contained\",\n      className: classes.button,\n      ...props\n    },\n    props.children\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  nested: {\n    paddingLeft: theme.spacing(4)\n  }\n}));\nfunction sortEntities(entities) {\n  return entities.sort(\n    (a, b) => humanizeEntityRef(a).localeCompare(humanizeEntityRef(b))\n  );\n}\nconst EntityListComponent = (props) => {\n  const {\n    locations,\n    collapsed = false,\n    locationListItemIcon,\n    onItemClick,\n    firstListItem,\n    withLinks = false\n  } = props;\n  const app = useApp();\n  const classes = useStyles$2();\n  const [expandedUrls, setExpandedUrls] = useState([]);\n  const handleClick = (url) => {\n    setExpandedUrls(\n      (urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url)\n    );\n  };\n  return /* @__PURE__ */ React.createElement(List, null, firstListItem, locations.map((r) => /* @__PURE__ */ React.createElement(React.Fragment, { key: r.target }, /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      dense: true,\n      button: Boolean(onItemClick),\n      onClick: () => onItemClick == null ? void 0 : onItemClick(r.target)\n    },\n    /* @__PURE__ */ React.createElement(ListItemIcon, null, locationListItemIcon(r.target)),\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: r.target,\n        secondary: `Entities: ${r.entities.length}`\n      }\n    ),\n    collapsed && /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(IconButton, { edge: \"end\", onClick: () => handleClick(r.target) }, expandedUrls.includes(r.target) ? /* @__PURE__ */ React.createElement(ExpandLessIcon, null) : /* @__PURE__ */ React.createElement(ExpandMoreIcon, null)))\n  ), /* @__PURE__ */ React.createElement(\n    Collapse,\n    {\n      in: !collapsed || expandedUrls.includes(r.target),\n      timeout: \"auto\",\n      unmountOnExit: true\n    },\n    /* @__PURE__ */ React.createElement(List, { component: \"div\", disablePadding: true, dense: true }, sortEntities(r.entities).map((entity) => {\n      var _a;\n      const Icon = (_a = app.getSystemIcon(\n        `kind:${entity.kind.toLocaleLowerCase(\"en-US\")}`\n      )) != null ? _a : WorkIcon;\n      return /* @__PURE__ */ React.createElement(\n        ListItem,\n        {\n          key: humanizeEntityRef(entity),\n          className: classes.nested,\n          ...withLinks ? {\n            component: EntityRefLink,\n            entityRef: entity,\n            button: withLinks\n          } : {}\n        },\n        /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)),\n        /* @__PURE__ */ React.createElement(ListItemText, { primary: humanizeEntityRef(entity) })\n      );\n    }))\n  ))));\n};\n\nconst filterComponentEntity = (newLocations) => {\n  for (const location of newLocations) {\n    for (const entity of location.entities) {\n      if ([\"component\", \"api\", \"resource\"].includes(\n        entity.kind.toLocaleLowerCase(\"en-US\")\n      )) {\n        return entity;\n      }\n    }\n  }\n  return null;\n};\nconst StepFinishImportLocation = ({ prepareResult, onReset }) => {\n  const entityRoute = useRouteRef(entityRouteRef);\n  if (prepareResult.type === \"repository\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(\n      Link,\n      {\n        to: prepareResult.pullRequest.url,\n        target: \"_blank\",\n        rel: \"noreferrer\"\n      },\n      prepareResult.pullRequest.url\n    )), /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"Your entities will be imported as soon as the Pull Request is merged.\"), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, /* @__PURE__ */ React.createElement(BackButton, { onClick: onReset }, \"Register another\")), \";\");\n  }\n  const [existingLocations, newLocations] = partition(\n    prepareResult.locations,\n    (l) => l.exists\n  );\n  const newComponentEntity = filterComponentEntity(newLocations);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, newLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"The following entities have been added to the catalog:\"), /* @__PURE__ */ React.createElement(\n    EntityListComponent,\n    {\n      locations: newLocations,\n      locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n      withLinks: true\n    }\n  )), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"A refresh was triggered for the following locations:\"), /* @__PURE__ */ React.createElement(\n    EntityListComponent,\n    {\n      locations: existingLocations,\n      locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n      withLinks: true\n    }\n  )), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, newComponentEntity && /* @__PURE__ */ React.createElement(ViewComponentButton, { to: entityRoute(newComponentEntity) }, \"View Component\"), /* @__PURE__ */ React.createElement(BackButton, { onClick: onReset }, \"Register another\")));\n};\n\nconst StepInitAnalyzeUrl = (props) => {\n  const {\n    onAnalysis,\n    analysisUrl = \"\",\n    disablePullRequest = false,\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch\n  } = useForm({\n    mode: \"onTouched\",\n    defaultValues: {\n      url: analysisUrl\n    }\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState(void 0);\n  const handleResult = useCallback(\n    async ({ url }) => {\n      var _a, _b, _c;\n      setSubmitted(true);\n      try {\n        const analysisResult = await catalogImportApi.analyzeUrl(url);\n        switch (analysisResult.type) {\n          case \"repository\":\n            if (!disablePullRequest && analysisResult.generatedEntities.length > 0) {\n              onAnalysis(\"no-location\", url, analysisResult);\n            } else {\n              setError(\"Couldn't generate entities for your repository\");\n              setSubmitted(false);\n            }\n            break;\n          case \"locations\": {\n            if (analysisResult.locations.length === 1) {\n              onAnalysis(\"single-location\", url, analysisResult, {\n                prepareResult: analysisResult\n              });\n            } else if (analysisResult.locations.length > 1) {\n              onAnalysis(\"multiple-locations\", url, analysisResult);\n            } else {\n              setError(\"There are no entities at this location\");\n              setSubmitted(false);\n            }\n            break;\n          }\n          default: {\n            const err = `Received unknown analysis result of type ${analysisResult.type}. Please contact the support team.`;\n            setError(err);\n            setSubmitted(false);\n            errorApi.post(new Error(err));\n            break;\n          }\n        }\n      } catch (e) {\n        setError((_c = (_b = (_a = e == null ? void 0 : e.data) == null ? void 0 : _a.error) == null ? void 0 : _b.message) != null ? _c : e.message);\n        setSubmitted(false);\n      }\n    },\n    [catalogImportApi, disablePullRequest, errorApi, onAnalysis]\n  );\n  return /* @__PURE__ */ React.createElement(\"form\", { onSubmit: handleSubmit(handleResult) }, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(\n        register(\"url\", {\n          required: true,\n          validate: {\n            httpsValidator: (value) => typeof value === \"string\" && value.match(/^http[s]?:\\/\\//) !== null || \"Must start with http:// or https://.\"\n          }\n        })\n      ),\n      fullWidth: true,\n      id: \"url\",\n      label: \"URL\",\n      placeholder: exampleLocationUrl,\n      helperText: \"Enter the full path to your entity file to start tracking your component\",\n      margin: \"normal\",\n      variant: \"outlined\",\n      error: Boolean(errors.url),\n      required: true\n    }\n  ), errors.url && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.url.message), error && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, error), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, /* @__PURE__ */ React.createElement(\n    NextButton,\n    {\n      disabled: Boolean(errors.url) || !watch(\"url\"),\n      loading: submitted,\n      type: \"submit\"\n    },\n    \"Analyze\"\n  )));\n};\n\nconst AutocompleteTextField = (props) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {}\n  } = props;\n  return /* @__PURE__ */ React.createElement(\n    Controller,\n    {\n      name,\n      rules,\n      render: ({ field: { onChange } }) => /* @__PURE__ */ React.createElement(\n        Autocomplete,\n        {\n          loading,\n          loadingText,\n          options: options || [],\n          autoSelect: true,\n          freeSolo: true,\n          onChange: (_event, value) => onChange(value),\n          renderInput: (params) => /* @__PURE__ */ React.createElement(\n            TextField,\n            {\n              ...params,\n              helperText: (errors == null ? void 0 : errors[name]) && errorHelperText || helperText,\n              error: Boolean(errors == null ? void 0 : errors[name]),\n              margin: \"normal\",\n              variant: \"outlined\",\n              required,\n              InputProps: {\n                ...params.InputProps,\n                endAdornment: /* @__PURE__ */ React.createElement(React.Fragment, null, loading ? /* @__PURE__ */ React.createElement(CircularProgress, { color: \"inherit\", size: \"1em\" }) : null, params.InputProps.endAdornment)\n              },\n              ...textFieldProps\n            }\n          )\n        }\n      )\n    }\n  );\n};\n\nconst PreparePullRequestForm = (props) => {\n  const { defaultValues, onSubmit, render } = props;\n  const methods = useForm({ mode: \"onTouched\", defaultValues });\n  const { handleSubmit, watch, control, register, formState, setValue } = methods;\n  return /* @__PURE__ */ React.createElement(FormProvider, { ...methods }, /* @__PURE__ */ React.createElement(\"form\", { onSubmit: handleSubmit(onSubmit) }, render({ values: watch(), formState, register, control, setValue })));\n};\n\nconst PreviewCatalogInfoComponent = (props) => {\n  const { repositoryUrl, entities, classes } = props;\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(Card, { variant: \"outlined\", className: classes == null ? void 0 : classes.card }, /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      title: /* @__PURE__ */ React.createElement(\"code\", null, `${trimEnd(repositoryUrl, \"/\")}/${catalogFilename}`)\n    }\n  ), /* @__PURE__ */ React.createElement(CardContent, { className: classes == null ? void 0 : classes.cardContent }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: entities.map((e) => YAML.stringify(e)).join(\"---\\n\").trim(),\n      language: \"yaml\"\n    }\n  )));\n};\n\nconst PreviewPullRequestComponent = (props) => {\n  const { title, description, classes } = props;\n  return /* @__PURE__ */ React.createElement(Card, { variant: \"outlined\", className: classes == null ? void 0 : classes.card }, /* @__PURE__ */ React.createElement(CardHeader, { title, subheader: \"Create a new Pull Request\" }), /* @__PURE__ */ React.createElement(CardContent, { className: classes == null ? void 0 : classes.cardContent }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: description })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  previewCard: {\n    marginTop: theme.spacing(1)\n  },\n  previewCardContent: {\n    paddingTop: 0\n  }\n}));\nfunction generateEntities(entities, componentName, owner) {\n  return entities.map((e) => ({\n    ...e,\n    apiVersion: e.apiVersion,\n    kind: e.kind,\n    metadata: {\n      ...e.metadata,\n      name: componentName\n    },\n    spec: {\n      ...e.spec,\n      ...owner ? { owner } : {}\n    }\n  }));\n}\nconst StepPrepareCreatePullRequest = (props) => {\n  var _a, _b, _c, _d, _e, _f;\n  const { analyzeResult, onPrepare, onGoBack, renderFormFields } = props;\n  const classes = useStyles$1();\n  const catalogApi = useApi(catalogApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const catalogFilename = useCatalogFilename();\n  const {\n    loading: prDefaultsLoading,\n    value: prDefaults,\n    error: prDefaultsError\n  } = useAsync(\n    () => catalogImportApi.preparePullRequest(),\n    [catalogImportApi.preparePullRequest]\n  );\n  useEffect(() => {\n    if (prDefaultsError) {\n      errorApi.post(prDefaultsError);\n    }\n  }, [prDefaultsError, errorApi]);\n  const { loading: groupsLoading, value: groups } = useAsync(async () => {\n    const groupEntities = await catalogApi.getEntities({\n      filter: { kind: \"group\" }\n    });\n    return groupEntities.items.map((e) => humanizeEntityRef(e, { defaultKind: \"group\" })).sort();\n  });\n  const handleResult = useCallback(\n    async (data) => {\n      setSubmitted(true);\n      try {\n        const pr = await catalogImportApi.submitPullRequest({\n          repositoryUrl: analyzeResult.url,\n          title: data.title,\n          body: data.body,\n          fileContent: generateEntities(\n            analyzeResult.generatedEntities,\n            data.componentName,\n            data.owner\n          ).map((e) => YAML.stringify(e)).join(\"---\\n\")\n        });\n        onPrepare(\n          {\n            type: \"repository\",\n            url: analyzeResult.url,\n            integrationType: analyzeResult.integrationType,\n            pullRequest: {\n              url: pr.link\n            },\n            locations: [\n              {\n                target: pr.location,\n                entities: generateEntities(\n                  analyzeResult.generatedEntities,\n                  data.componentName,\n                  data.owner\n                ).map((e) => ({\n                  kind: e.kind,\n                  namespace: e.metadata.namespace,\n                  name: e.metadata.name\n                }))\n              }\n            ]\n          },\n          { notRepeatable: true }\n        );\n      } catch (e) {\n        assertError(e);\n        setError(e.message);\n        setSubmitted(false);\n      }\n    },\n    [\n      analyzeResult.generatedEntities,\n      analyzeResult.integrationType,\n      analyzeResult.url,\n      catalogImportApi,\n      onPrepare\n    ]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"You entered a link to a \", analyzeResult.integrationType, \" repository but a\", \" \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" could not be found. Use this form to open a Pull Request that creates one.\"), !prDefaultsLoading && /* @__PURE__ */ React.createElement(\n    PreparePullRequestForm,\n    {\n      onSubmit: handleResult,\n      defaultValues: {\n        title: (_a = prDefaults == null ? void 0 : prDefaults.title) != null ? _a : \"\",\n        body: (_b = prDefaults == null ? void 0 : prDefaults.body) != null ? _b : \"\",\n        owner: ((_d = (_c = analyzeResult.generatedEntities[0]) == null ? void 0 : _c.spec) == null ? void 0 : _d.owner) || \"\",\n        componentName: ((_f = (_e = analyzeResult.generatedEntities[0]) == null ? void 0 : _e.metadata) == null ? void 0 : _f.name) || \"\",\n        useCodeowners: false\n      },\n      render: ({ values, formState, register, setValue }) => /* @__PURE__ */ React.createElement(React.Fragment, null, renderFormFields({\n        values,\n        formState,\n        register,\n        setValue,\n        groups: groups != null ? groups : [],\n        groupsLoading\n      }), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, \"Preview Pull Request\")), /* @__PURE__ */ React.createElement(\n        PreviewPullRequestComponent,\n        {\n          title: values.title,\n          description: values.body,\n          classes: {\n            card: classes.previewCard,\n            cardContent: classes.previewCardContent\n          }\n        }\n      ), /* @__PURE__ */ React.createElement(Box, { marginTop: 2, marginBottom: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, \"Preview Entities\")), /* @__PURE__ */ React.createElement(\n        PreviewCatalogInfoComponent,\n        {\n          entities: generateEntities(\n            analyzeResult.generatedEntities,\n            values.componentName,\n            values.owner\n          ),\n          repositoryUrl: analyzeResult.url,\n          classes: {\n            card: classes.previewCard,\n            cardContent: classes.previewCardContent\n          }\n        }\n      ), error && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, error), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, { onClick: onGoBack, disabled: submitted }), /* @__PURE__ */ React.createElement(\n        NextButton,\n        {\n          type: \"submit\",\n          disabled: Boolean(\n            formState.errors.title || formState.errors.body || formState.errors.owner\n          ),\n          loading: submitted\n        },\n        \"Create PR\"\n      )))\n    }\n  ));\n};\n\nconst StepPrepareSelectLocations = ({\n  analyzeResult,\n  prepareResult,\n  onPrepare,\n  onGoBack\n}) => {\n  const [selectedUrls, setSelectedUrls] = useState(\n    (prepareResult == null ? void 0 : prepareResult.locations.map((l) => l.target)) || []\n  );\n  const [existingLocations, locations] = partition(\n    analyzeResult == null ? void 0 : analyzeResult.locations,\n    (l) => l.exists\n  );\n  const handleResult = useCallback(async () => {\n    onPrepare({\n      type: \"locations\",\n      locations: locations.filter((l) => selectedUrls.includes(l.target))\n    });\n  }, [locations, onPrepare, selectedUrls]);\n  const onItemClick = (url) => {\n    setSelectedUrls(\n      (urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url)\n    );\n  };\n  const onSelectAll = () => {\n    setSelectedUrls(\n      (urls) => urls.length < locations.length ? locations.map((l) => l.target) : []\n    );\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, locations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"Select one or more locations that are present in your git repository:\"), /* @__PURE__ */ React.createElement(\n    EntityListComponent,\n    {\n      firstListItem: /* @__PURE__ */ React.createElement(ListItem, { dense: true, button: true, onClick: onSelectAll }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(\n        Checkbox,\n        {\n          edge: \"start\",\n          checked: selectedUrls.length === locations.length,\n          indeterminate: selectedUrls.length > 0 && selectedUrls.length < locations.length,\n          tabIndex: -1,\n          disableRipple: true\n        }\n      )), /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Select All\" })),\n      onItemClick,\n      locations,\n      locationListItemIcon: (target) => /* @__PURE__ */ React.createElement(\n        Checkbox,\n        {\n          edge: \"start\",\n          checked: selectedUrls.includes(target),\n          tabIndex: -1,\n          disableRipple: true\n        }\n      ),\n      collapsed: true\n    }\n  )), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"These locations already exist in the catalog:\"), /* @__PURE__ */ React.createElement(\n    EntityListComponent,\n    {\n      locations: existingLocations,\n      locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n      withLinks: true,\n      collapsed: true\n    }\n  )), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, { onClick: onGoBack }), /* @__PURE__ */ React.createElement(NextButton, { disabled: selectedUrls.length === 0, onClick: handleResult }, \"Review\")));\n};\n\nconst StepReviewLocation = ({\n  prepareResult,\n  onReview,\n  onGoBack\n}) => {\n  const catalogApi = useApi(catalogApiRef);\n  const configApi = useApi(configApiRef);\n  const analytics = useAnalytics();\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const exists = prepareResult.type === \"locations\" && prepareResult.locations.some((l) => l.exists) ? true : false;\n  const handleClick = useCallback(async () => {\n    setSubmitted(true);\n    analytics.captureEvent(\"click\", \"import entity\");\n    try {\n      let refreshed = new Array();\n      if (prepareResult.type === \"locations\") {\n        refreshed = await Promise.all(\n          prepareResult.locations.filter((l) => l.exists).map(async (l) => {\n            var _a;\n            const ref = stringifyEntityRef((_a = l.entities[0]) != null ? _a : l);\n            await catalogApi.refreshEntity(ref);\n            return { target: l.target };\n          })\n        );\n      }\n      const locations = await Promise.all(\n        prepareResult.locations.filter((l) => !l.exists).map(async (l) => {\n          const result = await catalogApi.addLocation({\n            type: \"url\",\n            target: l.target\n          });\n          return {\n            target: result.location.target,\n            entities: result.entities\n          };\n        })\n      );\n      onReview({\n        ...prepareResult,\n        ...{ refreshed },\n        locations\n      });\n    } catch (e) {\n      assertError(e);\n      if (prepareResult.type === \"repository\" && e.message.startsWith(\n        \"Location was added but has no entities specified yet\"\n      )) {\n        onReview({\n          ...prepareResult,\n          locations: prepareResult.locations.map((l) => ({\n            target: l.target,\n            entities: []\n          }))\n        });\n      } else {\n        setError(e.message);\n        setSubmitted(false);\n      }\n    }\n  }, [prepareResult, onReview, catalogApi, analytics]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, prepareResult.type === \"repository\" && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      to: prepareResult.pullRequest.url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    },\n    prepareResult.pullRequest.url\n  )), /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"You can already import the location and \", appTitle, \" will fetch the entities as soon as the Pull Request is merged.\")), /* @__PURE__ */ React.createElement(Typography, null, exists ? \"The following locations already exist in the catalog:\" : \"The following entities will be added to the catalog:\"), /* @__PURE__ */ React.createElement(\n    EntityListComponent,\n    {\n      locations: prepareResult.locations,\n      locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null)\n    }\n  ), error && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, error), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0 }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, { onClick: onGoBack, disabled: submitted }), /* @__PURE__ */ React.createElement(\n    NextButton,\n    {\n      disabled: submitted,\n      loading: submitted,\n      onClick: () => handleClick()\n    },\n    exists ? \"Refresh\" : \"Import\"\n  )));\n};\n\nfunction defaultGenerateStepper(flow, defaults) {\n  switch (flow) {\n    case \"single-location\":\n      return {\n        ...defaults,\n        prepare: () => ({\n          stepLabel: /* @__PURE__ */ React.createElement(\n            StepLabel,\n            {\n              optional: /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, \"Discovered Locations: 1\")\n            },\n            \"Select Locations\"\n          ),\n          content: /* @__PURE__ */ React.createElement(React.Fragment, null)\n        })\n      };\n    case \"multiple-locations\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"locations\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(\n              StepLabel,\n              {\n                optional: /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, \"Discovered Locations: \", state.analyzeResult.locations.length)\n              },\n              \"Select Locations\"\n            ),\n            content: /* @__PURE__ */ React.createElement(\n              StepPrepareSelectLocations,\n              {\n                analyzeResult: state.analyzeResult,\n                prepareResult: state.prepareResult,\n                onPrepare: state.onPrepare,\n                onGoBack: state.onGoBack\n              }\n            )\n          };\n        }\n      };\n    case \"no-location\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"repository\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Create Pull Request\"),\n            content: /* @__PURE__ */ React.createElement(\n              StepPrepareCreatePullRequest,\n              {\n                analyzeResult: state.analyzeResult,\n                onPrepare: state.onPrepare,\n                onGoBack: state.onGoBack,\n                renderFormFields: ({\n                  values,\n                  setValue,\n                  formState,\n                  groupsLoading,\n                  groups,\n                  register\n                }) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, \"Pull Request Details\")), /* @__PURE__ */ React.createElement(\n                  TextField,\n                  {\n                    ...asInputRef(\n                      register(\"title\", {\n                        required: true\n                      })\n                    ),\n                    label: \"Pull Request Title\",\n                    placeholder: \"Add Backstage catalog entity descriptor files\",\n                    margin: \"normal\",\n                    variant: \"outlined\",\n                    fullWidth: true,\n                    error: Boolean(formState.errors.title),\n                    required: true\n                  }\n                ), /* @__PURE__ */ React.createElement(\n                  TextField,\n                  {\n                    ...asInputRef(\n                      register(\"body\", {\n                        required: true\n                      })\n                    ),\n                    label: \"Pull Request Body\",\n                    placeholder: \"A describing text with Markdown support\",\n                    margin: \"normal\",\n                    variant: \"outlined\",\n                    fullWidth: true,\n                    error: Boolean(formState.errors.body),\n                    multiline: true,\n                    required: true\n                  }\n                ), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, \"Entity Configuration\")), /* @__PURE__ */ React.createElement(\n                  TextField,\n                  {\n                    ...asInputRef(\n                      register(\"componentName\", { required: true })\n                    ),\n                    label: \"Name of the created component\",\n                    placeholder: \"my-component\",\n                    margin: \"normal\",\n                    variant: \"outlined\",\n                    fullWidth: true,\n                    error: Boolean(formState.errors.componentName),\n                    required: true\n                  }\n                ), !values.useCodeowners && /* @__PURE__ */ React.createElement(\n                  AutocompleteTextField,\n                  {\n                    name: \"owner\",\n                    errors: formState.errors,\n                    options: groups || [],\n                    loading: groupsLoading,\n                    loadingText: \"Loading groups\\u2026\",\n                    helperText: \"Select an owner from the list or enter a reference to a Group or a User\",\n                    errorHelperText: \"required value\",\n                    textFieldProps: {\n                      label: \"Entity Owner\",\n                      placeholder: \"my-group\"\n                    },\n                    rules: { required: true },\n                    required: true\n                  }\n                ), /* @__PURE__ */ React.createElement(\n                  FormControlLabel,\n                  {\n                    control: /* @__PURE__ */ React.createElement(\n                      Checkbox,\n                      {\n                        ...asInputRef(register(\"useCodeowners\")),\n                        onChange: (_, value) => {\n                          if (value) {\n                            setValue(\"owner\", \"\");\n                          }\n                        }\n                      }\n                    ),\n                    label: /* @__PURE__ */ React.createElement(React.Fragment, null, \"Use \", /* @__PURE__ */ React.createElement(\"em\", null, \"CODEOWNERS\"), \" file as Entity Owner\")\n                  }\n                ), /* @__PURE__ */ React.createElement(FormHelperText, null, \"WARNING: This may fail if no CODEOWNERS file is found at the target location.\"))\n              }\n            )\n          };\n        }\n      };\n    default:\n      return defaults;\n  }\n}\nconst defaultStepper = {\n  analyze: (state, { apis }) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Select URL\"),\n    content: /* @__PURE__ */ React.createElement(\n      StepInitAnalyzeUrl,\n      {\n        key: \"analyze\",\n        analysisUrl: state.analysisUrl,\n        onAnalysis: state.onAnalysis,\n        disablePullRequest: !apis.catalogImportApi.preparePullRequest\n      }\n    )\n  }),\n  prepare: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, { optional: /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\" }, \"Optional\") }, \"Import Actions\"),\n    content: /* @__PURE__ */ React.createElement(BackButton, { onClick: state.onGoBack })\n  }),\n  review: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Review\"),\n    content: /* @__PURE__ */ React.createElement(\n      StepReviewLocation,\n      {\n        prepareResult: state.prepareResult,\n        onReview: state.onReview,\n        onGoBack: state.onGoBack\n      }\n    )\n  }),\n  finish: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Finish\"),\n    content: /* @__PURE__ */ React.createElement(\n      StepFinishImportLocation,\n      {\n        prepareResult: state.prepareResult,\n        onReset: state.onReset\n      }\n    )\n  })\n};\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0\n  }\n}));\nconst ImportStepper = (props) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant\n  } = props;\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n  const states = useMemo(\n    () => generateStepper(state.activeFlow, defaultStepper),\n    [generateStepper, state.activeFlow]\n  );\n  const render = (step) => {\n    return /* @__PURE__ */ React.createElement(Step, null, step.stepLabel, /* @__PURE__ */ React.createElement(StepContent, null, step.content));\n  };\n  return /* @__PURE__ */ React.createElement(InfoCard, { variant }, /* @__PURE__ */ React.createElement(\n    Stepper,\n    {\n      classes: { root: classes.stepperRoot },\n      activeStep: state.activeStepNumber,\n      orientation: \"vertical\"\n    },\n    render(\n      states.analyze(\n        state,\n        { apis: { catalogImportApi } }\n      )\n    ),\n    render(\n      states.prepare(\n        state,\n        { apis: { catalogImportApi } }\n      )\n    ),\n    render(\n      states.review(\n        state,\n        { apis: { catalogImportApi } }\n      )\n    ),\n    render(\n      states.finish(\n        state,\n        { apis: { catalogImportApi } }\n      )\n    )\n  ));\n};\n\nconst DefaultImportPage = () => {\n  const theme = useTheme();\n  const configApi = useApi(configApiRef);\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const contentItems = [\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 4, lg: 6, xl: 8 }, /* @__PURE__ */ React.createElement(ImportInfoCard, null)),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 8, lg: 6, xl: 4 }, /* @__PURE__ */ React.createElement(ImportStepper, null))\n  ];\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: \"Register an existing component\" }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: `Start tracking your component in ${appTitle}` }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Start tracking your component in \", appTitle, \" by adding it to the software catalog.\")), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 2 }, isMobile ? contentItems : contentItems.reverse())));\n};\n\nexport { AutocompleteTextField, CatalogImportClient, CatalogImportPage, DefaultImportPage, EntityListComponent, ImportInfoCard, ImportStepper, PreparePullRequestForm, PreviewCatalogInfoComponent, PreviewPullRequestComponent, StepInitAnalyzeUrl, StepPrepareCreatePullRequest, catalogImportApiRef, catalogImportPlugin, defaultGenerateStepper, catalogImportPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { RELATION_MEMBER_OF, getCompoundEntityRef, stringifyEntityRef, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { g as getEntityRelations, a as useAsyncEntity } from './esm/useEntity-de64059a.esm.js';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport '@backstage/core-plugin-api';\nimport '@backstage/version-bridge';\nimport 'react';\n\nfunction isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: \"group\" }),\n      ...owner ? [getCompoundEntityRef(owner)] : []\n    ].map(stringifyEntityRef)\n  );\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef\n  );\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction useEntityPermission(permission) {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : void 0\n  });\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n\nexport { isOwnerOf, useEntityPermission };\n//# sourceMappingURL=alpha.esm.js.map\n","import { parseEntityRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { AnalyticsContext } from '@backstage/core-plugin-api';\nimport { createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport React from 'react';\n\nfunction getEntityRelations(entity, relationType, filter) {\n  var _a;\n  let entityNames = ((_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.filter((r) => r.type === relationType).map((r) => parseEntityRef(r.targetRef))) || [];\n  if (filter == null ? void 0 : filter.kind) {\n    entityNames = entityNames.filter(\n      (e) => e.kind.toLocaleLowerCase(\"en-US\") === filter.kind.toLocaleLowerCase(\"en-US\")\n    );\n  }\n  return entityNames;\n}\n\nconst NewEntityContext = createVersionedContext(\n  \"entity-context\"\n);\nconst AsyncEntityProvider = (props) => {\n  const { children, entity, loading, error, refresh } = props;\n  const value = { entity, loading, error, refresh };\n  return /* @__PURE__ */ React.createElement(NewEntityContext.Provider, { value: createVersionedValueMap({ 1: value }) }, /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        ...entity ? { entityRef: stringifyEntityRef(entity) } : void 0\n      }\n    },\n    children\n  ));\n};\nconst EntityProvider = (props) => /* @__PURE__ */ React.createElement(\n  AsyncEntityProvider,\n  {\n    entity: props.entity,\n    loading: !Boolean(props.entity),\n    error: void 0,\n    refresh: void 0,\n    children: props.children\n  }\n);\nfunction useEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  if (!value.entity) {\n    throw new Error(\n      \"useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.\"\n    );\n  }\n  return { entity: value.entity };\n}\nfunction useAsyncEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  const { entity, loading, error, refresh } = value;\n  return { entity, loading, error, refresh };\n}\n\nexport { AsyncEntityProvider as A, EntityProvider as E, useAsyncEntity as a, getEntityRelations as g, useEntity as u };\n//# sourceMappingURL=useEntity-de64059a.esm.js.map\n","import { useEffect } from 'react';\n/**\n * Run effect only when component is first mounted.\n *\n * @param effect Effector to run on mount\n */\nexport function useMountEffect(effect) {\n    useEffect(() => {\n        effect();\n    }, []);\n}\n","import { useMemo, useRef } from 'react';\n/**\n * Like `useRef`, but it returns immutable ref that contains actual value.\n *\n * @param value\n */\nexport function useSyncedRef(value) {\n    const ref = useRef(value);\n    ref.current = value;\n    return useMemo(() => Object.freeze({\n        get current() {\n            return ref.current;\n        },\n    }), []);\n}\n","import { useEffect } from 'react';\nimport { useSyncedRef } from '../useSyncedRef';\n/**\n * Run effect only when component is unmounted.\n *\n * @param effect Effector to run on unmount\n */\nexport function useUnmountEffect(effect) {\n    const effectRef = useSyncedRef(effect);\n    useEffect(() => () => {\n        effectRef.current();\n    }, []);\n}\n","import { useMemo, useRef } from 'react';\nimport { useUnmountEffect } from '../useUnmountEffect';\n/**\n * Makes passed function debounced, otherwise acts like `useCallback`.\n *\n * @param callback Function that will be debounced.\n * @param deps Dependencies list when to update callback.\n * @param delay Debounce delay.\n * @param maxWait The maximum time `callback` is allowed to be delayed before\n * it's invoked. 0 means no max wait.\n */\nexport function useDebouncedCallback(callback, deps, delay, maxWait = 0) {\n    const timeout = useRef();\n    const waitTimeout = useRef();\n    const lastCall = useRef();\n    const clear = () => {\n        if (timeout.current) {\n            clearTimeout(timeout.current);\n            timeout.current = undefined;\n        }\n        if (waitTimeout.current) {\n            clearTimeout(waitTimeout.current);\n            waitTimeout.current = undefined;\n        }\n    };\n    // Cancel scheduled execution on unmount\n    useUnmountEffect(clear);\n    return useMemo(() => {\n        const execute = () => {\n            // Barely possible to test this line\n            /* istanbul ignore next */\n            if (!lastCall.current)\n                return;\n            const context = lastCall.current;\n            lastCall.current = undefined;\n            callback.apply(context.this, context.args);\n            clear();\n        };\n        const wrapped = function (...args) {\n            if (timeout.current) {\n                clearTimeout(timeout.current);\n            }\n            lastCall.current = { args, this: this };\n            // Plan regular execution\n            timeout.current = setTimeout(execute, delay);\n            // Plan maxWait execution if required\n            if (maxWait > 0 && !waitTimeout.current) {\n                waitTimeout.current = setTimeout(execute, maxWait);\n            }\n        };\n        Object.defineProperties(wrapped, {\n            length: { value: callback.length },\n            name: { value: `${callback.name || 'anonymous'}__debounced__${delay}` },\n        });\n        return wrapped;\n    }, [delay, maxWait, ...deps]);\n}\n","import { useEffect } from 'react';\nimport { useDebouncedCallback } from '../useDebouncedCallback';\n/**\n * Like `useEffect`, but the passed function is debounced.\n *\n * @param callback Callback like for `useEffect`, but without ability to return\n * a cleanup function.\n * @param deps Dependency list like the one passed to `useEffect`.\n * @param delay Debounce delay (in milliseconds).\n * @param maxWait The maximum time `callback` is allowed to be delayed\n * before it's invoked. `0` means no max wait.\n */\nexport function useDebouncedEffect(callback, deps, delay, maxWait = 0) {\n    useEffect(useDebouncedCallback(callback, deps, delay, maxWait), deps);\n}\n","export { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { createApiRef, useApi, identityApiRef, alertApiRef, createRouteRef, useRouteRef, useApiHolder, useApp, configApiRef } from '@backstage/core-plugin-api';\nimport ObservableImpl from 'zen-observable';\nimport React, { useState, createContext, useMemo, useCallback, useContext, useEffect, useRef, memo, forwardRef, useLayoutEffect, Fragment } from 'react';\nimport { Grid, useMediaQuery, useTheme, Button, Drawer, Box, Typography, FormControlLabel, Checkbox, makeStyles, TextField, Tooltip, IconButton, Card, CardContent, Chip, CardActions, Toolbar, FormControl, Input, InputAdornment, withStyles, DialogContentText, ListItemText as ListItemText$1, ListSubheader as ListSubheader$1, ListItem, ListItemIcon, List, Dialog, DialogTitle, DialogContent, Tabs, Tab, DialogActions, Divider, MenuItem, ListItemSecondaryAction } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Select, Link, Progress, ErrorPanel, ResponseErrorPanel, OverflowTooltip, Table, DependencyGraph, DependencyGraphTypes, CodeSnippet } from '@backstage/core-components';\nimport { ANNOTATION_SOURCE_LOCATION, parseLocationRef, stringifyEntityRef, parseEntityRef, RELATION_OWNED_BY, DEFAULT_NAMESPACE, getCompoundEntityRef, isUserEntity, isGroupEntity, RELATION_PART_OF, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION } from '@backstage/catalog-model';\nimport { g as getEntityRelations } from './esm/useEntity-de64059a.esm.js';\nexport { A as AsyncEntityProvider, E as EntityProvider, g as getEntityRelations, a as useAsyncEntity, u as useEntity } from './esm/useEntity-de64059a.esm.js';\nimport { compact, isEqual, debounce } from 'lodash';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual$1 from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport useObservable from 'react-use/lib/useObservable';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport classNames from 'classnames';\nimport { useMountEffect, useDebouncedEffect } from '@react-hookz/web';\nimport PersonIcon from '@material-ui/icons/Person';\nimport GroupIcon from '@material-ui/icons/Group';\nimport get from 'lodash/get';\nimport { getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport HoverPopover from 'material-ui-popup-state/HoverPopover';\nimport { usePopupState, bindHover, bindPopover } from 'material-ui-popup-state/hooks';\nimport InfoIcon from '@material-ui/icons/Info';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport WorkIcon from '@material-ui/icons/Work';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport groupBy from 'lodash/groupBy';\nimport DialogContentText$1 from '@material-ui/core/DialogContentText';\nimport YAML from 'yaml';\nimport Alert$1 from '@material-ui/lab/Alert';\nimport { assertError } from '@backstage/errors';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst catalogApiRef = createApiRef({\n  id: \"plugin.catalog.service\"\n});\n\nconst starredEntitiesApiRef = createApiRef({\n  id: \"catalog-react.starred-entities\"\n});\n\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass MockStarredEntitiesApi {\n  constructor() {\n    __publicField$1(this, \"starredEntities\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField$1(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n  }\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n\nconst Filters = (props) => {\n  const isMidSizeScreen = useMediaQuery(\n    (theme2) => theme2.breakpoints.down(\"md\")\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n  return isMidSizeScreen ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n      onClick: () => setFilterDrawerOpen(true),\n      startIcon: /* @__PURE__ */ React.createElement(FilterListIcon, null)\n    },\n    \"Filters\"\n  ), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      open: filterDrawerOpen,\n      onClose: () => setFilterDrawerOpen(false),\n      anchor: \"left\",\n      disableAutoFocus: true,\n      keepMounted: true,\n      variant: \"temporary\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { m: 2 }, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"h2\",\n        style: { marginBottom: theme.spacing(1) }\n      },\n      \"Filters\"\n    ), props.children)\n  )) : /* @__PURE__ */ React.createElement(Grid, { item: true, lg: 2 }, props.children);\n};\nconst Content = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, lg: 10 }, props.children);\n};\nconst CatalogFilterLayout = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, style: { position: \"relative\" } }, props.children);\n};\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n\nfunction reduceCatalogFilters(filters) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...filter.getCatalogFilters ? filter.getCatalogFilters() : {}\n    };\n  }, {});\n}\nfunction reduceEntityFilters(filters) {\n  return (entity) => filters.every(\n    (filter) => !filter.filterEntity || filter.filterEntity(entity)\n  );\n}\n\nfunction getEntitySourceLocation(entity, scmIntegrationsApi) {\n  var _a;\n  const sourceLocation = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION];\n  if (!sourceLocation) {\n    return void 0;\n  }\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration == null ? void 0 : integration.type\n    };\n  } catch {\n    return void 0;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass EntityKindFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityTypeFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  // Simplify `string | string[]` for consumers, always returns an array\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  getCatalogFilters() {\n    return { \"spec.type\": this.getTypes() };\n  }\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\nclass EntityTagFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.every((v) => {\n      var _a;\n      return ((_a = entity.metadata.tags) != null ? _a : []).includes(v);\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityTextFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    const words = this.toUpperArray(this.value.split(/\\s/));\n    const exactMatch = this.toUpperArray([entity.metadata.tags]);\n    const partialMatch = this.toUpperArray([\n      entity.metadata.name,\n      entity.metadata.title\n    ]);\n    for (const word of words) {\n      if (exactMatch.every((m) => m !== word) && partialMatch.every((m) => !m.includes(word))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  toUpperArray(value) {\n    return value.flat().filter((m) => Boolean(m)).map((m) => m.toLocaleUpperCase(\"en-US\"));\n  }\n}\nclass EntityOwnerFilter {\n  constructor(values) {\n    __publicField(this, \"values\");\n    this.values = values.reduce((fullRefs, ref) => {\n      try {\n        fullRefs.push(\n          stringifyEntityRef(parseEntityRef(ref, { defaultKind: \"Group\" }))\n        );\n        return fullRefs;\n      } catch (err) {\n        return fullRefs;\n      }\n    }, []);\n  }\n  filterEntity(entity) {\n    return this.values.some(\n      (v) => getEntityRelations(entity, RELATION_OWNED_BY).some(\n        (o) => stringifyEntityRef(o) === v\n      )\n    );\n  }\n  /**\n   * Get the URL query parameter value. May be a mix of full and humanized entity refs.\n   * @returns list of entity refs.\n   */\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityLifecycleFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => {\n      var _a;\n      return ((_a = entity.spec) == null ? void 0 : _a.lifecycle) === v;\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityNamespaceFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => entity.metadata.namespace === v);\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass UserListFilter {\n  constructor(value, isOwnedEntity, isStarredEntity) {\n    this.value = value;\n    this.isOwnedEntity = isOwnedEntity;\n    this.isStarredEntity = isStarredEntity;\n  }\n  filterEntity(entity) {\n    switch (this.value) {\n      case \"owned\":\n        return this.isOwnedEntity(entity);\n      case \"starred\":\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityOrphanFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a;\n    const orphan = (_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/orphan\"];\n    return orphan !== void 0 && this.value.toString() === orphan;\n  }\n}\nclass EntityErrorFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a, _b;\n    const error = ((_b = (_a = entity == null ? void 0 : entity.status) == null ? void 0 : _a.items) == null ? void 0 : _b.length) > 0;\n    return error !== void 0 && this.value === error;\n  }\n}\n\nconst EntityListContext = createContext(void 0);\nconst EntityListProvider = (props) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {}\n  );\n  const location = useLocation();\n  const queryParameters = useMemo(\n    () => {\n      var _a;\n      return (_a = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      }).filters) != null ? _a : {};\n    },\n    [location]\n  );\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {},\n        entities: [],\n        backendEntities: []\n      };\n    }\n  );\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      var _a;\n      const compacted = compact(Object.values(requestedFilters));\n      const entityFilter = reduceEntityFilters(compacted);\n      const backendFilter = reduceCatalogFilters(compacted);\n      const previousBackendFilter = reduceCatalogFilters(\n        compact(Object.values(outputState.appliedFilters))\n      );\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter = requestedFilters[key];\n          if (filter == null ? void 0 : filter.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {}\n      );\n      if (!isEqual(previousBackendFilter, backendFilter)) {\n        const response = await catalogApi.getEntities({\n          filter: backendFilter\n        });\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: response.items,\n          entities: response.items.filter(entityFilter)\n        });\n      } else {\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: outputState.backendEntities,\n          entities: outputState.backendEntities.filter(entityFilter)\n        });\n      }\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams },\n          { addQueryPrefix: true, arrayFormat: \"repeat\" }\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        (_a = window.history) == null ? void 0 : _a.replaceState(null, document.title, newUrl);\n      }\n    },\n    [catalogApi, queryParameters, requestedFilters, outputState],\n    { loading: true }\n  );\n  useDebounce(refresh, 10, [requestedFilters]);\n  const updateFilters = useCallback(\n    (update) => {\n      setRequestedFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error\n    }),\n    [outputState, updateFilters, queryParameters, loading, error]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value }, props.children);\n};\nfunction useEntityList() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error(\"useEntityList must be used within EntityListProvider\");\n  return context;\n}\n\nfunction useEntityTypeFilter() {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean),\n    [typeParameter]\n  );\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length ? flattenedQueryTypes : (_a = typeFilter == null ? void 0 : typeFilter.getTypes()) != null ? _a : []\n  );\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter == null ? void 0 : kindFilter.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, (f) => -f.count).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter(\n      (value) => newTypes.includes(value)\n    );\n    if (!isEqual$1(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nfunction useRelatedEntities(entity, relationFilter) {\n  var _a, _b;\n  const filterByTypeLower = (_a = relationFilter == null ? void 0 : relationFilter.type) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\");\n  const filterByKindLower = (_b = relationFilter == null ? void 0 : relationFilter.kind) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\");\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error\n  } = useAsync(async () => {\n    var _a2;\n    const relations = (_a2 = entity.relations) == null ? void 0 : _a2.filter(\n      (r) => (!filterByTypeLower || r.type.toLocaleLowerCase(\"en-US\") === filterByTypeLower) && (!filterByKindLower || parseEntityRef(r.targetRef).kind === filterByKindLower)\n    );\n    if (!(relations == null ? void 0 : relations.length)) {\n      return [];\n    }\n    const { items } = await catalogApi.getEntitiesByRefs({\n      entityRefs: relations.map((r) => r.targetRef)\n    });\n    return items.filter((x) => Boolean(x));\n  }, [entity, filterByTypeLower, filterByKindLower]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction getEntityRef$1(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntities() {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const starredEntities = useObservable(\n    starredEntitiesApi.starredEntitie$(),\n    /* @__PURE__ */ new Set()\n  );\n  const isStarredEntity = useCallback(\n    (entityOrRef) => starredEntities.has(getEntityRef$1(entityOrRef)),\n    [starredEntities]\n  );\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) => starredEntitiesApi.toggleStarred(getEntityRef$1(entityOrRef)).then(),\n    [starredEntitiesApi]\n  );\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction getEntityRef(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntity(entityOrRef) {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi]\n  );\n  return {\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction useEntityOwnership() {\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: refs } = useAsync(async () => {\n    const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n    return ownershipEntityRefs;\n  }, []);\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs != null ? refs : []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n  return useMemo(() => ({ loading, isOwnedEntity }), [loading, isOwnedEntity]);\n}\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nfunction useEntityKindFilter(opts) {\n  var _a, _b;\n  const {\n    filters,\n    queryParameters: { kind: kindParameter },\n    updateFilters\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : opts.initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const { allKinds, loading, error } = useAllKinds();\n  return {\n    loading,\n    error,\n    allKinds: allKinds != null ? allKinds : [],\n    selectedKind,\n    setSelectedKind\n  };\n}\nconst EntityKindPicker = (props) => {\n  const { allowedKinds, hidden, initialFilter = \"component\" } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, allKinds, selectedKind, setSelectedKind } = useEntityKindFilter({\n    initialFilter\n  });\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity kinds`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (error)\n    return null;\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  const items = Object.keys(options).map((key) => ({\n    value: key,\n    label: options[key]\n  }));\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Kind\",\n      items,\n      selected: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (value) => setSelectedKind(String(value))\n    }\n  ));\n};\n\nconst icon$2 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$2 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nfunction OptionCheckbox({ selected }) {\n  return /* @__PURE__ */ React.createElement(Checkbox, { icon: icon$2, checkedIcon: checkedIcon$2, checked: selected });\n}\nconst EntityAutocompletePickerOption = memo((props) => {\n  const { selected, value, availableOptions, showCounts } = props;\n  const label = showCounts ? `${value} (${availableOptions == null ? void 0 : availableOptions[value]})` : value;\n  return /* @__PURE__ */ React.createElement(\n    FormControlLabel,\n    {\n      control: /* @__PURE__ */ React.createElement(OptionCheckbox, { selected }),\n      label,\n      onClick: (event) => event.preventDefault()\n    }\n  );\n});\n\nconst useStyles$f = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityAutocompletePickerInput\"\n  }\n);\nfunction EntityAutocompletePickerInput(params) {\n  const classes = useStyles$f();\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      variant: \"outlined\",\n      ...params,\n      className: classNames(classes.input, params.className)\n    }\n  );\n}\n\nfunction EntityAutocompletePicker(props) {\n  var _a, _b;\n  const {\n    label,\n    name,\n    path,\n    showCounts,\n    Filter,\n    InputProps,\n    initialSelectedOptions = []\n  } = props;\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { [name]: queryParameter }\n  } = useEntityList();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableValues } = useAsync(async () => {\n    var _a2;\n    const facet = path;\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: (_a2 = filters.kind) == null ? void 0 : _a2.getCatalogFilters()\n    });\n    return Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n  }, [filters.kind]);\n  const queryParameters = useMemo(\n    () => [queryParameter].flat().filter(Boolean),\n    [queryParameter]\n  );\n  const [selectedOptions, setSelectedOptions] = useState(\n    queryParameters.length ? queryParameters : (_b = (_a = filters[name]) == null ? void 0 : _a.values) != null ? _b : initialSelectedOptions\n  );\n  useEffect(() => {\n    if (queryParameters.length) {\n      setSelectedOptions(queryParameters);\n    }\n  }, [queryParameters]);\n  const availableOptions = Object.keys(availableValues != null ? availableValues : {});\n  const shouldAddFilter = selectedOptions.length && availableOptions.length;\n  useEffect(() => {\n    updateFilters({\n      [name]: shouldAddFilter ? new Filter(selectedOptions) : void 0\n    });\n  }, [name, shouldAddFilter, selectedOptions, Filter, updateFilters]);\n  const filter = filters[name];\n  if (filter && typeof filter === \"object\" && !(\"values\" in filter) || !availableOptions.length) {\n    return null;\n  }\n  if (availableOptions.length <= 1)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, label, /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableOptions,\n      value: selectedOptions,\n      onChange: (_event, options) => setSelectedOptions(options),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        EntityAutocompletePickerOption,\n        {\n          selected,\n          value: option,\n          availableOptions: availableValues,\n          showCounts: !!showCounts\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": `${String(name)}-picker-expand` }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(EntityAutocompletePickerInput, { ...params, ...InputProps })\n    }\n  )));\n}\n\nconst useStyles$e = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityLifecyclePicker\"\n  }\n);\nconst EntityLifecyclePicker = (props) => {\n  const { initialFilter = [] } = props;\n  const classes = useStyles$e();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Lifecycle\",\n      name: \"lifecycles\",\n      path: \"spec.lifecycle\",\n      Filter: EntityLifecycleFilter,\n      InputProps: { className: classes.input },\n      initialSelectedOptions: initialFilter\n    }\n  );\n};\n\nfunction humanizeEntityRef(entityRef, opts) {\n  const defaultKind = opts == null ? void 0 : opts.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  if (namespace === void 0 || namespace === \"\") {\n    namespace = DEFAULT_NAMESPACE;\n  }\n  if ((opts == null ? void 0 : opts.defaultNamespace) !== void 0) {\n    if ((opts == null ? void 0 : opts.defaultNamespace) === namespace) {\n      namespace = void 0;\n    }\n  } else if (namespace === DEFAULT_NAMESPACE) {\n    namespace = void 0;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  kind = defaultKind && defaultKind.toLocaleLowerCase(\"en-US\") === kind ? void 0 : kind;\n  return `${kind ? `${kind}:` : \"\"}${namespace ? `${namespace}/` : \"\"}${name}`;\n}\nfunction humanizeEntity(entity, defaultName) {\n  for (const path of [\"spec.profile.displayName\", \"metadata.title\"]) {\n    const value = get(entity, path);\n    if (value && typeof value === \"string\") {\n      return value;\n    }\n  }\n  return defaultName;\n}\n\nfunction useFacetsEntities({ enabled }) {\n  const catalogApi = useApi(catalogApiRef);\n  const [facetsPromise] = useState(async () => {\n    if (!enabled) {\n      return [];\n    }\n    const facet = \"relations.ownedBy\";\n    return catalogApi.getEntityFacets({ facets: [facet] }).then(\n      (response) => response.facets[facet].map((e) => e.value).map((ref) => {\n        const { kind, name, namespace } = parseEntityRef(ref);\n        return {\n          apiVersion: \"backstage.io/v1beta1\",\n          kind,\n          metadata: { name, namespace }\n        };\n      }).sort(\n        (a, b) => (a.metadata.namespace || \"\").localeCompare(\n          b.metadata.namespace || \"\",\n          \"en-US\"\n        ) || a.metadata.name.localeCompare(b.metadata.name, \"en-US\") || a.kind.localeCompare(b.kind, \"en-US\")\n      )\n    ).catch(() => []);\n  });\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const facets = await facetsPromise;\n      if (!facets) {\n        return {\n          items: []\n        };\n      }\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      const { text, start } = decodeCursor(request);\n      const filteredRefs = facets.filter((e) => filterEntity(text, e));\n      const end = start + limit;\n      return {\n        items: filteredRefs.slice(0, end),\n        ...encodeCursor({\n          entities: filteredRefs,\n          limit: end,\n          payload: {\n            text,\n            start: end\n          }\n        })\n      };\n    },\n    [facetsPromise],\n    { loading: true, value: { items: [] } }\n  );\n}\nfunction decodeCursor(request) {\n  if (isFacetsResponse(request) && request.cursor) {\n    return JSON.parse(atob(request.cursor));\n  }\n  return {\n    text: request.text || \"\",\n    start: 0\n  };\n}\nfunction isFacetsResponse(request) {\n  return !!request.cursor;\n}\nfunction encodeCursor({\n  entities,\n  limit,\n  payload\n}) {\n  if (entities.length > limit) {\n    return { cursor: btoa(JSON.stringify(payload)) };\n  }\n  return {};\n}\nfunction filterEntity(text, entity) {\n  var _a;\n  const normalizedText = text.trim();\n  return entity.kind.includes(normalizedText) || ((_a = entity.metadata.namespace) == null ? void 0 : _a.includes(normalizedText)) || entity.metadata.name.includes(normalizedText);\n}\n\nfunction useQueryEntities() {\n  const catalogApi = useApi(catalogApiRef);\n  return useAsyncFn(\n    async (request, options) => {\n      var _a;\n      const initialRequest = request;\n      const cursorRequest = request;\n      const limit = (_a = options == null ? void 0 : options.limit) != null ? _a : 20;\n      if (cursorRequest.cursor) {\n        const response2 = await catalogApi.queryEntities({\n          cursor: cursorRequest.cursor,\n          limit\n        });\n        return {\n          cursor: response2.pageInfo.nextCursor,\n          items: [...cursorRequest.items, ...response2.items]\n        };\n      }\n      const response = await catalogApi.queryEntities({\n        fullTextFilter: {\n          term: initialRequest.text || \"\",\n          fields: [\n            \"metadata.name\",\n            \"kind\",\n            \"spec.profile.displayname\",\n            \"metadata.title\"\n          ]\n        },\n        filter: { kind: [\"User\", \"Group\"] },\n        orderFields: [{ field: \"metadata.name\", order: \"asc\" }],\n        limit\n      });\n      return {\n        cursor: response.pageInfo.nextCursor,\n        items: response.items\n      };\n    },\n    [],\n    { loading: true }\n  );\n}\n\nfunction useFetchEntities({\n  mode,\n  initialSelectedOwnersRefs\n}) {\n  const isOwnersOnlyMode = mode === \"owners-only\";\n  const queryEntitiesResponse = useQueryEntities();\n  const facetsEntitiesResponse = useFacetsEntities({\n    enabled: isOwnersOnlyMode\n  });\n  const [state, handleFetch] = isOwnersOnlyMode ? facetsEntitiesResponse : queryEntitiesResponse;\n  return [\n    state,\n    handleFetch,\n    useSelectedOwners({\n      enabled: !isOwnersOnlyMode,\n      initialSelectedOwnersRefs\n    })\n  ];\n}\nfunction useSelectedOwners({\n  enabled,\n  initialSelectedOwnersRefs\n}) {\n  const allEntities = useRef({});\n  const catalogApi = useApi(catalogApiRef);\n  const [, handleFetch] = useAsyncFn(async () => {\n    const initialSelectedEntities = await catalogApi.getEntitiesByRefs({\n      entityRefs: initialSelectedOwnersRefs\n    });\n    initialSelectedEntities.items.forEach((e) => {\n      if (e) {\n        allEntities.current[stringifyEntityRef(e)] = e;\n      }\n    });\n  }, []);\n  useMountEffect(() => {\n    if (enabled && initialSelectedOwnersRefs.length > 0) {\n      handleFetch();\n    }\n  });\n  return {\n    getEntity: (entityRef) => allEntities.current[entityRef],\n    setEntity: (entity) => {\n      allEntities.current[stringifyEntityRef(entity)] = entity;\n    }\n  };\n}\n\nconst useStyles$d = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityOwnerPicker\"\n  }\n);\nconst icon$1 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon$1 = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst EntityOwnerPicker = (props) => {\n  var _a, _b, _c;\n  const classes = useStyles$d();\n  const { mode = \"owners-only\" } = props || {};\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { owners: ownersParameter }\n  } = useEntityList();\n  const [text, setText] = useState(\"\");\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean),\n    [ownersParameter]\n  );\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : (_b = (_a = filters.owners) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  const [{ value, loading }, handleFetch, cache] = useFetchEntities({\n    mode,\n    initialSelectedOwnersRefs: selectedOwners\n  });\n  useDebouncedEffect(() => handleFetch({ text }), [text, handleFetch], 250);\n  const availableOwners = (value == null ? void 0 : value.items) || [];\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      const filter = new EntityOwnerFilter(queryParamOwners);\n      setSelectedOwners(filter.values);\n    }\n  }, [queryParamOwners]);\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length ? new EntityOwnerFilter(selectedOwners) : void 0\n    });\n  }, [selectedOwners, updateFilters]);\n  if ([\"user\", \"group\"].includes(\n    ((_c = filters.kind) == null ? void 0 : _c.value.toLocaleLowerCase(\"en-US\")) || \"\"\n  )) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Owner\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      loading,\n      options: availableOwners,\n      value: selectedOwners,\n      getOptionSelected: (o, v) => {\n        if (typeof v === \"string\") {\n          return stringifyEntityRef(o) === v;\n        }\n        return o === v;\n      },\n      getOptionLabel: (o) => {\n        const entity = typeof o === \"string\" ? cache.getEntity(o) || parseEntityRef(o, {\n          defaultKind: \"group\",\n          defaultNamespace: \"default\"\n        }) : o;\n        return humanizeEntity(entity, humanizeEntityRef(entity));\n      },\n      onChange: (_, owners) => {\n        setText(\"\");\n        setSelectedOwners(\n          owners.map((e) => {\n            const entityRef = typeof e === \"string\" ? e : stringifyEntityRef(e);\n            if (typeof e !== \"string\") {\n              cache.setEntity(e);\n            }\n            return entityRef;\n          })\n        );\n      },\n      filterOptions: (x) => x,\n      renderOption: (entity, { selected }) => {\n        const isGroup = entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n        return /* @__PURE__ */ React.createElement(\n          FormControlLabel,\n          {\n            control: /* @__PURE__ */ React.createElement(\n              Checkbox,\n              {\n                icon: icon$1,\n                checkedIcon: checkedIcon$1,\n                checked: selected\n              }\n            ),\n            onClick: (event) => event.preventDefault(),\n            label: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", flexWrap: \"wrap\", alignItems: \"center\" }, isGroup ? /* @__PURE__ */ React.createElement(GroupIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(PersonIcon, { fontSize: \"small\" }), \"\\xA0\", humanizeEntity(\n              entity,\n              humanizeEntityRef(entity, { defaultKind: entity.kind })\n            ))\n          }\n        );\n      },\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"owner-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          onChange: (e) => {\n            setText(e.currentTarget.value);\n          },\n          variant: \"outlined\"\n        }\n      ),\n      ListboxProps: {\n        onScroll: (e) => {\n          const element = e.currentTarget;\n          const hasReachedEnd = Math.abs(\n            element.scrollHeight - element.clientHeight - element.scrollTop\n          ) < 1;\n          if (hasReachedEnd && (value == null ? void 0 : value.cursor)) {\n            handleFetch({ items: value.items, cursor: value.cursor });\n          }\n        },\n        \"data-testid\": \"owner-picker-listbox\"\n      }\n    }\n  )));\n};\n\nconst entityRouteRef = getOrCreateGlobalSingleton(\n  \"catalog:entity-route-ref\",\n  () => createRouteRef({\n    id: \"catalog:entity\",\n    params: [\"namespace\", \"kind\", \"name\"]\n  })\n);\nfunction entityRouteParams(entity) {\n  var _a, _b;\n  return {\n    kind: entity.kind.toLocaleLowerCase(\"en-US\"),\n    namespace: (_b = (_a = entity.metadata.namespace) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) != null ? _b : DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\n\nconst EntityRefLink = forwardRef(\n  (props, ref) => {\n    var _a;\n    const { entityRef, defaultKind, title, children, ...linkProps } = props;\n    const entityRoute = useRouteRef(entityRouteRef);\n    let kind;\n    let namespace;\n    let name;\n    if (typeof entityRef === \"string\") {\n      const parsed = parseEntityRef(entityRef);\n      kind = parsed.kind;\n      namespace = parsed.namespace;\n      name = parsed.name;\n    } else if (\"metadata\" in entityRef) {\n      kind = entityRef.kind;\n      namespace = entityRef.metadata.namespace;\n      name = entityRef.metadata.name;\n    } else {\n      kind = entityRef.kind;\n      namespace = entityRef.namespace;\n      name = entityRef.name;\n    }\n    kind = kind.toLocaleLowerCase(\"en-US\");\n    namespace = (_a = namespace == null ? void 0 : namespace.toLocaleLowerCase(\"en-US\")) != null ? _a : DEFAULT_NAMESPACE;\n    const routeParams = { kind, namespace, name };\n    const formattedEntityRefTitle = humanizeEntityRef(\n      { kind, namespace, name },\n      { defaultKind }\n    );\n    const link = /* @__PURE__ */ React.createElement(Link, { ...linkProps, ref, to: entityRoute(routeParams) }, children, !children && (title != null ? title : formattedEntityRefTitle));\n    return title ? /* @__PURE__ */ React.createElement(Tooltip, { title: formattedEntityRefTitle }, link) : link;\n  }\n);\n\nfunction FetchedEntityRefLinks(props) {\n  const { entityRefs, defaultKind, getTitle, ...linkProps } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities = new Array(),\n    loading,\n    error\n  } = useAsync(async () => {\n    const refs = entityRefs.reduce((acc, current) => {\n      if (typeof current === \"object\" && \"metadata\" in current) {\n        return acc;\n      }\n      return [...acc, parseEntityRef(current)];\n    }, new Array());\n    const pureEntities = entityRefs.filter(\n      (ref) => typeof ref === \"object\" && \"metadata\" in ref\n    );\n    return refs.length > 0 ? [\n      ...(await catalogApi.getEntities({\n        filter: refs.map((ref) => ({\n          kind: ref.kind,\n          \"metadata.namespace\": ref.namespace,\n          \"metadata.name\": ref.name\n        }))\n      })).items,\n      ...pureEntities\n    ] : pureEntities;\n  }, [entityRefs]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entities.map((r, i) => {\n    return /* @__PURE__ */ React.createElement(React.Fragment, { key: i }, i > 0 && \", \", /* @__PURE__ */ React.createElement(\n      EntityRefLink,\n      {\n        ...linkProps,\n        defaultKind,\n        entityRef: r,\n        title: getTitle(r)\n      }\n    ));\n  }));\n}\n\nfunction EntityRefLinks(props) {\n  const { entityRefs, defaultKind, fetchEntities, getTitle, ...linkProps } = props;\n  if (fetchEntities) {\n    return /* @__PURE__ */ React.createElement(\n      FetchedEntityRefLinks,\n      {\n        ...linkProps,\n        defaultKind,\n        entityRefs,\n        getTitle\n      }\n    );\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entityRefs.map((r, i) => {\n    return /* @__PURE__ */ React.createElement(React.Fragment, { key: i }, i > 0 && \", \", /* @__PURE__ */ React.createElement(\n      EntityRefLink,\n      {\n        ...linkProps,\n        defaultKind,\n        entityRef: r,\n        title: getTitle ? getTitle(r) : void 0\n      }\n    ));\n  }));\n}\n\nconst EntityCardActions = (props) => {\n  const entityRoute = useRouteRef(entityRouteRef);\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Show\",\n      title: \"Show details\",\n      to: entityRoute(getCompoundEntityRef(props.entity))\n    },\n    /* @__PURE__ */ React.createElement(InfoIcon, null)\n  );\n};\n\nconst EmailCardAction = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link,\n      \"aria-label\": \"Email\",\n      title: `Email ${props.email}`,\n      to: `mailto:${props.email}`\n    },\n    /* @__PURE__ */ React.createElement(EmailIcon, null)\n  );\n};\n\nconst GroupCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst UserCardActions = (props) => {\n  var _a;\n  const email = (_a = props.entity.spec.profile) == null ? void 0 : _a.email;\n  return email ? /* @__PURE__ */ React.createElement(EmailCardAction, { email }) : null;\n};\n\nconst useStyles$c = makeStyles(() => {\n  return {\n    popoverPaper: {\n      width: \"30em\"\n    },\n    descriptionTypography: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"-webkit-box\",\n      WebkitLineClamp: 2,\n      WebkitBoxOrient: \"vertical\"\n    }\n  };\n});\nconst maxTagChips = 4;\nconst EntityPeekAheadPopover = (props) => {\n  var _a, _b, _c;\n  const { entityRef, children, delayTime = 500 } = props;\n  const classes = useStyles$c();\n  const apiHolder = useApiHolder();\n  const popupState = usePopupState({\n    variant: \"popover\",\n    popupId: \"entity-peek-ahead\"\n  });\n  const [isHovered, setIsHovered] = useState(false);\n  const debouncedHandleMouseEnter = useMemo(\n    () => debounce(() => setIsHovered(true), delayTime),\n    [delayTime]\n  );\n  const [{ loading, error, value: entity }, load] = useAsyncFn(async () => {\n    const catalogApi = apiHolder.get(catalogApiRef);\n    if (catalogApi) {\n      const retrievedEntity = await catalogApi.getEntityByRef(entityRef);\n      if (!retrievedEntity) {\n        throw new Error(`${entityRef} not found`);\n      }\n      return retrievedEntity;\n    }\n    return void 0;\n  }, [apiHolder, entityRef]);\n  const handleOnMouseLeave = () => {\n    setIsHovered(false);\n    debouncedHandleMouseEnter.cancel();\n  };\n  useEffect(() => {\n    if (popupState.isOpen && !entity && !error && !loading) {\n      load();\n    }\n  }, [popupState.isOpen, load, entity, error, loading]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", onMouseEnter: debouncedHandleMouseEnter }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      \"data-testid\": \"trigger\",\n      ...bindHover(popupState)\n    },\n    children\n  )), isHovered && /* @__PURE__ */ React.createElement(\n    HoverPopover,\n    {\n      PaperProps: {\n        className: classes.popoverPaper\n      },\n      ...bindPopover(popupState),\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"center\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"center\"\n      },\n      onMouseLeave: handleOnMouseLeave\n    },\n    /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardContent, null, error && /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\" }, entity.metadata.namespace), /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"div\" }, entity.metadata.name), /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", gutterBottom: true }, entity.kind), entity.metadata.description && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        className: classes.descriptionTypography,\n        paragraph: true\n      },\n      entity.metadata.description\n    ), /* @__PURE__ */ React.createElement(Typography, null, (_a = entity.spec) == null ? void 0 : _a.type), /* @__PURE__ */ React.createElement(Box, { marginTop: \"0.5em\" }, (entity.metadata.tags || []).slice(0, maxTagChips).map((tag) => {\n      return /* @__PURE__ */ React.createElement(Chip, { key: tag, size: \"small\", label: tag });\n    }), ((_b = entity.metadata.tags) == null ? void 0 : _b.length) && ((_c = entity.metadata.tags) == null ? void 0 : _c.length) > maxTagChips && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Drill into the entity to see all of the tags.\" }, /* @__PURE__ */ React.createElement(Chip, { key: \"other-tags\", size: \"small\", label: \"...\" }))))), !error && entity && /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(React.Fragment, null, isUserEntity(entity) && /* @__PURE__ */ React.createElement(UserCardActions, { entity }), isGroupEntity(entity) && /* @__PURE__ */ React.createElement(GroupCardActions, { entity }), /* @__PURE__ */ React.createElement(EntityCardActions, { entity }))))\n  ));\n};\n\nconst useStyles$b = makeStyles(\n  (_theme) => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    input: {}\n  }),\n  {\n    name: \"CatalogReactEntitySearchBar\"\n  }\n);\nconst EntitySearchBar = () => {\n  var _a, _b;\n  const classes = useStyles$b();\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState((_b = (_a = filters.text) == null ? void 0 : _a.value) != null ? _b : \"\");\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : void 0\n      });\n    },\n    250,\n    [search, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(Toolbar, { className: classes.searchToolbar }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      \"aria-label\": \"search\",\n      id: \"input-with-icon-adornment\",\n      className: classes.input,\n      placeholder: \"Search\",\n      autoComplete: \"off\",\n      onChange: (event) => setSearch(event.target.value),\n      value: search,\n      startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(Search, null)),\n      endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"clear search\",\n          onClick: () => setSearch(\"\"),\n          edge: \"end\",\n          disabled: search.length === 0\n        },\n        /* @__PURE__ */ React.createElement(Clear, null)\n      ))\n    }\n  )));\n};\n\nconst columnFactories = Object.freeze({\n  createEntityRefColumn(options) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLink,\n          {\n            entityRef: entity,\n            defaultKind,\n            title: (_a = entity.metadata) == null ? void 0 : _a.title\n          }\n        );\n      }\n    };\n  },\n  createEntityRelationColumn(options) {\n    const { title, relation, defaultKind, filter: entityFilter } = options;\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n    function formatContent(entity) {\n      return getRelations(entity).map((r) => humanizeEntityRef(r, { defaultKind })).join(\", \");\n    }\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: getRelations(entity),\n            defaultKind\n          }\n        );\n      }\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Owner\",\n      relation: RELATION_OWNED_BY,\n      defaultKind: \"group\"\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Domain\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"domain\",\n      filter: {\n        kind: \"domain\"\n      }\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: \"System\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"system\",\n      filter: {\n        kind: \"system\"\n      }\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"metadata.description\",\n      render: (entity) => /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: entity.metadata.description,\n          placement: \"bottom-start\",\n          line: 2\n        }\n      )\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"spec.lifecycle\"\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"spec.type\"\n    };\n  }\n});\n\nconst systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"system\" }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\nconst componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"component\" }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\n\nconst useStyles$a = makeStyles((theme) => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"center\"\n  }\n}));\nconst EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = \"gridItem\",\n    columns,\n    tableOptions = {}\n  } = props;\n  const classes = useStyles$a();\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  if (variant === \"gridItem\") {\n    tableStyle.height = \"calc(100% - 10px)\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      columns,\n      title,\n      style: tableStyle,\n      emptyContent: emptyContent && /* @__PURE__ */ React.createElement(\"div\", { className: classes.empty }, emptyContent),\n      options: {\n        // TODO: Toolbar padding if off compared to other cards, should be: padding: 16px 24px;\n        search: false,\n        paging: false,\n        actionsColumnIndex: -1,\n        padding: \"dense\",\n        draggable: false,\n        ...tableOptions\n      },\n      data: entities\n    }\n  );\n};\nEntityTable.columns = columnFactories;\nEntityTable.systemEntityColumns = systemEntityColumns;\nEntityTable.componentEntityColumns = componentEntityColumns;\n\nconst useStyles$9 = makeStyles(\n  { input: {} },\n  { name: \"CatalogReactEntityTagPicker\" }\n);\nconst EntityTagPicker = (props) => {\n  const classes = useStyles$9();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Tags\",\n      name: \"tags\",\n      path: \"metadata.tags\",\n      Filter: EntityTagFilter,\n      showCounts: props.showCounts,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nconst EntityTypePicker = (props) => {\n  var _a;\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: \"error\"\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n  if (availableTypes.length === 0 || error)\n    return null;\n  const items = [\n    { value: \"all\", label: \"all\" },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: type\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      label: \"Type\",\n      items,\n      selected: (_a = items.length > 1 ? selectedTypes[0] : void 0) != null ? _a : \"all\",\n      onChange: (value) => setSelectedTypes(value === \"all\" ? [] : [String(value)])\n    }\n  ));\n};\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity\n  );\n  return /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"favorite\",\n      color: \"inherit\",\n      ...props,\n      onClick: () => toggleStarredEntity()\n    },\n    /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        title: isStarredEntity ? \"Remove from favorites\" : \"Add to favorites\"\n      },\n      isStarredEntity ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)\n    )\n  );\n};\n\nconst DEFAULT_ICON = WorkIcon;\nfunction getKind(kind, entityRef) {\n  if (kind) {\n    return kind.toLocaleLowerCase(\"en-US\");\n  }\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase(\"en-US\");\n    } catch {\n      return void 0;\n    }\n  }\n  return void 0;\n}\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\nfunction EntityKindIcon(props) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return /* @__PURE__ */ React.createElement(Icon, { ...otherProps });\n}\n\nconst useStyles$8 = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction useAncestry(root) {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n  return {\n    loading,\n    error,\n    nodes: (value == null ? void 0 : value.nodes) || [],\n    edges: (value == null ? void 0 : value.edges) || []\n  };\n}\nfunction CustomNode({ node }) {\n  const classes = useStyles$8();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = node.metadata.title || (node.kind && node.metadata.name && node.metadata.namespace ? humanizeEntityRef({\n    kind: node.kind,\n    name: node.metadata.name,\n    namespace: node.metadata.namespace || \"\"\n  }) : node.id);\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", { onClick, className: classes.clickable }, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classNames(\n        classes.node,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    EntityKindIcon,\n    {\n      kind: node.kind,\n      y: padding,\n      x: padding,\n      width: iconSize,\n      height: iconSize,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      )\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classNames(\n        classes.text,\n        node.root ? \"secondary\" : \"primary\"\n      ),\n      y: paddedHeight / 2,\n      x: paddedIconWidth + (width + padding * 2) / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    displayTitle\n  ));\n}\nfunction AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Ancestry\"), /* @__PURE__ */ React.createElement(DialogContentText, { gutterBottom: true }, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\" }, \"processors emitted\"), \" \", \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"), /* @__PURE__ */ React.createElement(Box, { mt: 4 }, /* @__PURE__ */ React.createElement(\n    DependencyGraph,\n    {\n      nodes,\n      edges,\n      renderNode: CustomNode,\n      direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n      zoom: \"enable-on-click\"\n    }\n  )));\n}\n\nconst useStyles$7 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  marginTop: {\n    marginTop: theme.spacing(2)\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled\n  },\n  monospace: {\n    fontFamily: \"monospace\"\n  }\n}));\nfunction ListItemText(props) {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(\n    ListItemText$1,\n    {\n      ...props,\n      primaryTypographyProps: { className: classes.monospace },\n      secondaryTypographyProps: { className: classes.monospace }\n    }\n  );\n}\nfunction ListSubheader(props) {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(ListSubheader$1, { className: classes.monospace }, props.children);\n}\nfunction Container(props) {\n  return /* @__PURE__ */ React.createElement(Box, { mt: 2 }, /* @__PURE__ */ React.createElement(Card, { variant: \"outlined\" }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", gutterBottom: true }, props.title, props.helpLink && /* @__PURE__ */ React.createElement(HelpIcon, { to: props.helpLink })), props.children)));\n}\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice(\"url:\".length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return void 0;\n}\nfunction KeyValueListItem(props) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n  return /* @__PURE__ */ React.createElement(ListItem, null, props.indent && /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: key,\n      secondary: link ? /* @__PURE__ */ React.createElement(Link, { to: link }, value) : value\n    }\n  ));\n}\nfunction HelpIcon(props) {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(Link, { to: props.to, className: classes.helpIcon }, /* @__PURE__ */ React.createElement(HelpOutlineIcon, { fontSize: \"inherit\" }));\n}\n\nconst useStyles$6 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction useColocated(entity) {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION];\n  const origin = (_b = entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_ORIGIN_LOCATION];\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...location ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }] : [],\n        ...origin ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }] : []\n      ]\n    });\n    return response.items;\n  }, [location, origin]);\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value == null ? void 0 : value.filter(\n      (colocated) => stringifyEntityRef(colocated) !== currentEntityRef\n    )\n  };\n}\nfunction EntityList(props) {\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, props.header && /* @__PURE__ */ React.createElement(KeyValueListItem, { key: \"header\", entry: props.header }), props.entities.map((entity) => /* @__PURE__ */ React.createElement(ListItem, { key: stringifyEntityRef(entity) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, { kind: entity.kind })), /* @__PURE__ */ React.createElement(ListItemText, { primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: entity }) }))));\n}\nfunction Contents$1(props) {\n  const { entity } = props;\n  const { loading, error, location, originLocation, colocatedEntities } = useColocated(entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  if (!location && !originLocation) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"Entity had no location information.\");\n  } else if (!(colocatedEntities == null ? void 0 : colocatedEntities.length)) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"info\" }, \"There were no other entities on this location.\");\n  }\n  if (location === originLocation) {\n    return /* @__PURE__ */ React.createElement(EntityList, { entities: colocatedEntities });\n  }\n  const atLocation = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION]) === location;\n    }\n  );\n  const atOrigin = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION]) === originLocation;\n    }\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, atLocation.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atLocation,\n      header: [\"At the same location\", location]\n    }\n  ), atOrigin.length > 0 && /* @__PURE__ */ React.createElement(\n    EntityList,\n    {\n      entities: atOrigin,\n      header: [\"At the same origin\", originLocation]\n    }\n  ));\n}\nfunction ColocatedPage(props) {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Colocated\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Contents$1, { entity: props.entity })));\n}\n\nfunction sortKeys(data) {\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => a[0] < b[0] ? -1 : 1)\n  );\n}\n\nfunction JsonPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Entity as JSON\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"), /* @__PURE__ */ React.createElement(DialogContentText, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: JSON.stringify(sortKeys(props.entity), void 0, 2),\n      language: \"json\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$5 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction OverviewPage(props) {\n  var _a, _b;\n  const classes = useStyles$5();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {}\n  } = props.entity;\n  const groupedRelations = groupBy(\n    sortBy(relations, (r) => r.targetRef),\n    \"type\"\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, { variant: \"h2\" }, \"Overview\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Container, { title: \"Identity\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"apiVersion\", secondary: apiVersion })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"kind\", secondary: kind })), (spec == null ? void 0 : spec.type) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"spec.type\", secondary: spec.type })), metadata.uid && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"uid\", secondary: metadata.uid })), metadata.etag && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, { primary: \"etag\", secondary: metadata.etag })))), /* @__PURE__ */ React.createElement(Container, { title: \"Metadata\" }, !!Object.keys(metadata.annotations || {}).length && /* @__PURE__ */ React.createElement(\n    List,\n    {\n      dense: true,\n      subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Annotations\", /* @__PURE__ */ React.createElement(HelpIcon, { to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\" }))\n    },\n    Object.entries(metadata.annotations).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))\n  ), !!Object.keys(metadata.labels || {}).length && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Labels\") }, Object.entries(metadata.labels).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, { key: entry[0], indent: true, entry }))), !!((_a = metadata.tags) == null ? void 0 : _a.length) && /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Tags\") }, metadata.tags.map((tag, index) => /* @__PURE__ */ React.createElement(ListItem, { key: `${tag}-${index}` }, /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, { primary: tag }))))), !!relations.length && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Relations\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n    },\n    Object.entries(groupedRelations).map(\n      ([type, groupRelations], index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(List, { dense: true, subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, type) }, groupRelations.map((group) => /* @__PURE__ */ React.createElement(ListItem, { key: group.targetRef }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, { entityRef: group.targetRef })), /* @__PURE__ */ React.createElement(\n        ListItemText,\n        {\n          primary: /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: group.targetRef })\n        }\n      )))))\n    )\n  ), !!((_b = status.items) == null ? void 0 : _b.length) && /* @__PURE__ */ React.createElement(\n    Container,\n    {\n      title: \"Status\",\n      helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n    },\n    status.items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, /* @__PURE__ */ React.createElement(Typography, null, item.level, \": \", item.type), /* @__PURE__ */ React.createElement(Box, { ml: 2 }, item.message)))\n  )));\n}\n\nfunction YamlPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText$1, { variant: \"h2\" }, \"Entity as YAML\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, \"This is the raw entity data as received from the catalog, on YAML form.\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, /* @__PURE__ */ React.createElement(\"div\", { style: { fontSize: \"75%\" }, \"data-testid\": \"code-snippet\" }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: YAML.stringify(sortKeys(props.entity)),\n      language: \"yaml\",\n      showCopyCodeButton: true\n    }\n  ))));\n}\n\nconst useStyles$4 = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles$4();\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      role: \"tabpanel\",\n      hidden: value !== index,\n      id: `vertical-tabpanel-${index}`,\n      \"aria-labelledby\": `vertical-tab-${index}`,\n      className: classes.tabContents,\n      ...other\n    },\n    value === index && /* @__PURE__ */ React.createElement(Box, { pl: 3, pr: 3 }, children)\n  );\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction InspectEntityDialog(props) {\n  const classes = useStyles$4();\n  const [activeTab, setActiveTab] = React.useState(0);\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n  if (!props.entity) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      fullWidth: true,\n      maxWidth: \"xl\",\n      open: props.open,\n      onClose: props.onClose,\n      \"aria-labelledby\": \"entity-inspector-dialog-title\",\n      PaperProps: { className: classes.fullHeightDialog }\n    },\n    /* @__PURE__ */ React.createElement(DialogTitle, { id: \"entity-inspector-dialog-title\" }, \"Entity Inspector\"),\n    /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\n      Tabs,\n      {\n        orientation: \"vertical\",\n        variant: \"scrollable\",\n        value: activeTab,\n        onChange: (_, newValue) => setActiveTab(newValue),\n        \"aria-label\": \"Inspector options\",\n        className: classes.tabs\n      },\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Overview\", ...a11yProps(0) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Ancestry\", ...a11yProps(1) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Colocated\", ...a11yProps(2) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw JSON\", ...a11yProps(3) }),\n      /* @__PURE__ */ React.createElement(Tab, { label: \"Raw YAML\", ...a11yProps(4) })\n    ), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 0 }, /* @__PURE__ */ React.createElement(OverviewPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 1 }, /* @__PURE__ */ React.createElement(AncestryPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 2 }, /* @__PURE__ */ React.createElement(ColocatedPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 3 }, /* @__PURE__ */ React.createElement(JsonPage, { entity: props.entity })), /* @__PURE__ */ React.createElement(TabPanel, { value: activeTab, index: 4 }, /* @__PURE__ */ React.createElement(YamlPage, { entity: props.entity })))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: props.onClose, color: \"primary\" }, \"Close\"))\n  );\n}\n\nfunction useUnregisterEntityDialogState(entity) {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === \"bootstrap:bootstrap\";\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi.getEntities({\n        filter: { [locationAnnotationFilter]: locationRef },\n        fields: [\n          \"kind\",\n          \"metadata.uid\",\n          \"metadata.name\",\n          \"metadata.namespace\"\n        ]\n      }).then((response) => response.items);\n    }\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location2, colocatedEntities2]) => ({\n        location: location2,\n        colocatedEntities: colocatedEntities2\n      })\n    );\n  }, [catalogApi, entity]);\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location: location2 } = prerequisites.value;\n      await catalogApi.removeLocationById(location2.id);\n    },\n    [catalogApi, prerequisites]\n  );\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid]\n  );\n  if (isBootstrap) {\n    return { type: \"bootstrap\", location: locationRef, deleteEntity };\n  }\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: \"loading\" };\n  } else if (error) {\n    return { type: \"error\", error };\n  }\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: \"only-delete\", deleteEntity };\n  }\n  return {\n    type: \"unregister\",\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity\n  };\n}\n\nconst useStyles$3 = makeStyles({\n  advancedButton: {\n    fontSize: \"0.7em\"\n  },\n  dialogActions: {\n    display: \"inline-block\"\n  }\n});\nconst Contents = ({\n  entity,\n  onConfirm,\n  onClose\n}) => {\n  var _a;\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles$3();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = (_a = configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if (\"unregisterLocation\" in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      if (\"deleteEntity\" in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  const DialogActionsPanel = () => /* @__PURE__ */ React.createElement(DialogActions, { className: classes.dialogActions }, /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\"));\n  if (state.type === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (state.type === \"error\") {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error: state.error });\n  }\n  if (state.type === \"bootstrap\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert$1, { severity: \"info\" }, 'You cannot unregister this entity, since it originates from a protected Backstage configuration (location \"', state.location, '\"). If you believe this is in error, please contact the ', appTitle, \" \", \"integrator.\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, !showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null)), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null))));\n  }\n  if (state.type === \"only-delete\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    ), /* @__PURE__ */ React.createElement(DialogActionsPanel, null));\n  }\n  if (state.type === \"unregister\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, state.colocatedEntities.map((e) => /* @__PURE__ */ React.createElement(\"li\", { key: `${e.kind}:${e.namespace}/${e.name}` }, /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: e })))), /* @__PURE__ */ React.createElement(DialogContentText, null, \"Located at the following location:\"), /* @__PURE__ */ React.createElement(DialogContentText, { component: \"ul\" }, /* @__PURE__ */ React.createElement(\"li\", null, state.location)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Box, { marginTop: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onUnregister\n      },\n      \"Unregister Location\"\n    ), !showDelete && /* @__PURE__ */ React.createElement(Box, { component: \"span\", marginLeft: 2 }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"text\",\n        size: \"small\",\n        color: \"primary\",\n        className: classes.advancedButton,\n        onClick: () => setShowDelete(true)\n      },\n      \"Advanced Options\"\n    ))), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { paddingTop: 4, paddingBottom: 4 }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"secondary\",\n        disabled: busy,\n        onClick: onDelete\n      },\n      \"Delete Entity\"\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(Alert$1, { severity: \"error\" }, \"Internal error: Unknown state\");\n};\nconst UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to unregister this entity?\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Contents, { entity, onConfirm, onClose })));\n};\n\nconst useStyles$2 = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: \"rgba(0, 0, 0, .11)\",\n      boxShadow: \"none\",\n      margin: theme.spacing(1, 0, 1, 0)\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: \"uppercase\",\n      fontSize: 12,\n      fontWeight: \"bold\"\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary\n    },\n    menuItem: {\n      minHeight: theme.spacing(6)\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1)\n    }\n  }),\n  {\n    name: \"CatalogReactUserListPicker\"\n  }\n);\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: \"Personal\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"starred\",\n          label: \"Starred\",\n          icon: Star\n        }\n      ]\n    },\n    {\n      name: orgName != null ? orgName : \"Company\",\n      items: [\n        {\n          id: \"all\",\n          label: \"All\"\n        }\n      ]\n    }\n  ];\n}\nconst UserListPicker = (props) => {\n  var _a;\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles$2();\n  const configApi = useApi(configApiRef);\n  const orgName = (_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Company\";\n  const {\n    filters,\n    updateFilters,\n    backendEntities,\n    queryParameters: { kind: kindParameter, user: userParameter },\n    loading: loadingBackendEntities\n  } = useEntityList();\n  const userAndGroupFilterIds = [\"starred\", \"all\"];\n  const filterGroups = getFilterGroups(orgName).map((filterGroup) => ({\n    ...filterGroup,\n    items: filterGroup.items.filter(\n      ({ id }) => (\n        // TODO: avoid hardcoding kinds here\n        [\"group\", \"user\"].some((kind) => kind === kindParameter) ? userAndGroupFilterIds.includes(id) : !availableFilters || availableFilters.includes(id)\n      )\n    )\n  })).filter(({ items }) => !!items.length);\n  const { isStarredEntity } = useStarredEntities();\n  const { isOwnedEntity, loading: loadingEntityOwnership } = useEntityOwnership();\n  const loading = loadingBackendEntities || loadingEntityOwnership;\n  const ownedFilter = useMemo(\n    () => new UserListFilter(\"owned\", isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity]\n  );\n  const starredFilter = useMemo(\n    () => new UserListFilter(\"starred\", isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity]\n  );\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter]\n  );\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter != null ? queryParamUserFilter : initialFilter\n  );\n  const entitiesWithoutUserFilter = useMemo(\n    () => backendEntities.filter(\n      reduceEntityFilters(\n        compact(Object.values({ ...filters, user: void 0 }))\n      )\n    ),\n    [filters, backendEntities]\n  );\n  const filterCounts = useMemo(\n    () => ({\n      all: entitiesWithoutUserFilter.length,\n      starred: entitiesWithoutUserFilter.filter(\n        (entity) => starredFilter.filterEntity(entity)\n      ).length,\n      owned: entitiesWithoutUserFilter.filter(\n        (entity) => ownedFilter.filterEntity(entity)\n      ).length\n    }),\n    [entitiesWithoutUserFilter, starredFilter, ownedFilter]\n  );\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter);\n    }\n  }, [queryParamUserFilter]);\n  useEffect(() => {\n    if (!loading && !!selectedUserFilter && selectedUserFilter !== \"all\" && filterCounts[selectedUserFilter] === 0) {\n      setSelectedUserFilter(\"all\");\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n  useEffect(() => {\n    updateFilters({\n      user: selectedUserFilter ? new UserListFilter(\n        selectedUserFilter,\n        isOwnedEntity,\n        isStarredEntity\n      ) : void 0\n    });\n  }, [selectedUserFilter, isOwnedEntity, isStarredEntity, updateFilters]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.root }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, { key: group.name }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"subtitle2\",\n      component: \"span\",\n      className: classes.title\n    },\n    group.name\n  ), /* @__PURE__ */ React.createElement(Card, { className: classes.groupWrapper }, /* @__PURE__ */ React.createElement(List, { disablePadding: true, dense: true, role: \"menu\", \"aria-label\": group.name }, group.items.map((item) => {\n    var _a2, _b;\n    return /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        role: \"none presentation\",\n        key: item.id,\n        button: true,\n        divider: true,\n        onClick: () => setSelectedUserFilter(item.id),\n        selected: item.id === ((_a2 = filters.user) == null ? void 0 : _a2.value),\n        className: classes.menuItem,\n        disabled: filterCounts[item.id] === 0,\n        \"data-testid\": `user-picker-${item.id}`,\n        tabIndex: 0,\n        ContainerProps: { role: \"menuitem\" }\n      },\n      item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, { className: classes.listIcon }, /* @__PURE__ */ React.createElement(item.icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText$1, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, item.label, \" \")),\n      /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, (_b = filterCounts[item.id]) != null ? _b : \"-\")\n    );\n  }))))));\n};\n\nconst useStyles$1 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityProcessingStatusPickerPicker\"\n  }\n);\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst EntityProcessingStatusPicker = () => {\n  const classes = useStyles$1();\n  const { updateFilters } = useEntityList();\n  const [selectedAdvancedItems, setSelectedAdvancedItems] = useState(\n    []\n  );\n  function orphanChange(value) {\n    updateFilters({\n      orphan: value ? new EntityOrphanFilter(value) : void 0\n    });\n  }\n  function errorChange(value) {\n    updateFilters({\n      error: value ? new EntityErrorFilter(value) : void 0\n    });\n  }\n  const availableAdvancedItems = [\"Is Orphan\", \"Has Error\"];\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"button\", component: \"label\" }, \"Processing Status\", /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      multiple: true,\n      disableCloseOnSelect: true,\n      options: availableAdvancedItems,\n      value: selectedAdvancedItems,\n      onChange: (_, value) => {\n        setSelectedAdvancedItems(value);\n        orphanChange(value.includes(\"Is Orphan\"));\n        errorChange(value.includes(\"Has Error\"));\n      },\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          onClick: (event) => event.preventDefault(),\n          label: option\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"processing-status-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          className: classes.input,\n          variant: \"outlined\"\n        }\n      )\n    }\n  )));\n};\n\nconst useStyles = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityNamespacePicker\"\n  }\n);\nconst EntityNamespacePicker = () => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    EntityAutocompletePicker,\n    {\n      label: \"Namespace\",\n      name: \"namespace\",\n      path: \"metadata.namespace\",\n      Filter: EntityNamespaceFilter,\n      InputProps: { className: classes.input }\n    }\n  );\n};\n\nfunction MockEntityListContextProvider(props) {\n  var _a;\n  const { children, value } = props;\n  const [filters, setFilters] = useState((_a = value == null ? void 0 : value.filters) != null ? _a : {});\n  const updateFilters = useCallback(\n    (update) => {\n      setFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {}\n    }),\n    []\n  );\n  const resolvedValue = useMemo(\n    () => {\n      var _a2, _b, _c, _d, _e;\n      return {\n        entities: (_a2 = value == null ? void 0 : value.entities) != null ? _a2 : defaultValues.entities,\n        backendEntities: (_b = value == null ? void 0 : value.backendEntities) != null ? _b : defaultValues.backendEntities,\n        updateFilters: (_c = value == null ? void 0 : value.updateFilters) != null ? _c : updateFilters,\n        filters,\n        loading: (_d = value == null ? void 0 : value.loading) != null ? _d : false,\n        queryParameters: (_e = value == null ? void 0 : value.queryParameters) != null ? _e : defaultValues.queryParameters,\n        error: value == null ? void 0 : value.error\n      };\n    },\n    [value, defaultValues, filters, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, { value: resolvedValue }, children);\n}\n\nexport { CatalogFilterLayout, EntityErrorFilter, EntityKindFilter, EntityKindPicker, EntityLifecycleFilter, EntityLifecyclePicker, EntityListContext, EntityListProvider, EntityNamespaceFilter, EntityNamespacePicker, EntityOrphanFilter, EntityOwnerFilter, EntityOwnerPicker, EntityPeekAheadPopover, EntityProcessingStatusPicker, EntityRefLink, EntityRefLinks, EntitySearchBar, EntityTable, EntityTagFilter, EntityTagPicker, EntityTextFilter, EntityTypeFilter, EntityTypePicker, FavoriteEntity, InspectEntityDialog, MockEntityListContextProvider, MockStarredEntitiesApi, UnregisterEntityDialog, UserListFilter, UserListPicker, catalogApiRef, columnFactories, entityRouteParams, entityRouteRef, getEntitySourceLocation, humanizeEntityRef, starredEntitiesApiRef, useEntityList, useEntityOwnership, useEntityTypeFilter, useRelatedEntities, useStarredEntities, useStarredEntity };\n//# sourceMappingURL=index.esm.js.map\n","import ObservableImpl from 'zen-observable';\nimport { stringifyEntityRef, RELATION_PART_OF, RELATION_OWNED_BY, getEntitySourceLocation, ANNOTATION_EDIT_URL, DEFAULT_NAMESPACE, ANNOTATION_LOCATION, ANNOTATION_VIEW_URL } from '@backstage/catalog-model';\nimport { isArray, isString, capitalize } from 'lodash';\nimport { Link, MarkdownContent, HeaderIconLinkRow, OverflowTooltip, WarningPanel, CodeSnippet, Table, Page, Header, Progress, RoutedTabs, Content, HeaderLabel, ResponseErrorPanel, InfoCard } from '@backstage/core-components';\nimport { createExternalRouteRef, createRouteRef, useElementFilter, useApp, useApi, alertApiRef, errorApiRef, useRouteRef, attachComponentData, useRouteRefParams, useApiHolder, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, storageApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef, ScmIntegrationIcon } from '@backstage/integration-react';\nimport { getEntityRelations, EntityRefLinks, useEntity, catalogApiRef, getEntitySourceLocation as getEntitySourceLocation$1, useEntityList, EntityKindFilter, EntityRefLink, humanizeEntityRef, useStarredEntities, entityRouteRef, useAsyncEntity, UnregisterEntityDialog, InspectEntityDialog, FavoriteEntity, CatalogFilterLayout, starredEntitiesApiRef } from '@backstage/plugin-catalog-react';\nimport { isTemplateEntityV1beta3 } from '@backstage/plugin-scaffolder-common';\nimport { makeStyles, Typography, Grid, Box, useMediaQuery, ImageList, ImageListItem, Chip, Card, CardHeader, IconButton, Divider, CardContent, createStyles, Select, InputBase, MenuItem, ListItemIcon, ListItemText, Tooltip, Popover, MenuList, Dialog, DialogTitle, DialogActions, Button } from '@material-ui/core';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport DocsIcon from '@material-ui/icons/Description';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport pluralize from 'pluralize';\nimport useAsync from 'react-use/lib/useAsync';\nimport { withStyles, makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { Alert } from '@material-ui/lab';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react/alpha';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common/alpha';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { assertError } from '@backstage/errors';\nimport { ENTITY_STATUS_CATALOG_PROCESSING_TYPE, CatalogClient } from '@backstage/catalog-client';\nimport { createSearchResultListItemExtension } from '@backstage/plugin-search-react';\n\nasync function performMigrationToTheNewBucket({\n  storageApi\n}) {\n  var _a;\n  const source = storageApi.forBucket(\"settings\");\n  const target = storageApi.forBucket(\"starredEntities\");\n  const oldStarredEntities = source.snapshot(\"starredEntities\").value;\n  if (!isArray(oldStarredEntities)) {\n    return;\n  }\n  const targetEntities = new Set(\n    (_a = target.snapshot(\"entityRefs\").value) != null ? _a : []\n  );\n  oldStarredEntities.filter(isString).map((old) => old.split(\":\")).filter((split) => split.length === 4 && split[0] === \"entity\").map(\n    ([_, kind, namespace, name]) => stringifyEntityRef({ kind, namespace, name })\n  ).forEach((e) => targetEntities.add(e));\n  await target.set(\"entityRefs\", Array.from(targetEntities));\n  await source.remove(\"starredEntities\");\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass DefaultStarredEntitiesApi {\n  constructor(opts) {\n    __publicField(this, \"settingsStore\");\n    __publicField(this, \"starredEntities\");\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observable\", new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    }));\n    var _a;\n    performMigrationToTheNewBucket(opts).then();\n    this.settingsStore = opts.storageApi.forBucket(\"starredEntities\");\n    this.starredEntities = new Set(\n      (_a = this.settingsStore.snapshot(\"entityRefs\").value) != null ? _a : []\n    );\n    this.settingsStore.observe$(\"entityRefs\").subscribe({\n      next: (next) => {\n        var _a2;\n        this.starredEntities = new Set((_a2 = next.value) != null ? _a2 : []);\n        this.notifyChanges();\n      }\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n    await this.settingsStore.set(\n      \"entityRefs\",\n      Array.from(this.starredEntities)\n    );\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n  notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n\nconst createComponentRouteRef = createExternalRouteRef({\n  id: \"create-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst createFromTemplateRouteRef = createExternalRouteRef({\n  id: \"create-from-template\",\n  optional: true,\n  params: [\"namespace\", \"templateName\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"catalog\"\n});\n\nconst useStyles$7 = makeStyles((theme) => ({\n  value: {\n    fontWeight: \"bold\",\n    overflow: \"hidden\",\n    lineHeight: \"24px\",\n    wordBreak: \"break-word\"\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontSize: \"10px\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }\n}));\nfunction AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles$7();\n  const childElements = useElementFilter(children, (c) => c.getElements());\n  const content = childElements.length > 0 ? childElements : /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", className: classes.value }, value || `unknown`);\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, ...gridSizes }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.label }, label), content);\n}\n\nconst useStyles$6 = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nfunction IconLink(props) {\n  const { href, text, Icon } = props;\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(Box, { display: \"flex\" }, /* @__PURE__ */ React.createElement(Box, { mr: 1, className: classes.svgIcon }, /* @__PURE__ */ React.createElement(Typography, { component: \"div\" }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Box, { flexGrow: \"1\" }, /* @__PURE__ */ React.createElement(Link, { to: href, target: \"_blank\", rel: \"noopener\" }, text || href)));\n}\n\nconst colDefaults = {\n  xs: 1,\n  sm: 1,\n  md: 1,\n  lg: 2,\n  xl: 3\n};\nfunction useDynamicColumns(cols) {\n  var _a, _b;\n  const matches = [\n    useMediaQuery((theme) => theme.breakpoints.up(\"xl\")) ? \"xl\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"lg\")) ? \"lg\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"md\")) ? \"md\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"sm\")) ? \"sm\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"xs\")) ? \"xs\" : null\n  ];\n  let numOfCols = 1;\n  if (typeof cols === \"number\") {\n    numOfCols = cols;\n  } else {\n    const breakpoint = (_a = matches.find((k) => k !== null)) != null ? _a : \"xs\";\n    numOfCols = (_b = cols == null ? void 0 : cols[breakpoint]) != null ? _b : colDefaults[breakpoint];\n  }\n  return numOfCols;\n}\n\nfunction LinksGridList(props) {\n  const { items, cols = void 0 } = props;\n  const numOfCols = useDynamicColumns(cols);\n  return /* @__PURE__ */ React.createElement(ImageList, { rowHeight: \"auto\", cols: numOfCols }, items.map(({ text, href, Icon }, i) => /* @__PURE__ */ React.createElement(ImageListItem, { key: i }, /* @__PURE__ */ React.createElement(IconLink, { href, text: text != null ? text : href, Icon }))));\n}\n\nconst useStyles$5 = makeStyles({\n  description: {\n    wordBreak: \"break-word\"\n  }\n});\nfunction getLocationTargetHref(target, type, entitySourceLocation) {\n  if (type === \"url\" || target.includes(\"://\")) {\n    return target;\n  }\n  const srcLocationUrl = entitySourceLocation.type === \"file\" ? `file://${entitySourceLocation.target}` : entitySourceLocation.target;\n  if (type === \"file\" || entitySourceLocation.type === \"file\") {\n    return new URL(target, srcLocationUrl).href;\n  }\n  return srcLocationUrl;\n}\nfunction AboutContent(props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const { entity } = props;\n  const classes = useStyles$5();\n  const isSystem = entity.kind.toLocaleLowerCase(\"en-US\") === \"system\";\n  const isResource = entity.kind.toLocaleLowerCase(\"en-US\") === \"resource\";\n  const isComponent = entity.kind.toLocaleLowerCase(\"en-US\") === \"component\";\n  const isAPI = entity.kind.toLocaleLowerCase(\"en-US\") === \"api\";\n  const isTemplate = entity.kind.toLocaleLowerCase(\"en-US\") === \"template\";\n  const isLocation = entity.kind.toLocaleLowerCase(\"en-US\") === \"location\";\n  const isGroup = entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n  const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"system\"\n  });\n  const partOfComponentRelations = getEntityRelations(\n    entity,\n    RELATION_PART_OF,\n    {\n      kind: \"component\"\n    }\n  );\n  const partOfDomainRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"domain\"\n  });\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  let entitySourceLocation;\n  try {\n    entitySourceLocation = getEntitySourceLocation(entity);\n  } catch (e) {\n    entitySourceLocation = void 0;\n  }\n  return /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(AboutField, { label: \"Description\", gridSizes: { xs: 12 } }, /* @__PURE__ */ React.createElement(\n    MarkdownContent,\n    {\n      className: classes.description,\n      content: ((_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.description) || \"No description\"\n    }\n  )), /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Owner\",\n      value: \"No Owner\",\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    },\n    ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, { entityRefs: ownedByRelations, defaultKind: \"group\" })\n  ), (isSystem || partOfDomainRelations.length > 0) && /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Domain\",\n      value: \"No Domain\",\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    },\n    partOfDomainRelations.length > 0 && /* @__PURE__ */ React.createElement(\n      EntityRefLinks,\n      {\n        entityRefs: partOfDomainRelations,\n        defaultKind: \"domain\"\n      }\n    )\n  ), (isAPI || isComponent || isResource || partOfSystemRelations.length > 0) && /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"System\",\n      value: \"No System\",\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    },\n    partOfSystemRelations.length > 0 && /* @__PURE__ */ React.createElement(\n      EntityRefLinks,\n      {\n        entityRefs: partOfSystemRelations,\n        defaultKind: \"system\"\n      }\n    )\n  ), isComponent && partOfComponentRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Parent Component\",\n      value: \"No Parent Component\",\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    },\n    /* @__PURE__ */ React.createElement(\n      EntityRefLinks,\n      {\n        entityRefs: partOfComponentRelations,\n        defaultKind: \"component\"\n      }\n    )\n  ), (isAPI || isComponent || isResource || isTemplate || isGroup || isLocation || typeof ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.type) === \"string\") && /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Type\",\n      value: (_c = entity == null ? void 0 : entity.spec) == null ? void 0 : _c.type,\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    }\n  ), (isAPI || isComponent || typeof ((_d = entity == null ? void 0 : entity.spec) == null ? void 0 : _d.lifecycle) === \"string\") && /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Lifecycle\",\n      value: (_e = entity == null ? void 0 : entity.spec) == null ? void 0 : _e.lifecycle,\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    }\n  ), /* @__PURE__ */ React.createElement(\n    AboutField,\n    {\n      label: \"Tags\",\n      value: \"No Tags\",\n      gridSizes: { xs: 12, sm: 6, lg: 4 }\n    },\n    (((_f = entity == null ? void 0 : entity.metadata) == null ? void 0 : _f.tags) || []).map((t) => /* @__PURE__ */ React.createElement(Chip, { key: t, size: \"small\", label: t }))\n  ), isLocation && (((_g = entity == null ? void 0 : entity.spec) == null ? void 0 : _g.targets) || ((_h = entity == null ? void 0 : entity.spec) == null ? void 0 : _h.target)) && /* @__PURE__ */ React.createElement(AboutField, { label: \"Targets\", gridSizes: { xs: 12 } }, /* @__PURE__ */ React.createElement(\n    LinksGridList,\n    {\n      cols: 1,\n      items: (entity.spec.targets || [entity.spec.target]).map((target) => target).map((target) => {\n        var _a2;\n        return {\n          text: target,\n          href: getLocationTargetHref(\n            target,\n            ((_a2 = entity == null ? void 0 : entity.spec) == null ? void 0 : _a2.type) || \"unknown\",\n            entitySourceLocation\n          )\n        };\n      })\n    }\n  )));\n}\n\nconst useStyles$4 = makeStyles({\n  gridItemCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"calc(100% - 10px)\",\n    // for pages without content header\n    marginBottom: \"10px\"\n  },\n  fullHeightCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\"\n  },\n  gridItemCardContent: {\n    flex: 1\n  },\n  fullHeightCardContent: {\n    flex: 1\n  }\n});\nfunction AboutCard(props) {\n  var _a, _b, _c, _d;\n  const { variant } = props;\n  const app = useApp();\n  const classes = useStyles$4();\n  const { entity } = useEntity();\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const errorApi = useApi(errorApiRef);\n  const viewTechdocLink = useRouteRef(viewTechDocRouteRef);\n  const templateRoute = useRouteRef(createFromTemplateRouteRef);\n  const entitySourceLocation = getEntitySourceLocation$1(\n    entity,\n    scmIntegrationsApi\n  );\n  const entityMetadataEditUrl = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const viewInSource = {\n    label: \"View Source\",\n    disabled: !entitySourceLocation,\n    icon: /* @__PURE__ */ React.createElement(ScmIntegrationIcon, { type: entitySourceLocation == null ? void 0 : entitySourceLocation.integrationType }),\n    href: entitySourceLocation == null ? void 0 : entitySourceLocation.locationTargetUrl\n  };\n  const viewInTechDocs = {\n    label: \"View TechDocs\",\n    disabled: !((_b = entity.metadata.annotations) == null ? void 0 : _b[\"backstage.io/techdocs-ref\"]) || !viewTechdocLink,\n    icon: /* @__PURE__ */ React.createElement(DocsIcon, null),\n    href: viewTechdocLink && viewTechdocLink({\n      namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n      kind: entity.kind,\n      name: entity.metadata.name\n    })\n  };\n  const subHeaderLinks = [viewInSource, viewInTechDocs];\n  if (isTemplateEntityV1beta3(entity)) {\n    const Icon = (_c = app.getSystemIcon(\"scaffolder\")) != null ? _c : CreateComponentIcon;\n    const launchTemplate = {\n      label: \"Launch Template\",\n      icon: /* @__PURE__ */ React.createElement(Icon, null),\n      disabled: !templateRoute,\n      href: templateRoute && templateRoute({\n        templateName: entity.metadata.name,\n        namespace: entity.metadata.namespace || DEFAULT_NAMESPACE\n      })\n    };\n    subHeaderLinks.push(launchTemplate);\n  }\n  let cardClass = \"\";\n  if (variant === \"gridItem\") {\n    cardClass = classes.gridItemCard;\n  } else if (variant === \"fullHeight\") {\n    cardClass = classes.fullHeightCard;\n  }\n  let cardContentClass = \"\";\n  if (variant === \"gridItem\") {\n    cardContentClass = classes.gridItemCardContent;\n  } else if (variant === \"fullHeight\") {\n    cardContentClass = classes.fullHeightCardContent;\n  }\n  const entityLocation = (_d = entity.metadata.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const refreshEntity = useCallback(async () => {\n    try {\n      await catalogApi.refreshEntity(stringifyEntityRef(entity));\n      alertApi.post({\n        message: \"Refresh scheduled\",\n        severity: \"info\",\n        display: \"transient\"\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  }, [catalogApi, alertApi, errorApi, entity]);\n  return /* @__PURE__ */ React.createElement(Card, { className: cardClass }, /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      title: \"About\",\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"Refresh\",\n          title: \"Schedule entity refresh\",\n          onClick: refreshEntity\n        },\n        /* @__PURE__ */ React.createElement(CachedIcon, null)\n      ), /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          component: Link,\n          \"aria-label\": \"Edit\",\n          disabled: !entityMetadataEditUrl,\n          title: \"Edit Metadata\",\n          to: entityMetadataEditUrl != null ? entityMetadataEditUrl : \"#\"\n        },\n        /* @__PURE__ */ React.createElement(EditIcon, null)\n      )),\n      subheader: /* @__PURE__ */ React.createElement(HeaderIconLinkRow, { links: subHeaderLinks })\n    }\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, { className: cardContentClass }, /* @__PURE__ */ React.createElement(AboutContent, { entity })));\n}\n\nfunction useAllKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    error,\n    loading,\n    value: allKinds\n  } = useAsync(async () => {\n    const items = await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a;\n      return ((_a = response.facets.kind) == null ? void 0 : _a.map((f) => f.value).sort()) || [];\n    });\n    return items;\n  }, [catalogApi]);\n  return { loading, error, allKinds: allKinds != null ? allKinds : [] };\n}\nfunction filterKinds(allKinds, allowedKinds, forcedKinds) {\n  let availableKinds = allKinds;\n  if (allowedKinds) {\n    availableKinds = availableKinds.filter(\n      (k) => allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      )\n    );\n  }\n  if (forcedKinds && !allKinds.some(\n    (a) => a.toLocaleLowerCase(\"en-US\") === forcedKinds.toLocaleLowerCase(\"en-US\")\n  )) {\n    availableKinds = availableKinds.concat([forcedKinds]);\n  }\n  const kindsMap = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return kindsMap;\n}\n\nconst useStyles$3 = makeStyles(\n  (theme) => createStyles({\n    root: {\n      ...theme.typography.h4\n    }\n  })\n);\nfunction CatalogKindHeader(props) {\n  var _a, _b;\n  const { initialFilter = \"component\", allowedKinds } = props;\n  const classes = useStyles$3();\n  const { allKinds } = useAllKinds();\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = queryParamKind != null ? queryParamKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : initialFilter\n  );\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  const options = filterKinds(allKinds, allowedKinds, selectedKind);\n  return /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      value: selectedKind.toLocaleLowerCase(\"en-US\"),\n      onChange: (e) => setSelectedKind(e.target.value),\n      classes\n    },\n    Object.keys(options).map((kind) => /* @__PURE__ */ React.createElement(MenuItem, { value: kind, key: kind }, `${pluralize(options[kind])}`))\n  );\n}\n\nconst columnFactories = Object.freeze({\n  createNameColumn(options) {\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind: options == null ? void 0 : options.defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      field: \"resolved.name\",\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(\n          EntityRefLink,\n          {\n            entityRef: entity,\n            defaultKind: (options == null ? void 0 : options.defaultKind) || \"Component\",\n            title: (_a = entity.metadata) == null ? void 0 : _a.title\n          }\n        );\n      }\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: \"System\",\n      field: \"resolved.partOfSystemRelationTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.partOfSystemRelations,\n          defaultKind: \"system\"\n        }\n      )\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    };\n  },\n  createSpecTargetsColumn() {\n    return {\n      title: \"Targets\",\n      field: \"entity.spec.targets\",\n      render: ({ entity }) => {\n        var _a, _b;\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, (((_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.targets) || ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.target)) && /* @__PURE__ */ React.createElement(\n          OverflowTooltip,\n          {\n            text: (entity.spec.targets || [entity.spec.target]).join(\", \"),\n            placement: \"bottom-start\"\n          }\n        ));\n      }\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\",\n      hidden: true,\n      width: \"auto\"\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"entity.spec.lifecycle\"\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"entity.metadata.description\",\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: entity.metadata.description,\n          placement: \"bottom-start\"\n        }\n      ),\n      width: \"auto\"\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: \"Tags\",\n      field: \"entity.metadata.tags\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(React.Fragment, null, entity.metadata.tags && entity.metadata.tags.map((t) => /* @__PURE__ */ React.createElement(\n        Chip,\n        {\n          key: t,\n          label: t,\n          size: \"small\",\n          variant: \"outlined\",\n          style: { marginBottom: \"0px\" }\n        }\n      ))),\n      width: \"auto\"\n    };\n  },\n  createTitleColumn(options) {\n    return {\n      title: \"Title\",\n      field: \"entity.metadata.title\",\n      hidden: options == null ? void 0 : options.hidden,\n      searchable: true\n    };\n  },\n  createLabelColumn(key, options) {\n    return {\n      title: (options == null ? void 0 : options.title) || \"Label\",\n      field: \"entity.metadata.labels\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => {\n        var _a;\n        const labels = (_a = entity.metadata) == null ? void 0 : _a.labels;\n        const specifiedLabelValue = labels && labels[key] || (options == null ? void 0 : options.defaultValue);\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, specifiedLabelValue && /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            key: specifiedLabelValue,\n            label: specifiedLabelValue,\n            size: \"small\",\n            variant: \"outlined\"\n          }\n        ));\n      },\n      width: \"auto\"\n    };\n  },\n  createNamespaceColumn() {\n    return {\n      title: \"Namespace\",\n      field: \"entity.metadata.namespace\",\n      width: \"auto\"\n    };\n  }\n});\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst refCompare = (a, b) => {\n  const toRef = (entity) => entity.metadata.title || humanizeEntityRef(entity, {\n    defaultKind: \"Component\"\n  });\n  return toRef(a).localeCompare(toRef(b));\n};\nconst CatalogTable = (props) => {\n  var _a, _b, _c, _d, _e;\n  const { columns, actions, tableOptions, subtitle, emptyContent } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n  const defaultColumns = useMemo(() => {\n    var _a2;\n    return [\n      columnFactories.createTitleColumn({ hidden: true }),\n      columnFactories.createNameColumn({ defaultKind: (_a2 = filters.kind) == null ? void 0 : _a2.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn()\n    ];\n    function createEntitySpecificColumns() {\n      var _a3;\n      const baseColumns = [\n        columnFactories.createSystemColumn(),\n        columnFactories.createOwnerColumn(),\n        columnFactories.createSpecTypeColumn(),\n        columnFactories.createSpecLifecycleColumn()\n      ];\n      switch ((_a3 = filters.kind) == null ? void 0 : _a3.value) {\n        case \"user\":\n          return [];\n        case \"domain\":\n        case \"system\":\n          return [columnFactories.createOwnerColumn()];\n        case \"group\":\n        case \"template\":\n          return [columnFactories.createSpecTypeColumn()];\n        case \"location\":\n          return [\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecTargetsColumn()\n          ];\n        default:\n          return entities.every(\n            (entity) => entity.metadata.namespace === \"default\"\n          ) ? baseColumns : [...baseColumns, columnFactories.createNamespaceColumn()];\n      }\n    }\n  }, [(_a = filters.kind) == null ? void 0 : _a.value, entities]);\n  const showTypeColumn = filters.type === void 0;\n  const titlePreamble = capitalize((_c = (_b = filters.user) == null ? void 0 : _b.value) != null ? _c : \"all\");\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not fetch catalog entities.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    ));\n  }\n  const defaultActions = [\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_VIEW_URL];\n      const title = \"View\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"srOnly\" }, title), /* @__PURE__ */ React.createElement(OpenInNew, { fontSize: \"small\" })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_EDIT_URL];\n      const title = \"Edit\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"srOnly\" }, title), /* @__PURE__ */ React.createElement(EditIcon, { fontSize: \"small\" })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      const title = isStarred ? \"Remove from favorites\" : \"Add to favorites\";\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"srOnly\" }, title), isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)),\n        tooltip: title,\n        onClick: () => toggleStarredEntity(entity)\n      };\n    }\n  ];\n  const rows = entities.sort(refCompare).map((entity) => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: \"system\"\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        name: humanizeEntityRef(entity, {\n          defaultKind: \"Component\"\n        }),\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \"),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations.map(\n          (r) => humanizeEntityRef(r, {\n            defaultKind: \"system\"\n          })\n        ).join(\", \"),\n        partOfSystemRelations\n      }\n    };\n  });\n  const typeColumn = (columns || defaultColumns).find((c) => c.title === \"Type\");\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n  const currentKind = ((_d = filters.kind) == null ? void 0 : _d.value) || \"\";\n  const currentType = ((_e = filters.type) == null ? void 0 : _e.value) || \"\";\n  const titleDisplay = [titlePreamble, currentType, pluralize(currentKind)].filter((s) => s).join(\" \");\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      columns: columns || defaultColumns,\n      options: {\n        paging: showPagination,\n        pageSize: 20,\n        actionsColumnIndex: -1,\n        loadingType: \"linear\",\n        showEmptyDataSourceMessage: !loading,\n        padding: \"dense\",\n        pageSizeOptions: [20, 50, 100],\n        ...tableOptions\n      },\n      title: `${titleDisplay} (${entities.length})`,\n      data: rows,\n      actions: actions || defaultActions,\n      subtitle,\n      emptyContent\n    }\n  );\n};\nCatalogTable.columns = columnFactories;\n\nfunction UnregisterEntity(props) {\n  var _a;\n  const {\n    unregisterEntityOptions,\n    isUnregisterAllowed,\n    onUnregisterEntity,\n    onClose\n  } = props;\n  const isBoolean = typeof (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"boolean\";\n  const isDisabled = (_a = !isUnregisterAllowed || (isBoolean ? !!(unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) : (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"disable\")) != null ? _a : false;\n  let unregisterButton = /* @__PURE__ */ React.createElement(React.Fragment, null);\n  if ((unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) !== \"hidden\") {\n    unregisterButton = /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onUnregisterEntity();\n        },\n        disabled: isDisabled\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CancelIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Unregister entity\" })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, unregisterButton);\n}\n\nconst useStyles$2 = makeStyles$1(\n  (theme) => {\n    return {\n      button: {\n        color: theme.page.fontColor\n      }\n    };\n  },\n  { name: \"PluginCatalogEntityContextMenu\" }\n);\nfunction EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles$2();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission\n  );\n  const isAllowed = unregisterPermission.allowed;\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  const alertApi = useApi(alertApiRef);\n  const copyToClipboard = useCallback(() => {\n    window.navigator.clipboard.writeText(window.location.toString()).then(\n      () => alertApi.post({\n        message: \"Copied!\",\n        severity: \"info\",\n        display: \"transient\"\n      })\n    );\n  }, [alertApi]);\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map((item) => /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        key: item.title,\n        onClick: () => {\n          onClose();\n          item.onClick();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(item.Icon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: item.title })\n    )),\n    /* @__PURE__ */ React.createElement(Divider, { key: \"the divider is here!\" })\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"More\", arrow: true }, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"more\",\n      \"aria-controls\": \"long-menu\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": !!anchorEl,\n      role: \"button\",\n      onClick: onOpen,\n      \"data-testid\": \"menu-button\",\n      className: classes.button,\n      id: \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open: Boolean(anchorEl),\n      onClose,\n      anchorEl,\n      anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n      transformOrigin: { vertical: \"top\", horizontal: \"right\" },\n      \"aria-labelledby\": \"long-menu\"\n    },\n    /* @__PURE__ */ React.createElement(MenuList, { autoFocusItem: Boolean(anchorEl) }, extraItems, /* @__PURE__ */ React.createElement(\n      UnregisterEntity,\n      {\n        unregisterEntityOptions: UNSTABLE_contextMenuOptions,\n        isUnregisterAllowed: isAllowed,\n        onUnregisterEntity,\n        onClose\n      }\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          onInspectEntity();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(BugReportIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Inspect entity\" })\n    ), /* @__PURE__ */ React.createElement(\n      MenuItem,\n      {\n        onClick: () => {\n          onClose();\n          copyToClipboard();\n        }\n      },\n      /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(FileCopyTwoToneIcon, { fontSize: \"small\" })),\n      /* @__PURE__ */ React.createElement(ListItemText, { primary: \"Copy entity URL\" })\n    ))\n  ));\n}\n\nconst dataKey = \"plugin.catalog.entityLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction EntityLayoutTitle(props) {\n  const { entity, title } = props;\n  return /* @__PURE__ */ React.createElement(Box, { display: \"inline-flex\", alignItems: \"center\", height: \"1em\", maxWidth: \"100%\" }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      component: \"span\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\"\n    },\n    title\n  ), entity && /* @__PURE__ */ React.createElement(FavoriteEntity, { entity }));\n}\nfunction headerProps(paramKind, paramNamespace, paramName, entity) {\n  var _a, _b, _c, _d, _e;\n  const kind = (_a = paramKind != null ? paramKind : entity == null ? void 0 : entity.kind) != null ? _a : \"\";\n  const namespace = (_b = paramNamespace != null ? paramNamespace : entity == null ? void 0 : entity.metadata.namespace) != null ? _b : \"\";\n  const name = (_e = (_d = (_c = entity == null ? void 0 : entity.metadata.title) != null ? _c : paramName) != null ? _d : entity == null ? void 0 : entity.metadata.name) != null ? _e : \"\";\n  return {\n    headerTitle: `${name}${namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : \"\"}`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase(\"en-US\");\n      if (entity && entity.spec && \"type\" in entity.spec) {\n        t += \" \\u2014 \";\n        t += entity.spec.type.toLocaleLowerCase(\"en-US\");\n      }\n      return t;\n    })()\n  };\n}\nfunction EntityLabels(props) {\n  var _a;\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: ownedByRelations,\n          defaultKind: \"Group\",\n          color: \"inherit\"\n        }\n      )\n    }\n  ), ((_a = entity.spec) == null ? void 0 : _a.lifecycle) && /* @__PURE__ */ React.createElement(HeaderLabel, { label: \"Lifecycle\", value: entity.spec.lifecycle }));\n}\nconst EntityLayout = (props) => {\n  var _a, _b, _c;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: dataKey,\n      withStrictError: \"Child of EntityLayout must be an EntityLayout.Route\"\n    }).getElements().flatMap(({ props: elementProps }) => {\n      if (!entity) {\n        return [];\n      } else if (elementProps.if && !elementProps.if(entity)) {\n        return [];\n      }\n      return [\n        {\n          path: elementProps.path,\n          title: elementProps.title,\n          children: elementProps.children,\n          tabProps: elementProps.tabProps\n        }\n      ];\n    }),\n    [entity]\n  );\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity\n  );\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate(\"/\");\n  };\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n  }, [location.pathname]);\n  return /* @__PURE__ */ React.createElement(Page, { themeId: (_c = (_b = (_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      title: /* @__PURE__ */ React.createElement(EntityLayoutTitle, { title: headerTitle, entity }),\n      pageTitleOverride: headerTitle,\n      type: headerType\n    },\n    entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(EntityLabels, { entity }), /* @__PURE__ */ React.createElement(\n      EntityContextMenu,\n      {\n        UNSTABLE_extraContextMenuItems,\n        UNSTABLE_contextMenuOptions,\n        onUnregisterEntity: () => setConfirmationDialogOpen(true),\n        onInspectEntity: () => setInspectionDialogOpen(true)\n      }\n    ))\n  ), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(RoutedTabs, { routes }), error && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, error.toString())), !loading && !error && !entity && /* @__PURE__ */ React.createElement(Content, null, NotFoundComponent ? NotFoundComponent : /* @__PURE__ */ React.createElement(WarningPanel, { title: \"Entity not found\" }, \"There is no \", kind, \" with the requested\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/software-catalog/references\" }, \"kind, namespace, and name\"), \".\")), /* @__PURE__ */ React.createElement(\n    UnregisterEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ), /* @__PURE__ */ React.createElement(\n    InspectEntityDialog,\n    {\n      open: inspectionDialogOpen,\n      entity,\n      onClose: () => setInspectionDialogOpen(false)\n    }\n  ));\n};\nEntityLayout.Route = Route;\n\nfunction DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { id: \"responsive-dialog-title\" }, \"Are you sure you want to delete this entity?\"), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    },\n    \"Delete\"\n  ), /* @__PURE__ */ React.createElement(Button, { onClick: onClose, color: \"primary\" }, \"Cancel\")));\n}\n\nfunction isOrphan(entity) {\n  var _a, _b;\n  return ((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[\"backstage.io/orphan\"]) === \"true\";\n}\nfunction EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\", onClick: () => setConfirmationDialogOpen(true) }, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"), /* @__PURE__ */ React.createElement(\n    DeleteEntityDialog,\n    {\n      open: confirmationDialogOpen,\n      entity,\n      onConfirm: cleanUpAfterRemoval,\n      onClose: () => setConfirmationDialogOpen(false)\n    }\n  ));\n}\n\nasync function getRelationWarnings(entity, catalogApi) {\n  var _a;\n  const entityRefRelations = (_a = entity.relations) == null ? void 0 : _a.map(\n    (relation) => relation.targetRef\n  );\n  if (!entityRefRelations || (entityRefRelations == null ? void 0 : entityRefRelations.length) < 1 || entityRefRelations.length > 1e3) {\n    return [];\n  }\n  const relatedEntities = await catalogApi.getEntitiesByRefs({\n    entityRefs: entityRefRelations,\n    fields: [\"kind\", \"metadata.name\", \"metadata.namespace\"]\n  });\n  return entityRefRelations.filter(\n    (_, index) => relatedEntities.items[index] === void 0\n  );\n}\nasync function hasRelationWarnings(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const relatedEntitiesMissing = await getRelationWarnings(entity, catalogApi);\n  return relatedEntitiesMissing.length > 0;\n}\nfunction EntityRelationWarning() {\n  const { entity } = useEntity();\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getRelationWarnings(entity, catalogApi);\n  }, [entity, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value || value.length === 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, { severity: \"warning\" }, \"This entity has relations to other entities, which can't be found in the catalog. \", /* @__PURE__ */ React.createElement(\"br\", null), \"Entities not found are: \", value.join(\", \")));\n}\n\nconst errorFilter = (i) => i.error && i.level === \"error\" && i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\nasync function getOwnAndAncestorsErrors(entityRef, catalogApi) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items.map((item) => {\n    var _a, _b;\n    const statuses = (_b = (_a = item.entity.status) == null ? void 0 : _a.items) != null ? _b : [];\n    const errors = statuses.filter(errorFilter).map((e) => e.error).filter((e) => Boolean(e));\n    return { errors, entity: item.entity };\n  }).filter((item) => item.errors.length > 0);\n  return { items };\n}\nasync function hasCatalogProcessingErrors(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi\n  );\n  return errors.items.length > 0;\n}\nfunction EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, { mb: 1 }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error }));\n  }\n  if (loading || !value) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, value.items.map((ancestorError, index) => /* @__PURE__ */ React.createElement(Box, { key: index, mb: 1 }, stringifyEntityRef(entity) !== stringifyEntityRef(ancestorError.entity) && /* @__PURE__ */ React.createElement(Box, { p: 1 }, \"The error below originates from\", \" \", /* @__PURE__ */ React.createElement(EntityRefLink, { entityRef: ancestorError.entity })), ancestorError.errors.map((e, i) => /* @__PURE__ */ React.createElement(ResponseErrorPanel, { key: i, error: e })))));\n}\n\nconst ENTITY_SWITCH_KEY = \"core.backstage.entitySwitch\";\nconst EntitySwitchCaseComponent = (_props) => null;\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\nconst EntitySwitch = (props) => {\n  var _a, _b;\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    (collection) => collection.selectByComponentData({\n      key: ENTITY_SWITCH_KEY,\n      withStrictError: \"Child of EntitySwitch is not an EntitySwitch.Case\"\n    }).getElements().flatMap((element) => {\n      if (loading) {\n        return [];\n      }\n      const { if: condition, children: elementsChildren } = element.props;\n      if (!entity) {\n        return [\n          {\n            if: condition === void 0,\n            children: elementsChildren\n          }\n        ];\n      }\n      return [\n        {\n          if: condition == null ? void 0 : condition(entity, { apis }),\n          children: elementsChildren\n        }\n      ];\n    }),\n    [apis, entity, loading]\n  );\n  const hasAsyncCases = results.some(\n    (r) => typeof r.if === \"object\" && \"then\" in r.if\n  );\n  if (hasAsyncCases) {\n    return /* @__PURE__ */ React.createElement(\n      AsyncEntitySwitch,\n      {\n        results,\n        renderMultipleMatches: props.renderMultipleMatches\n      }\n    );\n  }\n  if (props.renderMultipleMatches === \"all\") {\n    const children = results.filter((r) => r.if).map((r) => r.children);\n    if (children.length === 0) {\n      return getDefaultChildren(results);\n    }\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return (_b = (_a = results.find((r) => r.if)) == null ? void 0 : _a.children) != null ? _b : getDefaultChildren(results);\n};\nfunction AsyncEntitySwitch({\n  results,\n  renderMultipleMatches\n}) {\n  const { loading, value } = useAsync(async () => {\n    var _a;\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n        }\n        return null;\n      }\n    );\n    if (renderMultipleMatches === \"all\") {\n      const children = (await Promise.all(promises)).filter(Boolean);\n      if (children.length === 0) {\n        return getDefaultChildren(results);\n      }\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n    }\n    return (_a = (await Promise.all(promises)).find(Boolean)) != null ? _a : getDefaultChildren(results);\n  }, [results]);\n  if (loading || !value) {\n    return null;\n  }\n  return value;\n}\nfunction getDefaultChildren(results) {\n  var _a, _b;\n  return (_b = (_a = results.filter((r) => r.if === void 0)[0]) == null ? void 0 : _a.children) != null ? _b : null;\n}\nEntitySwitch.Case = EntitySwitchCaseComponent;\n\nfunction strCmp(a, b) {\n  return Boolean(\n    a && typeof a === \"string\" && (a == null ? void 0 : a.toLocaleLowerCase(\"en-US\")) === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\"))\n  );\n}\nfunction strCmpAll(value, cmpValues) {\n  return typeof cmpValues === \"string\" ? strCmp(value, cmpValues) : cmpValues.length === 0 || cmpValues.some((cmpVal) => strCmp(value, cmpVal));\n}\nfunction isKind(kinds) {\n  return isEntityWith({ kind: kinds });\n}\nfunction isComponentType(types) {\n  return isEntityWith({ kind: \"component\", type: types });\n}\nfunction isResourceType(types) {\n  return isEntityWith({ kind: \"resource\", type: types });\n}\nfunction isEntityWith(predicate) {\n  return (entity) => {\n    var _a;\n    if (predicate.kind && !strCmpAll(entity.kind, predicate.kind)) {\n      return false;\n    }\n    if (predicate.type && !strCmpAll((_a = entity.spec) == null ? void 0 : _a.type, predicate.type)) {\n      return false;\n    }\n    return true;\n  };\n}\nfunction isNamespace(namespaces) {\n  return (entity) => {\n    var _a;\n    return strCmpAll((_a = entity.metadata) == null ? void 0 : _a.namespace, namespaces);\n  };\n}\n\nconst FilteredEntityLayout = CatalogFilterLayout;\nconst FilterContainer = CatalogFilterLayout.Filters;\nconst EntityListContainer = CatalogFilterLayout.Content;\n\nconst ENTITY_YAML = `metadata:\n  name: example\n  labels:\n    javaVersion: 1.2.3`;\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"PluginCatalogEntityLabelsEmptyState\" }\n);\nfunction EntityLabelsEmptyState() {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(\"div\", { className: classes.code }, /* @__PURE__ */ React.createElement(\n    CodeSnippet,\n    {\n      text: ENTITY_YAML,\n      language: \"yaml\",\n      showLineNumbers: true,\n      highlightedNumbers: [3, 4, 5, 6],\n      customStyle: { background: \"inherit\", fontSize: \"115%\" }\n    }\n  )), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      target: \"_blank\",\n      href: \"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional\"\n    },\n    \"Read more\"\n  ));\n}\n\nconst useStyles = makeStyles((_) => ({\n  key: {\n    fontWeight: \"bold\"\n  }\n}));\nconst EntityLabelsCard$1 = (props) => {\n  var _a;\n  const { variant, title } = props;\n  const { entity } = useEntity();\n  const classes = useStyles();\n  const columns = [\n    {\n      render: (row) => {\n        return /* @__PURE__ */ React.createElement(Typography, { className: classes.key, variant: \"body2\" }, row.key);\n      }\n    },\n    {\n      field: \"value\"\n    }\n  ];\n  const labels = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.labels;\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: title || \"Labels\", variant }, !labels || Object.keys(labels).length === 0 ? /* @__PURE__ */ React.createElement(EntityLabelsEmptyState, null) : /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      columns,\n      data: Object.keys(labels).map((labelKey) => ({\n        key: labelKey,\n        value: labels[labelKey]\n      })),\n      options: {\n        search: false,\n        showTitle: true,\n        loadingType: \"linear\",\n        header: false,\n        padding: \"dense\",\n        pageSize: 5,\n        toolbar: false,\n        paging: Object.keys(labels).length > 5\n      }\n    }\n  ));\n};\n\nfunction hasLabels(entity) {\n  var _a, _b;\n  return ((_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.labels) ? Object.keys((_b = entity == null ? void 0 : entity.metadata) == null ? void 0 : _b.labels).some(Boolean) : false;\n}\n\nconst catalogPlugin = createPlugin({\n  id: \"catalog\",\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, fetchApi }) => new CatalogClient({ discoveryApi, fetchApi })\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) => new DefaultStarredEntitiesApi({ storageApi })\n    })\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n    createFromTemplate: createFromTemplateRouteRef\n  },\n  __experimentalConfigure(options) {\n    const defaultOptions = {\n      createButtonTitle: \"Create\"\n    };\n    return { ...defaultOptions, ...options };\n  }\n});\nconst CatalogIndexPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogIndexPage\",\n    component: () => import('./index-7328f74e.esm.js').then((m) => m.CatalogPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogEntityPage\",\n    component: () => import('./index-f0e32dd1.esm.js').then((m) => m.CatalogEntityPage),\n    mountPoint: entityRouteRef\n  })\n);\nconst EntityAboutCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityAboutCard\",\n    component: {\n      lazy: () => import('./index-15b9f76d.esm.js').then((m) => m.AboutCard)\n    }\n  })\n);\nconst EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLinksCard\",\n    component: {\n      lazy: () => import('./index-36871296.esm.js').then((m) => m.EntityLinksCard)\n    }\n  })\n);\nconst EntityLabelsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLabelsCard\",\n    component: {\n      lazy: () => import('./index-81a799a5.esm.js').then((m) => m.EntityLabelsCard)\n    }\n  })\n);\nconst EntityHasSystemsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSystemsCard\",\n    component: {\n      lazy: () => import('./index-1c53a4d7.esm.js').then((m) => m.HasSystemsCard)\n    }\n  })\n);\nconst EntityHasComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasComponentsCard\",\n    component: {\n      lazy: () => import('./index-e2d2eb49.esm.js').then((m) => m.HasComponentsCard)\n    }\n  })\n);\nconst EntityHasSubcomponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSubcomponentsCard\",\n    component: {\n      lazy: () => import('./index-d8353256.esm.js').then(\n        (m) => m.HasSubcomponentsCard\n      )\n    }\n  })\n);\nconst EntityHasResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasResourcesCard\",\n    component: {\n      lazy: () => import('./index-23d95220.esm.js').then((m) => m.HasResourcesCard)\n    }\n  })\n);\nconst EntityDependsOnComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnComponentsCard\",\n    component: {\n      lazy: () => import('./index-5d579387.esm.js').then(\n        (m) => m.DependsOnComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependencyOfComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependencyOfComponentsCard\",\n    component: {\n      lazy: () => import('./index-226f1855.esm.js').then(\n        (m) => m.DependencyOfComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependsOnResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnResourcesCard\",\n    component: {\n      lazy: () => import('./index-2ae6a112.esm.js').then(\n        (m) => m.DependsOnResourcesCard\n      )\n    }\n  })\n);\nconst RelatedEntitiesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"RelatedEntitiesCard\",\n    component: {\n      lazy: () => import('./index-87a68cf7.esm.js').then(\n        (m) => m.RelatedEntitiesCard\n      )\n    }\n  })\n);\nconst CatalogSearchResultListItem = catalogPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"CatalogSearchResultListItem\",\n    component: () => import('./index-ccf06d4f.esm.js').then(\n      (m) => m.CatalogSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"software-catalog\"\n  })\n);\n\nexport { AboutCard as A, EntitySwitch as B, CatalogTable as C, DefaultStarredEntitiesApi as D, EntityLabelsCard$1 as E, isKind as F, isNamespace as G, isComponentType as H, isResourceType as I, isEntityWith as J, FilteredEntityLayout as K, LinksGridList as L, FilterContainer as M, EntityListContainer as N, RelatedEntitiesCard as R, AboutContent as a, AboutField as b, createComponentRouteRef as c, CatalogEntityPage as d, CatalogIndexPage as e, catalogPlugin as f, EntityAboutCard as g, hasLabels as h, EntityDependencyOfComponentsCard as i, EntityDependsOnComponentsCard as j, EntityDependsOnResourcesCard as k, EntityHasComponentsCard as l, EntityHasResourcesCard as m, EntityHasSubcomponentsCard as n, EntityHasSystemsCard as o, EntityLinksCard as p, EntityLabelsCard as q, CatalogSearchResultListItem as r, CatalogKindHeader as s, EntityLayout as t, EntityOrphanWarning as u, isOrphan as v, EntityRelationWarning as w, hasRelationWarnings as x, EntityProcessingErrorsPanel as y, hasCatalogProcessingErrors as z };\n//# sourceMappingURL=index-54253ffe.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, configApiRef, createRoutableExtension, createComponentExtension, useApi, useRouteRefParams, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { readGithubIntegrationConfigs } from '@backstage/integration';\nimport { Octokit } from '@octokit/rest';\nimport { scmAuthApiRef } from '@backstage/integration-react';\nimport React, { useState, useEffect } from 'react';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Link as Link$1, Routes, Route } from 'react-router-dom';\nimport { makeStyles, Accordion, AccordionSummary, Typography, CircularProgress, Tooltip, Zoom, Modal, Fade, LinearProgress, Box, TableContainer, Paper, Table, TableBody, TableRow, TableCell, AccordionDetails, ListItemText, Button, IconButton } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport { StatusPending, StatusOK, StatusError, StatusWarning, StatusAborted, StatusRunning, LogViewer, Breadcrumbs, Link, EmptyState, Table as Table$1, MissingAnnotationEmptyState, InfoCard, StructuredMetadataTable, ErrorPanel } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport { ANNOTATION_SOURCE_LOCATION, ANNOTATION_LOCATION } from '@backstage/catalog-model';\nimport gitUrlParse from 'git-url-parse';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport SyncIcon from '@material-ui/icons/Sync';\n\nconst githubActionsApiRef = createApiRef({\n  id: \"plugin.githubactions.service\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass GithubActionsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"scmAuthApi\");\n    this.configApi = options.configApi;\n    this.scmAuthApi = options.scmAuthApi;\n  }\n  async getOctokit(hostname = \"github.com\") {\n    var _a;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: `https://${hostname}/`,\n      additionalScope: {\n        customScopes: {\n          github: [\"repo\"]\n        }\n      }\n    });\n    const configs = readGithubIntegrationConfigs(\n      (_a = this.configApi.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n    );\n    const githubIntegrationConfig = configs.find((v) => v.host === hostname);\n    const baseUrl = githubIntegrationConfig == null ? void 0 : githubIntegrationConfig.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n  async reRunWorkflow(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId\n    });\n  }\n  async listWorkflowRuns(options) {\n    const { hostname, owner, repo, pageSize = 100, page = 0, branch } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...branch ? { branch } : {}\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun(options) {\n    const { hostname, owner, repo, id, pageSize = 100, page = 0 } = options;\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId\n    });\n    return workflow.data;\n  }\n}\n\nvar BuildStatus = /* @__PURE__ */ ((BuildStatus2) => {\n  BuildStatus2[BuildStatus2[\"success\"] = 0] = \"success\";\n  BuildStatus2[BuildStatus2[\"failure\"] = 1] = \"failure\";\n  BuildStatus2[BuildStatus2[\"pending\"] = 2] = \"pending\";\n  BuildStatus2[BuildStatus2[\"running\"] = 3] = \"running\";\n  return BuildStatus2;\n})(BuildStatus || {});\n\nconst rootRouteRef = createRouteRef({\n  id: \"github-actions\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"github-actions/build\",\n  path: \"/:id\",\n  parent: rootRouteRef\n});\n\nconst githubActionsPlugin = createPlugin({\n  id: \"github-actions\",\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, scmAuthApi: scmAuthApiRef },\n      factory: ({ configApi, scmAuthApi }) => new GithubActionsClient({ configApi, scmAuthApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityGithubActionsContent = githubActionsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityGithubActionsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityLatestGithubActionRunCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionRunCard\",\n    component: {\n      lazy: () => import('./esm/index-105f24d9.esm.js').then((m) => m.LatestWorkflowRunCard)\n    }\n  })\n);\nconst EntityLatestGithubActionsForBranchCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionsForBranchCard\",\n    component: {\n      lazy: () => import('./esm/index-105f24d9.esm.js').then(\n        (m) => m.LatestWorkflowsForBranchCard\n      )\n    }\n  })\n);\nconst EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityRecentGithubActionsRunsCard\",\n    component: {\n      lazy: () => import('./esm/index-105f24d9.esm.js').then((m) => m.RecentWorkflowRunsCard)\n    }\n  })\n);\n\nconst GITHUB_ACTIONS_ANNOTATION = \"github.com/project-slug\";\nconst getProjectNameFromEntity = (entity) => {\n  var _a, _b;\n  return (_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"\";\n};\n\nconst WorkflowRunStatus = ({\n  status,\n  conclusion\n}) => {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Queued\");\n    case \"in_progress\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusRunning, null), \" In progress\");\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusAborted, null), \" Aborted\");\n        case \"timed_out\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusWarning, null), \" Timed out\");\n        case \"failure\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusError, null), \" Error\");\n        default:\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusOK, null), \" Completed\");\n      }\n    default:\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Pending\");\n  }\n};\n\nconst useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  return useAsync(async () => {\n    if (!repo || !owner) {\n      throw new Error(\"No repo/owner provided\");\n    }\n    const jobs = await api.listJobsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    });\n    return {\n      total_count: jobs.total_count,\n      jobs: jobs.jobs.map((job) => {\n        var _a, _b, _c, _d;\n        return {\n          html_url: (_a = job.html_url) != null ? _a : void 0,\n          status: job.status,\n          conclusion: (_b = job.conclusion) != null ? _b : void 0,\n          started_at: job.started_at,\n          completed_at: (_c = job.completed_at) != null ? _c : void 0,\n          id: job.id,\n          name: job.name,\n          steps: (_d = job.steps) == null ? void 0 : _d.map((step) => {\n            var _a2, _b2, _c2;\n            return {\n              name: step.name,\n              status: step.status,\n              conclusion: (_a2 = step.conclusion) != null ? _a2 : void 0,\n              number: step.number,\n              started_at: (_b2 = step.started_at) != null ? _b2 : void 0,\n              completed_at: (_c2 = step.completed_at) != null ? _c2 : void 0\n            };\n          })\n        };\n      })\n    };\n  }, [repo, owner, id]);\n};\n\nconst useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.getWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.downloadJobLogsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      runId: id\n    }) : Promise.reject(\"No repo/owner provided\");\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst getHostnameFromEntity = (entity) => {\n  var _a, _b, _c;\n  const location = (_c = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION]) != null ? _c : (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_LOCATION];\n  return (location == null ? void 0 : location.startsWith(\"url:\")) ? gitUrlParse(location.slice(4)).resource : void 0;\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"85%\",\n    height: \"85%\",\n    justifyContent: \"center\",\n    margin: \"auto\"\n  },\n  normalLogContainer: {\n    height: \"75vh\",\n    width: \"100%\"\n  },\n  modalLogContainer: {\n    height: \"100%\",\n    width: \"100%\"\n  },\n  log: {\n    background: theme.palette.background.default\n  }\n}));\nconst WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress\n}) => {\n  const classes = useStyles$2();\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : void 0;\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, disabled: inProgress }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, jobLogs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"Job Log\"),\n    /* @__PURE__ */ React.createElement(Tooltip, { title: \"Open Log\", TransitionComponent: Zoom, arrow: true }, /* @__PURE__ */ React.createElement(\n      DescriptionIcon,\n      {\n        onClick: (event) => {\n          event.stopPropagation();\n          handleOpen();\n        },\n        style: { marginLeft: \"auto\" }\n      }\n    )),\n    /* @__PURE__ */ React.createElement(\n      Modal,\n      {\n        className: classes.modal,\n        onClick: (event) => event.stopPropagation(),\n        open,\n        onClose: handleClose\n      },\n      /* @__PURE__ */ React.createElement(Fade, { in: open }, /* @__PURE__ */ React.createElement(\"div\", { className: classes.modalLogContainer }, /* @__PURE__ */ React.createElement(\n        LogViewer,\n        {\n          text: logText != null ? logText : \"No Values Found\",\n          classes: { root: classes.log }\n        }\n      )))\n    )\n  ), logText && /* @__PURE__ */ React.createElement(\"div\", { className: classes.normalLogContainer }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.log } })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2)\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0)\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst getElapsedTime = (start, end) => {\n  if (!start || !end) {\n    return \"\";\n  }\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\nconst StepView = ({ step }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: step.name,\n      secondary: getElapsedTime(step.started_at, step.completed_at)\n    }\n  )), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: step.status.toLocaleUpperCase(\"en-US\"),\n      conclusion: (_a = step.conclusion) == null ? void 0 : _a.toLocaleUpperCase(\"en-US\")\n    }\n  )));\n};\nconst JobListItem = ({\n  job,\n  className,\n  entity\n}) => {\n  var _a;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Accordion, { TransitionProps: { unmountOnExit: true }, className }, /* @__PURE__ */ React.createElement(\n    AccordionSummary,\n    {\n      expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n      IconButtonProps: {\n        className: classes.button\n      }\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"button\" }, job.name, \" (\", getElapsedTime(job.started_at, job.completed_at), \")\")\n  ), /* @__PURE__ */ React.createElement(AccordionDetails, { className: classes.accordionDetails }, /* @__PURE__ */ React.createElement(TableContainer, null, /* @__PURE__ */ React.createElement(Table, null, (_a = job.steps) == null ? void 0 : _a.map((step) => /* @__PURE__ */ React.createElement(StepView, { key: step.number, step }))))), job.status === \"queued\" || job.status === \"in_progress\" ? /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: true, entity }) : /* @__PURE__ */ React.createElement(WorkflowRunLogs, { runId: job.id, inProgress: false, entity }));\n};\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Box, null, jobs && jobs.total_count > 0 && jobs.jobs.map((job) => /* @__PURE__ */ React.createElement(\n    JobListItem,\n    {\n      key: job.id,\n      job,\n      className: job.status !== \"success\" ? classes.failed : classes.success,\n      entity\n    }\n  )));\n};\nconst WorkflowRunDetails = ({ entity }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n  const classes = useStyles$1();\n  if (details.error && details.error.message) {\n    return /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", color: \"error\" }, \"Failed to load build, \", details.error.message);\n  } else if (details.loading) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { mb: 3 }, /* @__PURE__ */ React.createElement(Breadcrumbs, { \"aria-label\": \"breadcrumb\" }, /* @__PURE__ */ React.createElement(Link, { to: \"..\" }, \"Workflow runs\"), /* @__PURE__ */ React.createElement(Typography, null, \"Workflow run details\"))), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper, className: classes.table }, /* @__PURE__ */ React.createElement(Table, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_a = details.value) == null ? void 0 : _a.head_branch)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_c = (_b = details.value) == null ? void 0 : _b.head_commit) == null ? void 0 : _c.message)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_e = (_d = details.value) == null ? void 0 : _d.head_commit) == null ? void 0 : _e.id)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Workflow\")), /* @__PURE__ */ React.createElement(TableCell, null, (_f = details.value) == null ? void 0 : _f.name)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(\n    WorkflowRunStatus,\n    {\n      status: ((_g = details.value) == null ? void 0 : _g.status) || void 0,\n      conclusion: ((_h = details.value) == null ? void 0 : _h.conclusion) || void 0\n    }\n  ))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, `${(_k = (_j = (_i = details.value) == null ? void 0 : _i.head_commit) == null ? void 0 : _j.author) == null ? void 0 : _k.name} (${(_n = (_m = (_l = details.value) == null ? void 0 : _l.head_commit) == null ? void 0 : _m.author) == null ? void 0 : _n.email})`)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Links\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_o = details.value) == null ? void 0 : _o.html_url) && /* @__PURE__ */ React.createElement(Link, { to: details.value.html_url }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { colSpan: 2 }, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Jobs\"), jobs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : /* @__PURE__ */ React.createElement(JobsList, { jobs: jobs.value, entity })))))));\n};\n\nfunction useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 5\n}) {\n  const api = useApi(githubActionsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n  const {\n    loading,\n    value: runs,\n    retry,\n    error\n  } = useAsyncRetry(async () => {\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch\n    });\n    setTotal(workflowRunsData.total_count);\n    return workflowRunsData.workflow_runs.map((run) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n      return {\n        workflowName: (_a = run.name) != null ? _a : void 0,\n        message: (_b = run.head_commit) == null ? void 0 : _b.message,\n        id: `${run.id}`,\n        onReRunClick: async () => {\n          try {\n            await api.reRunWorkflow({\n              hostname,\n              owner,\n              repo,\n              runId: run.id\n            });\n          } catch (e) {\n            errorApi.post(\n              new Error(`Failed to rerun the workflow: ${e.message}`)\n            );\n          }\n        },\n        source: {\n          branchName: (_c = run.head_branch) != null ? _c : void 0,\n          commit: {\n            hash: (_d = run.head_commit) == null ? void 0 : _d.id,\n            url: (_g = (_e = run.head_repository) == null ? void 0 : _e.branches_url) == null ? void 0 : _g.replace(\n              \"{/branch}\",\n              (_f = run.head_branch) != null ? _f : \"\"\n            )\n          }\n        },\n        status: (_h = run.status) != null ? _h : void 0,\n        conclusion: (_i = run.conclusion) != null ? _i : void 0,\n        url: run.url,\n        githubUrl: run.html_url\n      };\n    });\n  }, [page, pageSize, repo, owner]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${owner}/${repo}`,\n      total,\n      error\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry\n    }\n  ];\n}\n\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"150px\"\n  },\n  {\n    title: \"Message\",\n    field: \"message\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: row.id }) }, row.message);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", noWrap: true }, /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_a = row.source) == null ? void 0 : _a.branchName), /* @__PURE__ */ React.createElement(Typography, { paragraph: true, variant: \"body2\" }, (_b = row.source) == null ? void 0 : _b.commit.hash));\n    }\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflowName\"\n  },\n  {\n    title: \"Status\",\n    width: \"150px\",\n    render: (row) => /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(WorkflowRunStatus, { status: row.status, conclusion: row.conclusion }))\n  },\n  {\n    title: \"Actions\",\n    render: (row) => /* @__PURE__ */ React.createElement(Tooltip, { title: \"Rerun workflow\" }, /* @__PURE__ */ React.createElement(IconButton, { onClick: row.onReRunClick }, /* @__PURE__ */ React.createElement(RetryIcon, null))),\n    width: \"10%\"\n  }\n];\nconst WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    Table$1,\n    {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: \"dense\" },\n      totalCount: total,\n      page,\n      actions: [\n        {\n          icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n          tooltip: \"Reload workflow runs\",\n          isFreeAction: true,\n          onClick: () => retry()\n        }\n      ],\n      data: runs != null ? runs : [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      style: { width: \"100%\" },\n      title: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, { mr: 1 }), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, projectName)),\n      columns: generatedColumns\n    }\n  );\n};\nconst WorkflowRunsTable = ({\n  entity,\n  branch\n}) => {\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !tableProps.loading && !runs;\n  return hasNoRuns ? /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No Workflow Data\",\n      description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n      action: /* @__PURE__ */ React.createElement(\n        Button,\n        {\n          variant: \"contained\",\n          color: \"primary\",\n          href: `https://${githubHost}/${projectName}/actions/new`\n        },\n        \"Create new Workflow\"\n      )\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    WorkflowRunsTableView,\n    {\n      ...tableProps,\n      runs,\n      loading: tableProps.loading,\n      retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage\n    }\n  );\n};\n\nconst isGithubActionsAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isGithubActionsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: GITHUB_ACTIONS_ANNOTATION });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(WorkflowRunsTable, { entity }) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: `${buildRouteRef.path}`,\n      element: /* @__PURE__ */ React.createElement(WorkflowRunDetails, { entity })\n    }\n  ), \")\");\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isGithubActionsAvailable: isGithubActionsAvailable,\n  Router: Router\n});\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = (props) => {\n  var _a;\n  const { error, loading, lastRun, branch } = props;\n  const classes = useStyles();\n  if (error)\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Couldn't fetch latest \", branch, \" run\");\n  if (loading)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  return /* @__PURE__ */ React.createElement(\n    StructuredMetadataTable,\n    {\n      metadata: {\n        status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n          WorkflowRunStatus,\n          {\n            status: lastRun.status,\n            conclusion: lastRun.conclusion\n          }\n        )),\n        message: lastRun.message,\n        url: /* @__PURE__ */ React.createElement(Link, { to: (_a = lastRun.githubUrl) != null ? _a : \"\" }, \"See more on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon }))\n      }\n    }\n  );\n};\nconst LatestWorkflowRunCard = (props) => {\n  var _a, _b, _c;\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const lastRun = (_c = runs == null ? void 0 : runs[0]) != null ? _c : {};\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(\n    WidgetContent,\n    {\n      error,\n      loading,\n      branch,\n      lastRun\n    }\n  ));\n};\nconst LatestWorkflowsForBranchCard = (props) => {\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Last ${branch} build`, variant }, /* @__PURE__ */ React.createElement(WorkflowRunsTable, { branch, entity }));\n};\n\nconst firstLine = (message) => message.split(\"\\n\")[0];\nconst RecentWorkflowRunsCard = (props) => {\n  var _a, _b;\n  const { branch, dense = false, limit = 5, variant } = props;\n  const { entity } = useEntity();\n  const errorApi = useApi(errorApiRef);\n  const hostname = getHostnameFromEntity(entity);\n  const [owner, repo] = ((_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"/\").split(\"/\");\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const githubHost = hostname || \"github.com\";\n  const routeLink = useRouteRef(buildRouteRef);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: error.message, error });\n  }\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: \"Recent Workflow Runs\",\n      subheader: branch ? `Branch: ${branch}` : \"All Branches\",\n      noPadding: true,\n      variant\n    },\n    !runs.length ? /* @__PURE__ */ React.createElement(\"div\", { style: { textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"This component has GitHub Actions enabled, but no workflows were found.\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\" }, /* @__PURE__ */ React.createElement(Link, { to: `https://${githubHost}/${owner}/${repo}/actions/new` }, \"Create a new workflow\"))) : /* @__PURE__ */ React.createElement(\n      Table$1,\n      {\n        isLoading: loading,\n        options: {\n          search: false,\n          paging: false,\n          padding: dense ? \"dense\" : \"default\",\n          toolbar: false\n        },\n        columns: [\n          {\n            title: \"Commit Message\",\n            field: \"message\",\n            render: (data) => {\n              var _a2;\n              return /* @__PURE__ */ React.createElement(Link, { component: Link$1, to: routeLink({ id: data.id }) }, firstLine((_a2 = data.message) != null ? _a2 : \"\"));\n            }\n          },\n          { title: \"Branch\", field: \"source.branchName\" },\n          { title: \"Status\", field: \"status\", render: WorkflowRunStatus }\n        ],\n        data: runs\n      }\n    )\n  );\n};\n\nexport { BuildStatus, EntityGithubActionsContent, EntityLatestGithubActionRunCard, EntityLatestGithubActionsForBranchCard, EntityRecentGithubActionsRunsCard, GITHUB_ACTIONS_ANNOTATION, GithubActionsClient, LatestWorkflowRunCard, LatestWorkflowsForBranchCard, RecentWorkflowRunsCard, Router, githubActionsApiRef, githubActionsPlugin, isGithubActionsAvailable, isGithubActionsAvailable as isPluginApplicableToEntity, githubActionsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, IconButton } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { InfoCard } from '@backstage/core-components';\nimport { createReactExtension, useApp } from '@backstage/core-plugin-api';\n\nconst SettingsModal = (props) => {\n  const { open, close, componentName, children } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { open, onClose: () => close() }, /* @__PURE__ */ React.createElement(DialogTitle, null, \"Settings - \", componentName), /* @__PURE__ */ React.createElement(DialogContent, null, children), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, { onClick: () => close(), color: \"primary\", variant: \"contained\" }, \"Close\")));\n};\n\nfunction createCardExtension(options) {\n  const { title, components, name, description, layout, settings } = options;\n  const isCustomizable = (settings == null ? void 0 : settings.schema) !== void 0;\n  return createReactExtension({\n    name,\n    data: { title, description, \"home.widget.config\": { layout, settings } },\n    component: {\n      lazy: () => components().then((componentParts) => {\n        return (props) => {\n          return /* @__PURE__ */ React.createElement(\n            CardExtension,\n            {\n              ...props,\n              ...componentParts,\n              title: props.title || title,\n              isCustomizable\n            }\n          );\n        };\n      })\n    }\n  });\n}\nfunction CardExtension(props) {\n  const {\n    Renderer,\n    Content,\n    Settings,\n    Actions,\n    ContextProvider,\n    isCustomizable,\n    title,\n    ...childProps\n  } = props;\n  const app = useApp();\n  const { Progress } = app.getComponents();\n  const [settingsOpen, setSettingsOpen] = React.useState(false);\n  if (Renderer) {\n    return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(\n      Renderer,\n      {\n        title,\n        ...{\n          Content,\n          ...Actions ? { Actions } : {},\n          ...Settings && !isCustomizable ? { Settings } : {},\n          ...ContextProvider ? { ContextProvider } : {},\n          ...childProps\n        }\n      }\n    ));\n  }\n  const cardProps = {\n    title,\n    ...Settings && !isCustomizable ? {\n      action: /* @__PURE__ */ React.createElement(IconButton, { onClick: () => setSettingsOpen(true) }, /* @__PURE__ */ React.createElement(SettingsIcon, null, \"Settings\"))\n    } : {},\n    ...Actions ? {\n      actions: /* @__PURE__ */ React.createElement(Actions, null)\n    } : {}\n  };\n  const innerContent = /* @__PURE__ */ React.createElement(InfoCard, { ...cardProps }, Settings && !isCustomizable && /* @__PURE__ */ React.createElement(\n    SettingsModal,\n    {\n      open: settingsOpen,\n      componentName: title,\n      close: () => setSettingsOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(Settings, null)\n  ), /* @__PURE__ */ React.createElement(Content, { ...childProps }));\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, ContextProvider ? /* @__PURE__ */ React.createElement(ContextProvider, { ...childProps }, innerContent) : innerContent);\n}\n\nexport { SettingsModal, createCardExtension };\n//# sourceMappingURL=index.esm.js.map\n","import { createRouteRef, createPlugin, createRoutableExtension, createComponentExtension, useElementFilter, useApi, storageApiRef, getComponentData } from '@backstage/core-plugin-api';\nimport { createCardExtension as createCardExtension$1, SettingsModal as SettingsModal$1 } from '@backstage/plugin-home-react';\nimport React, { useCallback, useMemo } from 'react';\nimport 'react-router-dom';\nimport { WidthProvider, Responsive } from 'react-grid-layout';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport { makeStyles, createStyles, Dialog, DialogContent, Grid, Tooltip, DialogTitle, ListItemAvatar, useTheme } from '@material-ui/core';\nimport { compact } from 'lodash';\nimport useObservable from 'react-use/lib/useObservable';\nimport { ContentHeader, ErrorBoundary } from '@backstage/core-components';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { withTheme } from '@rjsf/core-v5';\nimport validator from '@rjsf/validator-ajv8';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport AddIcon from '@material-ui/icons/Add';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Button from '@material-ui/core/Button';\nimport SaveIcon from '@material-ui/icons/Save';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { z } from 'zod';\n\nconst rootRouteRef = createRouteRef({\n  id: \"home\"\n});\n\nconst homePlugin = createPlugin({\n  id: \"home\",\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst HomepageCompositionRoot = homePlugin.provide(\n  createRoutableExtension({\n    name: \"HomepageCompositionRoot\",\n    component: () => import('./esm/index-62c5f7fb.esm.js').then((m) => m.HomepageCompositionRoot),\n    mountPoint: rootRouteRef\n  })\n);\nconst ComponentAccordion = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentAccordion\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentAccordion)\n    }\n  })\n);\nconst ComponentTabs = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentTabs\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentTabs)\n    }\n  })\n);\nconst ComponentTab = homePlugin.provide(\n  createComponentExtension({\n    name: \"ComponentTab\",\n    component: {\n      lazy: () => import('./esm/index-3155d776.esm.js').then((m) => m.ComponentTab)\n    }\n  })\n);\nconst WelcomeTitle = homePlugin.provide(\n  createComponentExtension({\n    name: \"WelcomeTitle\",\n    component: {\n      lazy: () => import('./esm/index-87a51b51.esm.js').then((m) => m.WelcomeTitle)\n    }\n  })\n);\nconst HomePageCompanyLogo = homePlugin.provide(\n  createComponentExtension({\n    name: \"CompanyLogo\",\n    component: {\n      lazy: () => import('./esm/index-476343c1.esm.js').then((m) => m.CompanyLogo)\n    }\n  })\n);\nconst HomePageRandomJoke = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageRandomJoke\",\n    title: \"Random Joke\",\n    components: () => import('./esm/index-4517c5bc.esm.js'),\n    description: \"Shows a random joke about optional category\",\n    layout: {\n      height: { minRows: 4 },\n      width: { minColumns: 3 }\n    },\n    settings: {\n      schema: {\n        title: \"Random Joke settings\",\n        type: \"object\",\n        properties: {\n          defaultCategory: {\n            title: \"Category\",\n            type: \"string\",\n            enum: [\"any\", \"programming\", \"dad\"],\n            default: \"any\"\n          }\n        }\n      }\n    }\n  })\n);\nconst HomePageToolkit = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageToolkit\",\n    title: \"Toolkit\",\n    components: () => import('./esm/index-40d9ffac.esm.js')\n  })\n);\nconst HomePageStarredEntities = homePlugin.provide(\n  createCardExtension$1({\n    name: \"HomePageStarredEntities\",\n    title: \"Your Starred Entities\",\n    components: () => import('./esm/index-f5981b27.esm.js')\n  })\n);\nconst HeaderWorldClock = homePlugin.provide(\n  createComponentExtension({\n    name: \"HeaderWorldClock\",\n    component: {\n      lazy: () => import('./esm/index-59fc0760.esm.js').then(\n        (m) => m.HeaderWorldClock\n      )\n    }\n  })\n);\n\nconst Form = withTheme(require(\"@rjsf/material-ui-v5\").Theme);\nconst useStyles$3 = makeStyles(\n  (theme) => createStyles({\n    iconGrid: {\n      height: \"100%\",\n      \"& *\": {\n        padding: 0\n      }\n    },\n    settingsOverlay: {\n      position: \"absolute\",\n      backgroundColor: \"rgba(40, 40, 40, 0.93)\",\n      width: \"100%\",\n      height: \"100%\",\n      top: 0,\n      left: 0,\n      padding: theme.spacing(2),\n      color: \"white\"\n    }\n  })\n);\nconst WidgetSettingsOverlay = (props) => {\n  const { id, widget, settings, handleRemove, handleSettingsSave } = props;\n  const [settingsDialogOpen, setSettingsDialogOpen] = React.useState(false);\n  const styles = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.settingsOverlay }, widget.settingsSchema && /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: settingsDialogOpen,\n      className: \"widgetSettingsDialog\",\n      onClose: () => setSettingsDialogOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(\n      Form,\n      {\n        validator,\n        showErrorList: false,\n        schema: widget.settingsSchema,\n        uiSchema: widget.uiSchema,\n        noHtml5Validate: true,\n        formData: settings,\n        formContext: { settings },\n        onSubmit: ({ formData, errors }) => {\n          if (errors.length === 0) {\n            handleSettingsSave(id, formData);\n            setSettingsDialogOpen(false);\n          }\n        }\n      }\n    ))\n  ), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      className: styles.iconGrid,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    widget.settingsSchema && /* @__PURE__ */ React.createElement(Grid, { item: true, className: \"overlayGridItem\" }, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Edit settings\" }, /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        color: \"primary\",\n        onClick: () => setSettingsDialogOpen(true)\n      },\n      /* @__PURE__ */ React.createElement(SettingsIcon, { fontSize: \"large\" })\n    ))),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, className: \"overlayGridItem\" }, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Delete widget\" }, /* @__PURE__ */ React.createElement(IconButton, { color: \"secondary\", onClick: () => handleRemove(id) }, /* @__PURE__ */ React.createElement(DeleteIcon, { fontSize: \"large\" }))))\n  ));\n};\n\nconst getTitle = (widget) => {\n  var _a;\n  return (_a = widget.title) != null ? _a : widget.name;\n};\nconst AddWidgetDialog = (props) => {\n  const { widgets, handleAdd } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogTitle, null, \"Add new widget to dashboard\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(List, { dense: true }, widgets.map((widget) => {\n    return /* @__PURE__ */ React.createElement(\n      ListItem,\n      {\n        key: widget.name,\n        button: true,\n        onClick: () => handleAdd(widget)\n      },\n      /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(AddIcon, null)),\n      /* @__PURE__ */ React.createElement(\n        ListItemText,\n        {\n          secondary: widget.description && /* @__PURE__ */ React.createElement(\n            Typography,\n            {\n              component: \"span\",\n              variant: \"caption\",\n              color: \"textPrimary\"\n            },\n            widget.description\n          ),\n          primary: /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"textPrimary\" }, getTitle(widget))\n        }\n      )\n    );\n  }))));\n};\n\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    contentHeaderBtn: {\n      marginLeft: theme.spacing(2)\n    },\n    widgetWrapper: {\n      \"& > *:first-child\": {\n        width: \"100%\",\n        height: \"100%\"\n      }\n    }\n  })\n);\nconst CustomHomepageButtons = (props) => {\n  const {\n    editMode,\n    numWidgets,\n    clearLayout,\n    setAddWidgetDialogOpen,\n    changeEditMode,\n    defaultConfigAvailable,\n    restoreDefault\n  } = props;\n  const styles = useStyles$2();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !editMode && numWidgets > 0 ? /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => changeEditMode(true),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(EditIcon, null)\n    },\n    \"Edit\"\n  ) : /* @__PURE__ */ React.createElement(React.Fragment, null, defaultConfigAvailable && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      className: styles.contentHeaderBtn,\n      onClick: restoreDefault,\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(CancelIcon, null)\n    },\n    \"Restore defaults\"\n  ), numWidgets > 0 && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      color: \"secondary\",\n      className: styles.contentHeaderBtn,\n      onClick: clearLayout,\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(DeleteIcon, null)\n    },\n    \"Clear all\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      variant: \"contained\",\n      className: styles.contentHeaderBtn,\n      onClick: () => setAddWidgetDialogOpen(true),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(AddIcon, null)\n    },\n    \"Add widget\"\n  ), numWidgets > 0 && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: styles.contentHeaderBtn,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => changeEditMode(false),\n      size: \"small\",\n      startIcon: /* @__PURE__ */ React.createElement(SaveIcon, null)\n    },\n    \"Save\"\n  )));\n};\n\nconst RSJFTypeSchema = z.any();\nconst RSJFTypeUiSchema = z.any();\nconst ReactElementSchema = z.any();\nconst LayoutSchema = z.any();\nconst LayoutConfigurationSchema = z.object({\n  component: ReactElementSchema,\n  x: z.number().nonnegative(\"x must be positive number\"),\n  y: z.number().nonnegative(\"y must be positive number\"),\n  width: z.number().positive(\"width must be positive number\"),\n  height: z.number().positive(\"height must be positive number\")\n});\nconst WidgetSchema = z.object({\n  name: z.string(),\n  title: z.string().optional(),\n  description: z.string().optional(),\n  component: ReactElementSchema,\n  width: z.number().positive(\"width must be positive number\").optional(),\n  height: z.number().positive(\"height must be positive number\").optional(),\n  minWidth: z.number().positive(\"minWidth must be positive number\").optional(),\n  maxWidth: z.number().positive(\"maxWidth must be positive number\").optional(),\n  minHeight: z.number().positive(\"minHeight must be positive number\").optional(),\n  maxHeight: z.number().positive(\"maxHeight must be positive number\").optional(),\n  settingsSchema: RSJFTypeSchema.optional(),\n  uiSchema: RSJFTypeUiSchema.optional()\n});\nconst GridWidgetSchema = z.object({\n  id: z.string(),\n  layout: LayoutSchema,\n  settings: z.record(z.string(), z.any())\n});\nconst CustomHomepageGridStateV1Schema = z.object({\n  version: z.literal(1),\n  pages: z.record(z.string(), z.array(GridWidgetSchema))\n});\n\nconst ResponsiveGrid = WidthProvider(Responsive);\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    responsiveGrid: {\n      \"& .react-grid-item > .react-resizable-handle:after\": {\n        position: \"absolute\",\n        content: '\"\"',\n        borderStyle: \"solid\",\n        borderWidth: \"0 0 20px 20px\",\n        borderColor: `transparent transparent ${theme.palette.primary.light} transparent`\n      }\n    },\n    contentHeaderBtn: {\n      marginLeft: theme.spacing(2)\n    },\n    widgetWrapper: {\n      overflow: \"hidden\",\n      '& > div[class*=\"MuiCard-root\"]': {\n        width: \"100%\",\n        height: \"100%\"\n      },\n      '& div[class*=\"MuiCardContent-root\"]': {\n        overflow: \"auto\"\n      },\n      \"& + .react-grid-placeholder\": {\n        backgroundColor: theme.palette.primary.light\n      },\n      \"&.edit > :active\": {\n        cursor: \"move\"\n      }\n    }\n  })\n);\nfunction useHomeStorage(defaultWidgets) {\n  const key = \"home\";\n  const storageApi = useApi(storageApiRef).forBucket(\"home.customHomepage\");\n  const setWidgets = useCallback(\n    (value) => {\n      const grid = {\n        version: 1,\n        pages: {\n          default: value\n        }\n      };\n      storageApi.set(key, JSON.stringify(grid));\n    },\n    [key, storageApi]\n  );\n  const homeSnapshot = useObservable(\n    storageApi.observe$(key),\n    storageApi.snapshot(key)\n  );\n  const widgets = useMemo(() => {\n    if (homeSnapshot.presence === \"absent\") {\n      return defaultWidgets;\n    }\n    try {\n      const grid = JSON.parse(homeSnapshot.value);\n      return CustomHomepageGridStateV1Schema.parse(grid).pages.default;\n    } catch (e) {\n      return defaultWidgets;\n    }\n  }, [homeSnapshot, defaultWidgets]);\n  return [widgets, setWidgets];\n}\nconst convertConfigToDefaultWidgets = (config, availableWidgets) => {\n  const ret = config.map((conf, i) => {\n    var _a, _b;\n    const c = LayoutConfigurationSchema.parse(conf);\n    const name = React.isValidElement(c.component) ? getComponentData(c.component, \"core.extensionName\") : c.component;\n    if (!name) {\n      return null;\n    }\n    const widget = availableWidgets.find((w) => w.name === name);\n    if (!widget) {\n      return null;\n    }\n    const widgetId = `${widget.name}__${i}${Math.random().toString(36).slice(2)}`;\n    return {\n      id: widgetId,\n      layout: {\n        i: widgetId,\n        x: c.x,\n        y: c.y,\n        w: Math.min((_a = widget.maxWidth) != null ? _a : Number.MAX_VALUE, c.width),\n        h: Math.min((_b = widget.maxHeight) != null ? _b : Number.MAX_VALUE, c.height),\n        minW: widget.minWidth,\n        maxW: widget.maxWidth,\n        minH: widget.minHeight,\n        maxH: widget.maxHeight,\n        isDraggable: false,\n        isResizable: false\n      },\n      settings: {}\n    };\n  });\n  return compact(ret);\n};\nconst availableWidgetsFilter = (elements) => {\n  return elements.selectByComponentData({\n    key: \"core.extensionName\"\n  }).getElements().flatMap((elem) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n    const config = getComponentData(elem, \"home.widget.config\");\n    return [\n      WidgetSchema.parse({\n        component: elem,\n        name: getComponentData(elem, \"core.extensionName\"),\n        title: getComponentData(elem, \"title\"),\n        description: getComponentData(elem, \"description\"),\n        settingsSchema: (_a = config == null ? void 0 : config.settings) == null ? void 0 : _a.schema,\n        uiSchema: (_b = config == null ? void 0 : config.settings) == null ? void 0 : _b.uiSchema,\n        width: (_d = (_c = config == null ? void 0 : config.layout) == null ? void 0 : _c.width) == null ? void 0 : _d.defaultColumns,\n        minWidth: (_f = (_e = config == null ? void 0 : config.layout) == null ? void 0 : _e.width) == null ? void 0 : _f.minColumns,\n        maxWidth: (_h = (_g = config == null ? void 0 : config.layout) == null ? void 0 : _g.width) == null ? void 0 : _h.maxColumns,\n        height: (_j = (_i = config == null ? void 0 : config.layout) == null ? void 0 : _i.height) == null ? void 0 : _j.defaultRows,\n        minHeight: (_l = (_k = config == null ? void 0 : config.layout) == null ? void 0 : _k.height) == null ? void 0 : _l.minRows,\n        maxHeight: (_n = (_m = config == null ? void 0 : config.layout) == null ? void 0 : _m.height) == null ? void 0 : _n.maxRows\n      })\n    ];\n  });\n};\nconst CustomHomepageGrid = (props) => {\n  var _a;\n  const styles = useStyles$1();\n  const theme = useTheme();\n  const availableWidgets = useElementFilter(\n    props.children,\n    availableWidgetsFilter,\n    [props]\n  );\n  const defaultLayout = props.config ? convertConfigToDefaultWidgets(props.config, availableWidgets) : [];\n  const [widgets, setWidgets] = useHomeStorage(defaultLayout);\n  const [addWidgetDialogOpen, setAddWidgetDialogOpen] = React.useState(false);\n  const editModeOn = widgets.find((w) => w.layout.isResizable) !== void 0;\n  const [editMode, setEditMode] = React.useState(editModeOn);\n  const getWidgetByName = (name) => {\n    return availableWidgets.find((widget) => widget.name === name);\n  };\n  const getWidgetNameFromKey = (key) => {\n    return key.split(\"__\")[0];\n  };\n  const handleAdd = (widget) => {\n    var _a2, _b, _c, _d;\n    const widgetId = `${widget.name}__${widgets.length + 1}${Math.random().toString(36).slice(2)}`;\n    setWidgets([\n      ...widgets,\n      {\n        id: widgetId,\n        layout: {\n          i: widgetId,\n          x: 0,\n          y: Math.max(...widgets.map((w) => w.layout.y + w.layout.h)) + 1,\n          w: Math.min((_a2 = widget.maxWidth) != null ? _a2 : Number.MAX_VALUE, (_b = widget.width) != null ? _b : 12),\n          h: Math.min((_c = widget.maxHeight) != null ? _c : Number.MAX_VALUE, (_d = widget.height) != null ? _d : 4),\n          minW: widget.minWidth,\n          maxW: widget.maxWidth,\n          minH: widget.minHeight,\n          maxH: widget.maxHeight,\n          isResizable: editMode,\n          isDraggable: editMode\n        },\n        settings: {}\n      }\n    ]);\n    setAddWidgetDialogOpen(false);\n  };\n  const handleRemove = (widgetId) => {\n    setWidgets(widgets.filter((w) => w.id !== widgetId));\n  };\n  const handleSettingsSave = (widgetId, widgetSettings) => {\n    const idx = widgets.findIndex((w) => w.id === widgetId);\n    if (idx >= 0) {\n      const widget = widgets[idx];\n      widget.settings = widgetSettings;\n      widgets[idx] = widget;\n      setWidgets(widgets);\n    }\n  };\n  const clearLayout = () => {\n    setWidgets([]);\n  };\n  const changeEditMode = (mode) => {\n    setEditMode(mode);\n    setWidgets(\n      widgets.map((w) => {\n        return {\n          ...w,\n          layout: { ...w.layout, isDraggable: mode, isResizable: mode }\n        };\n      })\n    );\n  };\n  const handleLayoutChange = (newLayout, _) => {\n    if (editMode) {\n      const newWidgets = newLayout.map((l) => {\n        const widget = widgets.find((w) => w.id === l.i);\n        return {\n          ...widget,\n          layout: l\n        };\n      });\n      setWidgets(newWidgets);\n    }\n  };\n  const handleRestoreDefaultConfig = () => {\n    setWidgets(defaultLayout);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(\n    CustomHomepageButtons,\n    {\n      editMode,\n      numWidgets: widgets.length,\n      clearLayout,\n      setAddWidgetDialogOpen,\n      changeEditMode,\n      defaultConfigAvailable: props.config !== void 0,\n      restoreDefault: handleRestoreDefaultConfig\n    }\n  )), /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: addWidgetDialogOpen,\n      onClose: () => setAddWidgetDialogOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(AddWidgetDialog, { widgets: availableWidgets, handleAdd })\n  ), !editMode && widgets.length === 0 && /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", align: \"center\" }, \"No widgets added. Start by clicking the 'Add widget' button.\"), /* @__PURE__ */ React.createElement(\n    ResponsiveGrid,\n    {\n      className: styles.responsiveGrid,\n      measureBeforeMount: true,\n      compactType: props.compactType,\n      style: props.style,\n      allowOverlap: props.allowOverlap,\n      preventCollision: props.preventCollision,\n      draggableCancel: \".overlayGridItem,.widgetSettingsDialog\",\n      containerPadding: props.containerPadding,\n      margin: props.containerMargin,\n      breakpoints: props.breakpoints ? props.breakpoints : theme.breakpoints.values,\n      cols: props.cols ? props.cols : { xl: 12, lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 },\n      rowHeight: (_a = props.rowHeight) != null ? _a : 60,\n      onLayoutChange: handleLayoutChange,\n      layouts: { xl: widgets.map((w) => w.layout) }\n    },\n    widgets.map((w) => {\n      var _a2;\n      const l = w.layout;\n      const widgetName = getWidgetNameFromKey(l.i);\n      const widget = getWidgetByName(widgetName);\n      if (!widget || !widget.component) {\n        return null;\n      }\n      const widgetProps = {\n        ...widget.component.props,\n        ...(_a2 = w.settings) != null ? _a2 : {}\n      };\n      return /* @__PURE__ */ React.createElement(\n        \"div\",\n        {\n          key: l.i,\n          className: `${styles.widgetWrapper} ${editMode && \"edit\"}`\n        },\n        /* @__PURE__ */ React.createElement(ErrorBoundary, null, /* @__PURE__ */ React.createElement(widget.component.type, { ...widgetProps })),\n        editMode && /* @__PURE__ */ React.createElement(\n          WidgetSettingsOverlay,\n          {\n            id: l.i,\n            widget,\n            handleRemove,\n            handleSettingsSave,\n            settings: w.settings\n          }\n        )\n      );\n    })\n  ));\n};\n\nconst TemplateBackstageLogo = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      className: props.classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 2079.95 456.05\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        className: props.classes.path,\n        d: \"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z\"\n      }\n    )\n  );\n};\n\nconst useStyles = makeStyles({\n  svg: {\n    width: \"auto\",\n    height: 28\n  },\n  path: {\n    fill: \"#7df3e1\"\n  }\n});\nconst TemplateBackstageLogoIcon = () => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      className: classes.svg,\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 337.46 428.5\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        className: classes.path,\n        d: \"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z\"\n      }\n    )\n  );\n};\n\nconst createCardExtension = createCardExtension$1;\nconst SettingsModal = SettingsModal$1;\n\nexport { ComponentAccordion, ComponentTab, ComponentTabs, CustomHomepageGrid, HeaderWorldClock, HomePageCompanyLogo, HomePageRandomJoke, HomePageStarredEntities, HomePageToolkit, HomepageCompositionRoot, SettingsModal, TemplateBackstageLogo, TemplateBackstageLogoIcon, WelcomeTitle, createCardExtension, homePlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { RESOURCE_TYPE_CATALOG_ENTITY } from '@backstage/plugin-catalog-common/alpha';\nimport { createPermission } from '@backstage/plugin-permission-common';\n\nconst jenkinsExecutePermission = createPermission({\n  name: \"jenkins.execute\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst jenkinsPermissions = [jenkinsExecutePermission];\n\nexport { jenkinsExecutePermission, jenkinsPermissions };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useApi, errorApiRef, useRouteRef, alertApiRef, useRouteRefParams } from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport { makeStyles, LinearProgress, Box, Typography, Tooltip, IconButton, TableContainer, Paper, Table as Table$1, TableBody, TableRow, TableCell } from '@material-ui/core';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime, Duration } from 'luxon';\nimport React, { useState, useRef, useCallback } from 'react';\nimport { StatusWarning, StatusAborted, StatusOK, StatusError, StatusRunning, StatusPending, InfoCard, StructuredMetadataTable, Link, WarningPanel, Table, Progress, Content, Breadcrumbs, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getCompoundEntityRef } from '@backstage/catalog-model';\nimport { Routes, Route } from 'react-router-dom';\nimport { useEntityPermission } from '@backstage/plugin-catalog-react/alpha';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport JenkinsLogo from './assets/JenkinsLogo.svg';\nimport { jenkinsExecutePermission } from '@backstage/plugin-jenkins-common';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst jenkinsApiRef = createApiRef({\n  id: \"plugin.jenkins.service2\"\n});\nclass JenkinsClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async getProjects(options) {\n    var _a;\n    const { entity, filter } = options;\n    const url = new URL(\n      `${await this.discoveryApi.getBaseUrl(\n        \"jenkins\"\n      )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n        entity.kind\n      )}/${encodeURIComponent(entity.name)}/projects`\n    );\n    if (filter.branch) {\n      url.searchParams.append(\"branch\", filter.branch);\n    }\n    const idToken = await this.getToken();\n    const response = await fetch(url.href, {\n      method: \"GET\",\n      headers: {\n        ...idToken && { Authorization: `Bearer ${idToken}` }\n      }\n    });\n    return ((_a = (await response.json()).projects) == null ? void 0 : _a.map((p) => ({\n      ...p,\n      onRestartClick: () => {\n        return this.retry({\n          entity,\n          jobFullName: p.fullName,\n          buildNumber: String(p.lastBuild.number)\n        });\n      }\n    }))) || [];\n  }\n  async getBuild(options) {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"jenkins\"\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName\n    )}/${encodeURIComponent(buildNumber)}`;\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        ...idToken && { Authorization: `Bearer ${idToken}` }\n      }\n    });\n    return (await response.json()).build;\n  }\n  async retry(options) {\n    const { entity, jobFullName, buildNumber } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"jenkins\"\n    )}/v1/entity/${encodeURIComponent(entity.namespace)}/${encodeURIComponent(\n      entity.kind\n    )}/${encodeURIComponent(entity.name)}/job/${encodeURIComponent(\n      jobFullName\n    )}/${encodeURIComponent(buildNumber)}:rebuild`;\n    const idToken = await this.getToken();\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        ...idToken && { Authorization: `Bearer ${idToken}` }\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async getToken() {\n    const { token } = await this.identityApi.getCredentials();\n    return token;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"jenkins\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"jenkins/builds\",\n  path: \"/builds/:jobFullName/:buildNumber\",\n  parent: rootRouteRef\n});\nconst jenkinsPlugin = createPlugin({\n  id: \"jenkins\",\n  apis: [\n    createApiFactory({\n      api: jenkinsApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => new JenkinsClient({ discoveryApi, identityApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityJenkinsContent = jenkinsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityJenkinsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityLatestJenkinsRunCard = jenkinsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestJenkinsRunCard\",\n    component: {\n      lazy: () => import('./esm/index-d9de4cb4.esm.js').then((m) => m.LatestRunCard)\n    }\n  })\n);\n\nconst JenkinsRunStatus = ({\n  status\n}) => {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n    case \"scheduled\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Queued\");\n    case \"running\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusRunning, null), \" In progress\");\n    case \"unstable\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusWarning, null), \" Unstable\");\n    case \"failure\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusError, null), \" Failed\");\n    case \"success\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusOK, null), \" Completed\");\n    case \"aborted\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusAborted, null), \" Aborted\");\n    default:\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusWarning, null), \" \", status);\n  }\n};\n\nvar ErrorType = /* @__PURE__ */ ((ErrorType2) => {\n  ErrorType2[ErrorType2[\"CONNECTION_ERROR\"] = 0] = \"CONNECTION_ERROR\";\n  ErrorType2[ErrorType2[\"NOT_FOUND\"] = 1] = \"NOT_FOUND\";\n  return ErrorType2;\n})(ErrorType || {});\nfunction useBuilds({ branch } = {}) {\n  const { entity } = useEntity();\n  const entityName = getCompoundEntityRef(entity);\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(5);\n  const [error, setError] = useState();\n  const restartBuild = async (jobFullName, buildNumber) => {\n    try {\n      await api.retry({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n  const {\n    loading,\n    value: projects,\n    retry\n  } = useAsyncRetry(async () => {\n    try {\n      const build = await api.getProjects({\n        entity: getCompoundEntityRef(entity),\n        filter: { branch }\n      });\n      setTotal(build.length);\n      return build;\n    } catch (e) {\n      const errorType = e.notFound ? 1 /* NOT_FOUND */ : 0 /* CONNECTION_ERROR */;\n      setError({ message: e.message, errorType });\n      throw e;\n    }\n  }, [api, errorApi, entity, branch]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      projects,\n      total,\n      error\n    },\n    {\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry\n      // fetch data again\n    }\n  ];\n}\n\nconst useStyles$1 = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = ({\n  loading,\n  latestRun\n}) => {\n  var _a;\n  const classes = useStyles$1();\n  if (loading || !latestRun)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  const displayDate = DateTime.fromMillis(\n    latestRun.lastBuild.timestamp\n  ).toRelative();\n  const displayDuration = (latestRun.lastBuild.building ? \"Running for \" : \"\") + ((_a = DateTime.local().minus(Duration.fromMillis(latestRun.lastBuild.duration)).toRelative({ locale: \"en\" })) == null ? void 0 : _a.replace(\" ago\", \"\"));\n  return /* @__PURE__ */ React.createElement(\n    StructuredMetadataTable,\n    {\n      metadata: {\n        status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(JenkinsRunStatus, { status: latestRun.lastBuild.status })),\n        build: latestRun.fullDisplayName,\n        \"latest run\": displayDate,\n        duration: displayDuration,\n        link: /* @__PURE__ */ React.createElement(Link, { to: latestRun.lastBuild.url }, \"See more on Jenkins\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon }))\n      }\n    }\n  );\n};\nconst JenkinsApiErrorPanel = (props) => {\n  const { message, errorType } = props;\n  let title = void 0;\n  if (errorType === ErrorType.CONNECTION_ERROR) {\n    title = \"Can't connect to Jenkins\";\n  } else if (errorType === ErrorType.NOT_FOUND) {\n    title = \"Can't find Jenkins project\";\n  }\n  return /* @__PURE__ */ React.createElement(WarningPanel, { severity: \"error\", title, message });\n};\nconst LatestRunCard = (props) => {\n  const { branch = \"master\", variant } = props;\n  const [{ projects, loading, error }] = useBuilds({ branch });\n  const latestRun = projects == null ? void 0 : projects[0];\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: `Latest ${branch} build`, variant }, !error ? /* @__PURE__ */ React.createElement(\n    WidgetContent,\n    {\n      loading,\n      branch,\n      latestRun\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    JenkinsApiErrorPanel,\n    {\n      message: error.message,\n      errorType: error.errorType\n    }\n  ));\n};\n\nconst JENKINS_ANNOTATION = \"jenkins.io/job-full-name\";\nconst LEGACY_JENKINS_ANNOTATION = \"jenkins.io/github-folder\";\n\nconst FailCount = ({ count }) => {\n  if (count !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, count, \" failed\");\n  }\n  return null;\n};\nconst SkippedCount = ({ count }) => {\n  if (count !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, count, \" skipped\");\n  }\n  return null;\n};\nconst FailSkippedWidget = ({\n  skipped,\n  failed\n}) => {\n  if (skipped === 0 && failed === 0) {\n    return null;\n  }\n  if (skipped !== 0 && failed !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \" \", \"(\", /* @__PURE__ */ React.createElement(FailCount, { count: failed }), \", \", /* @__PURE__ */ React.createElement(SkippedCount, { count: skipped }), \")\");\n  }\n  if (failed !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \" \", \"(\", /* @__PURE__ */ React.createElement(FailCount, { count: failed }), \")\");\n  }\n  if (skipped !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \" \", \"(\", /* @__PURE__ */ React.createElement(SkippedCount, { count: skipped }), \")\");\n  }\n  return null;\n};\nconst generatedColumns = [\n  {\n    title: \"Timestamp\",\n    defaultSort: \"desc\",\n    hidden: true,\n    field: \"lastBuild.timestamp\"\n  },\n  {\n    title: \"Build\",\n    field: \"fullName\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        var _a, _b;\n        const routeLink = useRouteRef(buildRouteRef);\n        if (!row.fullName || !((_a = row.lastBuild) == null ? void 0 : _a.number)) {\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, row.fullName || row.fullDisplayName || row.displayName || \"Unknown\");\n        }\n        return /* @__PURE__ */ React.createElement(\n          Link,\n          {\n            to: routeLink({\n              jobFullName: encodeURIComponent(row.fullName),\n              buildNumber: String((_b = row.lastBuild) == null ? void 0 : _b.number)\n            })\n          },\n          row.fullDisplayName\n        );\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    field: \"lastBuild.source.branchName\",\n    render: (row) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, /* @__PURE__ */ React.createElement(Link, { to: (_c = (_b = (_a = row.lastBuild) == null ? void 0 : _a.source) == null ? void 0 : _b.url) != null ? _c : \"\" }, (_e = (_d = row.lastBuild) == null ? void 0 : _d.source) == null ? void 0 : _e.branchName)), /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, (_h = (_g = (_f = row.lastBuild) == null ? void 0 : _f.source) == null ? void 0 : _g.commit) == null ? void 0 : _h.hash));\n    }\n  },\n  {\n    title: \"Status\",\n    field: \"status\",\n    render: (row) => {\n      return /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(JenkinsRunStatus, { status: row.status }));\n    }\n  },\n  {\n    title: \"Tests\",\n    sorting: false,\n    render: (row) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, ((_a = row.lastBuild) == null ? void 0 : _a.tests) && /* @__PURE__ */ React.createElement(Link, { to: (_c = (_b = row.lastBuild) == null ? void 0 : _b.tests.testUrl) != null ? _c : \"\" }, (_d = row.lastBuild) == null ? void 0 : _d.tests.passed, \" / \", (_e = row.lastBuild) == null ? void 0 : _e.tests.total, \" \", \"passed\", /* @__PURE__ */ React.createElement(\n        FailSkippedWidget,\n        {\n          skipped: (_f = row.lastBuild) == null ? void 0 : _f.tests.skipped,\n          failed: (_g = row.lastBuild) == null ? void 0 : _g.tests.failed\n        }\n      )), !((_h = row.lastBuild) == null ? void 0 : _h.tests) && \"n/a\"));\n    }\n  },\n  {\n    title: \"Actions\",\n    sorting: false,\n    render: (row) => {\n      const ActionWrapper = () => {\n        var _a;\n        const [isLoadingRebuild, setIsLoadingRebuild] = useState(false);\n        const { allowed, loading } = useEntityPermission(\n          jenkinsExecutePermission\n        );\n        const alertApi = useApi(alertApiRef);\n        const onRebuild = async () => {\n          if (row.onRestartClick) {\n            setIsLoadingRebuild(true);\n            try {\n              await row.onRestartClick();\n              alertApi.post({\n                message: \"Jenkins re-build has successfully executed\",\n                severity: \"success\",\n                display: \"transient\"\n              });\n            } catch (e) {\n              alertApi.post({\n                message: `Jenkins re-build has failed. Error: ${e.message}`,\n                severity: \"error\"\n              });\n            } finally {\n              setIsLoadingRebuild(false);\n            }\n          }\n        };\n        return /* @__PURE__ */ React.createElement(\"div\", { style: { width: \"98px\" } }, ((_a = row.lastBuild) == null ? void 0 : _a.url) && /* @__PURE__ */ React.createElement(Tooltip, { title: \"View build\" }, /* @__PURE__ */ React.createElement(IconButton, { href: row.lastBuild.url, target: \"_blank\" }, /* @__PURE__ */ React.createElement(VisibilityIcon, null))), isLoadingRebuild && /* @__PURE__ */ React.createElement(Progress, null), !isLoadingRebuild && /* @__PURE__ */ React.createElement(Tooltip, { title: \"Rerun build\" }, /* @__PURE__ */ React.createElement(IconButton, { onClick: onRebuild, disabled: loading || !allowed }, /* @__PURE__ */ React.createElement(RetryIcon, null))));\n      };\n      return /* @__PURE__ */ React.createElement(ActionWrapper, null);\n    },\n    width: \"10%\"\n  }\n];\nconst CITableView = ({\n  loading,\n  pageSize,\n  page,\n  retry,\n  projects,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  const projectsInPage = projects == null ? void 0 : projects.slice(\n    page * pageSize,\n    Math.min(projects.length, (page + 1) * pageSize)\n  );\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      options: { paging: true, pageSize, padding: \"dense\" },\n      totalCount: total,\n      page,\n      actions: [\n        {\n          icon: () => /* @__PURE__ */ React.createElement(RetryIcon, null),\n          tooltip: \"Refresh Data\",\n          isFreeAction: true,\n          onClick: () => retry()\n        }\n      ],\n      data: projectsInPage != null ? projectsInPage : [],\n      onPageChange: onChangePage,\n      onRowsPerPageChange: onChangePageSize,\n      title: /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(\"img\", { src: JenkinsLogo, alt: \"Jenkins logo\", height: \"50px\" }), /* @__PURE__ */ React.createElement(Box, { mr: 2 }), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, \"Projects\")),\n      columns: generatedColumns\n    }\n  );\n};\nconst CITable = () => {\n  const [tableProps, { setPage, retry, setPageSize }] = useBuilds();\n  return /* @__PURE__ */ React.createElement(\n    CITableView,\n    {\n      ...tableProps,\n      retry,\n      onChangePageSize: setPageSize,\n      onChangePage: setPage\n    }\n  );\n};\n\nconst useAsyncPolling = (pollingFn, interval) => {\n  const isPolling = useRef(false);\n  const startPolling = async () => {\n    if (isPolling.current === true)\n      return;\n    isPolling.current = true;\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise((resolve) => setTimeout(resolve, interval));\n    }\n  };\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n\nconst INTERVAL_AMOUNT = 1500;\nfunction useBuildWithSteps({\n  jobFullName,\n  buildNumber\n}) {\n  const api = useApi(jenkinsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const { entity } = useEntity();\n  const getBuildWithSteps = useCallback(async () => {\n    try {\n      const entityName = await getCompoundEntityRef(entity);\n      return api.getBuild({ entity: entityName, jobFullName, buildNumber });\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [buildNumber, jobFullName, entity, api, errorApi]);\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps]\n  );\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT\n  );\n  return [\n    { loading, value, retry },\n    {\n      getBuildWithSteps,\n      startPolling,\n      stopPolling\n    }\n  ];\n}\n\nconst useStyles = makeStyles$1((theme) => ({\n  root: {\n    maxWidth: 720\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst BuildWithStepsView = () => {\n  var _a, _b, _c, _d, _e, _f;\n  const { jobFullName, buildNumber } = useRouteRefParams(buildRouteRef);\n  const classes = useStyles();\n  const [{ value }] = useBuildWithSteps({ jobFullName, buildNumber });\n  return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(Breadcrumbs, { \"aria-label\": \"breadcrumb\" }, /* @__PURE__ */ React.createElement(Link, { to: \"../../..\" }, \"Projects\"), /* @__PURE__ */ React.createElement(Typography, null, \"Run\")), /* @__PURE__ */ React.createElement(Box, { m: 2 }), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper, className: classes.table }, /* @__PURE__ */ React.createElement(Table$1, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_a = value == null ? void 0 : value.source) == null ? void 0 : _a.branchName)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_b = value == null ? void 0 : value.source) == null ? void 0 : _b.displayName)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_d = (_c = value == null ? void 0 : value.source) == null ? void 0 : _c.commit) == null ? void 0 : _d.hash)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(JenkinsRunStatus, { status: value == null ? void 0 : value.status }))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, (_e = value == null ? void 0 : value.source) == null ? void 0 : _e.author)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"Jenkins\")), /* @__PURE__ */ React.createElement(TableCell, null, (value == null ? void 0 : value.url) && /* @__PURE__ */ React.createElement(Link, { to: value.url }, \"View on Jenkins\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, { noWrap: true }, \"GitHub\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_f = value == null ? void 0 : value.source) == null ? void 0 : _f.url) && /* @__PURE__ */ React.createElement(Link, { to: value.source.url }, \"View on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, { className: classes.externalLinkIcon }))))))));\n};\nconst Page = () => /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(BuildWithStepsView, null));\n\nconst isJenkinsAvailable = (entity) => {\n  var _a, _b;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[JENKINS_ANNOTATION]) || Boolean((_b = entity.metadata.annotations) == null ? void 0 : _b[LEGACY_JENKINS_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isJenkinsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: JENKINS_ANNOTATION });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(CITable, null) }), /* @__PURE__ */ React.createElement(Route, { path: `/${buildRouteRef.path}`, element: /* @__PURE__ */ React.createElement(Page, null) }));\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isJenkinsAvailable: isJenkinsAvailable,\n  Router: Router\n});\n\nexport { EntityJenkinsContent, EntityLatestJenkinsRunCard, JENKINS_ANNOTATION, JenkinsClient, LEGACY_JENKINS_ANNOTATION, LatestRunCard, Router, isJenkinsAvailable, isJenkinsAvailable as isPluginApplicableToEntity, jenkinsApiRef, jenkinsPlugin, jenkinsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createExternalRouteRef, createPlugin, createComponentExtension, useApi, useApp, alertApiRef, useRouteRef, identityApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, RELATION_PARENT_OF, RELATION_CHILD_OF, ANNOTATION_LOCATION, ANNOTATION_EDIT_URL, RELATION_MEMBER_OF, parseEntityRef, getCompoundEntityRef } from '@backstage/catalog-model';\nimport { getEntityRelations, useEntity, catalogApiRef, entityRouteParams, EntityRefLinks, humanizeEntityRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, createStyles, Grid, Switch, Box, Typography, Divider, ListItem, ListItemIcon, ListItemText, IconButton, List, Tooltip, ListItemSecondaryAction } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React, { useState, useCallback } from 'react';\nimport { generatePath } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Progress, ResponseErrorPanel, InfoCard, Avatar, Link, OverflowTooltip, SidebarItem, SidebarSubmenu, SidebarSubmenuItem } from '@backstage/core-components';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport Alert from '@material-ui/lab/Alert';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport EditIcon from '@material-ui/icons/Edit';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport PersonIcon from '@material-ui/icons/Person';\nimport pluralize from 'pluralize';\nimport limiterFactory from 'p-limit';\nimport qs from 'qs';\n\nconst catalogIndexRouteRef = createExternalRouteRef({\n  id: \"catalog-index\"\n});\n\nconst orgPlugin = createPlugin({\n  id: \"org\",\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef\n  }\n});\nconst EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityGroupProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-96770519.esm.js').then((m) => m.GroupProfileCard)\n    }\n  })\n);\nconst EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityMembersListCard\",\n    component: {\n      lazy: () => import('./esm/index-96770519.esm.js').then((m) => m.MembersListCard)\n    }\n  })\n);\nconst EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityOwnershipCard\",\n    component: {\n      lazy: () => import('./esm/index-96770519.esm.js').then((m) => m.OwnershipCard)\n    }\n  })\n);\nconst EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityUserProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-96770519.esm.js').then((m) => m.UserProfileCard)\n    }\n  })\n);\n\nconst getMembersFromGroups = async (groups, catalogApi) => {\n  const membersList = groups.length === 0 ? { items: [] } : await catalogApi.getEntities({\n    filter: {\n      kind: \"User\",\n      \"relations.memberof\": groups.map(\n        (group) => stringifyEntityRef({\n          kind: \"group\",\n          namespace: group.namespace.toLocaleLowerCase(\"en-US\"),\n          name: group.name.toLocaleLowerCase(\"en-US\")\n        })\n      )\n    }\n  });\n  return membersList.items;\n};\nconst getDescendantGroupsFromGroup = async (group, catalogApi) => {\n  var _a;\n  const alreadyQueuedOrExpandedGroupNames = /* @__PURE__ */ new Map();\n  const groupRef = {\n    kind: group.kind,\n    namespace: (_a = group.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE,\n    name: group.metadata.name\n  };\n  const groupQueue = [groupRef];\n  const resultantGroupRefs = [];\n  while (groupQueue.length > 0) {\n    const activeGroupRef = groupQueue.shift();\n    const activeGroup = await catalogApi.getEntityByRef(activeGroupRef);\n    alreadyQueuedOrExpandedGroupNames.set(\n      stringifyEntityRef(activeGroupRef),\n      true\n    );\n    const childGroups = getEntityRelations(activeGroup, RELATION_PARENT_OF, {\n      kind: \"Group\"\n    }).filter(\n      (currentGroup) => !alreadyQueuedOrExpandedGroupNames.has(\n        stringifyEntityRef(currentGroup)\n      )\n    );\n    childGroups.forEach(\n      (childGroup) => alreadyQueuedOrExpandedGroupNames.set(\n        stringifyEntityRef(childGroup),\n        true\n      )\n    );\n    groupQueue.push(...childGroups);\n    resultantGroupRefs.push(...childGroups);\n  }\n  return resultantGroupRefs;\n};\nconst getAllDesendantMembersForGroupEntity = async (groupEntity, catalogApi) => getMembersFromGroups(\n  await getDescendantGroupsFromGroup(groupEntity, catalogApi),\n  catalogApi\n);\nconst removeDuplicateEntitiesFrom = (entityArray) => {\n  const seenEntities = /* @__PURE__ */ new Map();\n  return entityArray.filter((entity) => {\n    const stringifiedEntity = stringifyEntityRef(entity);\n    const isDuplicate = seenEntities.has(stringifiedEntity);\n    seenEntities.set(stringifiedEntity, true);\n    return !isDuplicate;\n  });\n};\n\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      overflow: \"visible\",\n      position: \"relative\",\n      margin: theme.spacing(4, 1, 1),\n      flex: \"1\",\n      minWidth: \"0px\"\n    }\n  })\n);\nconst MemberComponent = (props) => {\n  var _a;\n  const classes = useStyles$2();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = props.member;\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : metaName;\n  return /* @__PURE__ */ React.createElement(Grid, { item: true, container: true, xs: 12, sm: 6, md: 4, xl: 2 }, /* @__PURE__ */ React.createElement(Box, { className: classes.card }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      display: \"flex\",\n      flexDirection: \"column\",\n      m: 3,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    /* @__PURE__ */ React.createElement(\n      Avatar,\n      {\n        displayName,\n        picture: profile == null ? void 0 : profile.picture,\n        customStyles: {\n          position: \"absolute\",\n          top: \"-2rem\"\n        }\n      }\n    ),\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        pt: 2,\n        sx: {\n          width: \"100%\"\n        },\n        textAlign: \"center\"\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          \"data-testid\": \"user-link\",\n          to: generatePath(\n            `/catalog/:namespace/user/${metaName}`,\n            entityRouteParams(props.member)\n          )\n        },\n        /* @__PURE__ */ React.createElement(OverflowTooltip, { text: displayName })\n      )),\n      (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(Link, { to: `mailto:${profile.email}` }, /* @__PURE__ */ React.createElement(OverflowTooltip, { text: profile.email })),\n      description && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, description)\n    )\n  )));\n};\nconst MembersListCard = (props) => {\n  var _a;\n  const {\n    memberDisplayTitle = \"Members\",\n    pageSize = 50,\n    showAggregateMembersToggle\n  } = props;\n  const { entity: groupEntity } = useEntity();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile }\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : groupName;\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_, pageIndex) => {\n    setPage(pageIndex);\n  };\n  const [showAggregateMembers, setShowAggregateMembers] = useState(false);\n  const { loading: loadingDescendantMembers, value: descendantMembers } = useAsync(async () => {\n    if (!showAggregateMembersToggle) {\n      return [];\n    }\n    return await getAllDesendantMembersForGroupEntity(\n      groupEntity,\n      catalogApi\n    );\n  }, [catalogApi, groupEntity, showAggregateMembersToggle]);\n  const {\n    loading,\n    error,\n    value: directMembers\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: \"User\",\n        \"relations.memberof\": [\n          stringifyEntityRef({\n            kind: \"group\",\n            namespace: groupNamespace.toLocaleLowerCase(\"en-US\"),\n            name: groupName.toLocaleLowerCase(\"en-US\")\n          })\n        ]\n      }\n    });\n    return membersList.items;\n  }, [catalogApi, groupEntity]);\n  const members = removeDuplicateEntitiesFrom(\n    [\n      ...directMembers != null ? directMembers : [],\n      ...descendantMembers && showAggregateMembers ? descendantMembers : []\n    ].sort(\n      (a, b) => stringifyEntityRef(a).localeCompare(stringifyEntityRef(b))\n    )\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  const nbPages = Math.ceil(((members == null ? void 0 : members.length) || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? \"\" : `, page ${page} of ${nbPages}`;\n  const pagination = /* @__PURE__ */ React.createElement(\n    Pagination,\n    {\n      count: nbPages,\n      page,\n      onChange: pageChange,\n      showFirstButton: true,\n      showLastButton: true\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: `${memberDisplayTitle} (${(members == null ? void 0 : members.length) || 0}${paginationLabel})`,\n      subheader: `of ${displayName}`,\n      ...nbPages <= 1 ? {} : { actions: pagination }\n    },\n    showAggregateMembersToggle && /* @__PURE__ */ React.createElement(React.Fragment, null, \"Direct Members\", /* @__PURE__ */ React.createElement(\n      Switch,\n      {\n        color: \"primary\",\n        checked: showAggregateMembers,\n        onChange: () => {\n          setShowAggregateMembers(!showAggregateMembers);\n        },\n        inputProps: { \"aria-label\": \"Users Type Switch\" }\n      }\n    ), \"Aggregated Members\"),\n    showAggregateMembers && loadingDescendantMembers ? /* @__PURE__ */ React.createElement(Progress, null) : /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3 }, members && members.length > 0 ? members.slice(pageSize * (page - 1), pageSize * page).map((member) => /* @__PURE__ */ React.createElement(MemberComponent, { member, key: member.metadata.uid })) : /* @__PURE__ */ React.createElement(Box, { p: 2 }, /* @__PURE__ */ React.createElement(Typography, null, \"This group has no \", memberDisplayTitle.toLocaleLowerCase(), \".\")))\n  ));\n};\n\nconst WebLink = ({\n  href,\n  Icon,\n  text\n}) => /* @__PURE__ */ React.createElement(ListItem, { key: href }, /* @__PURE__ */ React.createElement(ListItemIcon, null, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null)), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, { to: href }, text)));\nconst LinksGroup = ({ links }) => {\n  const app = useApp();\n  const iconResolver = (key) => {\n    var _a;\n    return key ? (_a = app.getSystemIcon(key)) != null ? _a : LanguageIcon : LanguageIcon;\n  };\n  if (links === void 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, null), links.map((link) => {\n    return /* @__PURE__ */ React.createElement(\n      WebLink,\n      {\n        key: link.url,\n        href: link.url,\n        text: link.title,\n        Icon: iconResolver(link.icon)\n      }\n    );\n  }));\n};\n\nconst CardTitle$1 = (props) => /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(GroupIcon, { fontSize: \"inherit\" }), /* @__PURE__ */ React.createElement(Box, { ml: 1 }, props.title));\nconst GroupProfileCard = (props) => {\n  var _a, _b, _c;\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity();\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({\n      message: \"Refresh scheduled\",\n      severity: \"info\",\n      display: \"transient\"\n    });\n  }, [catalogApi, alertApi, group]);\n  if (!group) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"Group not found\");\n  }\n  const {\n    metadata: { name, description, title, annotations, links },\n    spec: { profile }\n  } = group;\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: \"Group\"\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: \"group\"\n  });\n  const entityLocation = annotations == null ? void 0 : annotations[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const entityMetadataEditUrl = (_a = group.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const displayName = (_c = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : title) != null ? _c : name;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : \"#\";\n  const infoCardAction = entityMetadataEditUrl ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"aria-label\": \"Edit\",\n      title: \"Edit Metadata\",\n      component: Link,\n      to: entityMetadataEditUrl\n    },\n    /* @__PURE__ */ React.createElement(EditIcon, null)\n  ) : /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"Edit\", disabled: true, title: \"Edit Metadata\" }, /* @__PURE__ */ React.createElement(EditIcon, null));\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: /* @__PURE__ */ React.createElement(CardTitle$1, { title: displayName }),\n      subheader: description,\n      variant: props.variant,\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"Refresh\",\n          title: \"Schedule entity refresh\",\n          onClick: refreshEntity\n        },\n        /* @__PURE__ */ React.createElement(CachedIcon, null)\n      ), infoCardAction)\n    },\n    /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1 }, /* @__PURE__ */ React.createElement(Avatar, { displayName, picture: profile == null ? void 0 : profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, md: 10, xl: 11 }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Email\" }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: /* @__PURE__ */ React.createElement(Link, { to: emailHref }, profile.email),\n        secondary: \"Email\"\n      }\n    )), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Parent Group\" }, /* @__PURE__ */ React.createElement(AccountTreeIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: parentRelations.length ? /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: parentRelations,\n            defaultKind: \"Group\"\n          }\n        ) : \"N/A\",\n        secondary: \"Parent Group\"\n      }\n    )), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Child Groups\" }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        primary: childRelations.length ? /* @__PURE__ */ React.createElement(\n          EntityRefLinks,\n          {\n            entityRefs: childRelations,\n            defaultKind: \"Group\"\n          }\n        ) : \"N/A\",\n        secondary: \"Child Groups\"\n      }\n    )), (props == null ? void 0 : props.showLinks) && /* @__PURE__ */ React.createElement(LinksGroup, { links }))))\n  );\n};\n\nconst CardTitle = (props) => props.title ? /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\" }, /* @__PURE__ */ React.createElement(PersonIcon, { fontSize: \"inherit\" }), /* @__PURE__ */ React.createElement(Box, { ml: 1 }, props.title)) : null;\nconst UserProfileCard = (props) => {\n  var _a, _b;\n  const { entity: user } = useEntity();\n  if (!user) {\n    return /* @__PURE__ */ React.createElement(Alert, { severity: \"error\" }, \"User not found\");\n  }\n  const entityMetadataEditUrl = (_a = user.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const {\n    metadata: { name: metaName, description, links },\n    spec: { profile }\n  } = user;\n  const displayName = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : metaName;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : void 0;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: \"Group\"\n  });\n  return /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title: /* @__PURE__ */ React.createElement(CardTitle, { title: displayName }),\n      subheader: description,\n      variant: props.variant,\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, entityMetadataEditUrl && /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          \"aria-label\": \"Edit\",\n          title: \"Edit Metadata\",\n          component: Link,\n          to: entityMetadataEditUrl\n        },\n        /* @__PURE__ */ React.createElement(EditIcon, null)\n      ))\n    },\n    /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3, alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 2, xl: 1 }, /* @__PURE__ */ React.createElement(Avatar, { displayName, picture: profile == null ? void 0 : profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, md: 10, xl: 11 }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Email\" }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, { to: emailHref != null ? emailHref : \"\" }, profile.email))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Member of\" }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(\n      EntityRefLinks,\n      {\n        entityRefs: memberOfRelations,\n        defaultKind: \"Group\"\n      }\n    ))), (props == null ? void 0 : props.showLinks) && /* @__PURE__ */ React.createElement(LinksGroup, { links }))))\n  );\n};\n\nconst limiter = limiterFactory(10);\nconst getQueryParams = (ownersEntityRef, selectedEntity) => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map(\n    (owner) => humanizeEntityRef(parseEntityRef(owner), { defaultKind: \"group\" })\n  );\n  const filters = {\n    kind: kind.toLocaleLowerCase(\"en-US\"),\n    type,\n    owners,\n    user: \"all\"\n  };\n  return qs.stringify({ filters }, { arrayFormat: \"repeat\" });\n};\nconst getOwnersEntityRef = (owner) => {\n  let owners = [stringifyEntityRef(owner)];\n  if (owner.kind === \"User\") {\n    const ownerGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n      kind: \"Group\"\n    });\n    const ownerGroupsName = ownerGroups.map(\n      (ownerGroup) => stringifyEntityRef({\n        kind: ownerGroup.kind,\n        namespace: ownerGroup.namespace,\n        name: ownerGroup.name\n      })\n    );\n    owners = [...owners, ...ownerGroupsName];\n  }\n  return owners;\n};\nconst getAggregatedOwnersEntityRef = async (parentGroup, catalogApi) => {\n  const requestedEntities = [];\n  const outstandingEntities = /* @__PURE__ */ new Map();\n  const processedEntities = /* @__PURE__ */ new Set();\n  requestedEntities.push(parentGroup);\n  let currentEntity = parentGroup;\n  while (requestedEntities.length > 0) {\n    const childRelations = getEntityRelations(\n      currentEntity,\n      RELATION_PARENT_OF,\n      {\n        kind: \"Group\"\n      }\n    );\n    await Promise.all(\n      childRelations.map(\n        (childGroup) => limiter(async () => {\n          const promise = catalogApi.getEntityByRef(childGroup);\n          outstandingEntities.set(childGroup.name, promise);\n          try {\n            const processedEntity = await promise;\n            if (processedEntity) {\n              requestedEntities.push(processedEntity);\n            }\n          } finally {\n            outstandingEntities.delete(childGroup.name);\n          }\n        })\n      )\n    );\n    requestedEntities.shift();\n    processedEntities.add(\n      stringifyEntityRef({\n        kind: currentEntity.kind,\n        namespace: currentEntity.metadata.namespace,\n        name: currentEntity.metadata.name\n      })\n    );\n    currentEntity = requestedEntities[0];\n  }\n  return Array.from(processedEntities);\n};\nfunction useGetEntities(entity, relationsType, isGroup, entityFilterKind, entityLimit = 6) {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind != null ? entityFilterKind : [\"Component\", \"API\", \"System\"];\n  const {\n    loading,\n    error,\n    value: componentsWithCounters\n  } = useAsync(async () => {\n    const owners = relationsType === \"aggregated\" && isGroup ? await getAggregatedOwnersEntityRef(entity, catalogApi) : getOwnersEntityRef(entity);\n    const ownedEntitiesList = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: kinds,\n          \"relations.ownedBy\": owners\n        }\n      ],\n      fields: [\n        \"kind\",\n        \"metadata.name\",\n        \"metadata.namespace\",\n        \"spec.type\",\n        \"relations\"\n      ]\n    });\n    const counts = ownedEntitiesList.items.reduce(\n      (acc, ownedEntity) => {\n        var _a, _b;\n        const match = acc.find(\n          (x) => {\n            var _a2;\n            return x.kind === ownedEntity.kind && x.type === ((_a2 = ownedEntity.spec) == null ? void 0 : _a2.type);\n          }\n        );\n        if (match) {\n          match.count += 1;\n        } else {\n          acc.push({\n            kind: ownedEntity.kind,\n            type: (_b = (_a = ownedEntity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString(),\n            count: 1\n          });\n        }\n        return acc;\n      },\n      []\n    );\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, entityLimit);\n    return topN.map((topOwnedEntity) => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      kind: topOwnedEntity.kind,\n      queryParams: getQueryParams(owners, topOwnedEntity)\n    }));\n  }, [catalogApi, entity, relationsType]);\n  return {\n    componentsWithCounters,\n    loading,\n    error\n  };\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      padding: theme.spacing(2),\n      transition: `${theme.transitions.duration.standard}ms`,\n      \"&:hover\": {\n        boxShadow: theme.shadows[4]\n      },\n      height: \"100%\"\n    },\n    bold: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    smallFont: {\n      fontSize: theme.typography.body2.fontSize\n    },\n    entityTypeBox: {\n      background: (props) => theme.getPageTheme({ themeId: props.type }).backgroundImage,\n      color: (props) => theme.getPageTheme({ themeId: props.type }).fontColor\n    }\n  })\n);\nconst EntityCountTile = ({\n  counter,\n  type,\n  kind,\n  url\n}) => {\n  const classes = useStyles$1({ type: type != null ? type : kind });\n  const rawTitle = type != null ? type : kind;\n  const isLongText = rawTitle.length > 10;\n  return /* @__PURE__ */ React.createElement(Link, { to: url, variant: \"body2\" }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: `${classes.card} ${classes.entityTypeBox}`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    },\n    /* @__PURE__ */ React.createElement(Typography, { className: classes.bold, variant: \"h6\" }, counter),\n    /* @__PURE__ */ React.createElement(Box, { sx: { width: \"100%\", textAlign: \"center\" } }, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        className: `${classes.bold} ${isLongText && classes.smallFont}`,\n        variant: \"h6\"\n      },\n      /* @__PURE__ */ React.createElement(\n        OverflowTooltip,\n        {\n          text: pluralize(rawTitle.toLocaleUpperCase(\"en-US\"), counter)\n        }\n      )\n    )),\n    type && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, kind)\n  ));\n};\nconst ComponentsGrid = ({\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind,\n  entityLimit = 6\n}) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(\n    entity,\n    relationsType,\n    isGroup,\n    entityFilterKind,\n    entityLimit\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, { error });\n  }\n  return /* @__PURE__ */ React.createElement(Grid, { container: true }, componentsWithCounters == null ? void 0 : componentsWithCounters.map((c) => {\n    var _a;\n    return /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 6, lg: 4, key: (_a = c.type) != null ? _a : c.kind }, /* @__PURE__ */ React.createElement(\n      EntityCountTile,\n      {\n        counter: c.counter,\n        kind: c.kind,\n        type: c.type,\n        url: `${catalogLink()}/?${c.queryParams}`\n      }\n    ));\n  }));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingRight: 0,\n      paddingLeft: 0\n    }\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      top: \"auto\",\n      right: \"auto\",\n      position: \"relative\",\n      transform: \"unset\"\n    }\n  }\n}));\nconst OwnershipCard = (props) => {\n  const {\n    variant,\n    entityFilterKind,\n    hideRelationsToggle,\n    relationsType,\n    entityLimit = 6\n  } = props;\n  const relationsToggle = hideRelationsToggle === void 0 ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const isGroup = entity.kind === \"Group\";\n  const [getRelationsType, setRelationsType] = useState(\n    relationsType || \"direct\"\n  );\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Ownership\", variant }, !relationsToggle && /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { className: classes.list }, /* @__PURE__ */ React.createElement(ListItemText, { className: classes.listItemText }), /* @__PURE__ */ React.createElement(\n    ListItemSecondaryAction,\n    {\n      className: classes.listItemSecondaryAction\n    },\n    \"Direct Relations\",\n    /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        placement: \"top\",\n        arrow: true,\n        title: `${getRelationsType === \"direct\" ? \"Direct\" : \"Aggregated\"} Relations`\n      },\n      /* @__PURE__ */ React.createElement(\n        Switch,\n        {\n          color: \"primary\",\n          checked: getRelationsType !== \"direct\",\n          onChange: () => getRelationsType === \"direct\" ? setRelationsType(\"aggregated\") : setRelationsType(\"direct\"),\n          name: \"pin\",\n          inputProps: { \"aria-label\": \"Ownership Type Switch\" },\n          disabled: !isGroup\n        }\n      )\n    ),\n    \"Aggregated Relations\"\n  ))), /* @__PURE__ */ React.createElement(\n    ComponentsGrid,\n    {\n      entity,\n      entityLimit,\n      relationsType: getRelationsType,\n      isGroup,\n      entityFilterKind\n    }\n  ));\n};\n\nconst MyGroupsSidebarItem = (props) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: \"group\",\n          \"relations.hasMember\": profile.userEntityRef,\n          ...filter != null ? filter : {}\n        }\n      ],\n      fields: [\"metadata\", \"kind\"]\n    });\n    return response.items;\n  }, []);\n  if (!(groups == null ? void 0 : groups.length)) {\n    return null;\n  }\n  if (groups.length === 1) {\n    const group = groups[0];\n    return /* @__PURE__ */ React.createElement(\n      SidebarItem,\n      {\n        text: singularTitle,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon\n      }\n    );\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItem, { icon, text: pluralTitle }, /* @__PURE__ */ React.createElement(SidebarSubmenu, { title: pluralTitle }, groups == null ? void 0 : groups.map(function groupsMap(group) {\n    return /* @__PURE__ */ React.createElement(\n      SidebarSubmenuItem,\n      {\n        title: group.metadata.title || group.metadata.name,\n        subtitle: group.metadata.namespace !== DEFAULT_NAMESPACE ? group.metadata.namespace : void 0,\n        to: catalogEntityRoute(getCompoundEntityRef(group)),\n        icon,\n        key: stringifyEntityRef(group)\n      }\n    );\n  })));\n};\n\nexport { EntityGroupProfileCard, EntityMembersListCard, EntityOwnershipCard, EntityUserProfileCard, GroupProfileCard, MembersListCard, MyGroupsSidebarItem, OwnershipCard, UserProfileCard, orgPlugin, orgPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst permissionCriteriaSchema = z.lazy(\n  () => z.object({\n    rule: z.string(),\n    resourceType: z.string(),\n    params: z.record(z.any()).optional()\n  }).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema }))\n);\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(\n    z.intersection(\n      z.object({\n        id: z.string()\n      }),\n      itemSchema\n    )\n  ).refine(\n    (items) => items.length === ids.size && items.every(({ id }) => ids.has(id)),\n    {\n      message: \"Items in response do not match request\"\n    }\n  )\n});\nclass PermissionClient {\n  constructor(options) {\n    __publicField(this, \"enabled\");\n    __publicField(this, \"discovery\");\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(requests, options) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id))\n    ).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials()\n    );\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, { ...otherProps, element: shownElement });\n};\n\nfunction RequirePermission(props) {\n  const { permission, resourceRef } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  if (permissionResult.loading) {\n    return null;\n  } else if (permissionResult.allowed) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n  }\n  if (props.errorPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.errorPage);\n  }\n  const { NotFoundErrorPage } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(NotFoundErrorPage, null);\n}\n\nexport { IdentityPermissionApi, PermissionedRoute, RequirePermission, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { entityKindSchemaValidator } from '@backstage/catalog-model';\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"TemplateV1beta3\";\nvar description = \"A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"scaffolder.backstage.io/v1beta3\",\n\t\tkind: \"Template\",\n\t\tmetadata: {\n\t\t\tname: \"react-ssr-template\",\n\t\t\ttitle: \"React SSR Template\",\n\t\t\tdescription: \"Next.js application skeleton for creating isomorphic web applications.\",\n\t\t\ttags: [\n\t\t\t\t\"recommended\",\n\t\t\t\t\"react\"\n\t\t\t]\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tparameters: {\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"description\",\n\t\t\t\t\t\"repoUrl\"\n\t\t\t\t],\n\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\ttags: [\n\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\"two\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttitle: \"Name\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Unique name of the component\"\n\t\t\t\t\t},\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\ttitle: \"Description\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Description of the component\"\n\t\t\t\t\t},\n\t\t\t\t\trepoUrl: {\n\t\t\t\t\t\ttitle: \"Pick a repository\",\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\"ui:field\": \"RepoUrlPicker\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\tid: \"fetch\",\n\t\t\t\t\tname: \"Fetch\",\n\t\t\t\t\taction: \"fetch:plain\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\turl: \"./template\"\n\t\t\t\t\t},\n\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\ttags: [\n\t\t\t\t\t\t\t\"one\",\n\t\t\t\t\t\t\t\"two\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"publish\",\n\t\t\t\t\tname: \"Publish to GitHub\",\n\t\t\t\t\taction: \"publish:github\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\trepoUrl: \"${{ parameters.repoUrl }}\"\n\t\t\t\t\t},\n\t\t\t\t\t\"if\": \"${{ parameters.repoUrl }}\"\n\t\t\t\t}\n\t\t\t],\n\t\t\toutput: {\n\t\t\t\tcatalogInfoUrl: \"${{ steps.publish.output.catalogInfoUrl }}\"\n\t\t\t}\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"scaffolder.backstage.io/v1beta3\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Template\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"steps\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user (or group) owner of the template\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\toneOf: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of separate forms to collect parameters.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"The JSONSchema describing the inputs for the template.\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the parameter\",\n\t\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\tsteps: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of steps to execute.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"A description of the step to execute.\",\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"action\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The ID of the step, which can be used to refer to its outputs.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the step, which will be displayed in the UI during the scaffolding process.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The name of the action to execute.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tinput: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"A templated object describing the inputs to the action.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"if\": {\n\t\t\t\t\t\t\t\t\ttype: [\n\t\t\t\t\t\t\t\t\t\t\"string\",\n\t\t\t\t\t\t\t\t\t\t\"boolean\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `\\\"\\\"`, `0`, or `[]`.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"backstage:permissions\": {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tdescription: \"Object used for authorizing the step\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toutput: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"A templated object describing the outputs of the scaffolding task.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlinks: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of external hyperlinks, typically pointing to resources created or updated by the template\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"https://github.com/my-org/my-new-repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tentityRef: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"An entity reference to an entity in the catalog.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Component:default/my-app\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"View new repo\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"A list of Markdown text blobs, like output data from the template.\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A user friendly display name for the text.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"Output Content\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"The text blob to display in the UI, rendered as Markdown.\",\n\t\t\t\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\t\t\t\"**hey** _I'm_ Markdown\"\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\ttype: \"string\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst validator = entityKindSchemaValidator(schema);\nconst templateEntityV1beta3Validator = {\n  // TODO(freben): Emulate the old KindValidator until we fix that type\n  async check(data) {\n    return validator(data) === data;\n  }\n};\nconst isTemplateEntityV1beta3 = (entity) => entity.apiVersion === \"scaffolder.backstage.io/v1beta3\" && entity.kind === \"Template\";\n\nexport { isTemplateEntityV1beta3, templateEntityV1beta3Validator };\n//# sourceMappingURL=index.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useState, useContext, useCallback } from 'react';\nimport { createApiRef } from '@backstage/core-plugin-api';\n\nconst FIELD_EXTENSION_WRAPPER_KEY = \"scaffolder.extensions.wrapper.v1\";\nconst FIELD_EXTENSION_KEY = \"scaffolder.extensions.field.v1\";\n\nconst SecretsContext = createVersionedContext(\"secrets-context\");\nconst SecretsContextProvider = (props) => {\n  const [secrets, setSecrets] = useState({});\n  return /* @__PURE__ */ React.createElement(\n    SecretsContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: { secrets, setSecrets } })\n    },\n    props.children\n  );\n};\nconst useTemplateSecrets = () => {\n  var _a;\n  const value = (_a = useContext(SecretsContext)) == null ? void 0 : _a.atVersion(1);\n  if (!value) {\n    throw new Error(\n      \"useTemplateSecrets must be used within a SecretsContextProvider\"\n    );\n  }\n  const { setSecrets: updateSecrets, secrets = {} } = value;\n  const setSecrets = useCallback(\n    (input) => {\n      updateSecrets((currentSecrets) => ({ ...currentSecrets, ...input }));\n    },\n    [updateSecrets]\n  );\n  return { setSecrets, secrets };\n};\n\nconst scaffolderApiRef = getOrCreateGlobalSingleton(\n  \"scaffolder:scaffolder-api-ref\",\n  () => createApiRef({\n    id: \"plugin.scaffolder.service\"\n  })\n);\n\nexport { FIELD_EXTENSION_WRAPPER_KEY as F, SecretsContextProvider as S, FIELD_EXTENSION_KEY as a, scaffolderApiRef as s, useTemplateSecrets as u };\n//# sourceMappingURL=ref-6fdfc121.esm.js.map\n","import { attachComponentData, useElementFilter, useApi } from '@backstage/core-plugin-api';\nimport { F as FIELD_EXTENSION_WRAPPER_KEY, a as FIELD_EXTENSION_KEY, s as scaffolderApiRef } from './esm/ref-6fdfc121.esm.js';\nexport { S as SecretsContextProvider, s as scaffolderApiRef, u as useTemplateSecrets } from './esm/ref-6fdfc121.esm.js';\nimport { useImmerReducer } from 'use-immer';\nimport { useEffect } from 'react';\nimport '@backstage/version-bridge';\n\nfunction createScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nconst ScaffolderFieldExtensions = () => null;\nattachComponentData(\n  ScaffolderFieldExtensions,\n  FIELD_EXTENSION_WRAPPER_KEY,\n  true\n);\n\nconst useCustomFieldExtensions = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: FIELD_EXTENSION_WRAPPER_KEY\n    }).findComponentData({\n      key: FIELD_EXTENSION_KEY\n    })\n  );\n};\n\nconst LAYOUTS_KEY = \"scaffolder.layout.v1\";\nconst LAYOUTS_WRAPPER_KEY = \"scaffolder.layouts.wrapper.v1\";\n\nconst useCustomLayouts = (outlet) => {\n  return useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUTS_WRAPPER_KEY\n    }).findComponentData({\n      key: LAYOUTS_KEY\n    })\n  );\n};\n\nfunction reducer(draft, action) {\n  var _a, _b, _c;\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !((_a = draft.steps) == null ? void 0 : _a[entry.body.stepId])) {\n          continue;\n        }\n        const currentStepLog = (_b = draft.stepLogs) == null ? void 0 : _b[entry.body.stepId];\n        const currentStep = (_c = draft.steps) == null ? void 0 : _c[entry.body.stepId];\n        if (entry.body.status && entry.body.status !== currentStep.status) {\n          currentStep.status = entry.body.status;\n          if (currentStep.status === \"processing\") {\n            currentStep.startedAt = entry.createdAt;\n          }\n          if ([\"cancelled\", \"completed\", \"failed\"].includes(currentStep.status)) {\n            currentStep.endedAt = entry.createdAt;\n          }\n        }\n        currentStepLog == null ? void 0 : currentStepLog.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      draft.error = action.data.body.error;\n      return;\n    }\n    case \"CANCELLED\": {\n      draft.cancelled = true;\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    cancelled: false,\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    let retryCount = 1;\n    const startStreamLogProcess = () => scaffolderApi.getTask(taskId).then(\n      (task) => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: \"INIT\", data: task });\n        const observable = scaffolderApi.streamLogs({ taskId });\n        const collectedLogEvents = new Array();\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length\n            );\n            dispatch({ type: \"LOGS\", data: logs });\n          }\n        }\n        logPusher = setInterval(emitLogs, 500);\n        subscription = observable.subscribe({\n          next: (event) => {\n            switch (event.type) {\n              case \"log\":\n                return collectedLogEvents.push(event);\n              case \"cancelled\":\n                dispatch({ type: \"CANCELLED\" });\n                return void 0;\n              case \"completion\":\n                emitLogs();\n                dispatch({ type: \"COMPLETED\", data: event });\n                return void 0;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`\n                );\n            }\n          },\n          error: (error) => {\n            emitLogs();\n            if (!error.message) {\n              error.message = `We cannot connect at the moment, trying again in some seconds... Retrying (${retryCount}/3 retries)`;\n            }\n            if (retryCount <= 3) {\n              setTimeout(() => {\n                retryCount += 1;\n                startStreamLogProcess();\n              }, 15e3);\n            }\n            dispatch({ type: \"ERROR\", data: error });\n          }\n        });\n      },\n      (error) => {\n        if (!didCancel) {\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      }\n    );\n    startStreamLogProcess();\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nfunction createScaffolderLayout(options) {\n  return {\n    expose() {\n      const LayoutDataHolder = () => null;\n      attachComponentData(LayoutDataHolder, LAYOUTS_KEY, options);\n      return LayoutDataHolder;\n    }\n  };\n}\nconst ScaffolderLayouts = () => null;\nattachComponentData(ScaffolderLayouts, LAYOUTS_WRAPPER_KEY, true);\n\nexport { ScaffolderFieldExtensions, ScaffolderLayouts, createScaffolderFieldExtension, createScaffolderLayout, useCustomFieldExtensions, useCustomLayouts, useTaskEventStream };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef } from '@backstage/catalog-model';\nimport { DismissableBanner, Link, Page, Header, Content, ErrorPage, Progress, LogViewer } from '@backstage/core-components';\nimport { useApp, useRouteRef, useApi, useRouteRefParams } from '@backstage/core-plugin-api';\nimport { Box, makeStyles, Grid, Typography, StepButton, Paper, Button, CircularProgress } from '@material-ui/core';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Stepper from '@material-ui/core/Stepper';\nimport { makeStyles as makeStyles$1, createStyles } from '@material-ui/core/styles';\nimport Typography$1 from '@material-ui/core/Typography';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Check from '@material-ui/icons/Check';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport classNames from 'classnames';\nimport { DateTime, Interval } from 'luxon';\nimport qs from 'qs';\nimport React, { useRef, useEffect, memo, useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport useInterval from 'react-use/lib/useInterval';\nimport { scaffolderApiRef, useTaskEventStream } from '@backstage/plugin-scaffolder-react';\nimport { entityRouteRef } from '@backstage/plugin-catalog-react';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport { r as rootRouteRef, n as selectedTemplateRouteRef, o as scaffolderTaskRouteRef } from './plugin-e86ee6a1.esm.js';\n\nconst TaskErrors = ({ error }) => {\n  const id = useRef(\"\");\n  useEffect(() => {\n    id.current = String(Math.random());\n  }, [error]);\n  return error ? /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(\n    DismissableBanner,\n    {\n      id: id.current,\n      variant: \"warning\",\n      message: error.message\n    }\n  )) : null;\n};\n\nconst useStyles$1 = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nconst IconLink = (props) => {\n  const { href, text, Icon, ...linkProps } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\", spacing: 1 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"div\", className: classes.svgIcon }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Link, { to: href, ...linkProps }, text || href)));\n};\n\nconst TaskPageLinks = ({ output }) => {\n  const { links = [] } = output;\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => {\n    var _a;\n    return key ? (_a = app.getSystemIcon(key)) != null ? _a : LanguageIcon : LanguageIcon;\n  };\n  return /* @__PURE__ */ React.createElement(Box, { px: 3, pb: 3 }, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef, {\n        defaultKind: \"<unknown>\",\n        defaultNamespace: \"<unknown>\"\n      });\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => /* @__PURE__ */ React.createElement(\n    IconLink,\n    {\n      key: `output-link-${i}`,\n      href: url,\n      text: title != null ? title : url,\n      Icon: iconResolver(icon),\n      target: \"_blank\"\n    }\n  )));\n};\n\nconst humanizeDuration = require(\"humanize-duration\");\nconst useStyles = makeStyles$1(\n  (theme) => createStyles({\n    root: {\n      width: \"100%\"\n    },\n    button: {\n      marginBottom: theme.spacing(2),\n      marginLeft: theme.spacing(2)\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing(2)\n    },\n    resetContainer: {\n      padding: theme.spacing(3)\n    },\n    labelWrapper: {\n      display: \"flex\",\n      flex: 1,\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    stepWrapper: {\n      width: \"100%\"\n    }\n  })\n);\nconst StepTimeTicker = ({ step }) => {\n  const [time, setTime] = useState(\"\");\n  useInterval(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, 1e3);\n  return /* @__PURE__ */ React.createElement(Typography$1, { variant: \"caption\" }, time);\n};\nconst useStepIconStyles = makeStyles$1(\n  (theme) => createStyles({\n    root: {\n      color: theme.palette.text.disabled,\n      display: \"flex\",\n      height: 22,\n      alignItems: \"center\"\n    },\n    completed: {\n      color: theme.palette.status.ok\n    },\n    error: {\n      color: theme.palette.status.error\n    }\n  })\n);\nfunction TaskStepIconComponent(props) {\n  const classes = useStepIconStyles();\n  const { active, completed, error } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(Check, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(Cancel, null);\n    }\n    return /* @__PURE__ */ React.createElement(FiberManualRecordIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      className: classNames(classes.root, {\n        [classes.completed]: completed,\n        [classes.error]: error\n      })\n    },\n    getMiddle()\n  );\n}\nconst TaskStatusStepper = memo(\n  (props) => {\n    const { steps, currentStepId, onUserStepChange } = props;\n    const classes = useStyles(props);\n    return /* @__PURE__ */ React.createElement(\"div\", { className: classes.root }, /* @__PURE__ */ React.createElement(\n      Stepper,\n      {\n        activeStep: steps.findIndex((s) => s.id === currentStepId),\n        orientation: \"vertical\",\n        nonLinear: true\n      },\n      steps.map((step, index) => {\n        const isCancelled = step.status === \"cancelled\";\n        const isActive = step.status === \"processing\";\n        const isCompleted = step.status === \"completed\";\n        const isFailed = step.status === \"failed\";\n        const isSkipped = step.status === \"skipped\";\n        return /* @__PURE__ */ React.createElement(Step, { key: String(index), expanded: true }, /* @__PURE__ */ React.createElement(StepButton, { onClick: () => onUserStepChange(step.id) }, /* @__PURE__ */ React.createElement(\n          StepLabel,\n          {\n            StepIconProps: {\n              completed: isCompleted,\n              error: isFailed || isCancelled,\n              active: isActive\n            },\n            StepIconComponent: TaskStepIconComponent,\n            className: classes.stepWrapper\n          },\n          /* @__PURE__ */ React.createElement(\"div\", { className: classes.labelWrapper }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle2\" }, step.name), isSkipped ? /* @__PURE__ */ React.createElement(Typography$1, { variant: \"caption\" }, \"Skipped\") : /* @__PURE__ */ React.createElement(StepTimeTicker, { step }))\n        )));\n      })\n    ));\n  }\n);\nconst hasLinks = ({ links = [] }) => links.length > 0;\nconst TaskPage = (props) => {\n  const { loadingText } = props;\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const rootPath = useRouteRef(rootRouteRef);\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const [userSelectedStepId, setUserSelectedStepId] = useState(void 0);\n  const [clickedToCancel, setClickedToCancel] = useState(false);\n  const [lastActiveStepId, setLastActiveStepId] = useState(\n    void 0\n  );\n  const { taskId } = useRouteRefParams(scaffolderTaskRouteRef);\n  const taskStream = useTaskEventStream(taskId);\n  const completed = taskStream.completed;\n  const taskCancelled = taskStream.cancelled;\n  const steps = useMemo(\n    () => {\n      var _a, _b;\n      return (_b = (_a = taskStream.task) == null ? void 0 : _a.spec.steps.map((step) => {\n        var _a2;\n        return {\n          ...step,\n          ...(_a2 = taskStream == null ? void 0 : taskStream.steps) == null ? void 0 : _a2[step.id]\n        };\n      })) != null ? _b : [];\n    },\n    [taskStream]\n  );\n  useEffect(() => {\n    var _a;\n    const mostRecentFailedOrActiveStep = steps.find(\n      (step) => [\"failed\", \"processing\"].includes(step.status)\n    );\n    if (completed && !mostRecentFailedOrActiveStep) {\n      setLastActiveStepId((_a = steps[steps.length - 1]) == null ? void 0 : _a.id);\n      return;\n    }\n    setLastActiveStepId(mostRecentFailedOrActiveStep == null ? void 0 : mostRecentFailedOrActiveStep.id);\n  }, [steps, completed]);\n  const currentStepId = userSelectedStepId != null ? userSelectedStepId : lastActiveStepId;\n  const logAsString = useMemo(() => {\n    if (!currentStepId) {\n      return loadingText ? loadingText : \"Loading...\";\n    }\n    const log = taskStream.stepLogs[currentStepId];\n    if (!(log == null ? void 0 : log.length)) {\n      return \"Waiting for logs...\";\n    }\n    return log.join(\"\\n\");\n  }, [taskStream.stepLogs, currentStepId, loadingText]);\n  const taskNotFound = taskStream.completed && !taskStream.loading && !taskStream.task;\n  const { output } = taskStream;\n  const handleStartOver = () => {\n    var _a, _b, _c;\n    if (!taskStream.task || !((_b = (_a = taskStream.task) == null ? void 0 : _a.spec.templateInfo) == null ? void 0 : _b.entityRef)) {\n      navigate(rootPath());\n      return;\n    }\n    const formData = taskStream.task.spec.parameters;\n    const { name, namespace } = parseEntityRef(\n      (_c = taskStream.task.spec.templateInfo) == null ? void 0 : _c.entityRef\n    );\n    navigate(\n      `${templateRoute({ templateName: name, namespace })}?${qs.stringify({\n        formData: JSON.stringify(formData)\n      })}`\n    );\n  };\n  const handleCancel = async () => {\n    setClickedToCancel(true);\n    await scaffolderApi.cancelTask(taskId);\n  };\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      pageTitleOverride: `Task ${taskId}`,\n      title: \"Task Activity\",\n      subtitle: `Activity for task: ${taskId}`\n    }\n  ), /* @__PURE__ */ React.createElement(Content, null, taskNotFound ? /* @__PURE__ */ React.createElement(\n    ErrorPage,\n    {\n      status: \"404\",\n      statusMessage: \"Task not found\",\n      additionalInfo: \"No task found with this ID\"\n    }\n  ) : /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Grid$1, { container: true }, /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 3 }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(\n    TaskStatusStepper,\n    {\n      steps,\n      currentStepId,\n      onUserStepChange: setUserSelectedStepId\n    }\n  ), output && hasLinks(output) && /* @__PURE__ */ React.createElement(TaskPageLinks, { output }), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.button,\n      onClick: handleStartOver,\n      disabled: !completed,\n      variant: \"contained\",\n      color: \"primary\"\n    },\n    \"Start Over\"\n  ), /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      className: classes.button,\n      onClick: handleCancel,\n      disabled: completed || taskCancelled || clickedToCancel,\n      variant: \"outlined\",\n      color: \"secondary\"\n    },\n    (taskCancelled || clickedToCancel) && !completed ? \"Cancelling...\" : \"Cancel\"\n  ))), /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 9 }, !currentStepId && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(\"div\", { style: { height: \"80vh\" } }, /* @__PURE__ */ React.createElement(TaskErrors, { error: taskStream.error }), /* @__PURE__ */ React.createElement(LogViewer, { text: logAsString })))))));\n};\n\nexport { TaskPage as T, TaskStatusStepper as a, TaskPageLinks as b };\n//# sourceMappingURL=TaskPage-e70ca2f8.esm.js.map\n","import React from 'react';\nimport capitalize from 'lodash/capitalize';\nimport { Progress } from '@backstage/core-components';\nimport { Box, Typography, FormControlLabel, Checkbox, TextField } from '@material-ui/core';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete } from '@material-ui/lab';\nimport { useEntityTypeFilter } from '@backstage/plugin-catalog-react';\nimport { useApi, alertApiRef } from '@backstage/core-plugin-api';\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, { fontSize: \"small\" });\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, { fontSize: \"small\" });\nconst TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (!availableTypes)\n    return null;\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, { pb: 1, pt: 1 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      variant: \"button\",\n      component: \"label\",\n      htmlFor: \"categories-picker\"\n    },\n    \"Categories\"\n  ), /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      id: \"categories-picker\",\n      multiple: true,\n      options: availableTypes,\n      value: selectedTypes,\n      onChange: (_, value) => setSelectedTypes(value),\n      renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              icon,\n              checkedIcon,\n              checked: selected\n            }\n          ),\n          label: capitalize(option)\n        }\n      ),\n      size: \"small\",\n      popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { \"data-testid\": \"categories-picker-expand\" }),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, { ...params, variant: \"outlined\" })\n    }\n  ));\n};\n\nexport { TemplateTypePicker as T };\n//# sourceMappingURL=TemplateTypePicker-efec8c34.esm.js.map\n","import { scmIntegrationsApiRef, scmAuthApiRef } from '@backstage/integration-react';\nimport { scaffolderApiRef, useTemplateSecrets, createScaffolderFieldExtension } from '@backstage/plugin-scaffolder-react';\nimport { parseEntityRef, stringifyEntityRef, KubernetesValidatorFunctions, RELATION_OWNED_BY, makeValidator } from '@backstage/catalog-model';\nimport { ResponseError, NotFoundError } from '@backstage/errors';\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { useApi, identityApiRef, createExternalRouteRef, createRouteRef, createSubRouteRef, errorApiRef, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { catalogApiRef, humanizeEntityRef } from '@backstage/plugin-catalog-react';\nimport { TextField, FormControl as FormControl$1 } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useCallback, useEffect, useState, useMemo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { z } from 'zod';\nimport zodToJsonSchema from 'zod-to-json-schema';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, Progress } from '@backstage/core-components';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport { Autocomplete as Autocomplete$1 } from '@material-ui/lab';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ScaffolderClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"scmIntegrationsApi\");\n    __publicField(this, \"fetchApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"useLongPollingLogs\");\n    var _a, _b;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = (_a = options.fetchApi) != null ? _a : { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = (_b = options.useLongPollingLogs) != null ? _b : false;\n    this.identityApi = options.identityApi;\n  }\n  async listTasks(options) {\n    if (!this.identityApi) {\n      throw new Error(\n        \"IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method\"\n      );\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n    const query = qs.stringify(\n      options.filterByOwnership === \"owned\" ? { createdBy: userEntityRef } : {}\n    );\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/tasks?${query}`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async getIntegrationsList(options) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket.list().filter(\n        (item) => !this.scmIntegrationsApi.bitbucketCloud.byHost(item.config.host) && !this.scmIntegrationsApi.bitbucketServer.byHost(item.config.host)\n      ),\n      ...this.scmIntegrationsApi.bitbucketCloud.list(),\n      ...this.scmIntegrationsApi.bitbucketServer.list(),\n      ...this.scmIntegrationsApi.gerrit.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list()\n    ].map((c) => ({ type: c.type, title: c.title, host: c.config.host })).filter((c) => options.allowedHosts.includes(c.host));\n    return {\n      integrations\n    };\n  }\n  async getTemplateParameterSchema(templateRef) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: \"template\"\n    });\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const templatePath = [namespace, kind, name].map((s) => encodeURIComponent(s)).join(\"/\");\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const schema = await response.json();\n    return schema;\n  }\n  async scaffold(options) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\"scaffolder\")}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets\n      })\n    });\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n    const { id } = await response.json();\n    return { taskId: id };\n  }\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n    return this.streamLogsEventStream(options);\n  }\n  async dryRun(options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/dry-run`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        template: options.template,\n        values: options.values,\n        secrets: options.secrets,\n        directoryContents: options.directoryContents\n      })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  streamLogsEventStream({\n    taskId,\n    after\n  }) {\n    return new ObservableImpl((subscriber) => {\n      var _a;\n      const params = new URLSearchParams();\n      if (after !== void 0) {\n        params.set(\"after\", String(Number(after)));\n      }\n      Promise.all([\n        this.discoveryApi.getBaseUrl(\"scaffolder\"),\n        (_a = this.identityApi) == null ? void 0 : _a.getCredentials()\n      ]).then(\n        ([baseUrl, credentials]) => {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/eventstream`;\n          const processEvent = (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n          };\n          const eventSource = new EventSourcePolyfill(url, {\n            withCredentials: true,\n            headers: (credentials == null ? void 0 : credentials.token) ? { Authorization: `Bearer ${credentials.token}` } : {}\n          });\n          eventSource.addEventListener(\"log\", processEvent);\n          eventSource.addEventListener(\"cancelled\", processEvent);\n          eventSource.addEventListener(\"completion\", (event) => {\n            processEvent(event);\n            eventSource.close();\n            subscriber.complete();\n          });\n          eventSource.addEventListener(\"error\", (event) => {\n            subscriber.error(event);\n          });\n        },\n        (error) => {\n          subscriber.error(error);\n        }\n      );\n    });\n  }\n  streamLogsPolling({\n    taskId,\n    after: inputAfter\n  }) {\n    let after = inputAfter;\n    return new ObservableImpl((subscriber) => {\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(async (baseUrl) => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n          if (!response.ok) {\n            await new Promise((resolve) => setTimeout(resolve, 1e3));\n            continue;\n          }\n          const logs = await response.json();\n          for (const event of logs) {\n            after = Number(event.id);\n            subscriber.next(event);\n            if (event.type === \"completion\") {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async cancelTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}/cancel`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\"\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nfunction makeFieldSchemaFromZod(returnSchema, uiOptionsSchema) {\n  return {\n    schema: {\n      returnValue: zodToJsonSchema(returnSchema),\n      uiOptions: uiOptionsSchema ? zodToJsonSchema(uiOptionsSchema) : void 0\n    },\n    type: null,\n    uiOptionsType: null\n  };\n}\n\nconst entityQueryFilterExpressionSchema = z.record(\n  z.string().or(z.object({ exists: z.boolean().optional() })).or(z.array(z.string()))\n);\nconst EntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from\"\n    ),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst EntityPickerSchema = EntityPickerFieldSchema.schema;\n\nconst EntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const catalogFilter = buildCatalogFilter(uiSchema);\n  const defaultKind = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultKind;\n  const defaultNamespace = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultNamespace) || void 0;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(async () => {\n    const { items } = await catalogApi.getEntities(\n      catalogFilter ? { filter: catalogFilter } : void 0\n    );\n    return items;\n  });\n  const allowArbitraryValues = (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true;\n  const getLabel = useCallback(\n    (ref) => {\n      try {\n        return humanizeEntityRef(\n          parseEntityRef(ref, { defaultKind, defaultNamespace }),\n          {\n            defaultKind,\n            defaultNamespace\n          }\n        );\n      } catch (err) {\n        return ref;\n      }\n    },\n    [defaultKind, defaultNamespace]\n  );\n  const onSelect = useCallback(\n    (_, ref, reason) => {\n      if (typeof ref !== \"string\") {\n        onChange(ref ? stringifyEntityRef(ref) : void 0);\n      } else {\n        if (reason === \"blur\" || reason === \"create-option\") {\n          let entityRef = ref;\n          try {\n            entityRef = stringifyEntityRef(\n              parseEntityRef(ref, {\n                defaultKind,\n                defaultNamespace\n              })\n            );\n          } catch (err) {\n          }\n          if (formData !== ref || allowArbitraryValues) {\n            onChange(entityRef);\n          }\n        }\n      }\n    },\n    [onChange, formData, defaultKind, defaultNamespace, allowArbitraryValues]\n  );\n  useEffect(() => {\n    if ((entities == null ? void 0 : entities.length) === 1) {\n      onChange(stringifyEntityRef(entities[0]));\n    }\n  }, [entities, onChange]);\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        disabled: (entities == null ? void 0 : entities.length) === 1,\n        id: idSchema == null ? void 0 : idSchema.$id,\n        value: (\n          // Since free solo can be enabled, attempt to parse as a full entity ref first, then fall\n          //  back to the given value.\n          (_e = entities == null ? void 0 : entities.find((e) => stringifyEntityRef(e) === formData)) != null ? _e : allowArbitraryValues && formData ? getLabel(formData) : \"\"\n        ),\n        loading,\n        onChange: onSelect,\n        options: entities || [],\n        getOptionLabel: (option) => (\n          // option can be a string due to freeSolo.\n          typeof option === \"string\" ? option : humanizeEntityRef(option, { defaultKind, defaultNamespace })\n        ),\n        autoSelect: true,\n        freeSolo: allowArbitraryValues,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        )\n      }\n    )\n  );\n};\nfunction convertOpsValues(value) {\n  if (typeof value === \"object\" && value.exists) {\n    return CATALOG_FILTER_EXISTS;\n  }\n  return value == null ? void 0 : value.toString();\n}\nfunction convertSchemaFiltersToQuery(schemaFilters) {\n  const query = {};\n  for (const [key, value] of Object.entries(schemaFilters)) {\n    if (Array.isArray(value)) {\n      query[key] = value;\n    } else {\n      query[key] = convertOpsValues(value);\n    }\n  }\n  return query;\n}\nfunction buildCatalogFilter(uiSchema) {\n  var _a, _b;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const catalogFilter = ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.catalogFilter) || allowedKinds && { kind: allowedKinds };\n  if (!catalogFilter) {\n    return void 0;\n  }\n  if (Array.isArray(catalogFilter)) {\n    return catalogFilter.map(convertSchemaFiltersToQuery);\n  }\n  return convertSchemaFiltersToQuery(catalogFilter);\n}\n\nconst entityNamePickerValidation = (value, validation) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\n      \"Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.\"\n    );\n  }\n};\n\nconst EntityNamePickerFieldSchema = makeFieldSchemaFromZod(z.string());\nconst EntityNamePickerSchema = EntityNamePickerFieldSchema.schema;\n\nconst EntityNamePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title = \"Name\", description = \"Unique name of the component\" },\n    rawErrors,\n    formData,\n    uiSchema: { \"ui:autofocus\": autoFocus },\n    idSchema,\n    placeholder\n  } = props;\n  return /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      id: idSchema == null ? void 0 : idSchema.$id,\n      label: title,\n      placeholder,\n      helperText: description,\n      required,\n      value: formData != null ? formData : \"\",\n      onChange: ({ target: { value } }) => onChange(value),\n      margin: \"normal\",\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData,\n      inputProps: { autoFocus }\n    }\n  );\n};\n\nconst OwnerPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    /**\n     * @deprecated Use `catalogFilter` instead.\n     */\n    allowedKinds: z.array(z.string()).default([\"Group\", \"User\"]).optional().describe(\n      \"DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    ),\n    catalogFilter: z.array(entityQueryFilterExpressionSchema).or(entityQueryFilterExpressionSchema).optional().describe(\"List of key-value filter expression for entities\")\n  })\n);\nconst OwnerPickerSchema = OwnerPickerFieldSchema.schema;\n\nconst OwnerPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    schema: { title = \"Owner\", description = \"The owner of the component\" },\n    uiSchema,\n    ...restProps\n  } = props;\n  const defaultNamespace = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultNamespace;\n  const allowedKinds = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.allowedKinds;\n  const catalogFilter = ((_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.catalogFilter) || {\n    kind: allowedKinds || [\"Group\", \"User\"]\n  };\n  const ownerUiSchema = {\n    ...uiSchema,\n    \"ui:options\": {\n      catalogFilter,\n      defaultKind: \"Group\",\n      allowArbitraryValues: (_e = (_d = uiSchema[\"ui:options\"]) == null ? void 0 : _d.allowArbitraryValues) != null ? _e : true,\n      ...defaultNamespace !== void 0 ? { defaultNamespace } : {}\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    EntityPicker,\n    {\n      ...restProps,\n      schema: { title, description },\n      uiSchema: ownerUiSchema\n    }\n  );\n};\n\nconst RepoUrlPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedHosts: z.array(z.string()).optional().describe(\"List of allowed SCM platform hosts\"),\n    allowedOrganizations: z.array(z.string()).optional().describe(\"List of allowed organizations in the given SCM platform\"),\n    allowedOwners: z.array(z.string()).optional().describe(\"List of allowed owners in the given SCM platform\"),\n    allowedProjects: z.array(z.string()).optional().describe(\"List of allowed projects in the given SCM platform\"),\n    allowedRepos: z.array(z.string()).optional().describe(\"List of allowed repos in the given SCM platform\"),\n    requestUserCredentials: z.object({\n      secretsKey: z.string().describe(\n        \"Key used within the template secrets context to store the credential\"\n      ),\n      additionalScopes: z.object({\n        gerrit: z.array(z.string()).optional().describe(\"Additional Gerrit scopes to request\"),\n        github: z.array(z.string()).optional().describe(\"Additional GitHub scopes to request\"),\n        gitlab: z.array(z.string()).optional().describe(\"Additional GitLab scopes to request\"),\n        bitbucket: z.array(z.string()).optional().describe(\"Additional BitBucket scopes to request\"),\n        azure: z.array(z.string()).optional().describe(\"Additional Azure scopes to request\")\n      }).optional().describe(\"Additional permission scopes to request\")\n    }).optional().describe(\n      \"If defined will request user credentials to auth against the given SCM platform\"\n    )\n  })\n);\nconst RepoUrlPickerSchema = RepoUrlPickerFieldSchema.schema;\n\nconst repoPickerValidation = (value, validation, context) => {\n  var _a, _b;\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n    if (!host) {\n      validation.addError(\n        \"Incomplete repository location provided, host not provided\"\n      );\n    } else {\n      if (((_a = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _a.type) === \"bitbucket\") {\n        if (host === \"bitbucket.org\" && !searchParams.get(\"workspace\")) {\n          validation.addError(\n            \"Incomplete repository location provided, workspace not provided\"\n          );\n        }\n        if (!searchParams.get(\"project\")) {\n          validation.addError(\n            \"Incomplete repository location provided, project not provided\"\n          );\n        }\n      } else if (((_b = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _b.type) !== \"gerrit\") {\n        if (!searchParams.get(\"owner\")) {\n          validation.addError(\n            \"Incomplete repository location provided, owner not provided\"\n          );\n        }\n      }\n      if (!searchParams.get(\"repo\")) {\n        validation.addError(\n          \"Incomplete repository location provided, repo not provided\"\n        );\n      }\n    }\n  } catch {\n    validation.addError(\"Unable to parse the Repository URL\");\n  }\n};\n\nconst GithubRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\")\n  ));\n};\n\nconst GitlabRepoPicker = (props) => {\n  const { allowedOwners = [], state, onChange, rawErrors } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner Available\",\n        onChange: (selected) => onChange({\n          owner: String(Array.isArray(selected) ? selected[0] : selected)\n        }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.\")\n  ));\n};\n\nconst AzureRepoPicker = (props) => {\n  const {\n    allowedOrganizations = [],\n    allowedOwners = [],\n    rawErrors,\n    state,\n    onChange\n  } = props;\n  const organizationItems = allowedOrganizations ? allowedOrganizations.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { organization, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !organization\n    },\n    (allowedOrganizations == null ? void 0 : allowedOrganizations.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Organization\",\n        onChange: (s) => onChange({ organization: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOrganizations.length === 1,\n        selected: organization,\n        items: organizationItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"orgInput\" }, \"Organization\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"orgInput\",\n        onChange: (e) => onChange({ organization: e.target.value }),\n        value: organization\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Owner\",\n        onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: owner,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"ownerInput\",\n        onChange: (e) => onChange({ owner: e.target.value }),\n        value: owner\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst BitbucketRepoPicker = (props) => {\n  const {\n    allowedOwners = [],\n    allowedProjects = [],\n    onChange,\n    rawErrors,\n    state\n  } = props;\n  const { host, workspace, project } = state;\n  const ownerItems = allowedOwners ? allowedOwners == null ? void 0 : allowedOwners.map((i) => ({ label: i, value: i })) : [];\n  const projectItems = allowedProjects ? allowedProjects == null ? void 0 : allowedProjects.map((i) => ({ label: i, value: i })) : [];\n  useEffect(() => {\n    if (host === \"bitbucket.org\" && allowedOwners.length) {\n      onChange({ workspace: allowedOwners[0] });\n    }\n  }, [allowedOwners, host, onChange]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, host === \"bitbucket.org\" && /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Workspaces\",\n        onChange: (s) => onChange({ workspace: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedOwners.length === 1,\n        selected: workspace,\n        items: ownerItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"workspaceInput\" }, \"Workspace\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"workspaceInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Workspace that this repo will belong to\")\n  ), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !project\n    },\n    (allowedProjects == null ? void 0 : allowedProjects.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Allowed Projects\",\n        onChange: (s) => onChange({ project: String(Array.isArray(s) ? s[0] : s) }),\n        disabled: allowedProjects.length === 1,\n        selected: project,\n        items: projectItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"projectInput\" }, \"Project\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"projectInput\",\n        onChange: (e) => onChange({ project: e.target.value }),\n        value: project\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")\n  ));\n};\n\nconst GerritRepoPicker = (props) => {\n  const { onChange, rawErrors, state } = props;\n  const { workspace, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, { margin: \"normal\", error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace }, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"ownerInput\" }, \"Owner\"), /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: \"ownerInput\",\n      onChange: (e) => onChange({ owner: e.target.value }),\n      value: owner\n    }\n  ), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The owner of the project (optional)\")), /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"parentInput\" }, \"Parent\"),\n    /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"parentInput\",\n        onChange: (e) => onChange({ workspace: e.target.value }),\n        value: workspace\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The project parent that the repo will belong to\")\n  ));\n};\n\nconst RepoUrlPickerHost = (props) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(\n    async () => {\n      return await scaffolderApi.getIntegrationsList({\n        allowedHosts: hosts != null ? hosts : []\n      });\n    }\n  );\n  useEffect(() => {\n    if (!host) {\n      if (hosts == null ? void 0 : hosts.length) {\n        onChange(hosts[0]);\n      } else if (integrations == null ? void 0 : integrations.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n  const hostsOptions = integrations ? integrations.filter((i) => (hosts == null ? void 0 : hosts.length) ? hosts == null ? void 0 : hosts.includes(i.host) : true).map((i) => ({ label: i.title, value: i.host })) : [{ label: \"Loading...\", value: \"loading\" }];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !host\n    },\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        disabled: (hosts == null ? void 0 : hosts.length) === 1,\n        label: \"Host\",\n        onChange: (s) => onChange(String(Array.isArray(s) ? s[0] : s)),\n        selected: host,\n        items: hostsOptions,\n        \"data-testid\": \"host-select\"\n      }\n    ),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The host where the repository will be created\")\n  ));\n};\n\nconst RepoUrlPickerRepoName = (props) => {\n  const { repoName, allowedRepos, onChange, rawErrors } = props;\n  useEffect(() => {\n    if (!repoName) {\n      if (allowedRepos == null ? void 0 : allowedRepos.length) {\n        onChange(allowedRepos[0]);\n      }\n    }\n  }, [allowedRepos, repoName, onChange]);\n  const repoItems = allowedRepos ? allowedRepos.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      margin: \"normal\",\n      required: true,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n    },\n    (allowedRepos == null ? void 0 : allowedRepos.length) ? /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        native: true,\n        label: \"Repositories Available\",\n        onChange: (selected) => String(Array.isArray(selected) ? selected[0] : selected),\n        disabled: allowedRepos.length === 1,\n        selected: repoName,\n        items: repoItems\n      }\n    ) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, { htmlFor: \"repoNameInput\" }, \"Repository\"), /* @__PURE__ */ React.createElement(\n      Input,\n      {\n        id: \"repoNameInput\",\n        onChange: (e) => onChange(String(e.target.value)),\n        value: repoName\n      }\n    )),\n    /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")\n  ));\n};\n\nfunction serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return void 0;\n  }\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set(\"owner\", data.owner);\n  }\n  if (data.repoName) {\n    params.set(\"repo\", data.repoName);\n  }\n  if (data.organization) {\n    params.set(\"organization\", data.organization);\n  }\n  if (data.workspace) {\n    params.set(\"workspace\", data.workspace);\n  }\n  if (data.project) {\n    params.set(\"project\", data.project);\n  }\n  return `${data.host}?${params.toString()}`;\n}\nfunction parseRepoPickerUrl(url) {\n  let host = \"\";\n  let owner = \"\";\n  let repoName = \"\";\n  let organization = \"\";\n  let workspace = \"\";\n  let project = \"\";\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get(\"owner\") || \"\";\n      repoName = parsed.searchParams.get(\"repo\") || \"\";\n      organization = parsed.searchParams.get(\"organization\") || \"\";\n      workspace = parsed.searchParams.get(\"workspace\") || \"\";\n      project = parsed.searchParams.get(\"project\") || \"\";\n    }\n  } catch {\n  }\n  return { host, owner, repoName, organization, workspace, project };\n}\n\nconst RepoUrlPicker = (props) => {\n  var _a, _b;\n  const { uiSchema, onChange, rawErrors, formData } = props;\n  const [state, setState] = useState(\n    parseRepoPickerUrl(formData)\n  );\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedHosts) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOrganizations = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOrganizations) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOwners = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOwners) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedProjects = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedProjects) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedRepos = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedRepos) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const { owner, organization, project, repoName } = state;\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n  useEffect(() => {\n    if (allowedOrganizations.length > 0 && !organization) {\n      setState((prevState) => ({\n        ...prevState,\n        organization: allowedOrganizations[0]\n      }));\n    }\n  }, [setState, allowedOrganizations, organization]);\n  useEffect(() => {\n    if (allowedOwners.length > 0 && !owner) {\n      setState((prevState) => ({\n        ...prevState,\n        owner: allowedOwners[0]\n      }));\n    }\n  }, [setState, allowedOwners, owner]);\n  useEffect(() => {\n    if (allowedProjects.length > 0 && !project) {\n      setState((prevState) => ({\n        ...prevState,\n        project: allowedProjects[0]\n      }));\n    }\n  }, [setState, allowedProjects, project]);\n  useEffect(() => {\n    if (allowedRepos.length > 0 && !repoName) {\n      setState((prevState) => ({ ...prevState, repoName: allowedRepos[0] }));\n    }\n  }, [setState, allowedRepos, repoName]);\n  const updateLocalState = useCallback(\n    (newState) => {\n      setState((prevState) => ({ ...prevState, ...newState }));\n    },\n    [setState]\n  );\n  useDebounce(\n    async () => {\n      var _a2;\n      const { requestUserCredentials } = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) != null ? _a2 : {};\n      const workspace = state.owner ? state.owner : state.project;\n      if (!requestUserCredentials || !(state.host && workspace && state.repoName)) {\n        return;\n      }\n      const [encodedHost, encodedRepoName] = [state.host, state.repoName].map(\n        encodeURIComponent\n      );\n      const { token } = await scmAuthApi.getCredentials({\n        url: `https://${encodedHost}/${workspace}/${encodedRepoName}`,\n        additionalScope: {\n          repoWrite: true,\n          customScopes: requestUserCredentials.additionalScopes\n        }\n      });\n      setSecrets({ [requestUserCredentials.secretsKey]: token });\n    },\n    500,\n    [state, uiSchema]\n  );\n  const hostType = (_b = state.host && ((_a = integrationApi.byHost(state.host)) == null ? void 0 : _a.type)) != null ? _b : null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    RepoUrlPickerHost,\n    {\n      host: state.host,\n      hosts: allowedHosts,\n      onChange: (host) => setState((prevState) => ({ ...prevState, host })),\n      rawErrors\n    }\n  ), hostType === \"github\" && /* @__PURE__ */ React.createElement(\n    GithubRepoPicker,\n    {\n      allowedOwners,\n      onChange: updateLocalState,\n      rawErrors,\n      state\n    }\n  ), hostType === \"gitlab\" && /* @__PURE__ */ React.createElement(\n    GitlabRepoPicker,\n    {\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"bitbucket\" && /* @__PURE__ */ React.createElement(\n    BitbucketRepoPicker,\n    {\n      allowedOwners,\n      allowedProjects,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"azure\" && /* @__PURE__ */ React.createElement(\n    AzureRepoPicker,\n    {\n      allowedOrganizations,\n      allowedOwners,\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), hostType === \"gerrit\" && /* @__PURE__ */ React.createElement(\n    GerritRepoPicker,\n    {\n      rawErrors,\n      state,\n      onChange: updateLocalState\n    }\n  ), /* @__PURE__ */ React.createElement(\n    RepoUrlPickerRepoName,\n    {\n      repoName: state.repoName,\n      allowedRepos,\n      onChange: (repo) => setState((prevState) => ({ ...prevState, repoName: repo })),\n      rawErrors\n    }\n  ));\n};\n\nconst OwnedEntityPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    allowedKinds: z.array(z.string()).optional().describe(\"List of kinds of entities to derive options from\"),\n    defaultKind: z.string().optional().describe(\n      \"The default entity kind. Options of this kind will not be prefixed.\"\n    ),\n    allowArbitraryValues: z.boolean().optional().describe(\"Whether to allow arbitrary user input. Defaults to true\"),\n    defaultNamespace: z.union([z.string(), z.literal(false)]).optional().describe(\n      \"The default namespace. Options with this namespace will not be prefixed.\"\n    )\n  })\n);\nconst OwnedEntityPickerSchema = OwnedEntityPickerFieldSchema.schema;\n\nconst OwnedEntityPicker = (props) => {\n  var _a;\n  const {\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    uiSchema,\n    required\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: identityRefs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    return identity.ownershipEntityRefs;\n  });\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  if (loading)\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        loading,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required,\n            InputProps: params.InputProps\n          }\n        ),\n        options: []\n      }\n    );\n  return /* @__PURE__ */ React.createElement(\n    EntityPicker,\n    {\n      ...props,\n      schema: { title, description },\n      allowedKinds,\n      catalogFilter: allowedKinds ? {\n        filter: {\n          kind: allowedKinds,\n          [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n        }\n      } : {\n        filter: {\n          [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n        }\n      }\n    }\n  );\n};\n\nconst EntityTagsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.array(z.string()),\n  z.object({\n    kinds: z.array(z.string()).optional().describe(\"List of kinds of entities to derive tags from\"),\n    showCounts: z.boolean().optional().describe(\"Whether to show usage counts per tag\"),\n    helperText: z.string().optional().describe(\"Helper text to display\")\n  })\n);\nconst EntityTagsPickerSchema = EntityTagsPickerFieldSchema.schema;\n\nconst EntityTagsPicker = (props) => {\n  var _a, _b, _c;\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [tagOptions, setTagOptions] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.kinds;\n  const showCounts = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.showCounts;\n  const helperText = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.helperText;\n  const { loading, value: existingTags } = useAsync(async () => {\n    const facet = \"metadata.tags\";\n    const tagsRequest = { facets: [facet] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n    const { facets } = await catalogApi.getEntityFacets(tagsRequest);\n    const tagFacets = Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n    setTagOptions(\n      Object.keys(tagFacets).sort(\n        (a, b) => showCounts ? tagFacets[b] - tagFacets[a] : a.localeCompare(b)\n      )\n    );\n    return tagFacets;\n  });\n  const setTags = (_, values) => {\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n    if ((values == null ? void 0 : values.length) && currentTags.length < values.length) {\n      const newTag = values[values.length - 1] = values[values.length - 1].toLocaleLowerCase(\"en-US\").trim();\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n    setInputError(hasError);\n    setInputValue(!hasError ? \"\" : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n  useEffectOnce(() => onChange(formData || []));\n  return /* @__PURE__ */ React.createElement(FormControl$1, { margin: \"normal\" }, /* @__PURE__ */ React.createElement(\n    Autocomplete$1,\n    {\n      multiple: true,\n      freeSolo: true,\n      filterSelectedOptions: true,\n      onChange: setTags,\n      value: formData || [],\n      inputValue,\n      loading,\n      options: tagOptions,\n      ChipProps: { size: \"small\" },\n      renderOption: (option) => showCounts ? `${option} (${existingTags == null ? void 0 : existingTags[option]})` : option,\n      renderInput: (params) => /* @__PURE__ */ React.createElement(\n        TextField,\n        {\n          ...params,\n          label: \"Tags\",\n          onChange: (e) => setInputValue(e.target.value),\n          error: inputError,\n          helperText: helperText != null ? helperText : \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"\n        }\n      )\n    }\n  ));\n};\n\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"scaffolder\"\n});\nconst legacySelectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/legacy/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:templateName\"\n});\nconst selectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:namespace/:templateName\"\n});\nconst scaffolderTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/task\",\n  parent: rootRouteRef,\n  path: \"/tasks/:taskId\"\n});\nconst scaffolderListTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/list-tasks\",\n  parent: rootRouteRef,\n  path: \"/tasks\"\n});\nconst actionsRouteRef = createSubRouteRef({\n  id: \"scaffolder/actions\",\n  parent: rootRouteRef,\n  path: \"/actions\"\n});\nconst editRouteRef = createSubRouteRef({\n  id: \"scaffolder/edit\",\n  parent: rootRouteRef,\n  path: \"/edit\"\n});\n\nconst MyGroupsPickerFieldSchema = makeFieldSchemaFromZod(\n  z.string(),\n  z.object({\n    title: z.string().default(\"Group\").describe(\"Group\"),\n    description: z.string().default(\"A group you are part of\").describe(\"The group to which the entity belongs\")\n  })\n);\nconst MyGroupsPickerSchema = MyGroupsPickerFieldSchema.schema;\n\nconst MyGroupsPicker = (props) => {\n  const {\n    schema: { title, description },\n    required,\n    rawErrors,\n    onChange\n  } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [groups, setGroups] = useState([]);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  useAsync(async () => {\n    const { userEntityRef } = await identityApi.getBackstageIdentity();\n    if (!userEntityRef) {\n      errorApi.post(new NotFoundError(\"No user entity ref found\"));\n      return;\n    }\n    const { items } = await catalogApi.getEntities({\n      filter: {\n        type: \"Group\",\n        [\"relations.hasMember\"]: [userEntityRef]\n      }\n    });\n    const groupValues = items.filter((e) => Boolean(e)).map((item) => {\n      var _a;\n      return {\n        label: (_a = item.metadata.title) != null ? _a : item.metadata.name,\n        ref: stringifyEntityRef(item)\n      };\n    });\n    setGroups(groupValues);\n  });\n  const updateChange = (_, value) => {\n    var _a;\n    setSelectedGroup(value);\n    onChange((_a = value == null ? void 0 : value.ref) != null ? _a : \"\");\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl$1,\n    {\n      margin: \"normal\",\n      required,\n      error: (rawErrors == null ? void 0 : rawErrors.length) > 0\n    },\n    /* @__PURE__ */ React.createElement(\n      Autocomplete$1,\n      {\n        id: \"OwnershipEntityRefPicker-dropdown\",\n        options: groups || [],\n        value: selectedGroup,\n        onChange: updateChange,\n        getOptionLabel: (group) => group.label,\n        renderInput: (params) => /* @__PURE__ */ React.createElement(\n          TextField,\n          {\n            ...params,\n            label: title,\n            margin: \"dense\",\n            helperText: description,\n            FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n            variant: \"outlined\",\n            required\n          }\n        )\n      }\n    )\n  );\n};\n\nconst scaffolderPlugin = createPlugin({\n  id: \"scaffolder\",\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) => new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi,\n        identityApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    selectedTemplate: selectedTemplateRouteRef,\n    ongoingTask: scaffolderTaskRouteRef,\n    actions: actionsRouteRef,\n    listTasks: scaffolderListTaskRouteRef,\n    edit: editRouteRef\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  }\n});\nconst EntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityPicker,\n    name: \"EntityPicker\",\n    schema: EntityPickerSchema\n  })\n);\nconst EntityNamePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityNamePicker,\n    name: \"EntityNamePicker\",\n    validation: entityNamePickerValidation,\n    schema: EntityNamePickerSchema\n  })\n);\nconst RepoUrlPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: RepoUrlPicker,\n    name: \"RepoUrlPicker\",\n    validation: repoPickerValidation,\n    schema: RepoUrlPickerSchema\n  })\n);\nconst OwnerPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnerPicker,\n    name: \"OwnerPicker\",\n    schema: OwnerPickerSchema\n  })\n);\nconst MyGroupsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: MyGroupsPicker,\n    name: \"MyGroupsPicker\",\n    schema: MyGroupsPickerSchema\n  })\n);\nconst ScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"ScaffolderPage\",\n    component: () => import('./Router-8653bb84.esm.js').then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnedEntityPicker,\n    name: \"OwnedEntityPicker\",\n    schema: OwnedEntityPickerSchema\n  })\n);\nconst EntityTagsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityTagsPicker,\n    name: \"EntityTagsPicker\",\n    schema: EntityTagsPickerSchema\n  })\n);\nconst NextScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"NextScaffolderPage\",\n    component: () => import('./index-05d3e519.esm.js').then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\n\nexport { entityNamePickerValidation as A, EntityNamePickerSchema as B, EntityTagsPicker as C, EntityTagsPickerSchema as D, EntityPickerFieldExtension as E, RepoUrlPicker as F, RepoUrlPickerSchema as G, OwnerPicker as H, OwnerPickerSchema as I, OwnedEntityPicker as J, OwnedEntityPickerSchema as K, MyGroupsPicker as L, MyGroupsPickerFieldExtension as M, NextScaffolderPage as N, OwnerPickerFieldExtension as O, RepoUrlPickerFieldExtension as R, ScaffolderClient as S, EntityNamePickerFieldExtension as a, EntityTagsPickerFieldExtension as b, OwnedEntityPickerFieldExtension as c, ScaffolderPage as d, EntityPickerFieldSchema as e, OwnerPickerFieldSchema as f, RepoUrlPickerFieldSchema as g, repoPickerValidation as h, OwnedEntityPickerFieldSchema as i, EntityTagsPickerFieldSchema as j, MyGroupsPickerSchema as k, MyGroupsPickerFieldSchema as l, makeFieldSchemaFromZod as m, selectedTemplateRouteRef as n, scaffolderTaskRouteRef as o, editRouteRef as p, actionsRouteRef as q, rootRouteRef as r, scaffolderPlugin as s, scaffolderListTaskRouteRef as t, registerComponentRouteRef as u, viewTechDocRouteRef as v, legacySelectedTemplateRouteRef as w, EntityPicker as x, EntityPickerSchema as y, EntityNamePicker as z };\n//# sourceMappingURL=plugin-e86ee6a1.esm.js.map\n","import { r as rootRouteRef$1 } from './esm/plugin-e86ee6a1.esm.js';\nexport { a as EntityNamePickerFieldExtension, E as EntityPickerFieldExtension, e as EntityPickerFieldSchema, b as EntityTagsPickerFieldExtension, j as EntityTagsPickerFieldSchema, M as MyGroupsPickerFieldExtension, l as MyGroupsPickerFieldSchema, k as MyGroupsPickerSchema, c as OwnedEntityPickerFieldExtension, i as OwnedEntityPickerFieldSchema, O as OwnerPickerFieldExtension, f as OwnerPickerFieldSchema, R as RepoUrlPickerFieldExtension, g as RepoUrlPickerFieldSchema, S as ScaffolderClient, d as ScaffolderPage, m as makeFieldSchemaFromZod, h as repoPickerValidation, s as scaffolderPlugin } from './esm/plugin-e86ee6a1.esm.js';\nexport { T as TemplateTypePicker } from './esm/TemplateTypePicker-efec8c34.esm.js';\nexport { T as TaskPage } from './esm/TaskPage-e70ca2f8.esm.js';\nimport { createScaffolderFieldExtension as createScaffolderFieldExtension$1, ScaffolderFieldExtensions as ScaffolderFieldExtensions$1, useTemplateSecrets as useTemplateSecrets$1, scaffolderApiRef as scaffolderApiRef$1, createScaffolderLayout as createScaffolderLayout$1, ScaffolderLayouts as ScaffolderLayouts$1 } from '@backstage/plugin-scaffolder-react';\nimport '@backstage/integration-react';\nimport '@backstage/catalog-model';\nimport '@backstage/errors';\nimport 'qs';\nimport 'zen-observable';\nimport 'event-source-polyfill';\nimport '@backstage/catalog-client';\nimport '@backstage/core-plugin-api';\nimport '@backstage/plugin-catalog-react';\nimport '@material-ui/core';\nimport '@material-ui/core/FormControl';\nimport '@material-ui/lab/Autocomplete';\nimport 'react';\nimport 'react-use/lib/useAsync';\nimport 'zod';\nimport 'zod-to-json-schema';\nimport '@material-ui/core/FormHelperText';\nimport '@material-ui/core/Input';\nimport '@material-ui/core/InputLabel';\nimport '@backstage/core-components';\nimport 'react-use/lib/useDebounce';\nimport 'react-use/lib/useEffectOnce';\nimport '@material-ui/lab';\nimport 'lodash/capitalize';\nimport '@material-ui/icons/CheckBox';\nimport '@material-ui/icons/CheckBoxOutlineBlank';\nimport '@material-ui/icons/ExpandMore';\nimport '@material-ui/core/Grid';\nimport '@material-ui/core/Step';\nimport '@material-ui/core/StepLabel';\nimport '@material-ui/core/Stepper';\nimport '@material-ui/core/styles';\nimport '@material-ui/core/Typography';\nimport '@material-ui/icons/Cancel';\nimport '@material-ui/icons/Check';\nimport '@material-ui/icons/FiberManualRecord';\nimport 'classnames';\nimport 'luxon';\nimport 'react-router-dom';\nimport 'react-use/lib/useInterval';\nimport '@material-ui/icons/Language';\n\nconst rootRouteRef = rootRouteRef$1;\nconst createScaffolderFieldExtension = createScaffolderFieldExtension$1;\nconst ScaffolderFieldExtensions = ScaffolderFieldExtensions$1;\nconst useTemplateSecrets = useTemplateSecrets$1;\nconst scaffolderApiRef = scaffolderApiRef$1;\nconst createScaffolderLayout = createScaffolderLayout$1;\nconst ScaffolderLayouts = ScaffolderLayouts$1;\n\nexport { ScaffolderFieldExtensions, ScaffolderLayouts, createScaffolderFieldExtension, createScaffolderLayout, rootRouteRef, scaffolderApiRef, useTemplateSecrets };\n//# sourceMappingURL=index.esm.js.map\n","/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          // Remove the lastEventId parameter if it's already part of the request URL.\r\n          var i = url.indexOf(\"?\");\r\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\r\n            return paramName === lastEventIdQueryParameterName ? '' : p;\r\n          });\r\n          // Append the current lastEventId to the request URL.\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n","import { createApiRef, AnalyticsContext, useApi, useAnalytics, configApiRef, createReactExtension, useElementFilter, getComponentData } from '@backstage/core-plugin-api';\nimport React, { useMemo, useContext, useState, useCallback, useEffect, forwardRef, useRef, createElement, Fragment, isValidElement, cloneElement } from 'react';\nimport { makeStyles, TextField, InputAdornment, IconButton, CircularProgress, ListItemIcon, ListItemText, Chip, FormControl, FormLabel, FormControlLabel, Checkbox, InputLabel, Select, MenuItem, Typography, TablePagination, Box, List, InputBase, ListSubheader, Menu, Button as Button$1, ListItem } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport SearchIcon from '@material-ui/icons/Search';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { isEqual, isFunction } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { Autocomplete } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { Progress, ResponseErrorPanel, EmptyState, Link } from '@backstage/core-components';\nimport Typography$1 from '@material-ui/core/Typography';\nimport qs from 'qs';\nimport AddIcon from '@material-ui/icons/Add';\nimport ArrowRightIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\n\nconst searchApiRef = createApiRef({\n  id: \"plugin.search.queryservice\"\n});\nclass MockSearchApi {\n  constructor(mockedResults) {\n    this.mockedResults = mockedResults;\n  }\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n\nconst useStyles$4 = makeStyles(\n  () => ({\n    highlight: {}\n  }),\n  { name: \"BackstageHighlightedSearchResultText\" }\n);\nconst HighlightedSearchResultText = (props) => {\n  const { text, preTag, postTag } = props;\n  const classes = useStyles$4();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, terms.map(\n    (t, idx) => t.includes(preTag) ? /* @__PURE__ */ React.createElement(\"mark\", { className: classes.highlight, key: idx }, t.replace(new RegExp(`${preTag}|${postTag}`, \"g\"), \"\")) : t\n  ));\n};\n\nconst SearchContext = createVersionedContext(\"search-context\");\nconst useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error(\"useSearch must be used within a SearchContextProvider\");\n  }\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error(\"No SearchContext v1 found\");\n  }\n  return value;\n};\nconst useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== void 0;\n};\nconst searchInitialState = {\n  term: \"\",\n  types: [],\n  filters: {},\n  pageLimit: void 0,\n  pageCursor: void 0\n};\nconst useSearchContextValue = (initialValue = searchInitialState) => {\n  var _a, _b, _c, _d;\n  const searchApi = useApi(searchApiRef);\n  const [term, setTerm] = useState(initialValue.term);\n  const [types, setTypes] = useState(initialValue.types);\n  const [filters, setFilters] = useState(initialValue.filters);\n  const [pageLimit, setPageLimit] = useState(\n    initialValue.pageLimit\n  );\n  const [pageCursor, setPageCursor] = useState(\n    initialValue.pageCursor\n  );\n  const prevTerm = usePrevious(term);\n  const prevFilters = usePrevious(filters);\n  const result = useAsync(\n    () => searchApi.query({\n      term,\n      types,\n      filters,\n      pageLimit,\n      pageCursor\n    }),\n    [term, types, filters, pageLimit, pageCursor]\n  );\n  const hasNextPage = !result.loading && !result.error && ((_a = result.value) == null ? void 0 : _a.nextPageCursor);\n  const hasPreviousPage = !result.loading && !result.error && ((_b = result.value) == null ? void 0 : _b.previousPageCursor);\n  const fetchNextPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.nextPageCursor);\n  }, [(_c = result.value) == null ? void 0 : _c.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.previousPageCursor);\n  }, [(_d = result.value) == null ? void 0 : _d.previousPageCursor]);\n  useEffect(() => {\n    if (prevTerm !== void 0 && term !== prevTerm) {\n      setPageCursor(void 0);\n    }\n  }, [term, prevTerm, setPageCursor]);\n  useEffect(() => {\n    if (prevFilters !== void 0 && !isEqual(filters, prevFilters)) {\n      setPageCursor(void 0);\n    }\n  }, [filters, prevFilters, setPageCursor]);\n  const value = {\n    result,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    filters,\n    setFilters,\n    pageLimit,\n    setPageLimit,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : void 0,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : void 0\n  };\n  return value;\n};\nconst LocalSearchContext = (props) => {\n  const { initialState, children } = props;\n  const value = useSearchContextValue(initialState);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: { searchTypes: value.types.sort().join(\",\") }\n    },\n    /* @__PURE__ */ React.createElement(SearchContext.Provider, { value: createVersionedValueMap({ 1: value }) }, children)\n  );\n};\nconst SearchContextProvider = (props) => {\n  const { initialState, inheritParentContextIfAvailable, children } = props;\n  const hasParentContext = useSearchContextCheck();\n  return hasParentContext && inheritParentContextIfAvailable ? /* @__PURE__ */ React.createElement(React.Fragment, null, children) : /* @__PURE__ */ React.createElement(LocalSearchContext, { initialState }, children);\n};\n\nconst TrackSearch = ({ children }) => {\n  var _a, _b;\n  const useHasChanged = (value) => {\n    const previousVal = usePrevious(value);\n    return previousVal !== value;\n  };\n  const analytics = useAnalytics();\n  const { term, result } = useSearch();\n  const numberOfResults = (_b = (_a = result.value) == null ? void 0 : _a.numberOfResults) != null ? _b : void 0;\n  const hasStartedLoading = useHasChanged(result.loading);\n  const hasFinishedLoading = hasStartedLoading && !result.loading;\n  useEffect(() => {\n    if (term && hasFinishedLoading) {\n      analytics.captureEvent(\"search\", term, {\n        value: numberOfResults\n      });\n    }\n  }, [analytics, term, numberOfResults, hasFinishedLoading]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nfunction withContext$1(Component) {\n  return forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props, ref })));\n}\nconst SearchBarBase = withContext$1(\n  forwardRef((props, ref) => {\n    const {\n      onChange,\n      onKeyDown = () => {\n      },\n      onClear = () => {\n      },\n      onSubmit = () => {\n      },\n      debounceTime = 200,\n      clearButton = true,\n      fullWidth = true,\n      value: defaultValue,\n      label,\n      placeholder,\n      inputProps = {},\n      InputProps = {},\n      endAdornment,\n      ...rest\n    } = props;\n    const configApi = useApi(configApiRef);\n    const [value, setValue] = useState(\"\");\n    useEffect(() => {\n      setValue(\n        (prevValue) => prevValue !== defaultValue ? String(defaultValue) : prevValue\n      );\n    }, [defaultValue]);\n    useDebounce(() => onChange(value), debounceTime, [value]);\n    const handleChange = useCallback(\n      (e) => {\n        setValue(e.target.value);\n      },\n      [setValue]\n    );\n    const handleKeyDown = useCallback(\n      (e) => {\n        if (onKeyDown)\n          onKeyDown(e);\n        if (onSubmit && e.key === \"Enter\") {\n          onSubmit();\n        }\n      },\n      [onKeyDown, onSubmit]\n    );\n    const handleClear = useCallback(() => {\n      onChange(\"\");\n      if (onClear) {\n        onClear();\n      }\n    }, [onChange, onClear]);\n    const ariaLabel = label ? void 0 : \"Search\";\n    const inputPlaceholder = placeholder != null ? placeholder : `Search in ${configApi.getOptionalString(\"app.title\") || \"Backstage\"}`;\n    const startAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"start\" }, /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"Query\", size: \"small\", disabled: true }, /* @__PURE__ */ React.createElement(SearchIcon, null)));\n    const clearButtonEndAdornment = /* @__PURE__ */ React.createElement(InputAdornment, { position: \"end\" }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        \"aria-label\": \"Clear\",\n        size: \"small\",\n        onClick: handleClear,\n        onKeyDown: (event) => {\n          if (event.key === \"Enter\") {\n            event.stopPropagation();\n          }\n        }\n      },\n      \"Clear\"\n    ));\n    return /* @__PURE__ */ React.createElement(TrackSearch, null, /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        id: \"search-bar-text-field\",\n        \"data-testid\": \"search-bar-next\",\n        variant: \"outlined\",\n        margin: \"normal\",\n        inputRef: ref,\n        value,\n        label,\n        placeholder: inputPlaceholder,\n        InputProps: {\n          startAdornment,\n          endAdornment: clearButton ? clearButtonEndAdornment : endAdornment,\n          ...InputProps\n        },\n        inputProps: {\n          \"aria-label\": ariaLabel,\n          ...inputProps\n        },\n        fullWidth,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        ...rest\n      }\n    ));\n  })\n);\nconst SearchBar = withContext$1(\n  forwardRef((props, ref) => {\n    const { value: initialValue = \"\", onChange, ...rest } = props;\n    const { term, setTerm } = useSearch();\n    useEffect(() => {\n      if (initialValue) {\n        setTerm(String(initialValue));\n      }\n    }, [initialValue, setTerm]);\n    const handleChange = useCallback(\n      (newValue) => {\n        if (onChange) {\n          onChange(newValue);\n        } else {\n          setTerm(newValue);\n        }\n      },\n      [onChange, setTerm]\n    );\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { pluginId: \"search\", extension: \"SearchBar\" }\n      },\n      /* @__PURE__ */ React.createElement(\n        SearchBarBase,\n        {\n          ...rest,\n          ref,\n          value: term,\n          onChange: handleChange\n        }\n      )\n    );\n  })\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  loading: {\n    right: theme.spacing(1),\n    position: \"absolute\"\n  }\n}));\nconst withContext = (Component) => {\n  return (props) => /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, /* @__PURE__ */ React.createElement(Component, { ...props }));\n};\nconst SearchAutocompleteLoadingAdornment = () => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\n    CircularProgress,\n    {\n      className: classes.loading,\n      \"data-testid\": \"search-autocomplete-progressbar\",\n      color: \"inherit\",\n      size: 20\n    }\n  );\n};\nconst SearchAutocomplete = withContext(\n  function SearchAutocompleteComponent(props) {\n    const {\n      loading,\n      value,\n      onChange = () => {\n      },\n      options = [],\n      getOptionLabel = (option) => String(option),\n      inputPlaceholder,\n      inputDebounceTime,\n      freeSolo = true,\n      fullWidth = true,\n      clearOnBlur = false,\n      \"data-testid\": dataTestId = \"search-autocomplete\",\n      ...rest\n    } = props;\n    const { setTerm } = useSearch();\n    const getInputValue = useCallback(\n      (option) => {\n        if (!option)\n          return \"\";\n        if (typeof option === \"string\")\n          return option;\n        return getOptionLabel(option);\n      },\n      [getOptionLabel]\n    );\n    const inputValue = useMemo(\n      () => getInputValue(value),\n      [value, getInputValue]\n    );\n    const handleChange = useCallback(\n      (event, option, reason, details) => {\n        setTerm(getInputValue(option));\n        onChange(event, option, reason, details);\n      },\n      [getInputValue, setTerm, onChange]\n    );\n    const renderInput = useCallback(\n      ({\n        InputProps: { ref, className, endAdornment },\n        InputLabelProps,\n        ...params\n      }) => /* @__PURE__ */ React.createElement(\n        SearchBar,\n        {\n          ...params,\n          ref,\n          clearButton: false,\n          value: inputValue,\n          placeholder: inputPlaceholder,\n          debounceTime: inputDebounceTime,\n          endAdornment: loading ? /* @__PURE__ */ React.createElement(SearchAutocompleteLoadingAdornment, null) : endAdornment,\n          InputProps: { className }\n        }\n      ),\n      [loading, inputValue, inputPlaceholder, inputDebounceTime]\n    );\n    return /* @__PURE__ */ React.createElement(\n      Autocomplete,\n      {\n        ...rest,\n        \"data-testid\": dataTestId,\n        value,\n        onChange: handleChange,\n        options,\n        getOptionLabel,\n        renderInput,\n        freeSolo,\n        fullWidth,\n        clearOnBlur\n      }\n    );\n  }\n);\n\nconst SearchAutocompleteDefaultOption = (props) => {\n  const {\n    icon,\n    primaryText,\n    primaryTextTypographyProps,\n    secondaryText,\n    secondaryTextTypographyProps,\n    disableTextTypography\n  } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon ? /* @__PURE__ */ React.createElement(ListItemIcon, null, icon) : null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: primaryText,\n      primaryTypographyProps: primaryTextTypographyProps,\n      secondary: secondaryText,\n      secondaryTypographyProps: secondaryTextTypographyProps,\n      disableTypography: disableTextTypography\n    }\n  ));\n};\n\nconst useAsyncFilterValues = (fn, inputValue, defaultValues = [], debounce = 250) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true\n  });\n  useDebounce(\n    () => {\n      if (valuesMemo.current[inputValue] === void 0) {\n        valuesMemo.current[inputValue] = callback(inputValue).then((values) => {\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue]\n  );\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues\n    };\n  }\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue\n    };\n  }\n  return state;\n};\nconst useDefaultFilterValue = (name, defaultValue) => {\n  const { setFilters } = useSearch();\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters((prevFilters) => ({\n        ...prevFilters,\n        [name]: defaultValue\n      }));\n    }\n  }, []);\n};\n\nconst AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple\n  } = props;\n  const [inputValue, setInputValue] = useState(\"\");\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue = filters[name] || (multiple ? [] : null);\n  const handleChange = (_, newValue) => {\n    setFilters((prevState) => {\n      const { [name]: filter, ...others } = prevState;\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n  const renderInput = (params) => /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...params,\n      name: \"search\",\n      variant: \"outlined\",\n      label,\n      fullWidth: true\n    }\n  );\n  const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => /* @__PURE__ */ React.createElement(Chip, { label: option, color: \"primary\", ...getTagProps({ index }) }));\n  return /* @__PURE__ */ React.createElement(\n    Autocomplete,\n    {\n      filterSelectedOptions,\n      limitTags,\n      multiple,\n      className,\n      id: `${multiple ? \"multi-\" : \"\"}select-filter-${name}--select`,\n      options: values || [],\n      loading,\n      value: filterValue,\n      onChange: handleChange,\n      onInputChange: (_, newValue) => setInputValue(newValue),\n      renderInput,\n      renderTags\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  checkboxWrapper: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\"\n  },\n  textWrapper: {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\"\n  }\n});\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const handleChange = (e) => {\n    const {\n      target: { value, checked }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = (filter || []).filter((i) => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      disabled: loading,\n      fullWidth: true,\n      \"data-testid\": \"search-checkboxfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(FormLabel, { className: classes.label }, label) : null,\n    values.map((value) => {\n      var _a;\n      return /* @__PURE__ */ React.createElement(\n        FormControlLabel,\n        {\n          key: value,\n          classes: {\n            root: classes.checkboxWrapper,\n            label: classes.textWrapper\n          },\n          label: value,\n          control: /* @__PURE__ */ React.createElement(\n            Checkbox,\n            {\n              color: \"primary\",\n              inputProps: { \"aria-labelledby\": value },\n              value,\n              name: value,\n              onChange: handleChange,\n              checked: ((_a = filters[name]) != null ? _a : []).includes(value)\n            }\n          )\n        }\n      );\n    })\n  );\n};\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const handleChange = (e) => {\n    const {\n      target: { value }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      disabled: loading,\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-selectfilter-next\"\n    },\n    label ? /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, label) : null,\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        variant: \"outlined\",\n        value: filters[name] || \"\",\n        onChange: handleChange\n      },\n      /* @__PURE__ */ React.createElement(MenuItem, { value: \"\" }, /* @__PURE__ */ React.createElement(\"em\", null, \"All\")),\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Typography, { variant: \"inherit\", noWrap: true }, value)))\n    )\n  );\n};\nconst SearchFilter = (props) => {\n  const { component: Element, ...elementProps } = props;\n  return /* @__PURE__ */ React.createElement(Element, { ...elementProps });\n};\nSearchFilter.Checkbox = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: CheckboxFilter });\nSearchFilter.Select = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: SelectFilter });\nSearchFilter.Autocomplete = (props) => /* @__PURE__ */ React.createElement(SearchFilter, { ...props, component: AutocompleteFilter });\n\nconst encodePageCursor = (pageCursor) => {\n  return Buffer.from(pageCursor.toString(), \"utf-8\").toString(\"base64\");\n};\nconst decodePageCursor = (pageCursor) => {\n  if (!pageCursor)\n    return 0;\n  return Number(Buffer.from(pageCursor, \"base64\").toString(\"utf-8\"));\n};\nconst SearchPaginationBase = (props) => {\n  const {\n    total: count = -1,\n    cursor: pageCursor,\n    hasNextPage,\n    onCursorChange: onPageCursorChange,\n    limit: rowsPerPage = 25,\n    limitLabel: labelRowsPerPage = \"Results per page:\",\n    limitText: labelDisplayedRows = ({ from, to }) => count > 0 ? `of ${count}` : `${from}-${to}`,\n    limitOptions: rowsPerPageOptions,\n    onLimitChange: onPageLimitChange,\n    ...rest\n  } = props;\n  const page = useMemo(() => decodePageCursor(pageCursor), [pageCursor]);\n  const handlePageChange = useCallback(\n    (_, newValue) => {\n      onPageCursorChange == null ? void 0 : onPageCursorChange(encodePageCursor(newValue));\n    },\n    [onPageCursorChange]\n  );\n  const handleRowsPerPageChange = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      onPageLimitChange == null ? void 0 : onPageLimitChange(parseInt(newValue, 10));\n    },\n    [onPageLimitChange]\n  );\n  return /* @__PURE__ */ React.createElement(\n    TablePagination,\n    {\n      ...rest,\n      component: \"div\",\n      count,\n      page,\n      nextIconButtonProps: {\n        ...hasNextPage !== void 0 && { disabled: !hasNextPage }\n      },\n      onPageChange: handlePageChange,\n      rowsPerPage,\n      labelRowsPerPage,\n      labelDisplayedRows,\n      rowsPerPageOptions,\n      onRowsPerPageChange: handleRowsPerPageChange\n    }\n  );\n};\nconst SearchPagination = (props) => {\n  const { pageLimit, setPageLimit, pageCursor, setPageCursor, fetchNextPage } = useSearch();\n  const handlePageLimitChange = useCallback(\n    (newPageLimit) => {\n      setPageLimit(newPageLimit);\n      setPageCursor(void 0);\n    },\n    [setPageLimit, setPageCursor]\n  );\n  return /* @__PURE__ */ React.createElement(\n    SearchPaginationBase,\n    {\n      ...props,\n      hasNextPage: !!fetchNextPage,\n      limit: pageLimit,\n      onLimitChange: handlePageLimitChange,\n      cursor: pageCursor,\n      onCursorChange: setPageCursor\n    }\n  );\n};\n\nconst SearchResultContext = (props) => {\n  const { children } = props;\n  const context = useSearch();\n  const { result: state, ...query } = context;\n  return children(state, query);\n};\nconst SearchResultApi = (props) => {\n  const { query, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const state = useAsync(() => {\n    const { term = \"\", types = [], filters = {}, ...rest } = query;\n    return searchApi.query({ ...rest, term, types, filters });\n  }, [query]);\n  return children(state, query);\n};\nconst SearchResultState = (props) => {\n  const { query, children } = props;\n  return query ? /* @__PURE__ */ React.createElement(SearchResultApi, { query }, children) : /* @__PURE__ */ React.createElement(SearchResultContext, null, children);\n};\nconst SearchResultComponent = (props) => {\n  const {\n    query,\n    children,\n    noResultsComponent = /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  return /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => {\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(Progress, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ResponseErrorPanel,\n        {\n          title: \"Error encountered while fetching search results\",\n          error\n        }\n      );\n    }\n    if (!(value == null ? void 0 : value.results.length)) {\n      return noResultsComponent;\n    }\n    if (isFunction(children)) {\n      return children(value);\n    }\n    return /* @__PURE__ */ React.createElement(SearchResultListItemExtensions, { ...rest, results: value.results }, children);\n  });\n};\nconst SearchResult = (props) => /* @__PURE__ */ React.createElement(\n  AnalyticsContext,\n  {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"SearchResult\"\n    }\n  },\n  /* @__PURE__ */ React.createElement(SearchResultComponent, { ...props })\n);\n\nconst DefaultResultListItemComponent = ({\n  result,\n  highlight,\n  icon,\n  secondaryAction,\n  lineClamp = 5\n}) => {\n  if (!result)\n    return null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primaryTypographyProps: { variant: \"h6\" },\n      primary: /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n        HighlightedSearchResultText,\n        {\n          text: (highlight == null ? void 0 : highlight.fields.title) || \"\",\n          preTag: (highlight == null ? void 0 : highlight.preTag) || \"\",\n          postTag: (highlight == null ? void 0 : highlight.postTag) || \"\"\n        }\n      ) : result.title),\n      secondary: /* @__PURE__ */ React.createElement(\n        Typography$1,\n        {\n          component: \"span\",\n          style: {\n            display: \"-webkit-box\",\n            WebkitBoxOrient: \"vertical\",\n            WebkitLineClamp: lineClamp,\n            overflow: \"hidden\"\n          },\n          color: \"textSecondary\",\n          variant: \"body2\"\n        },\n        (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n          HighlightedSearchResultText,\n          {\n            text: highlight.fields.text,\n            preTag: highlight.preTag,\n            postTag: highlight.postTag\n          }\n        ) : result.text\n      )\n    }\n  ), secondaryAction && /* @__PURE__ */ React.createElement(Box, { alignItems: \"flex-end\" }, secondaryAction));\n};\nconst HigherOrderDefaultResultListItem = (props) => {\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"DefaultResultListItem\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(DefaultResultListItemComponent, { ...props })\n  );\n};\n\nconst SearchResultListLayout = (props) => {\n  const {\n    error,\n    loading,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, resultItems.map(renderResultItem));\n};\nconst SearchResultList = (props) => {\n  const { query, renderResultItem, children, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultList\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }) => /* @__PURE__ */ React.createElement(\n      SearchResultListLayout,\n      {\n        ...rest,\n        error,\n        loading,\n        resultItems: value == null ? void 0 : value.results,\n        renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n      }\n    ))\n  );\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  listSubheader: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderName: {\n    marginLeft: theme.spacing(1),\n    textTransform: \"uppercase\"\n  },\n  listSubheaderChip: {\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderFilter: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderLink: {\n    marginLeft: \"auto\",\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderLinkIcon: {\n    fontSize: \"inherit\",\n    marginLeft: theme.spacing(0.5)\n  }\n}));\nconst SearchResultGroupFilterFieldLayout = (props) => {\n  const classes = useStyles$1();\n  const { label, children, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      ...rest,\n      className: classes.listSubheaderFilter,\n      variant: \"outlined\",\n      label: /* @__PURE__ */ React.createElement(React.Fragment, null, label, \": \", children)\n    }\n  );\n};\nconst NullIcon = () => null;\nconst useSearchResultGroupTextFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:focus\": {\n      outline: \"none\",\n      background: theme.palette.common.white\n    },\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}));\nconst SearchResultGroupTextFilterField = (props) => {\n  const classes = useSearchResultGroupTextFilterStyles();\n  const { label, value = \"None\", onChange, onDelete } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      role: \"textbox\",\n      component: \"span\",\n      className: classes.root,\n      onChange: handleChange,\n      contentEditable: true,\n      suppressContentEditableWarning: true\n    },\n    value\n  ));\n};\nconst useSearchResultGroupSelectFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    },\n    \"&:focus\": {\n      outline: \"none\"\n    },\n    \"&>div:first-child\": {\n      padding: 0\n    }\n  }\n}));\nconst SearchResultGroupSelectFilterField = (props) => {\n  const classes = useSearchResultGroupSelectFilterStyles();\n  const { label, value = \"none\", onChange, onDelete, children } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, { label, onDelete }, /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      className: classes.root,\n      value,\n      onChange: handleChange,\n      input: /* @__PURE__ */ React.createElement(InputBase, null),\n      IconComponent: NullIcon\n    },\n    /* @__PURE__ */ React.createElement(MenuItem, { value: \"none\" }, \"None\"),\n    children\n  ));\n};\nfunction SearchResultGroupLayout(props) {\n  const classes = useStyles$1();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const {\n    error,\n    loading,\n    icon,\n    title,\n    titleProps = {},\n    link = /* @__PURE__ */ React.createElement(React.Fragment, null, \"See all\", /* @__PURE__ */ React.createElement(ArrowRightIcon, { className: classes.listSubheaderLinkIcon })),\n    linkProps = {},\n    filterOptions,\n    renderFilterOption = (filterOption) => /* @__PURE__ */ React.createElement(MenuItem, { key: String(filterOption), value: String(filterOption) }, filterOption),\n    filterFields,\n    renderFilterField,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(\n      HigherOrderDefaultResultListItem,\n      {\n        key: resultItem.document.location,\n        result: resultItem.document\n      }\n    ),\n    disableRenderingWithNoResults,\n    noResultsComponent = disableRenderingWithNoResults ? null : /* @__PURE__ */ React.createElement(EmptyState, { missing: \"data\", title: \"Sorry, no results were found\" }),\n    ...rest\n  } = props;\n  const handleClick = useCallback((e) => {\n    setAnchorEl(e.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ResponseErrorPanel,\n      {\n        title: \"Error encountered while fetching search results\",\n        error\n      }\n    );\n  }\n  if (!(resultItems == null ? void 0 : resultItems.length)) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, noResultsComponent);\n  }\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, /* @__PURE__ */ React.createElement(ListSubheader, { className: classes.listSubheader }, icon, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.listSubheaderName,\n      component: \"strong\",\n      ...titleProps\n    },\n    title\n  ), filterOptions ? /* @__PURE__ */ React.createElement(\n    Chip,\n    {\n      className: classes.listSubheaderChip,\n      component: \"button\",\n      icon: /* @__PURE__ */ React.createElement(AddIcon, null),\n      variant: \"outlined\",\n      label: \"Add filter\",\n      \"aria-controls\": \"filters-menu\",\n      \"aria-haspopup\": \"true\",\n      onClick: handleClick\n    }\n  ) : null, filterOptions ? /* @__PURE__ */ React.createElement(\n    Menu,\n    {\n      id: \"filters-menu\",\n      anchorEl,\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      onClick: handleClose,\n      keepMounted: true\n    },\n    filterOptions.map(renderFilterOption)\n  ) : null, filterFields == null ? void 0 : filterFields.map(\n    (filterField) => {\n      var _a;\n      return (_a = renderFilterField == null ? void 0 : renderFilterField(filterField)) != null ? _a : null;\n    }\n  ), /* @__PURE__ */ React.createElement(Link, { className: classes.listSubheaderLink, to: \"/search\", ...linkProps }, link)), resultItems.map(renderResultItem));\n}\nfunction SearchResultGroup(props) {\n  const { query, children, renderResultItem, linkProps = {}, ...rest } = props;\n  const defaultRenderResultItem = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(\n    AnalyticsContext,\n    {\n      attributes: {\n        pluginId: \"search\",\n        extension: \"SearchResultGroup\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(SearchResultState, { query }, ({ loading, error, value }, { term, types, pageCursor, filters = {} }) => {\n      const to = `/search?${qs.stringify(\n        { term, types, filters, pageCursor, query: term },\n        { arrayFormat: \"brackets\" }\n      )}`;\n      return /* @__PURE__ */ React.createElement(\n        SearchResultGroupLayout,\n        {\n          ...rest,\n          error,\n          loading,\n          linkProps: { to, ...linkProps },\n          filterFields: Object.keys(filters),\n          resultItems: value == null ? void 0 : value.results,\n          renderResultItem: renderResultItem != null ? renderResultItem : defaultRenderResultItem\n        }\n      );\n    })\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0)\n  }\n}));\nconst SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles();\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"nav\", { \"aria-label\": \"pagination navigation\", className: classes.root }, /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"previous page\",\n      disabled: !fetchPreviousPage,\n      onClick: fetchPreviousPage,\n      startIcon: /* @__PURE__ */ React.createElement(ArrowBackIosIcon, null)\n    },\n    \"Previous\"\n  ), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"aria-label\": \"next page\",\n      disabled: !fetchNextPage,\n      onClick: fetchNextPage,\n      endIcon: /* @__PURE__ */ React.createElement(ArrowRightIcon, null)\n    },\n    \"Next\"\n  ));\n};\n\nconst SEARCH_RESULT_LIST_ITEM_EXTENSION = \"search.results.list.items.extensions.v1\";\nconst findSearchResultListItemExtensionElement = (elements, result) => {\n  for (const element of elements) {\n    if (!isValidElement(element))\n      continue;\n    const predicate = getComponentData(\n      element,\n      SEARCH_RESULT_LIST_ITEM_EXTENSION\n    );\n    if (!(predicate == null ? void 0 : predicate(result)))\n      continue;\n    return cloneElement(element, {\n      rank: result.rank,\n      highlight: result.highlight,\n      result: result.document,\n      // Use props in situations where a consumer is manually rendering the extension\n      ...element.props\n    });\n  }\n  return null;\n};\nconst SearchResultListItemExtension = (props) => {\n  const {\n    rank,\n    result,\n    noTrack,\n    children,\n    alignItems = \"flex-start\",\n    ...rest\n  } = props;\n  const analytics = useAnalytics();\n  const handleClickCapture = useCallback(() => {\n    if (noTrack)\n      return;\n    if (!result)\n      return;\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: rank\n    });\n  }, [rank, result, noTrack, analytics]);\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      divider: true,\n      alignItems,\n      onClickCapture: handleClickCapture,\n      ...rest\n    },\n    children\n  );\n};\nconst createSearchResultListItemExtension = (options) => {\n  const { name, component, predicate = () => true } = options;\n  return createReactExtension({\n    name,\n    component: {\n      lazy: () => component().then(\n        (type) => (props) => /* @__PURE__ */ React.createElement(\n          SearchResultListItemExtension,\n          {\n            rank: props.rank,\n            result: props.result,\n            noTrack: props.noTrack\n          },\n          createElement(type, props)\n        )\n      )\n    },\n    data: {\n      [SEARCH_RESULT_LIST_ITEM_EXTENSION]: predicate\n    }\n  });\n};\nconst useSearchResultListItemExtensions = (children) => {\n  const elements = useElementFilter(\n    children,\n    (collection) => {\n      return collection.selectByComponentData({\n        key: SEARCH_RESULT_LIST_ITEM_EXTENSION\n      }).getElements();\n    },\n    [children]\n  );\n  return useCallback(\n    (result, key) => {\n      const element = findSearchResultListItemExtensionElement(\n        elements,\n        result\n      );\n      return /* @__PURE__ */ React.createElement(Fragment, { key }, element != null ? element : /* @__PURE__ */ React.createElement(\n        SearchResultListItemExtension,\n        {\n          rank: result.rank,\n          result: result.document\n        },\n        /* @__PURE__ */ React.createElement(\n          HigherOrderDefaultResultListItem,\n          {\n            rank: result.rank,\n            highlight: result.highlight,\n            result: result.document\n          }\n        )\n      ));\n    },\n    [elements]\n  );\n};\nconst SearchResultListItemExtensions = (props) => {\n  const { results, children, ...rest } = props;\n  const render = useSearchResultListItemExtensions(children);\n  return /* @__PURE__ */ React.createElement(List, { ...rest }, results.map(render));\n};\n\nexport { AutocompleteFilter, CheckboxFilter, HigherOrderDefaultResultListItem as DefaultResultListItem, HighlightedSearchResultText, MockSearchApi, SearchAutocomplete, SearchAutocompleteDefaultOption, SearchBar, SearchBarBase, SearchContextProvider, SearchFilter, SearchPagination, SearchPaginationBase, SearchResult, SearchResultApi, SearchResultComponent, SearchResultContext, SearchResultGroup, SearchResultGroupFilterFieldLayout, SearchResultGroupLayout, SearchResultGroupSelectFilterField, SearchResultGroupTextFilterField, SearchResultList, SearchResultListItemExtensions, SearchResultListLayout, SearchResultPager, SearchResultState, SelectFilter, createSearchResultListItemExtension, searchApiRef, useSearch, useSearchContextCheck, useSearchResultListItemExtensions };\n//# sourceMappingURL=index.esm.js.map\n","import { useContent, SidebarSearchField } from '@backstage/core-components';\nimport { createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useRouteRef, useApi } from '@backstage/core-plugin-api';\nimport { searchApiRef, SearchContextProvider, SearchBar, SearchResult, SearchResultPager, useSearch } from '@backstage/plugin-search-react';\nimport { Dialog, useTheme, DialogTitle, DialogContent, Grid, Divider, DialogActions, makeStyles as makeStyles$1, Card, CardHeader, CardContent, Accordion, AccordionSummary, AccordionDetails, List, ListItem, ListItemIcon, ListItemText, Tabs, Tab, FormControl, InputLabel, Select, Chip, MenuItem, Checkbox } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { useRef, useEffect, useCallback, useState, useContext, Fragment, cloneElement } from 'react';\nimport { useNavigate, useLocation, useOutlet } from 'react-router-dom';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport useUpdateEffect from 'react-use/lib/useUpdateEffect';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\nimport useAsync from 'react-use/lib/useAsync';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass SearchClient {\n  constructor(options) {\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"search\"\n    )}/query?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"search\"\n});\nconst searchPlugin = createPlugin({\n  id: \"search\",\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      }\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst SearchPage$1 = searchPlugin.provide(\n  createRoutableExtension({\n    name: \"SearchPage\",\n    component: () => import('./index-14e72004.esm.js').then((m) => m.SearchPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: \"SidebarSearchModal\",\n    component: {\n      lazy: () => import('./index-ec7f140c.esm.js').then(\n        (m) => m.SidebarSearchModal\n      )\n    }\n  })\n);\nconst HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: \"HomePageSearchBar\",\n    component: {\n      lazy: () => import('./index-3c2238df.esm.js').then((m) => m.HomePageSearchBar)\n    }\n  })\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  dialogTitle: {\n    gap: theme.spacing(1),\n    display: \"grid\",\n    alignItems: \"center\",\n    gridTemplateColumns: \"1fr auto\",\n    \"&> button\": {\n      marginTop: theme.spacing(1)\n    }\n  },\n  input: {\n    flex: 1\n  },\n  button: {\n    \"&:hover\": {\n      background: \"none\"\n    }\n  },\n  // Reduces default height of the modal, keeping a gap of 128px between the top and bottom of the page.\n  paperFullWidth: { height: \"calc(100% - 128px)\" },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: \"0.5em\" }\n}));\nconst Modal = ({ toggleModal }) => {\n  const classes = useStyles$3();\n  const navigate = useNavigate();\n  const { transitions } = useTheme();\n  const { focusContent } = useContent();\n  const searchRootRoute = useRouteRef(rootRouteRef)();\n  const searchBarRef = useRef(null);\n  useEffect(() => {\n    var _a;\n    (_a = searchBarRef == null ? void 0 : searchBarRef.current) == null ? void 0 : _a.focus();\n  });\n  const handleSearchResultClick = useCallback(() => {\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  }, [focusContent, transitions]);\n  const handleSearchBarSubmit = useCallback(() => {\n    var _a, _b;\n    const query = (_b = (_a = searchBarRef.current) == null ? void 0 : _a.value) != null ? _b : \"\";\n    navigate(`${searchRootRoute}?query=${query}`);\n    handleSearchResultClick();\n  }, [navigate, handleSearchResultClick, searchRootRoute]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogTitle, null, /* @__PURE__ */ React.createElement(Box, { className: classes.dialogTitle }, /* @__PURE__ */ React.createElement(\n    SearchBar,\n    {\n      className: classes.input,\n      inputProps: { ref: searchBarRef },\n      onSubmit: handleSearchBarSubmit\n    }\n  ), /* @__PURE__ */ React.createElement(IconButton, { \"aria-label\": \"close\", onClick: toggleModal }, /* @__PURE__ */ React.createElement(CloseIcon, null)))), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row-reverse\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\"\n    },\n    /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        className: classes.button,\n        color: \"primary\",\n        endIcon: /* @__PURE__ */ React.createElement(ArrowForwardIcon, null),\n        onClick: handleSearchBarSubmit,\n        disableRipple: true\n      },\n      \"View Full Results\"\n    ))\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    SearchResult,\n    {\n      onClick: handleSearchResultClick,\n      onKeyDown: handleSearchResultClick\n    }\n  )), /* @__PURE__ */ React.createElement(DialogActions, { className: classes.dialogActionsContainer }, /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(SearchResultPager, null)))));\n};\nconst SearchModal = (props) => {\n  var _a;\n  const { open = true, hidden, toggleModal, children } = props;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      classes: {\n        paperFullWidth: classes.paperFullWidth\n      },\n      onClose: toggleModal,\n      \"aria-labelledby\": \"search-modal-title\",\n      fullWidth: true,\n      maxWidth: \"lg\",\n      open,\n      hidden\n    },\n    open && /* @__PURE__ */ React.createElement(SearchContextProvider, { inheritParentContextIfAvailable: true }, (_a = children && children({ toggleModal })) != null ? _a : /* @__PURE__ */ React.createElement(Modal, { toggleModal }))\n  );\n};\n\nconst SearchModalContext = createVersionedContext(\"search-modal-context\");\nconst SearchModalProvider = (props) => {\n  const value = useSearchModal(props.showInitially);\n  const versionedValue = createVersionedValueMap({ 1: value });\n  return /* @__PURE__ */ React.createElement(SearchModalContext.Provider, { value: versionedValue }, props.children);\n};\nfunction useSearchModal(initialState = false) {\n  const [state, setState] = useState({\n    hidden: !initialState,\n    open: initialState\n  });\n  const toggleModal = useCallback(\n    () => setState((prevState) => ({\n      open: true,\n      hidden: !prevState.hidden\n    })),\n    []\n  );\n  const setOpen = useCallback(\n    (open) => setState((prevState) => ({\n      open: prevState.open || open,\n      hidden: !open\n    })),\n    []\n  );\n  const parentContext = useContext(SearchModalContext);\n  const parentContextValue = parentContext == null ? void 0 : parentContext.atVersion(1);\n  const isParentContextPresent = !!(parentContextValue == null ? void 0 : parentContextValue.state);\n  const location = useLocation();\n  const locationKey = `${location.pathname}${location.search}${location.hash}`;\n  useUpdateEffect(() => {\n    setState((prevState) => ({\n      open: prevState.open,\n      hidden: true\n    }));\n  }, [locationKey]);\n  return isParentContextPresent ? parentContextValue : { state, toggleModal, setOpen };\n}\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters\n      },\n      { arrayFormat: \"brackets\" }\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, null, /* @__PURE__ */ React.createElement(UrlUpdater, null), outlet);\n};\n\nconst useStyles$2 = makeStyles$1((theme) => ({\n  card: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\"\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1)\n  },\n  icon: {\n    color: theme.palette.common.black\n  },\n  list: {\n    width: \"100%\"\n  },\n  listItemIcon: {\n    width: \"24px\",\n    height: \"24px\"\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper\n  },\n  accordionSummary: {\n    minHeight: \"auto\",\n    \"&.Mui-expanded\": {\n      minHeight: \"auto\"\n    }\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    \"&.Mui-expanded\": {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1)\n  }\n}));\nconst SearchTypeAccordion = (props) => {\n  const classes = useStyles$2();\n  const { filters, setPageCursor, setTypes, term, types } = useSearch();\n  const searchApi = useApi(searchApiRef);\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, showCounts, types: givenTypes } = props;\n  const toggleExpanded = () => setExpanded((prevState) => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== \"\" ? [type] : []);\n      setPageCursor(void 0);\n      setExpanded(false);\n    };\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\",\n      icon: /* @__PURE__ */ React.createElement(AllIcon, null)\n    },\n    ...givenTypes\n  ];\n  const selected = types[0] || \"\";\n  const { value: resultCounts } = useAsync(async () => {\n    if (!showCounts) {\n      return {};\n    }\n    const counts = await Promise.all(\n      definedTypes.map((t) => t.value).map(async (type) => {\n        const { numberOfResults } = await searchApi.query({\n          term,\n          types: type ? [type] : [],\n          filters: types.includes(type) || !types.length && !type ? filters : {},\n          pageLimit: 0\n        });\n        return [\n          type,\n          numberOfResults !== void 0 ? `${numberOfResults >= 1e4 ? `>10000` : numberOfResults} results` : \" -- \"\n        ];\n      })\n    );\n    return Object.fromEntries(counts);\n  }, [filters, showCounts, term, types]);\n  return /* @__PURE__ */ React.createElement(Card, { className: classes.card }, /* @__PURE__ */ React.createElement(CardHeader, { title: name, titleTypographyProps: { variant: \"overline\" } }), /* @__PURE__ */ React.createElement(CardContent, { className: classes.cardContent }, /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      className: classes.accordion,\n      expanded,\n      onChange: toggleExpanded\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        classes: {\n          root: classes.accordionSummary,\n          content: classes.accordionSummaryContent\n        },\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, { className: classes.icon }),\n        IconButtonProps: { size: \"small\" }\n      },\n      expanded ? \"Collapse\" : definedTypes.filter((t) => t.value === selected)[0].name\n    ),\n    /* @__PURE__ */ React.createElement(AccordionDetails, { classes: { root: classes.accordionDetails } }, /* @__PURE__ */ React.createElement(\n      List,\n      {\n        className: classes.list,\n        component: \"nav\",\n        \"aria-label\": \"filter by type\",\n        disablePadding: true,\n        dense: true\n      },\n      definedTypes.map((type) => /* @__PURE__ */ React.createElement(Fragment, { key: type.value }, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n        ListItem,\n        {\n          selected: types[0] === type.value || types.length === 0 && type.value === \"\",\n          onClick: handleClick(type.value),\n          button: true\n        },\n        /* @__PURE__ */ React.createElement(ListItemIcon, null, cloneElement(type.icon, {\n          className: classes.listItemIcon\n        })),\n        /* @__PURE__ */ React.createElement(\n          ListItemText,\n          {\n            primary: type.name,\n            secondary: resultCounts && resultCounts[type.value]\n          }\n        )\n      )))\n    ))\n  )));\n};\n\nconst useStyles$1 = makeStyles$1((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`\n  },\n  tab: {\n    height: \"50px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.text.primary,\n    minWidth: \"130px\"\n  }\n}));\nconst SearchTypeTabs = (props) => {\n  const classes = useStyles$1();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n  const changeTab = (_, newType) => {\n    setTypes(newType !== \"\" ? [newType] : []);\n    setPageCursor(void 0);\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\"\n    },\n    ...givenTypes\n  ];\n  return /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      \"aria-label\": \"List of search types tabs\",\n      className: classes.tabs,\n      indicatorColor: \"primary\",\n      value: types.length === 0 ? \"\" : types[0],\n      onChange: changeTab\n    },\n    definedTypes.map((type, idx) => /* @__PURE__ */ React.createElement(\n      Tab,\n      {\n        key: idx,\n        className: classes.tab,\n        label: type.name,\n        value: type.value\n      }\n    ))\n  );\n};\n\nconst useStyles = makeStyles$1((theme) => ({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginTop: theme.spacing(1)\n  },\n  chip: {\n    margin: 2\n  }\n}));\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setTypes(value);\n  };\n  return /* @__PURE__ */ React.createElement(\n    FormControl,\n    {\n      className,\n      variant: \"filled\",\n      fullWidth: true,\n      \"data-testid\": \"search-typefilter-next\"\n    },\n    /* @__PURE__ */ React.createElement(InputLabel, { className: classes.label, margin: \"dense\" }, name),\n    /* @__PURE__ */ React.createElement(\n      Select,\n      {\n        multiple: true,\n        variant: \"outlined\",\n        value: types,\n        onChange: handleChange,\n        placeholder: \"All Results\",\n        renderValue: (selected) => /* @__PURE__ */ React.createElement(\"div\", { className: classes.chips }, selected.map((value) => /* @__PURE__ */ React.createElement(\n          Chip,\n          {\n            key: value,\n            label: value,\n            className: classes.chip,\n            size: \"small\"\n          }\n        )))\n      },\n      values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, { key: value, value }, /* @__PURE__ */ React.createElement(Checkbox, { checked: types.indexOf(value) > -1 }), /* @__PURE__ */ React.createElement(ListItemText, { primary: value })))\n    )\n  );\n};\nSearchType.Accordion = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeAccordion, { ...props });\n};\nSearchType.Tabs = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeTabs, { ...props });\n};\n\nconst SidebarSearch = (props) => {\n  const searchRoute = useRouteRef(rootRouteRef);\n  const { focusContent } = useContent();\n  const navigate = useNavigate();\n  const handleSearch = useCallback(\n    (query) => {\n      const queryString = qs.stringify({ query }, { addQueryPrefix: true });\n      focusContent();\n      navigate(`${searchRoute()}${queryString}`);\n    },\n    [focusContent, navigate, searchRoute]\n  );\n  return /* @__PURE__ */ React.createElement(\n    SidebarSearchField,\n    {\n      icon: props.icon,\n      onSearch: handleSearch,\n      to: \"/search\"\n    }\n  );\n};\n\nexport { HomePageSearchBar as H, SearchPage as S, SearchModalProvider as a, SearchModal as b, SearchType as c, SidebarSearch as d, SearchPage$1 as e, SidebarSearchModal as f, rootRouteRef as r, searchPlugin as s, useSearchModal as u };\n//# sourceMappingURL=index-625b4401.esm.js.map\n","import { Link, MarkdownContent, Progress, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { createApiRef, useApi, errorApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\nimport React, { useRef, useLayoutEffect, useState, useMemo, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles, DialogContent, DialogActions, Button, Input, Grid } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport AdjustIcon from '@material-ui/icons/Adjust';\nimport Typography$1 from '@material-ui/core/Typography/Typography';\nimport color from 'color';\nimport { forceSimulation, forceCollide } from 'd3-force';\n\nconst techRadarApiRef = createApiRef(\n  {\n    id: \"plugin.techradar.service\"\n  }\n);\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    ring: {\n      fill: \"none\",\n      stroke: \"#bbb\",\n      strokeWidth: \"1px\"\n    },\n    axis: {\n      fill: \"none\",\n      stroke: \"#bbb\",\n      strokeWidth: \"1px\"\n    },\n    text: {\n      pointerEvents: \"none\",\n      userSelect: \"none\",\n      fill: theme.palette.text.primary,\n      fontSize: \"25px\",\n      fontWeight: 800,\n      opacity: 0.7\n    }\n  }),\n  { name: \"PluginTechRadarGrid\" }\n);\nconst RadarGrid = (props) => {\n  const { radius, rings } = props;\n  const classes = useStyles$5(props);\n  const makeRingNode = (ringIndex, ringRadius) => [\n    /* @__PURE__ */ React.createElement(\n      \"circle\",\n      {\n        key: `c${ringIndex}`,\n        cx: 0,\n        cy: 0,\n        r: ringRadius,\n        className: classes.ring\n      }\n    ),\n    /* @__PURE__ */ React.createElement(\n      \"text\",\n      {\n        key: `t${ringIndex}`,\n        y: ringRadius !== void 0 ? -ringRadius + 42 : void 0,\n        textAnchor: \"middle\",\n        className: classes.text,\n        style: { fill: rings[ringIndex].color },\n        \"data-testid\": \"radar-ring-heading\"\n      },\n      rings[ringIndex].name\n    )\n  ];\n  const axisNodes = [\n    // X axis\n    /* @__PURE__ */ React.createElement(\n      \"line\",\n      {\n        key: \"x\",\n        x1: 0,\n        y1: -radius,\n        x2: 0,\n        y2: radius,\n        className: classes.axis,\n        \"data-testid\": \"radar-grid-x-line\"\n      }\n    ),\n    // Y axis\n    /* @__PURE__ */ React.createElement(\n      \"line\",\n      {\n        key: \"y\",\n        x1: -radius,\n        y1: 0,\n        x2: radius,\n        y2: 0,\n        className: classes.axis,\n        \"data-testid\": \"radar-grid-y-line\"\n      }\n    )\n  ];\n  const ringNodes = rings.map((r) => r.outerRadius).map((ringRadius, ringIndex) => makeRingNode(ringIndex, ringRadius));\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, axisNodes.concat(...ringNodes));\n};\n\nfunction isValidUrl(url) {\n  return Boolean(url && url !== \"#\" && url.length > 0);\n}\nconst WithLink = ({\n  url,\n  className,\n  children\n}) => isValidUrl(url) ? /* @__PURE__ */ React.createElement(Link, { className, to: url }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n\nconst RadarTimeline = (props) => {\n  const { timeline } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", gutterBottom: true }, \"History\"), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper }, /* @__PURE__ */ React.createElement(Table, { \"aria-label\": \"simple table\" }, /* @__PURE__ */ React.createElement(TableHead, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved in direction\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved to ring\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved on date\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Description\"))), /* @__PURE__ */ React.createElement(TableBody, null, (timeline == null ? void 0 : timeline.length) === 0 && /* @__PURE__ */ React.createElement(TableRow, { key: \"no-timeline\" }, /* @__PURE__ */ React.createElement(TableCell, { component: \"th\", scope: \"row\" }, \"No Timeline\")), timeline == null ? void 0 : timeline.map((timeEntry) => /* @__PURE__ */ React.createElement(TableRow, { key: timeEntry.description }, /* @__PURE__ */ React.createElement(TableCell, { component: \"th\", scope: \"row\" }, timeEntry.moved === MovedState.Up ? /* @__PURE__ */ React.createElement(ArrowUpwardIcon, null) : \"\", timeEntry.moved === MovedState.Down ? /* @__PURE__ */ React.createElement(ArrowDownwardIcon, null) : \"\", timeEntry.moved === MovedState.NoChange ? /* @__PURE__ */ React.createElement(AdjustIcon, null) : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.ring.name ? timeEntry.ring.name : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.date.toLocaleDateString() ? timeEntry.date.toLocaleDateString() : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.description ? timeEntry.description : \"\")))))));\n};\n\nconst RadarDescription = (props) => {\n  function showDialogActions(url2, links2) {\n    return isValidUrl(url2) || Boolean(links2 && links2.length > 0);\n  }\n  const { open, onClose, title, description, timeline, url, links } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { \"data-testid\": \"radar-description\", open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { \"data-testid\": \"radar-description-dialog-title\" }, title), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: description }), /* @__PURE__ */ React.createElement(RadarTimeline, { timeline })), showDialogActions(url, links) && /* @__PURE__ */ React.createElement(DialogActions, null, links == null ? void 0 : links.map((link) => /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      component: Link,\n      to: link.url,\n      onClick: onClose,\n      color: \"primary\",\n      startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null),\n      key: link.url\n    },\n    link.title\n  )), isValidUrl(url) && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      component: Link,\n      to: url,\n      onClick: onClose,\n      color: \"primary\",\n      startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null),\n      key: url\n    },\n    \"LEARN MORE\"\n  )));\n};\n\nconst useStyles$4 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"9px\",\n    fill: theme.palette.common.white,\n    textAnchor: \"middle\"\n  },\n  link: {\n    cursor: \"pointer\"\n  }\n}));\nconst makeBlip = (color, moved) => {\n  const style = { fill: color };\n  let blip = /* @__PURE__ */ React.createElement(\"circle\", { r: 9, style });\n  if (moved && moved > 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", { d: \"M -11,5 11,5 0,-13 z\", style });\n  } else if (moved && moved < 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", { d: \"M -11,-5 11,-5 0,13 z\", style });\n  }\n  return blip;\n};\nconst RadarEntry = (props) => {\n  const classes = useStyles$4(props);\n  const [open, setOpen] = React.useState(false);\n  const {\n    moved,\n    description,\n    timeline,\n    title,\n    color,\n    url,\n    links,\n    value,\n    x,\n    y,\n    onMouseEnter,\n    onMouseLeave,\n    onClick\n  } = props;\n  const blip = makeBlip(color, moved);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      transform: `translate(${x}, ${y})`,\n      onMouseEnter,\n      onMouseLeave,\n      onClick,\n      \"data-testid\": \"radar-entry\"\n    },\n    \" \",\n    open && /* @__PURE__ */ React.createElement(\n      RadarDescription,\n      {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        description: description ? description : \"no description\",\n        timeline: timeline ? timeline : [],\n        url,\n        links\n      }\n    ),\n    description ? (\n      // eslint-disable-next-line jsx-a11y/anchor-is-valid\n      /* @__PURE__ */ React.createElement(\n        \"a\",\n        {\n          className: classes.link,\n          onClick: handleClickOpen,\n          role: \"button\",\n          href: \"#\",\n          tabIndex: 0,\n          onKeyPress: toggle\n        },\n        blip\n      )\n    ) : /* @__PURE__ */ React.createElement(WithLink, { url, className: classes.link }, blip),\n    /* @__PURE__ */ React.createElement(\"text\", { y: 3, className: classes.text }, value)\n  );\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  bubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0\n  },\n  visibleBubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0.8\n  },\n  background: {\n    fill: \"#333\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.common.white\n  }\n}));\nconst RadarBubble = (props) => {\n  const classes = useStyles$3(props);\n  const { visible, text } = props;\n  const textElem = useRef(null);\n  const svgElem = useRef(null);\n  const rectElem = useRef(null);\n  const pathElem = useRef(null);\n  const updatePosition = () => {\n    if (textElem.current) {\n      const { x, y } = props;\n      const bbox = textElem.current.getBBox();\n      const marginX = 5;\n      const marginY = 4;\n      if (svgElem.current) {\n        svgElem.current.setAttribute(\n          \"transform\",\n          `translate(${x - bbox.width / 2}, ${y - bbox.height - marginY})`\n        );\n      }\n      if (rectElem.current) {\n        rectElem.current.setAttribute(\"x\", String(-marginX));\n        rectElem.current.setAttribute(\"y\", String(-bbox.height));\n        rectElem.current.setAttribute(\n          \"width\",\n          String(bbox.width + 2 * marginX)\n        );\n        rectElem.current.setAttribute(\"height\", String(bbox.height + marginY));\n      }\n      if (pathElem.current) {\n        pathElem.current.setAttribute(\n          \"transform\",\n          `translate(${bbox.width / 2 - marginX}, ${marginY - 1})`\n        );\n      }\n    }\n  };\n  useLayoutEffect(() => {\n    updatePosition();\n  });\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: svgElem,\n      x: 0,\n      y: 0,\n      className: visible ? classes.visibleBubble : classes.bubble,\n      \"data-testid\": \"radar-bubble\"\n    },\n    /* @__PURE__ */ React.createElement(\"rect\", { ref: rectElem, rx: 4, ry: 4, className: classes.background }),\n    /* @__PURE__ */ React.createElement(\"text\", { ref: textElem, className: classes.text }, text),\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        ref: pathElem,\n        d: \"M 0,0 10,0 5,8 z\",\n        className: classes.background\n      }\n    )\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.text.secondary\n  }\n}));\nconst RadarFooter = (props) => {\n  const { x, y } = props;\n  const classes = useStyles$2(props);\n  return /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      \"data-testid\": \"radar-footer\",\n      transform: `translate(${x}, ${y})`,\n      className: classes.text\n    },\n    \"\\u25B2 moved up\\xA0\\xA0\\xA0\\xA0\\xA0\\u25BC moved down\"\n  );\n};\n\nconst RadarLegendLink = ({\n  url,\n  description,\n  title,\n  classes,\n  active,\n  links,\n  timeline\n}) => {\n  const [open, setOpen] = React.useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  if (description) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        component: \"span\",\n        className: classes.entryLink,\n        onClick: handleClickOpen,\n        role: \"button\",\n        tabIndex: 0,\n        onKeyPress: toggle\n      },\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          component: \"span\",\n          className: active ? classes.activeEntry : classes.entry\n        },\n        title\n      )\n    ), open && /* @__PURE__ */ React.createElement(\n      RadarDescription,\n      {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        url,\n        description,\n        timeline: timeline ? timeline : [],\n        links\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(WithLink, { url, className: classes.entryLink }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: active ? classes.activeEntry : classes.entry\n    },\n    title\n  ));\n};\n\nconst RadarLegendRing = ({\n  ring,\n  entries,\n  classes,\n  onEntryMouseEnter,\n  onEntryMouseLeave\n}) => {\n  return /* @__PURE__ */ React.createElement(\"div\", { \"data-testid\": \"radar-ring\", key: ring.id, className: classes.ring }, /* @__PURE__ */ React.createElement(\n    \"h3\",\n    {\n      className: classes.ringHeading,\n      style: { color: ring.color },\n      \"data-testid\": \"radar-legend-heading\"\n    },\n    ring.name\n  ), entries.length === 0 ? /* @__PURE__ */ React.createElement(Typography$1, { paragraph: true, className: classes.ringEmpty }, \"(empty)\") : /* @__PURE__ */ React.createElement(\"ol\", { className: classes.ringList }, entries.map((entry) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(\n      \"li\",\n      {\n        key: entry.id,\n        value: (entry.index || 0) + 1,\n        onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n        onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n      },\n      /* @__PURE__ */ React.createElement(\n        RadarLegendLink,\n        {\n          classes,\n          url: entry.url,\n          title: entry.title,\n          description: entry.description,\n          active: entry.active,\n          links: (_a = entry.links) != null ? _a : [],\n          timeline: (_b = entry.timeline) != null ? _b : []\n        }\n      )\n    );\n  })));\n};\n\nconst setupSegments = (entries) => {\n  const segments = {};\n  for (const entry of entries) {\n    const quadrantIndex = entry.quadrant.index;\n    const ringIndex = entry.ring.index;\n    let quadrantData = {};\n    if (quadrantIndex !== void 0) {\n      if (segments[quadrantIndex] === void 0) {\n        segments[quadrantIndex] = {};\n      }\n      quadrantData = segments[quadrantIndex];\n    }\n    let ringData = [];\n    if (ringIndex !== void 0) {\n      if (quadrantData[ringIndex] === void 0) {\n        quadrantData[ringIndex] = [];\n      }\n      ringData = quadrantData[ringIndex];\n    }\n    ringData.push(entry);\n  }\n  return segments;\n};\nconst getSegment = (segmented, quadrant, ring, ringOffset = 0) => {\n  const quadrantIndex = quadrant.index;\n  const ringIndex = ring.index;\n  const segmentedData = quadrantIndex === void 0 ? {} : segmented[quadrantIndex] || {};\n  return ringIndex === void 0 ? [] : segmentedData[ringIndex + ringOffset] || [];\n};\n\nconst RadarLegendQuadrant = ({\n  segments,\n  quadrant,\n  rings,\n  classes,\n  onEntryMouseEnter,\n  onEntryMouseLeave\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    \"foreignObject\",\n    {\n      key: quadrant.id,\n      x: quadrant.legendX,\n      y: quadrant.legendY,\n      width: quadrant.legendWidth,\n      height: quadrant.legendHeight,\n      \"data-testid\": \"radar-quadrant\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: classes.quadrant }, /* @__PURE__ */ React.createElement(\"h2\", { className: classes.quadrantHeading }, quadrant.name), /* @__PURE__ */ React.createElement(\"div\", { className: classes.rings }, rings.map((ring) => /* @__PURE__ */ React.createElement(\n      RadarLegendRing,\n      {\n        key: ring.id,\n        ring,\n        classes,\n        entries: getSegment(segments, quadrant, ring),\n        onEntryMouseEnter,\n        onEntryMouseLeave\n      }\n    ))))\n  );\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  quadrant: {\n    height: \"100%\",\n    width: \"100%\",\n    overflowY: \"auto\",\n    scrollbarWidth: \"thin\"\n  },\n  quadrantHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(2),\n    fontSize: \"18px\"\n  },\n  rings: {\n    columns: 3\n  },\n  ring: {\n    breakInside: \"avoid-column\",\n    pageBreakInside: \"avoid\",\n    \"-webkit-column-break-inside\": \"avoid\",\n    fontSize: \"12px\",\n    marginBottom: theme.spacing(2)\n  },\n  ringEmpty: {\n    color: theme.palette.text.secondary,\n    fontSize: \"12px\"\n  },\n  ringHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(1),\n    fontSize: \"12px\",\n    fontWeight: 800\n  },\n  ringList: {\n    listStylePosition: \"inside\",\n    marginTop: 0,\n    paddingLeft: 0,\n    fontVariantNumeric: \"proportional-nums\",\n    \"-moz-font-feature-settings\": \"pnum\",\n    \"-webkit-font-feature-settings\": \"pnum\",\n    \"font-feature-settings\": \"pnum\"\n  },\n  entry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\"\n  },\n  activeEntry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\",\n    background: \"#6f6f6f\",\n    color: theme.palette.common.white\n  },\n  entryLink: {\n    pointerEvents: \"visiblePainted\",\n    cursor: \"pointer\"\n  }\n}));\nconst RadarLegend = ({\n  quadrants,\n  rings,\n  entries,\n  onEntryMouseEnter,\n  onEntryMouseLeave,\n  ...props\n}) => {\n  const classes = useStyles$1(props);\n  return /* @__PURE__ */ React.createElement(\"g\", { \"data-testid\": \"radar-legend\" }, quadrants.map((quadrant) => /* @__PURE__ */ React.createElement(\n    RadarLegendQuadrant,\n    {\n      key: quadrant.id,\n      segments: setupSegments(entries),\n      quadrant,\n      rings,\n      classes,\n      onEntryMouseEnter,\n      onEntryMouseLeave\n    }\n  )));\n};\n\nconst RadarPlot = (props) => {\n  const {\n    width,\n    height,\n    radius,\n    quadrants,\n    rings,\n    entries,\n    activeEntry,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  } = props;\n  return /* @__PURE__ */ React.createElement(\"g\", { \"data-testid\": \"radar-plot\" }, /* @__PURE__ */ React.createElement(\n    RadarLegend,\n    {\n      quadrants,\n      rings,\n      entries,\n      onEntryMouseEnter: onEntryMouseEnter && ((entry) => onEntryMouseEnter(entry)),\n      onEntryMouseLeave: onEntryMouseLeave && ((entry) => onEntryMouseLeave(entry))\n    }\n  ), /* @__PURE__ */ React.createElement(\"g\", { transform: `translate(${width / 2}, ${height / 2})` }, /* @__PURE__ */ React.createElement(RadarGrid, { radius, rings }), /* @__PURE__ */ React.createElement(RadarFooter, { x: -0.5 * width, y: 0.5 * height }), entries.map((entry) => /* @__PURE__ */ React.createElement(\n    RadarEntry,\n    {\n      key: entry.id,\n      x: entry.x || 0,\n      y: entry.y || 0,\n      color: entry.color || \"\",\n      value: ((entry == null ? void 0 : entry.index) || 0) + 1,\n      url: entry.url,\n      links: entry.links,\n      description: entry.description,\n      moved: entry.moved,\n      title: entry.title,\n      timeline: entry.timeline,\n      onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n      onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n    }\n  )), /* @__PURE__ */ React.createElement(\n    RadarBubble,\n    {\n      visible: !!activeEntry,\n      text: (activeEntry == null ? void 0 : activeEntry.title) || \"\",\n      x: (activeEntry == null ? void 0 : activeEntry.x) || 0,\n      y: (activeEntry == null ? void 0 : activeEntry.y) || 0\n    }\n  )));\n};\n\nclass Segment {\n  constructor(quadrant, ring, radius, nextSeed) {\n    this.nextSeed = nextSeed;\n    this.polarMin = {\n      t: quadrant.radialMin,\n      r: ring.innerRadius\n    };\n    this.polarMax = {\n      t: quadrant.radialMax,\n      r: ring.outerRadius\n    };\n    this.cartesianMin = {\n      x: 15 * quadrant.offsetX,\n      y: 15 * quadrant.offsetY\n    };\n    this.cartesianMax = {\n      x: radius * quadrant.offsetX,\n      y: radius * quadrant.offsetY\n    };\n  }\n  clipx(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.x = cartesian(p).x;\n    return d.x;\n  }\n  clipy(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.y = cartesian(p).y;\n    return d.y;\n  }\n  random() {\n    return cartesian({\n      t: this._randomBetween(this.polarMin.t, this.polarMax.t),\n      r: this._normalBetween(this.polarMin.r, this.polarMax.r)\n    });\n  }\n  // custom random number generator, to make random sequence reproducible\n  // source: https://stackoverflow.com/questions/521295\n  _random() {\n    const x = Math.sin(this.nextSeed()) * 1e4;\n    return x - Math.floor(x);\n  }\n  _randomBetween(min, max) {\n    return min + this._random() * (max - min);\n  }\n  _normalBetween(min, max) {\n    return min + (this._random() + this._random()) * 0.5 * (max - min);\n  }\n}\nfunction polar({ x, y }) {\n  return {\n    t: Math.atan2(y, x),\n    r: Math.sqrt(x * x + y * y)\n  };\n}\nfunction cartesian({ r, t }) {\n  return {\n    x: r * Math.cos(t),\n    y: r * Math.sin(t)\n  };\n}\nfunction boundedInterval(value, min, max) {\n  const low = Math.min(min, max);\n  const high = Math.max(min, max);\n  return Math.min(Math.max(value, low), high);\n}\nfunction boundedRing(polarValue, rMin, rMax) {\n  return {\n    t: polarValue.t,\n    r: boundedInterval(polarValue.r, rMin, rMax)\n  };\n}\nfunction boundedBox(point, min, max) {\n  return {\n    x: boundedInterval(point.x, min.x, max.x),\n    y: boundedInterval(point.y, min.y, max.y)\n  };\n}\n\nconst adjustQuadrants = (quadrants, radius, width, height) => {\n  const margin = 16;\n  const xStops = [\n    margin,\n    width / 2 - radius - margin,\n    width / 2 + radius + margin,\n    width - margin\n  ];\n  const yStops = [margin, height / 2 - margin, height / 2, height - margin];\n  const legendParams = [\n    {\n      x: xStops[2],\n      y: yStops[2],\n      width: xStops[3] - xStops[2],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[2],\n      width: xStops[1] - xStops[0],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[0],\n      width: xStops[1] - xStops[0],\n      height: yStops[1] - yStops[0]\n    },\n    {\n      x: xStops[2],\n      y: yStops[0],\n      width: xStops[3] - xStops[2],\n      height: yStops[1] - yStops[0]\n    }\n  ];\n  return quadrants.map((quadrant, index) => {\n    const legendParam = legendParams[index % 4];\n    return {\n      ...quadrant,\n      index,\n      radialMin: index * Math.PI / 2,\n      radialMax: (index + 1) * Math.PI / 2,\n      offsetX: index % 4 === 0 || index % 4 === 3 ? 1 : -1,\n      offsetY: index % 4 === 0 || index % 4 === 1 ? 1 : -1,\n      legendX: legendParam.x,\n      legendY: legendParam.y,\n      legendWidth: legendParam.width,\n      legendHeight: legendParam.height\n    };\n  });\n};\nconst adjustEntries = (entries, quadrants, rings, radius, activeEntry) => {\n  let seed = 42;\n  const adjustedEntries = entries.map((entry, index) => {\n    const quadrant = quadrants.find((q) => {\n      const match = typeof entry.quadrant === \"object\" ? entry.quadrant.id : entry.quadrant;\n      return q.id === match;\n    });\n    const ring = rings.find((r) => {\n      const match = typeof entry.ring === \"object\" ? entry.ring.id : entry.ring;\n      return r.id === match;\n    });\n    if (!quadrant) {\n      throw new Error(\n        `Unknown quadrant ${entry.quadrant} for entry ${entry.id}!`\n      );\n    }\n    if (!ring) {\n      throw new Error(`Unknown ring ${entry.ring} for entry ${entry.id}!`);\n    }\n    const segment = new Segment(quadrant, ring, radius, () => seed++);\n    const point = segment == null ? void 0 : segment.random();\n    return {\n      ...entry,\n      index,\n      quadrant,\n      ring,\n      segment,\n      x: point.x,\n      y: point.y,\n      color: activeEntry && entry.id === (activeEntry == null ? void 0 : activeEntry.id) ? entry.ring.color : color(entry.ring.color).desaturate(0.5).lighten(0.1).string(),\n      active: activeEntry && entry.id === (activeEntry == null ? void 0 : activeEntry.id) ? true : false\n    };\n  });\n  const simulation = forceSimulation().nodes(adjustedEntries).velocityDecay(0.19).force(\"collision\", forceCollide().radius(12).strength(0.85)).stop();\n  for (let i = 0, n = Math.ceil(\n    Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay())\n  ); i < n; ++i) {\n    simulation.tick();\n    for (const entry of adjustedEntries) {\n      if (entry.segment) {\n        entry.x = entry.segment.clipx(entry);\n        entry.y = entry.segment.clipy(entry);\n      }\n    }\n  }\n  return adjustedEntries;\n};\nconst adjustRings = (rings, radius) => rings.map((ring, index) => ({\n  ...ring,\n  index,\n  outerRadius: (index + 2) / (rings.length + 1) * radius,\n  innerRadius: (index === 0 ? 0 : index + 1) / (rings.length + 1) * radius\n}));\n\nconst Radar = ({\n  width,\n  height,\n  quadrants,\n  rings,\n  entries,\n  ...props\n}) => {\n  const radius = Math.min(width, height) / 2;\n  const [activeEntry, setActiveEntry] = useState();\n  const node = useRef(null);\n  const adjustedQuadrants = useMemo(\n    () => adjustQuadrants(quadrants, radius, width, height),\n    [quadrants, radius, width, height]\n  );\n  const adjustedRings = useMemo(\n    () => adjustRings(rings, radius),\n    [radius, rings]\n  );\n  const adjustedEntries = useMemo(\n    () => adjustEntries(\n      entries,\n      adjustedQuadrants,\n      adjustedRings,\n      radius,\n      activeEntry\n    ),\n    [entries, adjustedQuadrants, adjustedRings, radius, activeEntry]\n  );\n  return /* @__PURE__ */ React.createElement(\"svg\", { ref: node, width, height, ...props.svgProps }, /* @__PURE__ */ React.createElement(\n    RadarPlot,\n    {\n      width,\n      height,\n      radius,\n      entries: adjustedEntries,\n      quadrants: adjustedQuadrants,\n      rings: adjustedRings,\n      activeEntry,\n      onEntryMouseEnter: (entry) => setActiveEntry(entry),\n      onEntryMouseLeave: () => setActiveEntry(void 0)\n    }\n  ));\n};\n\nconst useTechRadarLoader = (id) => {\n  const errorApi = useApi(errorApiRef);\n  const techRadarApi = useApi(techRadarApiRef);\n  const { error, value, loading } = useAsync(\n    async () => techRadarApi.load(id),\n    [techRadarApi, id]\n  );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return { loading, value, error };\n};\nfunction matchFilter(filter) {\n  const terms = filter == null ? void 0 : filter.toLocaleLowerCase(\"en-US\").split(/\\s/).map((e) => e.trim()).filter(Boolean);\n  if (!(terms == null ? void 0 : terms.length)) {\n    return () => true;\n  }\n  return (entry) => {\n    var _a;\n    const text = `${entry.title} ${((_a = entry.timeline[0]) == null ? void 0 : _a.description) || \"\"}`.toLocaleLowerCase(\"en-US\");\n    return terms.every((term) => text.includes(term));\n  };\n}\nfunction RadarComponent(props) {\n  const { loading, error, value: data } = useTechRadarLoader(props.id);\n  const mapToEntries = (loaderResponse) => {\n    return loaderResponse.entries.filter(matchFilter(props.searchText)).map((entry) => ({\n      id: entry.key,\n      quadrant: loaderResponse.quadrants.find((q) => q.id === entry.quadrant),\n      title: entry.title,\n      ring: loaderResponse.rings.find(\n        (r) => r.id === entry.timeline[0].ringId\n      ),\n      timeline: entry.timeline.map((e) => {\n        return {\n          date: e.date,\n          ring: loaderResponse.rings.find((a) => a.id === e.ringId),\n          description: e.description,\n          moved: e.moved\n        };\n      }),\n      moved: entry.timeline[0].moved,\n      description: entry.description || entry.timeline[0].description,\n      url: entry.url,\n      links: entry.links\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), !loading && !error && data && /* @__PURE__ */ React.createElement(\n    Radar,\n    {\n      ...props,\n      rings: data.rings,\n      quadrants: data.quadrants,\n      entries: mapToEntries(data)\n    }\n  ));\n}\n\nconst useStyles = makeStyles(() => ({\n  overflowXScroll: {\n    overflowX: \"scroll\"\n  }\n}));\nfunction RadarPage(props) {\n  const {\n    title = \"Tech Radar\",\n    subtitle = \"Pick the recommended technologies for your projects\",\n    pageTitle = \"Company Radar\",\n    ...componentProps\n  } = props;\n  const classes = useStyles();\n  const [searchText, setSearchText] = React.useState(\"\");\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"tool\" }, /* @__PURE__ */ React.createElement(Header, { title, subtitle }), /* @__PURE__ */ React.createElement(Content, { className: classes.overflowXScroll }, /* @__PURE__ */ React.createElement(ContentHeader, { title: pageTitle }, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: \"tech-radar-filter\",\n      type: \"search\",\n      placeholder: \"Filter\",\n      onChange: (e) => setSearchText(e.target.value)\n    }\n  ), /* @__PURE__ */ React.createElement(SupportButton, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://opensource.zalando.com/tech-radar/\" }, \"Zalando Tech Radar\"), \".\"))), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3, direction: \"row\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 6, md: 4 }, /* @__PURE__ */ React.createElement(RadarComponent, { searchText, ...componentProps })))));\n}\n\nvar RadarPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  RadarPage: RadarPage\n});\n\nconst rings = new Array();\nrings.push({ id: \"adopt\", name: \"ADOPT\", color: \"#5BA300\" });\nrings.push({ id: \"trial\", name: \"TRIAL\", color: \"#009EB0\" });\nrings.push({ id: \"assess\", name: \"ASSESS\", color: \"#C7BA00\" });\nrings.push({ id: \"hold\", name: \"HOLD\", color: \"#E09B96\" });\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  links: [\n    {\n      url: \"https://www.javascript.com/\",\n      title: \"Learn more\"\n    },\n    {\n      url: \"https://www.typescriptlang.org/\",\n      title: \"TypeScript\"\n    }\n  ],\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://webpack.js.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  links: [\n    {\n      url: \"https://reactjs.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"long description\"\n    },\n    {\n      ringId: \"trial\",\n      date: /* @__PURE__ */ new Date(\"2020-07-05\"),\n      description: \"long description\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://github.com\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: \"TechRadarPage\",\n    component: () => Promise.resolve().then(function () { return RadarPage$1; }).then((m) => m.RadarPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nconst Router = RadarPage;\n\nexport { MovedState, RadarPage, Router, RadarComponent as TechRadarComponent, TechRadarPage, techRadarPlugin as plugin, techRadarApiRef, techRadarPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, configApiRef, createPlugin } from '@backstage/core-plugin-api';\nimport { useShadowRootElements, useShadowRootSelection, createTechDocsAddonExtension, TechDocsAddonLocations } from '@backstage/plugin-techdocs-react';\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport { withStyles, Button, makeStyles, Portal, Paper, Slider, useTheme, MenuItem, ListItemText, Typography, Box, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport parseGitUrl from 'git-url-parse';\nimport { replaceGithubUrlType, replaceGitLabUrlType } from '@backstage/integration';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport { Link, GitHubIcon } from '@backstage/core-components';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport PhotoSwipeLightbox from 'photoswipe/lightbox';\nimport PhotoSwipe from 'photoswipe';\nimport 'photoswipe/style.css';\n\nconst NESTED_LIST_TOGGLE = \".md-nav__item--nested .md-toggle\";\nconst EXPANDABLE_NAVIGATION_LOCAL_STORAGE = \"@backstage/techdocs-addons/nav-expanded\";\nconst StyledButton = withStyles({\n  root: {\n    position: \"absolute\",\n    left: \"220px\",\n    top: \"19px\",\n    padding: 0,\n    minWidth: 0\n  }\n})(Button);\nconst CollapsedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ChevronRightIcon);\nconst ExpandedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ExpandMoreIcon);\nconst ExpandableNavigationAddon = () => {\n  const defaultValue = { expandAllNestedNavs: false };\n  const { value: expanded, set: setExpanded } = useLocalStorageValue(\n    EXPANDABLE_NAVIGATION_LOCAL_STORAGE,\n    { defaultValue }\n  );\n  const [hasNavSubLevels, setHasNavSubLevels] = useState(false);\n  const [...checkboxToggles] = useShadowRootElements([\n    NESTED_LIST_TOGGLE\n  ]);\n  const shouldToggle = useCallback(\n    (item) => {\n      const isExpanded = item.checked;\n      const shouldExpand = expanded == null ? void 0 : expanded.expandAllNestedNavs;\n      if (shouldExpand && !isExpanded) {\n        return true;\n      }\n      if (!shouldExpand && isExpanded) {\n        return true;\n      }\n      return false;\n    },\n    [expanded]\n  );\n  useEffect(() => {\n    if (!(checkboxToggles == null ? void 0 : checkboxToggles.length))\n      return;\n    setHasNavSubLevels(true);\n    checkboxToggles.forEach((item) => {\n      if (shouldToggle(item))\n        item.click();\n    });\n  }, [expanded, shouldToggle, checkboxToggles]);\n  const handleState = () => {\n    setExpanded((prevState) => ({\n      expandAllNestedNavs: !(prevState == null ? void 0 : prevState.expandAllNestedNavs)\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, hasNavSubLevels ? /* @__PURE__ */ React.createElement(\n    StyledButton,\n    {\n      size: \"small\",\n      onClick: handleState,\n      \"aria-label\": (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? \"collapse-nav\" : \"expand-nav\"\n    },\n    (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? /* @__PURE__ */ React.createElement(ExpandedIcon, null) : /* @__PURE__ */ React.createElement(CollapsedIcon, null)\n  ) : null);\n};\n\nconst ADDON_FEEDBACK_CONTAINER_ID = \"techdocs-report-issue\";\nconst ADDON_FEEDBACK_CONTAINER_SELECTOR = `#${ADDON_FEEDBACK_CONTAINER_ID}`;\nconst PAGE_EDIT_LINK_SELECTOR = '[title^=\"Edit this page\"]';\nconst PAGE_FEEDBACK_LINK_SELECTOR = '[title^=\"Leave feedback for\"]';\nconst PAGE_MAIN_CONTENT_SELECTOR = '[data-md-component=\"main\"] .md-content';\n\nconst resolveBlobUrl = (url, type) => {\n  if (type === \"github\") {\n    return replaceGithubUrlType(url, \"blob\");\n  } else if (type === \"gitlab\") {\n    return replaceGitLabUrlType(url, \"blob\");\n  }\n  console.error(\n    `Invalid SCM type ${type} found in ReportIssue addon for URL ${url}!`\n  );\n  return url;\n};\nconst getTitle = (selection) => {\n  const text = selection.toString().substring(0, 70);\n  const ellipsis = text.length === 70 ? \"...\" : \"\";\n  return `Documentation feedback: ${text}${ellipsis}`;\n};\nconst getBody = (selection, markdownUrl, appTitle) => {\n  const title = \"## Documentation Feedback \\u{1F4DD}\";\n  const subheading = \"#### The highlighted text:\";\n  const commentHeading = \"#### The comment on the text:\";\n  const commentPlaceholder = \"_>replace this line with your comment<_\";\n  const highlightedTextAsQuote = selection.toString().trim().split(\"\\n\").map((line) => `> ${line.trim()}`).join(\"\\n\");\n  const facts = [\n    `${appTitle} URL: <${window.location.href}> \nMarkdown URL: <${markdownUrl}>`\n  ];\n  return `${title}\n\n ${subheading} \n\n ${highlightedTextAsQuote}\n\n ${commentHeading} \n ${commentPlaceholder}\n\n ___\n${facts}`;\n};\nconst useGitTemplate = (debounceTime) => {\n  var _a, _b;\n  const initialTemplate = { title: \"\", body: \"\" };\n  const selection = useShadowRootSelection(debounceTime);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  if (!selection || !url)\n    return initialTemplate;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return initialTemplate;\n  return {\n    title: getTitle(selection),\n    body: getBody(selection, resolveBlobUrl(url, type), appTitle)\n  };\n};\nconst useGitRepository = () => {\n  var _a, _b;\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  if (!url)\n    return null;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return null;\n  return { ...parseGitUrl(resolveBlobUrl(url, type)), type };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridGap: theme.spacing(1),\n    gridAutoFlow: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize\n  }\n}));\nconst getIcon = ({ type }) => {\n  if (type === \"github\") {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\nconst getName = ({ type }) => {\n  if (type === \"github\") {\n    return \"Github\";\n  }\n  return \"Gitlab\";\n};\nconst getUrl = (repository, template) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n  const url = `${protocol}://${resource}/${owner}/${name}`;\n  const encodedUrl = encodeURI(url);\n  if (type === \"github\") {\n    return `${encodedUrl}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${encodedUrl}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\nconst IssueLink = ({ template, repository }) => {\n  const classes = useStyles$2();\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n  return /* @__PURE__ */ React.createElement(Link, { className: classes.root, to: url, target: \"_blank\" }, /* @__PURE__ */ React.createElement(Icon, null), \" Open new \", getName(repository), \" issue\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    transform: \"translate(-100%, -100%)\",\n    position: \"absolute\",\n    padding: theme.spacing(1),\n    zIndex: theme.zIndex.tooltip,\n    background: theme.palette.common.white\n  }\n}));\nconst ReportIssueAddon = ({\n  debounceTime = 500,\n  templateBuilder: buildTemplate\n}) => {\n  const classes = useStyles$1();\n  const [style, setStyle] = useState();\n  const repository = useGitRepository();\n  const defaultTemplate = useGitTemplate(debounceTime);\n  const selection = useShadowRootSelection(debounceTime);\n  const [mainContent, feedbackLink] = useShadowRootElements([\n    PAGE_MAIN_CONTENT_SELECTOR,\n    PAGE_FEEDBACK_LINK_SELECTOR\n  ]);\n  let [feedbackContainer] = useShadowRootElements([\n    ADDON_FEEDBACK_CONTAINER_SELECTOR\n  ]);\n  if (feedbackLink) {\n    feedbackLink.style.display = \"none\";\n  }\n  useEffect(() => {\n    if (\n      // todo(backstage/techdocs-core) handle non-repo rendering\n      !repository || !selection || !selection.containsNode(mainContent, true) || (selection == null ? void 0 : selection.containsNode(feedbackContainer, true))\n    ) {\n      return;\n    }\n    const mainContentPosition = mainContent.getBoundingClientRect();\n    const selectionPosition = selection.getRangeAt(0).getBoundingClientRect();\n    setStyle({\n      top: `${selectionPosition.top - mainContentPosition.top - 16}px`,\n      left: `${selectionPosition.left + selectionPosition.width / 2}px`\n    });\n  }, [selection, mainContent, feedbackContainer]);\n  if (!selection || !repository || ![\"github\", \"gitlab\"].includes(repository.type))\n    return null;\n  if (!feedbackContainer) {\n    feedbackContainer = document.createElement(\"div\");\n    feedbackContainer.setAttribute(\"id\", ADDON_FEEDBACK_CONTAINER_ID);\n    mainContent.prepend(feedbackContainer);\n  }\n  return /* @__PURE__ */ React.createElement(Portal, { container: feedbackContainer }, /* @__PURE__ */ React.createElement(\n    Paper,\n    {\n      \"data-testid\": \"report-issue-addon\",\n      className: classes.root,\n      style\n    },\n    /* @__PURE__ */ React.createElement(\n      IssueLink,\n      {\n        repository,\n        template: buildTemplate ? buildTemplate({ selection }) : defaultTemplate\n      }\n    )\n  ));\n};\n\nconst boxShadow = \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)\";\nconst StyledSlider = withStyles((theme) => ({\n  root: {\n    height: 2,\n    padding: \"15px 0\"\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    boxShadow,\n    marginTop: -9,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)\",\n      // Reset on touch devices, it doesn't add specificity\n      \"@media (hover: none)\": {\n        boxShadow\n      }\n    }\n  },\n  active: {},\n  valueLabel: {\n    top: \"100%\",\n    left: \"50%\",\n    transform: \"scale(1) translate(-50%, -5px) !important\",\n    \"& *\": {\n      color: theme.palette.common.black,\n      fontSize: theme.typography.caption.fontSize,\n      background: \"transparent\"\n    }\n  },\n  track: {\n    height: 2\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5\n  },\n  mark: {\n    height: 10,\n    width: 1,\n    marginTop: -4\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: \"currentColor\"\n  }\n}))(Slider);\nconst settings = {\n  key: \"techdocs.addons.settings.textsize\",\n  defaultValue: 100\n};\nconst marks = [\n  {\n    value: 90\n  },\n  {\n    value: 100\n  },\n  {\n    value: 115\n  },\n  {\n    value: 130\n  },\n  {\n    value: 150\n  }\n];\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: theme.palette.textSubtle,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 0,\n    minWidth: 200\n  },\n  menuItem: {\n    \"&:hover\": {\n      background: \"transparent\"\n    }\n  },\n  decreaseButton: {\n    marginRight: theme.spacing(1)\n  },\n  increaseButton: {\n    marginLeft: theme.spacing(1)\n  }\n}));\nconst TextSizeAddon = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [body] = useShadowRootElements([\"body\"]);\n  const [value, setValue] = useState(() => {\n    const initialValue = localStorage == null ? void 0 : localStorage.getItem(settings.key);\n    return initialValue ? parseInt(initialValue, 10) : settings.defaultValue;\n  });\n  const values = useMemo(() => marks.map((mark) => mark.value), []);\n  const index = useMemo(() => values.indexOf(value), [values, value]);\n  const min = useMemo(() => values[0], [values]);\n  const max = useMemo(() => values[values.length - 1], [values]);\n  const getValueText = useCallback(() => `${value}%`, [value]);\n  const handleChangeCommitted = useCallback(\n    (_event, newValue) => {\n      if (!Array.isArray(newValue)) {\n        setValue(newValue);\n        localStorage == null ? void 0 : localStorage.setItem(settings.key, String(newValue));\n      }\n    },\n    [setValue]\n  );\n  const handleDecreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index - 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  const handleIncreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index + 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  useEffect(() => {\n    var _a, _b;\n    if (!body)\n      return;\n    const htmlFontSize = (_b = (_a = theme.typography) == null ? void 0 : _a.htmlFontSize) != null ? _b : 16;\n    body.style.setProperty(\n      \"--md-typeset-font-size\",\n      `${htmlFontSize * (value / 100)}px`\n    );\n  }, [body, value, theme]);\n  return /* @__PURE__ */ React.createElement(MenuItem, { className: classes.menuItem, button: true, disableRipple: true }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", color: \"textPrimary\" }, \"Text size\"),\n      secondary: /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.decreaseButton,\n          size: \"small\",\n          edge: \"start\",\n          disabled: value === min,\n          onClick: handleDecreaseClick,\n          \"aria-label\": \"Decrease text size\"\n        },\n        /* @__PURE__ */ React.createElement(RemoveIcon, null)\n      ), /* @__PURE__ */ React.createElement(\n        StyledSlider,\n        {\n          value,\n          \"aria-labelledby\": \"text-size-slider\",\n          getAriaValueText: getValueText,\n          valueLabelDisplay: \"on\",\n          valueLabelFormat: getValueText,\n          marks,\n          step: null,\n          min,\n          max,\n          onChangeCommitted: handleChangeCommitted\n        }\n      ), /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          className: classes.increaseButton,\n          size: \"small\",\n          edge: \"end\",\n          disabled: value === max,\n          onClick: handleIncreaseClick,\n          \"aria-label\": \"Increase text size\"\n        },\n        /* @__PURE__ */ React.createElement(AddIcon, null)\n      )),\n      disableTypography: true\n    }\n  ));\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".pswp {\\n  --pswp-bg: #f8f8f8;\\n}\\n.pswp__counter {\\n  color: rgba(0, 0, 0, 0.87);\\n  text-shadow: none;\\n}\\n\\n.pswp__img {\\n  cursor: pointer !important;\\n}\\n\";\nstyleInject(css_248z);\n\nconst LightBoxAddon = () => {\n  const images = useShadowRootElements([\"img\"]);\n  useEffect(() => {\n    let dataSourceImages = null;\n    let lightbox = new PhotoSwipeLightbox({\n      pswpModule: PhotoSwipe,\n      wheelToZoom: true,\n      arrowPrevSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowBackIosIcon\" aria-label=\"fontSize large\"><path d=\"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"></path></svg>',\n      arrowNextSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ArrowForwardIosIcon\" aria-label=\"fontSize large\"><path d=\"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z\"></path></svg>',\n      closeSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"CloseIcon\" aria-label=\"fontSize large\"><path d=\"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg>',\n      zoomSVG: '<svg class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" data-testid=\"ZoomInIcon\" aria-label=\"fontSize large\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path><path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"></path></svg>'\n    });\n    images.forEach((image, index) => {\n      image.onclick = () => {\n        if (dataSourceImages === null) {\n          dataSourceImages = images.map((dataSourceImage) => {\n            return {\n              element: dataSourceImage,\n              src: dataSourceImage.src,\n              msrc: dataSourceImage.src,\n              alt: dataSourceImage.alt,\n              width: dataSourceImage.clientWidth,\n              height: dataSourceImage.clientHeight\n            };\n          });\n        }\n        lightbox.loadAndOpen(index, dataSourceImages);\n        return false;\n      };\n    });\n    lightbox.init();\n    return () => {\n      lightbox.destroy();\n      lightbox = null;\n    };\n  }, [images]);\n  return null;\n};\n\nconst techdocsModuleAddonsContribPlugin = createPlugin({\n  id: \"techdocsModuleAddonsContrib\"\n});\nconst ExpandableNavigation = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ExpandableNavigation\",\n    location: TechDocsAddonLocations.PrimarySidebar,\n    component: ExpandableNavigationAddon\n  })\n);\nconst ReportIssue = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ReportIssue\",\n    location: TechDocsAddonLocations.Content,\n    component: ReportIssueAddon\n  })\n);\nconst TextSize = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"TextSize\",\n    location: TechDocsAddonLocations.Settings,\n    component: TextSizeAddon\n  })\n);\nconst LightBox = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"LightBox\",\n    location: TechDocsAddonLocations.Content,\n    component: LightBoxAddon\n  })\n);\n\nexport { ExpandableNavigation, LightBox, ReportIssue, TextSize, techdocsModuleAddonsContribPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useCallback, memo, useState, useEffect, useContext, useMemo } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { attachComponentData, createReactExtension, useElementFilter, createApiRef, useApi, configApiRef, AnalyticsContext } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { create } from 'jss';\nimport { jssPreset, StylesProvider } from '@material-ui/styles';\nimport { Progress } from '@backstage/core-components';\nimport debounce from 'lodash/debounce';\n\nconst TECHDOCS_ADDONS_KEY = \"techdocs.addons.addon.v1\";\nconst TECHDOCS_ADDONS_WRAPPER_KEY = \"techdocs.addons.wrapper.v1\";\nconst TechDocsAddons = () => null;\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase(\"en-US\")}`;\n};\nfunction createTechDocsAddonExtension(options) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => /* @__PURE__ */ React.createElement(TechDocsAddon, { ...props })\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true\n    }\n  });\n}\nconst getTechDocsAddonByName = (collection, key) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\nconst getAllTechDocsAddons = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).selectByComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).findComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n  const findAddonByData = useCallback(\n    (data) => {\n      var _a;\n      if (!collection || !data)\n        return null;\n      const nameKey = getDataKeyByName(data.name);\n      return (_a = getTechDocsAddonByName(collection, nameKey)) != null ? _a : null;\n    },\n    [collection]\n  );\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find((option) => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData]\n  );\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter((option) => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData]\n  );\n  return { renderComponentByName, renderComponentsByLocation };\n};\n\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\n\nfunction toLowercaseEntityRefMaybe(entityRef, config) {\n  if (config.getOptionalBoolean(\"techdocs.legacyUseCaseSensitiveTripletPaths\"))\n    return entityRef;\n  entityRef.kind = entityRef.kind.toLocaleLowerCase();\n  entityRef.name = entityRef.name.toLocaleLowerCase();\n  entityRef.namespace = entityRef.namespace.toLocaleLowerCase();\n  return entityRef;\n}\n\nconst areEntityRefsEqual = (prevEntityRef, nextEntityRef) => {\n  return stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef);\n};\nconst defaultTechDocsReaderPageValue = {\n  title: \"\",\n  subtitle: \"\",\n  setTitle: () => {\n  },\n  setSubtitle: () => {\n  },\n  setShadowRoot: () => {\n  },\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: \"\", name: \"\", namespace: \"\" }\n};\nconst TechDocsReaderPageContext = createVersionedContext(\"techdocs-reader-page-context\");\nconst TechDocsReaderPageProvider = memo(\n  (props) => {\n    const { entityRef, children } = props;\n    const techdocsApi = useApi(techdocsApiRef);\n    const config = useApi(configApiRef);\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n    const metadata = useAsyncRetry(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot\n    );\n    useEffect(() => {\n      if (shadowRoot && !metadata.value && !metadata.loading) {\n        metadata.retry();\n      }\n    }, [\n      metadata.value,\n      metadata.loading,\n      shadowRoot,\n      metadata.retry,\n      metadata\n    ]);\n    const value = {\n      metadata,\n      entityRef: toLowercaseEntityRefMaybe(entityRef, config),\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n    return /* @__PURE__ */ React.createElement(\n      AnalyticsContext,\n      {\n        attributes: { entityRef: stringifyEntityRef(entityRef) }\n      },\n      /* @__PURE__ */ React.createElement(TechDocsReaderPageContext.Provider, { value: versionedValue }, children instanceof Function ? children(value) : children)\n    );\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  }\n);\nconst useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n  if (versionedContext === void 0) {\n    return defaultTechDocsReaderPageValue;\n  }\n  const context = versionedContext.atVersion(1);\n  if (context === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return context;\n};\n\nconst TechDocsAddonLocations = Object.freeze({\n  /**\n   * These addons fill up the header from the right, on the same line as the\n   * title.\n   */\n  Header: \"Header\",\n  /**\n   * These addons appear below the header and above all content; tooling addons\n   * can be inserted for convenience.\n   */\n  Subheader: \"Subheader\",\n  /**\n   * These addons are items added to the settings menu list and are designed to make\n   * the reader experience customizable, for example accessibility options\n   */\n  Settings: \"Settings\",\n  /**\n   * These addons appear left of the content and above the navigation.\n   */\n  PrimarySidebar: \"PrimarySidebar\",\n  /**\n   * These addons appear right of the content and above the table of contents.\n   */\n  SecondarySidebar: \"SecondarySidebar\",\n  /**\n   * A virtual location which allows mutation of all content within the shadow\n   * root by transforming DOM nodes. These addons should return null on render.\n   */\n  Content: \"Content\"\n  /**\n   * todo(backstage/community): This is a proposed virtual location which would\n   * help implement a common addon pattern in which many instances of a given\n   * element in markdown would be dynamically replaced at render-time based on\n   * attributes provided on that element, for example:\n   *\n   * ```md\n   * ## For Fun\n   * <TechDocsAddon>CatGif</TechDocsAddon>\n   *\n   * ## Component Metadata\n   * <TechDocsAddon entityRef=\"default:component/some-component-name\">CatalogEntityCard</TechDocsAddon>\n   *\n   * ## System Metadata\n   * <TechDocsAddon entityRef=\"default:system/some-system-name\">CatalogEntityCard</TechDocsAddon>\n   * ```\n   *\n   * Could correspond to a TechDocs addon named `CatalogEntityCard` with\n   * location `TechDocsAddonLocations.COMPONENT`, whose `component` would be\n   * the react component that would be rendered in place of all instances of\n   * the markdown illustrated above.\n   *\n   * The `@backstage/plugin-techdocs-react` package would need to be updated to, in\n   * cases where such addons had been registered, find all instances of the\n   * the `<TechDocsAddon>` tag whose `textContent` corresponded with the name of the\n   * addon, then replace them with component instances of the addon component,\n   * passing any attributes from the tag as props to the component.\n   */\n  // Component: 'Component',\n});\n\nconst SHADOW_DOM_STYLE_LOAD_EVENT = \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\";\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    var _a;\n    if (!element) {\n      return () => {\n      };\n    }\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]'\n    );\n    let count = (_a = styles == null ? void 0 : styles.length) != null ? _a : 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {\n      };\n    }\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n    styles == null ? void 0 : styles.forEach((style) => {\n      style.addEventListener(\"load\", handleLoad);\n    });\n    return () => {\n      styles == null ? void 0 : styles.forEach((style) => {\n        style.removeEventListener(\"load\", handleLoad);\n      });\n    };\n  }, [element]);\n};\nconst useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (!element)\n      return () => {\n      };\n    setLoading(true);\n    const style = element.style;\n    style.setProperty(\"opacity\", \"0\");\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty(\"opacity\", \"1\");\n    };\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n  return loading;\n};\nconst TechDocsShadowDom = (props) => {\n  const { element, onAppend, children } = props;\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: void 0\n    })\n  );\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost)\n        return;\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector(\"head\") || void 0\n        })\n      );\n      let shadowRoot = shadowHost.shadowRoot;\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: \"open\" });\n      }\n      shadowRoot.replaceChildren(element);\n      if (typeof onAppend === \"function\") {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(StylesProvider, { jss, sheetsManager: /* @__PURE__ */ new Map() }, /* @__PURE__ */ React.createElement(\"div\", { ref, \"data-testid\": \"techdocs-native-shadowroot\" }), children));\n};\n\nconst useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\nconst useShadowRootElements = (selectors) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot)\n    return [];\n  return selectors.map((selector) => shadowRoot == null ? void 0 : shadowRoot.querySelectorAll(selector)).filter((nodeList) => nodeList.length).map((nodeList) => Array.from(nodeList)).flat();\n};\nconst isValidSelection = (newSelection) => {\n  return newSelection.toString() && newSelection.rangeCount && newSelection.getRangeAt(0).getBoundingClientRect().top;\n};\nconst useShadowRootSelection = (waitMillis = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () => debounce(() => {\n      const shadowDocument = shadowRoot;\n      const newSelection = shadowDocument.getSelection ? shadowDocument.getSelection() : document.getSelection();\n      if (newSelection && isValidSelection(newSelection)) {\n        setSelection(newSelection);\n      } else {\n        setSelection(null);\n      }\n    }, waitMillis),\n    [shadowRoot, setSelection, waitMillis]\n  );\n  useEffect(() => {\n    window.document.addEventListener(\"selectionchange\", handleSelectionChange);\n    return () => {\n      handleSelectionChange.cancel();\n      window.document.removeEventListener(\n        \"selectionchange\",\n        handleSelectionChange\n      );\n    };\n  }, [handleSelectionChange]);\n  return selection;\n};\n\nexport { SHADOW_DOM_STYLE_LOAD_EVENT, TECHDOCS_ADDONS_KEY, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsAddonLocations, TechDocsAddons, TechDocsReaderPageProvider, TechDocsShadowDom, createTechDocsAddonExtension, techdocsApiRef, techdocsStorageApiRef, toLowercaseEntityRefMaybe, useShadowDomStylesLoading, useShadowRoot, useShadowRootElements, useShadowRootSelection, useTechDocsAddons, useTechDocsReaderPage };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, useApi, configApiRef, useAnalytics, createRouteRef, useRouteRef, useRouteRefParams, getComponentData, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { ResponseError, NotFoundError } from '@backstage/errors';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport React, { useReducer, useRef, useMemo, createContext, useContext, useState, useEffect, useCallback, Children } from 'react';\nimport { useParams, useNavigate, useOutlet, Routes, Route, useRoutes } from 'react-router-dom';\nimport { techdocsStorageApiRef as techdocsStorageApiRef$1, useTechDocsReaderPage, SHADOW_DOM_STYLE_LOAD_EVENT, useShadowDomStylesLoading, useTechDocsAddons, TechDocsAddonLocations, TechDocsShadowDom, TECHDOCS_ADDONS_WRAPPER_KEY, TECHDOCS_ADDONS_KEY, TechDocsReaderPageProvider, techdocsApiRef as techdocsApiRef$1 } from '@backstage/plugin-techdocs-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { Link, LogViewer, ErrorPage, useSidebarPinState, Content, HeaderLabel, Header, Page, ItemCardGrid, ItemCardHeader, LinkButton, WarningPanel, CodeSnippet, Progress, ContentHeader, SubvalueCell, Table, EmptyState, PageWithHeader, SupportButton, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { makeStyles, ListItemText, ListItemIcon, createStyles, Button, Drawer, Grid, Typography as Typography$1, IconButton, CircularProgress, lighten, alpha, useTheme, withStyles, Tooltip, ThemeProvider, SvgIcon, useMediaQuery, Portal, Toolbar, Box, Menu, Card, CardMedia, CardContent, CardActions } from '@material-ui/core';\nimport { HighlightedSearchResultText, SearchContextProvider, useSearch, SearchAutocomplete, createSearchResultListItemExtension } from '@backstage/plugin-search-react';\nimport Typography from '@material-ui/core/Typography';\nimport { Alert, Skeleton } from '@material-ui/lab';\nimport Close from '@material-ui/icons/Close';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport DOMPurify from 'dompurify';\nimport { replaceGithubUrlType } from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport ReactDOM from 'react-dom';\nimport parseGitUrl from 'git-url-parse';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport IconButton$1 from '@material-ui/core/IconButton';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport Helmet from 'react-helmet';\nimport { useTheme as useTheme$1 } from '@material-ui/core/styles';\nimport CodeIcon from '@material-ui/icons/Code';\nimport { getEntityRelations, EntityRefLink, EntityRefLinks, useEntityList, useEntityOwnership, humanizeEntityRef, useStarredEntities, CATALOG_FILTER_EXISTS, EntityListProvider, CatalogFilterLayout, UserListPicker, EntityOwnerPicker, EntityTagPicker, useEntity } from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, getCompoundEntityRef } from '@backstage/catalog-model';\nimport { capitalize } from 'lodash';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { withStyles as withStyles$1 } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass TechDocsClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  /**\n   * Retrieve TechDocs metadata.\n   *\n   * When docs are built, we generate a techdocs_metadata.json and store it along with the generated\n   * static files. It includes necessary data about the docs site. This method requests techdocs-backend\n   * which retrieves the TechDocs metadata.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getTechDocsMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n  /**\n   * Retrieve metadata about an entity.\n   *\n   * This method requests techdocs-backend which uses the catalog APIs to respond with filtered\n   * information required here.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   */\n  async getEntityMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n}\nclass TechDocsStorageClient {\n  constructor(options) {\n    __publicField(this, \"configApi\");\n    __publicField(this, \"discoveryApi\");\n    __publicField(this, \"identityApi\");\n    __publicField(this, \"fetchApi\");\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getStorageUrl() {\n    var _a;\n    return (_a = this.configApi.getOptionalString(\"techdocs.storageUrl\")) != null ? _a : `${await this.discoveryApi.getBaseUrl(\"techdocs\")}/static/docs`;\n  }\n  async getBuilder() {\n    return this.configApi.getString(\"techdocs.builder\");\n  }\n  /**\n   * Fetch HTML content as text for an individual docs page in an entity's docs site.\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param path - The unique path to an individual docs page e.g. overview/what-is-new\n   * @returns HTML content of the docs page as string\n   * @throws Throws error when the page is not found.\n   */\n  async getEntityDocs(entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith(\"/\") ? url : `${url}/`}index.html`\n    );\n    let errorMessage = \"\";\n    switch (request.status) {\n      case 404:\n        errorMessage = \"Page not found. \";\n        if (!path) {\n          errorMessage += \"This could be because there is no index.md file in the root of the docs directory of this repository.\";\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage = \"Could not generate documentation or an error in the TechDocs backend. \";\n        throw new Error(errorMessage);\n    }\n    return request.text();\n  }\n  /**\n   * Check if docs are on the latest version and trigger rebuild if not\n   *\n   * @param entityId - Object containing entity data like name, namespace, etc.\n   * @param logHandler - Callback to receive log messages from the build process\n   * @returns Whether documents are currently synchronized to newest version\n   * @throws Throws error on error from sync endpoint in TechDocs Backend\n   */\n  async syncEntityDocs(entityId, logHandler = () => {\n  }) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n    return new Promise((resolve, reject) => {\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\n      });\n      source.addEventListener(\"log\", (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n      source.addEventListener(\"finish\", (e) => {\n        let updated = false;\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n        resolve(updated ? \"updated\" : \"cached\");\n      });\n      source.onerror = (e) => {\n        source.close();\n        switch (e.status) {\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n  async getBaseUrl(oldBaseUrl, entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith(\"/\") ? newBaseUrl : `${newBaseUrl}/`\n    ).toString();\n  }\n}\n\nfunction calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState\n}) {\n  if (contentLoading) {\n    return \"CHECKING\";\n  }\n  if (activeSyncState === \"BUILD_READY_RELOAD\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"CHECKING\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"BUILDING\") {\n    return \"INITIAL_BUILD\";\n  }\n  if (!content) {\n    return \"CONTENT_NOT_FOUND\";\n  }\n  if (activeSyncState === \"BUILDING\") {\n    return \"CONTENT_STALE_REFRESHING\";\n  }\n  if (activeSyncState === \"BUILD_READY\") {\n    return \"CONTENT_STALE_READY\";\n  }\n  if (activeSyncState === \"ERROR\") {\n    return \"CONTENT_STALE_ERROR\";\n  }\n  return \"CONTENT_FRESH\";\n}\nfunction reducer(oldState, action) {\n  const newState = { ...oldState };\n  switch (action.type) {\n    case \"sync\":\n      if (action.state === \"CHECKING\") {\n        newState.buildLog = [];\n      }\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n    case \"contentLoading\":\n      newState.contentLoading = true;\n      newState.contentError = void 0;\n      break;\n    case \"content\":\n      if (typeof action.path === \"string\") {\n        newState.path = action.path;\n      }\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n    case \"buildLog\":\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n    default:\n      throw new Error();\n  }\n  if ([\"BUILD_READY\", \"BUILD_READY_RELOAD\"].includes(newState.activeSyncState) && [\"contentLoading\", \"content\"].includes(action.type)) {\n    newState.activeSyncState = \"UP_TO_DATE\";\n    newState.buildLog = [];\n  }\n  return newState;\n}\nfunction useReaderState(kind, namespace, name, path) {\n  var _a, _b;\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: \"CHECKING\",\n    path,\n    contentLoading: true,\n    buildLog: []\n  });\n  const techdocsStorageApi = useApi(techdocsStorageApiRef$1);\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: \"contentLoading\" });\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path\n      );\n      dispatch({ type: \"content\", content: entityDocs, path });\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: \"content\", contentError: e, path });\n    }\n    return void 0;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n  const contentRef = useRef({\n    content: void 0,\n    reload: () => {\n    }\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n  useAsync(async () => {\n    dispatch({ type: \"sync\", state: \"CHECKING\" });\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: \"sync\", state: \"BUILDING\" });\n    }, 1e3);\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name\n        },\n        (log) => {\n          dispatch({ type: \"buildLog\", log });\n        }\n      );\n      switch (result) {\n        case \"updated\":\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: \"sync\", state: \"BUILD_READY_RELOAD\" });\n          } else {\n            dispatch({ type: \"sync\", state: \"BUILD_READY\" });\n          }\n          break;\n        case \"cached\":\n          dispatch({ type: \"sync\", state: \"UP_TO_DATE\" });\n          break;\n        default:\n          dispatch({\n            type: \"sync\",\n            state: \"ERROR\",\n            syncError: new Error(\"Unexpected return state\")\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: \"sync\", state: \"ERROR\", syncError: e });\n    } finally {\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n  const displayState = useMemo(\n    () => calculateDisplayState({\n      activeSyncState: state.activeSyncState,\n      contentLoading: state.contentLoading,\n      content: state.content\n    }),\n    [state.activeSyncState, state.content, state.contentLoading]\n  );\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: (_a = state.contentError) == null ? void 0 : _a.toString(),\n    syncErrorMessage: (_b = state.syncError) == null ? void 0 : _b.toString(),\n    buildLog: state.buildLog\n  };\n}\n\nconst TechDocsReaderContext = createContext({});\nconst useTechDocsReader = () => useContext(TechDocsReaderContext);\nconst TechDocsReaderProvider = (props) => {\n  const { children } = props;\n  const { \"*\": path = \"\" } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderContext.Provider, { value }, children instanceof Function ? children(value) : children);\n};\nconst withTechDocsReaderProvider = (Component) => (props) => /* @__PURE__ */ React.createElement(TechDocsReaderProvider, null, /* @__PURE__ */ React.createElement(Component, { ...props }));\n\nconst useStyles$3 = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    marginBottom: \"1rem\"\n  }\n});\nconst TechDocsSearchResultListItem$1 = (props) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon\n  } = props;\n  const classes = useStyles$3();\n  const LinkWrapper = ({ children }) => asLink ? /* @__PURE__ */ React.createElement(Link, { noTrack: true, to: result.location }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  const TextItem = () => {\n    const resultTitle = (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.title,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.title;\n    const entityTitle = (highlight == null ? void 0 : highlight.fields.entityTitle) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.entityTitle,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.entityTitle;\n    const resultName = (highlight == null ? void 0 : highlight.fields.name) ? /* @__PURE__ */ React.createElement(\n      HighlightedSearchResultText,\n      {\n        text: highlight.fields.name,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }\n    ) : result.name;\n    if (!result)\n      return null;\n    return /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.itemText,\n        primaryTypographyProps: { variant: \"h6\" },\n        primary: /* @__PURE__ */ React.createElement(LinkWrapper, null, title ? title : /* @__PURE__ */ React.createElement(React.Fragment, null, resultTitle, \" | \", entityTitle != null ? entityTitle : resultName, \" docs\")),\n        secondary: /* @__PURE__ */ React.createElement(\n          Typography,\n          {\n            component: \"span\",\n            style: {\n              display: \"-webkit-box\",\n              WebkitBoxOrient: \"vertical\",\n              WebkitLineClamp: lineClamp,\n              overflow: \"hidden\"\n            },\n            color: \"textSecondary\",\n            variant: \"body2\"\n          },\n          (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(\n            HighlightedSearchResultText,\n            {\n              text: highlight.fields.text,\n              preTag: highlight.preTag,\n              postTag: highlight.postTag\n            }\n          ) : result.text\n        )\n      }\n    );\n  };\n  const ListItemWrapper = ({ children }) => asListItem ? /* @__PURE__ */ React.createElement(React.Fragment, null, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, typeof icon === \"function\" ? icon(result) : icon), /* @__PURE__ */ React.createElement(\"div\", { className: classes.flexContainer }, children)) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  return /* @__PURE__ */ React.createElement(ListItemWrapper, null, /* @__PURE__ */ React.createElement(TextItem, null));\n};\n\nvar TechDocsSearchResultListItem$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsSearchResultListItem: TechDocsSearchResultListItem$1\n});\n\nconst isTechDocsSearchResult = (option) => {\n  return option == null ? void 0 : option.document;\n};\nconst TechDocsSearchBar = (props) => {\n  const { entityId, entityTitle, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    setFilters,\n    result: { loading, value: searchVal }\n  } = useSearch();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n    if (mounted && searchVal) {\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters((prevFilters) => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n  const handleSelection = (_, selection) => {\n    if (isTechDocsSearchResult(selection)) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    SearchAutocomplete,\n    {\n      \"data-testid\": \"techdocs-search-bar\",\n      size: \"small\",\n      open,\n      getOptionLabel: () => \"\",\n      filterOptions: (x) => {\n        return x;\n      },\n      onClose: () => {\n        setOpen(false);\n      },\n      onFocus: () => {\n        setOpen(true);\n      },\n      onChange: handleSelection,\n      blurOnSelect: true,\n      noOptionsText: \"No results found\",\n      value: null,\n      options,\n      renderOption: ({ document, highlight }) => /* @__PURE__ */ React.createElement(\n        TechDocsSearchResultListItem$1,\n        {\n          result: document,\n          lineClamp: 3,\n          asListItem: false,\n          asLink: false,\n          title: document.title,\n          highlight\n        }\n      ),\n      loading,\n      inputDebounceTime: debounceTime,\n      inputPlaceholder: `Search ${entityTitle || entityId.name} docs`,\n      freeSolo: false\n    }\n  );\n};\nconst TechDocsSearch = (props) => {\n  const initialState = {\n    term: \"\",\n    types: [\"techdocs\"],\n    pageCursor: \"\",\n    filters: props.entityId\n  };\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, { initialState }, /* @__PURE__ */ React.createElement(TechDocsSearchBar, { ...props }));\n};\n\nconst useDrawerStyles = makeStyles(\n  (theme) => createStyles({\n    paper: {\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"75%\"\n      },\n      [theme.breakpoints.up(\"md\")]: {\n        width: \"50%\"\n      },\n      padding: theme.spacing(2.5)\n    },\n    root: {\n      height: \"100%\",\n      overflow: \"hidden\"\n    },\n    logs: {\n      background: theme.palette.background.default\n    }\n  })\n);\nconst TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose\n}) => {\n  const classes = useDrawerStyles();\n  const logText = buildLog.length === 0 ? \"Waiting for logs...\" : buildLog.join(\"\\n\");\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"column\",\n      className: classes.root,\n      spacing: 0,\n      wrap: \"nowrap\"\n    },\n    /* @__PURE__ */ React.createElement(\n      Grid,\n      {\n        item: true,\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        spacing: 0,\n        wrap: \"nowrap\"\n      },\n      /* @__PURE__ */ React.createElement(Typography$1, { variant: \"h5\" }, \"Build Details\"),\n      /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          key: \"dismiss\",\n          title: \"Close the drawer\",\n          onClick: onClose,\n          color: \"inherit\"\n        },\n        /* @__PURE__ */ React.createElement(Close, null)\n      )\n    ),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(LogViewer, { text: logText, classes: { root: classes.logs } }))\n  );\n};\nconst TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => setOpen(true) }, \"Show Build Logs\"), /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      classes: { paper: classes.paper },\n      anchor: \"right\",\n      open,\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(\n      TechDocsBuildLogsDrawerContent,\n      {\n        buildLog,\n        onClose: () => setOpen(false)\n      }\n    )\n  ));\n};\n\nconst TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder = useApi(configApiRef).getOptionalString(\"techdocs.builder\");\n  let additionalInfo = \"\";\n  if (techdocsBuilder !== \"local\") {\n    additionalInfo = \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance.\";\n  }\n  return /* @__PURE__ */ React.createElement(\n    ErrorPage,\n    {\n      status: \"404\",\n      statusMessage: errorMessage || \"Documentation not found\",\n      additionalInfo\n    }\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: \"break-word\",\n    overflowWrap: \"anywhere\"\n  }\n}));\nconst TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles$2();\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog\n  } = useTechDocsReader();\n  if (state === \"INITIAL_BUILD\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        classes: { root: classes.root },\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog })\n      },\n      \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_REFRESHING\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"info\",\n        icon: /* @__PURE__ */ React.createElement(CircularProgress, { size: \"24px\" }),\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is being prepared and will be available shortly.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_READY\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"success\",\n        action: /* @__PURE__ */ React.createElement(Button, { color: \"inherit\", onClick: () => contentReload() }, \"Refresh\"),\n        classes: { root: classes.root }\n      },\n      \"A newer version of this documentation is now available, please refresh to view.\"\n    );\n  }\n  if (state === \"CONTENT_STALE_ERROR\") {\n    StateAlert = /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    );\n  }\n  if (state === \"CONTENT_NOT_FOUND\") {\n    StateAlert = /* @__PURE__ */ React.createElement(React.Fragment, null, syncErrorMessage && /* @__PURE__ */ React.createElement(\n      Alert,\n      {\n        variant: \"outlined\",\n        severity: \"error\",\n        action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, { buildLog }),\n        classes: { root: classes.root, message: classes.message }\n      },\n      \"Building a newer version of this documentation failed.\",\n      \" \",\n      syncErrorMessage\n    ), /* @__PURE__ */ React.createElement(TechDocsNotFound, { errorMessage: contentErrorMessage }));\n  }\n  return StateAlert;\n};\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\nconst isLink = (node) => node.nodeName === \"LINK\";\nconst isSafe$1 = (node) => {\n  const href = (node == null ? void 0 : node.getAttribute(\"href\")) || \"\";\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\nconst removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe$1(node)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst isIframe = (node) => node.nodeName === \"IFRAME\";\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute(\"src\") || \"\";\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\nconst removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n  return useMemo(() => {\n    return configApi.getOptionalConfig(\"techdocs.sanitizer\");\n  }, [configApi]);\n};\nconst useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n  return useCallback(\n    async (dom) => {\n      const hosts = config == null ? void 0 : config.getOptionalStringArray(\"allowedIframeHosts\");\n      DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeLinks);\n      const tags = [\"link\"];\n      if (hosts) {\n        tags.push(\"iframe\");\n        DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeIframes(hosts));\n      }\n      return DOMPurify.sanitize(dom.outerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: [\"style\"],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true\n      });\n    },\n    [config]\n  );\n};\n\nvar variables = ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n  theme.palette.text.secondary,\n  0.3\n)};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n  theme.palette.background.paper,\n  0.7\n)};\n  --md-default-bg-color--lightest: ${lighten(\n  theme.palette.background.paper,\n  0.3\n)};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n  theme.palette.primary.contrastText,\n  0.7\n)};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${theme.palette.type === \"dark\" ? theme.palette.primary.light : theme.palette.primary.dark};\n  --md-code-hl-function-color: ${theme.palette.type === \"dark\" ? theme.palette.secondary.light : theme.palette.secondary.dark};\n  --md-code-hl-string-color: ${theme.palette.type === \"dark\" ? theme.palette.success.light : theme.palette.success.dark};\n  --md-code-hl-number-color: ${theme.palette.type === \"dark\" ? theme.palette.error.light : theme.palette.error.dark};\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: ${theme.palette.link};\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.error.dark, 0.5) : alpha(theme.palette.error.light, 0.5)};\n  --md-typeset-ins-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.success.dark, 0.5) : alpha(theme.palette.success.light, 0.5)};\n  --md-typeset-mark-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.warning.dark, 0.5) : alpha(theme.palette.warning.light, 0.5)};\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n\nvar reset = ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n\nconst SIDEBAR_WIDTH = \"224px\";\nvar layout = ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n/* mkdocs material v9 compat */\n.md-nav__title {\n  color: var(--md-default-fg-color);\n}\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-nav__item--active > .md-nav__link, a.md-nav__link--active {\n  text-decoration: underline;\n  color: var(--md-typeset-a-color);\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(12.1rem);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n  pointer-events: none;\n}\n\n.md-footer-nav__link, .md-footer__link {\n  pointer-events: all;\n}\n\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${sidebar.isPinned ? `calc(-12.1rem + ${SIDEBAR_WIDTH})` : \"calc(-12.1rem + 72px)\"} !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n\n\n@media print {\n  .md-sidebar,\n  #toggle-sidebar {\n    display: none;\n  }\n  \n  .md-content {\n    margin: 0;\n    width: 100%;\n    max-width: 100%;\n  }\n}\n`;\n\nconst headings = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\nvar typeset = ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  var _a;\n  const htmlFontSize = (_a = theme.typography.htmlFontSize) != null ? _a : 16;\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === \"number\") {\n      factor = value / htmlFontSize * 0.6;\n    }\n    if (typeof value === \"string\") {\n      factor = value.replace(\"rem\", \"\");\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, \"\")}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n\nvar animations = () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n\nvar extensions = ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === \"dark\" ? \"#ff53a3\" : \"#ec407a\"};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(248,81,73,0.65)\" : \"#fdd\"};\n}\n\n.codehilite .gi {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(46,160,67,0.65)\" : \"#dfd\"};\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n\nconst rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions\n];\n\nconst useSidebar = () => useSidebarPinState();\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), \"\");\n  }, [theme, sidebar]);\n};\nconst useStylesTransformer = () => {\n  const styles = useRuleStyles();\n  return useCallback(\n    (dom) => {\n      dom.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles]\n  );\n};\n\nconst isSvgNeedingInlining = (attrName, attrVal, apiOrigin) => {\n  const isSrcToSvg = attrName === \"src\" && attrVal.endsWith(\".svg\");\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\nconst addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path\n}) => {\n  return async (dom) => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n    const updateDom = async (list, attributeName) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute)\n            return;\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path\n          );\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: \"include\" });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent))\n                )}`\n              );\n            } catch (e) {\n              elem.setAttribute(\"alt\", `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n    await Promise.all([\n      updateDom(dom.querySelectorAll(\"img\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"script\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"source\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"link\"), \"href\"),\n      updateDom(dom.querySelectorAll(\"a[download]\"), \"href\")\n    ]);\n    return dom;\n  };\n};\n\nconst addGitFeedbackLink = (scmIntegrationsApi) => {\n  return (dom) => {\n    var _a;\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]'\n    );\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n    if ((integration == null ? void 0 : integration.type) !== \"github\" && (integration == null ? void 0 : integration.type) !== \"gitlab\") {\n      return dom;\n    }\n    const title = ((_a = dom.querySelector(\"article>h1\")) == null ? void 0 : _a.childNodes[0].textContent) || \"\";\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\n${sourceAnchor.href}\n\nFeedback:`\n    );\n    const gitUrl = (integration == null ? void 0 : integration.type) === \"github\" ? replaceGithubUrlType(sourceURL.href, \"blob\") : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n    const feedbackLink = sourceAnchor.cloneNode();\n    switch (integration == null ? void 0 : integration.type) {\n      case \"gitlab\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case \"github\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    ReactDOM.render(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = \"5px\";\n    feedbackLink.title = \"Leave feedback for this page\";\n    feedbackLink.id = \"git-feedback-link\";\n    sourceAnchor == null ? void 0 : sourceAnchor.insertAdjacentElement(\"beforebegin\", feedbackLink);\n    return dom;\n  };\n};\n\nconst addSidebarToggle = () => {\n  return (dom) => {\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]'\n    );\n    const article = dom.querySelector(\"article\");\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode();\n    ReactDOM.render(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = \"toggle-sidebar\";\n    toggleSidebar.title = \"Toggle Sidebar\";\n    toggleSidebar.classList.add(\"md-content__button\");\n    toggleSidebar.style.setProperty(\"padding\", \"0 0 0 5px\");\n    toggleSidebar.style.setProperty(\"margin\", \"0.4rem 0 0.4rem 0.4rem\");\n    article == null ? void 0 : article.prepend(toggleSidebar);\n    return dom;\n  };\n};\n\nconst rewriteDocLinks = () => {\n  return (dom) => {\n    const updateDom = (list, attributeName) => {\n      Array.from(list).filter((elem) => elem.hasAttribute(attributeName)).forEach((elem) => {\n        const elemAttribute = elem.getAttribute(attributeName);\n        if (elemAttribute) {\n          if (elemAttribute.match(/^https?:\\/\\//i)) {\n            elem.setAttribute(\"target\", \"_blank\");\n          }\n          try {\n            const normalizedWindowLocation = normalizeUrl(\n              window.location.href\n            );\n            elem.setAttribute(\n              attributeName,\n              new URL(elemAttribute, normalizedWindowLocation).toString()\n            );\n          } catch (_e) {\n            elem.replaceWith(elem.textContent || elemAttribute);\n          }\n        }\n      });\n    };\n    updateDom(Array.from(dom.getElementsByTagName(\"a\")), \"href\");\n    return dom;\n  };\n};\nfunction normalizeUrl(input) {\n  const url = new URL(input);\n  if (!url.pathname.endsWith(\"/\") && !url.pathname.endsWith(\".html\")) {\n    url.pathname += \"/\";\n  }\n  return url.toString();\n}\n\nconst addLinkClickListener = ({\n  baseUrl,\n  onClick\n}) => {\n  return (dom) => {\n    Array.from(dom.getElementsByTagName(\"a\")).forEach((elem) => {\n      elem.addEventListener(\"click\", (e) => {\n        const target = elem;\n        const href = target.getAttribute(\"href\");\n        if (!href)\n          return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute(\"download\")) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n    return dom;\n  };\n};\n\nconst CopyToClipboardTooltip = withStyles((theme) => ({\n  tooltip: {\n    fontSize: \"inherit\",\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  }\n}))(Tooltip);\nconst CopyToClipboardIcon = () => /* @__PURE__ */ React.createElement(SvgIcon, null, /* @__PURE__ */ React.createElement(\"path\", { d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" }));\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const [, copyToClipboard2] = useCopyToClipboard();\n  const handleClick = useCallback(() => {\n    copyToClipboard2(text);\n    setOpen(true);\n  }, [text, copyToClipboard2]);\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /* @__PURE__ */ React.createElement(\n    CopyToClipboardTooltip,\n    {\n      title: \"Copied to clipboard\",\n      placement: \"left\",\n      open,\n      onClose: handleClose,\n      leaveDelay: 1e3\n    },\n    /* @__PURE__ */ React.createElement(\n      IconButton$1,\n      {\n        style: { color: \"inherit\" },\n        className: \"md-clipboard md-icon\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(CopyToClipboardIcon, null)\n    )\n  );\n};\nconst copyToClipboard = (theme) => {\n  return (dom) => {\n    var _a;\n    const codes = dom.querySelectorAll(\"pre > code\");\n    for (const code of codes) {\n      const text = code.textContent || \"\";\n      const container = document.createElement(\"div\");\n      (_a = code == null ? void 0 : code.parentElement) == null ? void 0 : _a.prepend(container);\n      ReactDOM.render(\n        /* @__PURE__ */ React.createElement(ThemeProvider, { theme }, /* @__PURE__ */ React.createElement(CopyToClipboardButton, { text })),\n        container\n      );\n    }\n    return dom;\n  };\n};\n\nconst removeMkdocsHeader = () => {\n  return (dom) => {\n    var _a;\n    (_a = dom.querySelector(\".md-header\")) == null ? void 0 : _a.remove();\n    return dom;\n  };\n};\n\nconst simplifyMkdocsFooter = () => {\n  return (dom) => {\n    var _a, _b;\n    (_a = dom.querySelector(\".md-footer .md-copyright\")) == null ? void 0 : _a.remove();\n    (_b = dom.querySelector(\".md-footer-copyright\")) == null ? void 0 : _b.remove();\n    return dom;\n  };\n};\n\nconst onCssReady = ({\n  onLoading,\n  onLoaded\n}) => {\n  return (dom) => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad\n        );\n      }\n    );\n    return dom;\n  };\n};\n\nconst scrollIntoAnchor = () => {\n  return (dom) => {\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        var _a;\n        if (window.location.hash) {\n          const hash = window.location.hash.slice(1);\n          (_a = dom == null ? void 0 : dom.querySelector(`[id=\"${hash}\"]`)) == null ? void 0 : _a.scrollIntoView();\n        }\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad\n        );\n      }\n    );\n    return dom;\n  };\n};\n\nconst scrollIntoNavigation = () => {\n  return (dom) => {\n    setTimeout(() => {\n      const activeNavItems = dom == null ? void 0 : dom.querySelectorAll(`li.md-nav__item--active`);\n      if (activeNavItems.length !== 0) {\n        activeNavItems.forEach((activeNavItem) => {\n          const checkbox = activeNavItem == null ? void 0 : activeNavItem.querySelector(\"input\");\n          if (!(checkbox == null ? void 0 : checkbox.checked)) {\n            checkbox == null ? void 0 : checkbox.click();\n          }\n        });\n        const lastItem = activeNavItems[activeNavItems.length - 1];\n        lastItem.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst transform = async (html, transformers) => {\n  let dom;\n  if (typeof html === \"string\") {\n    dom = new DOMParser().parseFromString(html, \"text/html\").documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error(\"dom is not a recognized type\");\n  }\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n  return dom;\n};\n\nfunction resolveUrlToRelative(url, baseUrl) {\n  const parsedAppUrl = new URL(baseUrl);\n  const appUrlPath = `${parsedAppUrl.origin}${parsedAppUrl.pathname.replace(\n    /\\/$/,\n    \"\"\n  )}`;\n  const relativeUrl = url.replace(appUrlPath, \"\").replace(/^\\/+/, \"\");\n  const parsedUrl = new URL(`http://localhost/${relativeUrl}`);\n  return `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`;\n}\nfunction useNavigateUrl() {\n  const navigate = useNavigate();\n  const configApi = useApi(configApiRef);\n  const appBaseUrl = configApi.getOptionalString(\"app.baseUrl\");\n  const navigateFn = useCallback(\n    (to) => {\n      let url = to;\n      if (appBaseUrl) {\n        try {\n          url = resolveUrlToRelative(to, appBaseUrl);\n        } catch (err) {\n        }\n      }\n      navigate(url);\n    },\n    [navigate, appBaseUrl]\n  );\n  return navigateFn;\n}\n\nconst MOBILE_MEDIA_QUERY = \"screen and (max-width: 76.1875em)\";\nconst useTechDocsReaderDom = (entityRef) => {\n  const navigate = useNavigateUrl();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n  const analytics = useAnalytics();\n  const techdocsStorageApi = useApi(techdocsStorageApiRef$1);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const { state, path, content: rawPage } = useTechDocsReader();\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom)\n      return;\n    const sidebars = dom.querySelectorAll(\".md-sidebar\");\n    sidebars.forEach((element) => {\n      var _a, _b, _c;\n      if (isMobileMedia) {\n        element.style.top = \"0px\";\n      } else {\n        const page = document == null ? void 0 : document.querySelector(\".techdocs-reader-page\");\n        const pageTop = (_a = page == null ? void 0 : page.getBoundingClientRect().top) != null ? _a : 0;\n        let domTop = (_b = dom.getBoundingClientRect().top) != null ? _b : 0;\n        const tabs = dom.querySelector(\".md-container > .md-tabs\");\n        const tabsHeight = (_c = tabs == null ? void 0 : tabs.getBoundingClientRect().height) != null ? _c : 0;\n        if (domTop < pageTop) {\n          domTop = pageTop;\n        }\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n      element.style.setProperty(\"opacity\", \"1\");\n    });\n  }, [dom, isMobileMedia]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSidebarPosition);\n    window.addEventListener(\"scroll\", updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener(\"resize\", updateSidebarPosition);\n      window.removeEventListener(\"scroll\", updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n  const updateFooterWidth = useCallback(() => {\n    if (!dom)\n      return;\n    const footer = dom.querySelector(\".md-footer\");\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateFooterWidth);\n    return () => {\n      window.removeEventListener(\"resize\", updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n  const preRender = useCallback(\n    (rawContent, contentPath) => transform(rawContent, [\n      sanitizerTransformer,\n      addBaseUrl({\n        techdocsStorageApi,\n        entityId: entityRef,\n        path: contentPath\n      }),\n      rewriteDocLinks(),\n      addSidebarToggle(),\n      removeMkdocsHeader(),\n      simplifyMkdocsFooter(),\n      addGitFeedbackLink(scmIntegrationsApi),\n      stylesTransformer\n    ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer\n    ]\n  );\n  const postRender = useCallback(\n    async (transformedElement) => transform(transformedElement, [\n      scrollIntoAnchor(),\n      scrollIntoNavigation(),\n      copyToClipboard(theme),\n      addLinkClickListener({\n        baseUrl: window.location.origin,\n        onClick: (event, url) => {\n          var _a, _b;\n          const modifierActive = event.ctrlKey || event.metaKey;\n          const parsedUrl = new URL(url);\n          const linkText = ((_a = event.target) == null ? void 0 : _a.innerText) || url;\n          const to = url.replace(window.location.origin, \"\");\n          analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n          if (parsedUrl.hash) {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n              (_b = transformedElement == null ? void 0 : transformedElement.querySelector(`[id=\"${parsedUrl.hash.slice(1)}\"]`)) == null ? void 0 : _b.scrollIntoView();\n            }\n          } else {\n            if (modifierActive) {\n              window.open(url, \"_blank\");\n            } else {\n              navigate(url);\n            }\n          }\n        }\n      }),\n      // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n      onCssReady({\n        onLoading: () => {\n        },\n        onLoaded: () => {\n          var _a;\n          (_a = transformedElement.querySelector(\".md-nav__title\")) == null ? void 0 : _a.removeAttribute(\"for\");\n        }\n      }),\n      // hide sidebars until their positions are updated\n      onCssReady({\n        onLoading: () => {\n          const sidebars = Array.from(\n            transformedElement.querySelectorAll(\".md-sidebar\")\n          );\n          sidebars.forEach((element) => {\n            element.style.setProperty(\"opacity\", \"0\");\n          });\n        },\n        onLoaded: () => {\n        }\n      })\n    ]),\n    [theme, navigate, analytics]\n  );\n  useEffect(() => {\n    if (!rawPage)\n      return () => {\n      };\n    let shouldReplaceContent = true;\n    preRender(rawPage, path).then(async (preTransformedDomElement) => {\n      if (!(preTransformedDomElement == null ? void 0 : preTransformedDomElement.innerHTML)) {\n        return;\n      }\n      if (!shouldReplaceContent) {\n        return;\n      }\n      window.scroll({ top: 0 });\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement\n      );\n      setDom(postTransformedDomElement);\n    });\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n  return dom;\n};\n\nconst TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n  const { shadowRoot } = useTechDocsReaderPage();\n  const contentElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    '[data-md-component=\"content\"]'\n  );\n  const primarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]'\n  );\n  let primarySidebarAddonLocation = primarySidebarElement == null ? void 0 : primarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]'\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement(\"div\");\n    primarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"primary sidebar\"\n    );\n    primarySidebarElement == null ? void 0 : primarySidebarElement.prepend(primarySidebarAddonLocation);\n  }\n  const secondarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]'\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement == null ? void 0 : secondarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]'\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement(\"div\");\n    secondarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"secondary sidebar\"\n    );\n    secondarySidebarElement == null ? void 0 : secondarySidebarElement.prepend(secondarySidebarAddonLocation);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Portal, { container: primarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.PrimarySidebar)), /* @__PURE__ */ React.createElement(Portal, { container: contentElement }, addons.renderComponentsByLocation(TechDocsAddonLocations.Content)), /* @__PURE__ */ React.createElement(Portal, { container: secondarySidebarAddonLocation }, addons.renderComponentsByLocation(TechDocsAddonLocations.SecondarySidebar)));\n};\n\nconst useStyles$1 = makeStyles({\n  search: {\n    width: \"100%\",\n    \"@media (min-width: 76.1875em)\": {\n      width: \"calc(100% - 34.4rem)\",\n      margin: \"0 auto\"\n    },\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n});\nconst TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    var _a;\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles$1();\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot\n    } = useTechDocsReaderPage();\n    const dom = useTechDocsReaderDom(entityRef);\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady]\n    );\n    if (entityMetadataLoading === false && !entityMetadata)\n      return /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\n    if (!dom) {\n      return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null))));\n    }\n    return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null)), withSearch && /* @__PURE__ */ React.createElement(Grid, { className: classes.search, xs: \"auto\", item: true }, /* @__PURE__ */ React.createElement(\n      TechDocsSearch,\n      {\n        entityId: entityRef,\n        entityTitle: (_a = entityMetadata == null ? void 0 : entityMetadata.metadata) == null ? void 0 : _a.title\n      }\n    )), /* @__PURE__ */ React.createElement(Grid, { xs: 12, item: true }, /* @__PURE__ */ React.createElement(TechDocsShadowDom, { element: dom, onAppend: handleAppend }, /* @__PURE__ */ React.createElement(TechDocsReaderPageContentAddons, null)))));\n  }\n);\nconst Reader = TechDocsReaderPageContent;\n\nconst rootRouteRef = createRouteRef({\n  id: \"techdocs:index-page\"\n});\nconst rootDocsRouteRef = createRouteRef({\n  id: \"techdocs:reader-page\",\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootCatalogDocsRouteRef = createRouteRef({\n  id: \"techdocs:catalog-reader-view\"\n});\n\nconst skeleton = /* @__PURE__ */ React.createElement(Skeleton, { animation: \"wave\", variant: \"text\", height: 40 });\nconst TechDocsReaderPageHeader = (props) => {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme$1();\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  useEffect(() => {\n    if (!metadata)\n      return;\n    setTitle(metadata.site_name);\n    setSubtitle(() => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === \"None\") {\n        site_description = \"\";\n      }\n      return site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const tabTitle = [title, subtitle, appTitle].filter(Boolean).join(\" | \");\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec == null ? void 0 : spec.lifecycle;\n  const ownedByRelations = entityMetadata ? getEntityRelations(entityMetadata, RELATION_OWNED_BY) : [];\n  const docsRootLink = useRouteRef(rootRouteRef)();\n  const labels = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: capitalize((entityMetadata == null ? void 0 : entityMetadata.kind) || \"entity\"),\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLink,\n        {\n          color: \"inherit\",\n          entityRef,\n          title: entityMetadata == null ? void 0 : entityMetadata.metadata.title,\n          defaultKind: \"Component\"\n        }\n      )\n    }\n  ), ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"Owner\",\n      value: /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          color: \"inherit\",\n          entityRefs: ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    }\n  ), lifecycle ? /* @__PURE__ */ React.createElement(HeaderLabel, { label: \"Lifecycle\", value: lifecycle }) : null, locationMetadata && locationMetadata.type !== \"dir\" && locationMetadata.type !== \"file\" ? /* @__PURE__ */ React.createElement(\n    HeaderLabel,\n    {\n      label: \"\",\n      value: /* @__PURE__ */ React.createElement(\n        Grid,\n        {\n          container: true,\n          direction: \"column\",\n          alignItems: \"center\",\n          style: { color: white }\n        },\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, /* @__PURE__ */ React.createElement(CodeIcon, { style: { marginTop: \"-25px\" } })),\n        /* @__PURE__ */ React.createElement(Grid, { style: { padding: 0 }, item: true }, \"Source\")\n      ),\n      url: locationMetadata.target\n    }\n  ) : null);\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === void 0;\n  const noTdMetadata = !metadataLoading && metadata === void 0;\n  if (noEntMetadata || noTdMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(\n    Header,\n    {\n      type: \"Documentation\",\n      typeLink: docsRootLink,\n      title: title || skeleton,\n      subtitle: subtitle === \"\" ? void 0 : subtitle || skeleton\n    },\n    /* @__PURE__ */ React.createElement(Helmet, { titleTemplate: \"%s\" }, /* @__PURE__ */ React.createElement(\"title\", null, tabTitle)),\n    labels,\n    children,\n    addons.renderComponentsByLocation(TechDocsAddonLocations.Header)\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageSubheader\",\n    flexDirection: \"column\",\n    minHeight: \"auto\",\n    padding: theme.spacing(3, 3, 0),\n    \"@media print\": {\n      display: \"none\"\n    }\n  }\n}));\nconst TechDocsReaderPageSubheader = (props) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  const addons = useTechDocsAddons();\n  const subheaderAddons = addons.renderComponentsByLocation(\n    TechDocsAddonLocations.Subheader\n  );\n  const settingsAddons = addons.renderComponentsByLocation(TechDocsAddonLocations.Settings);\n  if (!subheaderAddons && !settingsAddons)\n    return null;\n  if (entityMetadataLoading === false && !entityMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(Toolbar, { classes, ...props.toolbarProps }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      width: \"100%\",\n      flexWrap: \"wrap\"\n    },\n    subheaderAddons,\n    settingsAddons ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, { title: \"Settings\" }, /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        \"aria-controls\": \"tech-docs-reader-page-settings\",\n        \"aria-haspopup\": \"true\",\n        onClick: handleClick\n      },\n      /* @__PURE__ */ React.createElement(SettingsIcon, null)\n    )), /* @__PURE__ */ React.createElement(\n      Menu,\n      {\n        id: \"tech-docs-reader-page-settings\",\n        getContentAnchorEl: null,\n        anchorEl,\n        anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        keepMounted: true\n      },\n      /* @__PURE__ */ React.createElement(\"div\", null, settingsAddons)\n    )) : null\n  ));\n};\n\nconst TechDocsReaderLayout = (props) => {\n  const { withSearch, withHeader = true } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, withHeader && /* @__PURE__ */ React.createElement(TechDocsReaderPageHeader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch }));\n};\nconst TechDocsReaderPage$1 = (props) => {\n  const { kind, name, namespace } = useRouteRefParams(rootDocsRouteRef);\n  const { children, entityRef = { kind, name, namespace } } = props;\n  const outlet = useOutlet();\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n    const grandChildren = childrenList.flatMap(\n      (child) => {\n        var _a, _b;\n        return (_b = (_a = child == null ? void 0 : child.props) == null ? void 0 : _a.children) != null ? _b : [];\n      }\n    );\n    const page = grandChildren.find(\n      (grandChild) => !getComponentData(grandChild, TECHDOCS_ADDONS_WRAPPER_KEY) && !getComponentData(grandChild, TECHDOCS_ADDONS_KEY)\n    );\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, page || /* @__PURE__ */ React.createElement(TechDocsReaderLayout, null));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, { entityRef }, ({ metadata, entityMetadata, onReady }) => /* @__PURE__ */ React.createElement(\"div\", { className: \"techdocs-reader-page\" }, /* @__PURE__ */ React.createElement(Page, { themeId: \"documentation\" }, children instanceof Function ? children({\n    entityRef,\n    techdocsMetadataValue: metadata.value,\n    entityMetadataValue: entityMetadata.value,\n    onReady\n  }) : children)));\n};\n\nfunction toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    \"techdocs.legacyUseCaseSensitiveTripletPaths\"\n  ) ? str : str.toLocaleLowerCase(\"en-US\");\n}\n\nconst DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  return /* @__PURE__ */ React.createElement(ItemCardGrid, { \"data-testid\": \"docs-explore\" }, !(entities == null ? void 0 : entities.length) ? null : entities.map((entity, index) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(Card, { key: index }, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(\n      ItemCardHeader,\n      {\n        title: (_a = entity.metadata.title) != null ? _a : entity.metadata.name\n      }\n    )), /* @__PURE__ */ React.createElement(CardContent, null, entity.metadata.description), /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(\n      LinkButton,\n      {\n        to: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_b = entity.metadata.namespace) != null ? _b : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        color: \"primary\",\n        \"data-testid\": \"read_docs\"\n      },\n      \"Read Docs\"\n    )));\n  }));\n};\n\nconst allEntitiesGroup = {\n  title: \"All Documentation\",\n  filterPredicate: () => true\n};\nconst EntityListDocsGridGroup = (props) => {\n  const { entities, group } = props;\n  const { loading: loadingOwnership, isOwnedEntity } = useEntityOwnership();\n  const shownEntities = entities.filter((entity) => {\n    if (group.filterPredicate === \"ownedByUser\") {\n      if (loadingOwnership) {\n        return false;\n      }\n      return isOwnedEntity(entity);\n    }\n    return typeof group.filterPredicate === \"function\" && group.filterPredicate(entity);\n  });\n  const titleComponent = (() => {\n    return typeof group.title === \"string\" ? /* @__PURE__ */ React.createElement(ContentHeader, { title: group.title }) : group.title;\n  })();\n  if (shownEntities.length === 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Content, null, titleComponent, /* @__PURE__ */ React.createElement(DocsCardGrid, { entities: shownEntities }));\n};\nconst EntityListDocsGrid = (props) => {\n  const { loading, error, entities } = useEntityList();\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    );\n  }\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (entities.length === 0) {\n    return /* @__PURE__ */ React.createElement(\"div\", { \"data-testid\": \"doc-not-found\" }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"body2\" }, \"No documentation found that match your filter. Learn more about\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://backstage.io/docs/features/techdocs/creating-and-publishing\" }, \"publishing documentation\"), \".\"));\n  }\n  entities.sort(\n    (a, b) => {\n      var _a, _b;\n      return ((_a = a.metadata.title) != null ? _a : a.metadata.name).localeCompare(\n        (_b = b.metadata.title) != null ? _b : b.metadata.name\n      );\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Content, null, (props.groups || [allEntitiesGroup]).map((group, index) => /* @__PURE__ */ React.createElement(\n    EntityListDocsGridGroup,\n    {\n      entities,\n      group,\n      key: `${group.title}-${index}`\n    }\n  )));\n};\n\nconst YellowStar = withStyles$1({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(ShareIcon, { fontSize: \"small\" }),\n        tooltip: \"Click to copy documentation link to clipboard\",\n        onClick: () => copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`)\n      };\n    };\n  },\n  createStarEntityAction(isStarredEntity, toggleStarredEntity) {\n    return (row) => {\n      const entity = row.entity;\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    };\n  }\n};\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\nconst columnFactories = {\n  createNameColumn() {\n    return {\n      title: \"Document\",\n      field: \"entity.metadata.name\",\n      highlight: true,\n      render: (row) => /* @__PURE__ */ React.createElement(\n        SubvalueCell,\n        {\n          value: /* @__PURE__ */ React.createElement(Link, { to: row.resolved.docsUrl }, customTitle(row.entity)),\n          subvalue: row.entity.metadata.description\n        }\n      )\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(\n        EntityRefLinks,\n        {\n          entityRefs: resolved.ownedByRelations,\n          defaultKind: \"group\"\n        }\n      )\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\"\n    };\n  }\n};\n\nconst DocsTable = (props) => {\n  const { entities, title, loading, columns, actions, options } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  const documents = entities.map((entity) => {\n    var _a;\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_a = entity.metadata.namespace) != null ? _a : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \")\n      }\n    };\n  });\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createTypeColumn()\n  ];\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard)\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading || documents && documents.length > 0 ? /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      isLoading: loading,\n      options: {\n        paging: true,\n        pageSize: 20,\n        search: true,\n        actionsColumnIndex: -1,\n        ...options\n      },\n      data: documents,\n      columns: columns || defaultColumns,\n      actions: actions || defaultActions,\n      title: title ? `${title} (${documents.length})` : `All (${documents.length})`\n    }\n  ) : /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"data\",\n      title: \"No documents to show\",\n      description: \"Create your own document. Check out our Getting Started Information\",\n      action: /* @__PURE__ */ React.createElement(\n        LinkButton,\n        {\n          color: \"primary\",\n          to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n          variant: \"contained\"\n        },\n        \"DOCS\"\n      )\n    }\n  ));\n};\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n\nconst EntityListDocsTable = (props) => {\n  var _a, _b;\n  const { columns, actions, options } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const title = capitalize((_b = (_a = filters.user) == null ? void 0 : _a.value) != null ? _b : \"all\");\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity\n    )\n  ];\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    DocsTable,\n    {\n      title,\n      entities,\n      loading,\n      actions: actions || defaultActions,\n      columns,\n      options\n    }\n  );\n};\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n\nconst TechDocsPageWrapper = (props) => {\n  var _a;\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"}`;\n  return /* @__PURE__ */ React.createElement(\n    PageWithHeader,\n    {\n      title: \"Documentation\",\n      subtitle: generatedSubtitle,\n      themeId: \"documentation\"\n    },\n    children\n  );\n};\n\nclass TechDocsFilter {\n  getCatalogFilters() {\n    return {\n      \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n    };\n  }\n}\nconst TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter()\n    });\n  }, [updateFilters]);\n  return null;\n};\n\nconst DefaultTechDocsHome = (props) => {\n  const { initialFilter = \"owned\", columns, actions } = props;\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: \"\" }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(TechDocsPicker, null), /* @__PURE__ */ React.createElement(UserListPicker, { initialFilter }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(EntityListDocsTable, { actions, columns }))))));\n};\n\nconst techdocsPlugin = createPlugin({\n  id: \"techdocs\",\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef$1,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) => new TechDocsStorageClient({\n        configApi,\n        discoveryApi,\n        identityApi,\n        fetchApi\n      })\n    }),\n    createApiFactory({\n      api: techdocsApiRef$1,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) => new TechDocsClient({\n        configApi,\n        discoveryApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef\n  }\n});\nconst TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechdocsPage\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityTechdocsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef\n  })\n);\nconst TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsCustomHome\",\n    component: () => import('./TechDocsCustomHome-4b8ec1a3.esm.js').then(\n      (m) => m.TechDocsCustomHome\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsIndexPage$2 = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsIndexPage\",\n    component: () => Promise.resolve().then(function () { return TechDocsIndexPage$1; }).then(\n      (m) => m.TechDocsIndexPage\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsReaderPage\",\n    component: () => import('./index-13a5f343.esm.js').then(\n      (m) => m.TechDocsReaderPage\n    ),\n    mountPoint: rootDocsRouteRef\n  })\n);\nconst TechDocsSearchResultListItem = techdocsPlugin.provide(\n  createSearchResultListItemExtension({\n    name: \"TechDocsSearchResultListItem\",\n    component: () => Promise.resolve().then(function () { return TechDocsSearchResultListItem$2; }).then(\n      (m) => m.TechDocsSearchResultListItem\n    ),\n    predicate: (result) => result.type === \"techdocs\"\n  })\n);\n\nconst EntityPageDocs = ({ entity }) => {\n  const entityRef = getCompoundEntityRef(entity);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPage, { entityRef }, /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, { withSearch: false }));\n};\n\nconst TechDocsIndexPage = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultTechDocsHome, { ...props });\n};\n\nvar TechDocsIndexPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsIndexPage: TechDocsIndexPage\n});\n\nconst TECHDOCS_ANNOTATION = \"backstage.io/techdocs-ref\";\nconst isTechDocsAvailable = (entity) => {\n  var _a, _b;\n  return Boolean((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[TECHDOCS_ANNOTATION]);\n};\nconst Router = () => {\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(TechDocsIndexPage, null) }), /* @__PURE__ */ React.createElement(\n    Route,\n    {\n      path: \"/:namespace/:kind/:name/*\",\n      element: /* @__PURE__ */ React.createElement(TechDocsReaderPage$1, null)\n    }\n  ));\n};\nconst EmbeddedDocsRouter = (props) => {\n  var _a;\n  const { children } = props;\n  const { entity } = useEntity();\n  const element = useRoutes([\n    {\n      path: \"/*\",\n      element: /* @__PURE__ */ React.createElement(EntityPageDocs, { entity }),\n      children: [\n        {\n          path: \"*\",\n          element: children\n        }\n      ]\n    }\n  ]);\n  const projectId = (_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_ANNOTATION];\n  if (!projectId) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: TECHDOCS_ANNOTATION });\n  }\n  return element;\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isTechDocsAvailable: isTechDocsAvailable,\n  Router: Router,\n  EmbeddedDocsRouter: EmbeddedDocsRouter\n});\n\nexport { DocsTable as D, EntityTechdocsContent as E, Reader as R, TechDocsPageWrapper as T, DocsCardGrid as a, TechDocsReaderPage$1 as b, TechDocsReaderLayout as c, TechDocsCustomHome as d, TechDocsIndexPage$2 as e, TechdocsPage as f, TechDocsReaderPage as g, TechDocsSearchResultListItem as h, techdocsStorageApiRef as i, techdocsApiRef as j, TechDocsClient as k, TechDocsStorageClient as l, TechDocsReaderProvider as m, TechDocsReaderPageHeader as n, TechDocsReaderPageContent as o, TechDocsReaderPageSubheader as p, TechDocsSearch as q, EntityListDocsGrid as r, EntityListDocsTable as s, techdocsPlugin as t, DefaultTechDocsHome as u, TechDocsPicker as v, isTechDocsAvailable as w, Router as x, EmbeddedDocsRouter as y };\n//# sourceMappingURL=index-8bf02c1c.esm.js.map\n","import { WebStorage } from '@backstage/core-app-api';\nimport { ResponseError } from '@backstage/errors';\nimport ObservableImpl from 'zen-observable';\nimport { createRouteRef, createPlugin, createRoutableExtension, useRouteRef, useApi, errorApiRef, SessionState, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, gitlabAuthApiRef, oktaAuthApiRef, bitbucketAuthApiRef, oneloginAuthApiRef, atlassianAuthApiRef, bitbucketServerAuthApiRef, configApiRef, featureFlagsApiRef, FeatureFlagState, identityApiRef, alertApiRef, appThemeApiRef, attachComponentData, useElementFilter } from '@backstage/core-plugin-api';\nimport React, { useState, useEffect, useCallback, cloneElement } from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { SidebarItem, EmptyState, CodeSnippet, sidebarConfig, InfoCard, useSidebarPinState, Page, Header, RoutedTabs } from '@backstage/core-components';\nimport { useOutlet } from 'react-router-dom';\nimport { Typography, Button, makeStyles, Avatar, ListItem, ListItemIcon, ListItemText, Tooltip, Grid, ListItemSecondaryAction, List, Switch, TextField, IconButton, Menu, MenuItem } from '@material-ui/core';\nimport Star from '@material-ui/icons/Star';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport useAsync from 'react-use/lib/useAsync';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { EntityRefLinks } from '@backstage/plugin-catalog-react';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Typography$1 from '@material-ui/core/Typography';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst JSON_HEADERS = {\n  \"Content-Type\": \"application/json; charset=utf-8\",\n  Accept: \"application/json\"\n};\nconst buckets = /* @__PURE__ */ new Map();\nclass UserSettingsStorage {\n  constructor(namespace, fetchApi, discoveryApi, errorApi, identityApi, fallback) {\n    this.namespace = namespace;\n    this.fetchApi = fetchApi;\n    this.discoveryApi = discoveryApi;\n    this.errorApi = errorApi;\n    this.identityApi = identityApi;\n    this.fallback = fallback;\n    __publicField(this, \"subscribers\", /* @__PURE__ */ new Set());\n    __publicField(this, \"observables\", /* @__PURE__ */ new Map());\n  }\n  static create(options) {\n    var _a;\n    return new UserSettingsStorage(\n      (_a = options.namespace) != null ? _a : \"default\",\n      options.fetchApi,\n      options.discoveryApi,\n      options.errorApi,\n      options.identityApi,\n      WebStorage.create({\n        namespace: options.namespace,\n        errorApi: options.errorApi\n      })\n    );\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}.${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(\n        bucketPath,\n        new UserSettingsStorage(\n          bucketPath,\n          this.fetchApi,\n          this.discoveryApi,\n          this.errorApi,\n          this.identityApi,\n          this.fallback\n        )\n      );\n    }\n    return buckets.get(bucketPath);\n  }\n  async remove(key) {\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"DELETE\"\n    });\n    if (!response.ok && response.status !== 404) {\n      throw await ResponseError.fromResponse(response);\n    }\n    this.notifyChanges({ key, presence: \"absent\" });\n  }\n  async set(key, data) {\n    if (!await this.isSignedIn()) {\n      await this.fallback.set(key, data);\n      this.notifyChanges({ key, presence: \"present\", value: data });\n      return;\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"PUT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify({ value: data })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { value } = await response.json();\n    this.notifyChanges({ key, value, presence: \"present\" });\n  }\n  observe$(key) {\n    if (!this.observables.has(key)) {\n      this.observables.set(\n        key,\n        new ObservableImpl((subscriber) => {\n          this.subscribers.add(subscriber);\n          Promise.resolve().then(() => this.get(key)).then((snapshot) => subscriber.next(snapshot)).catch((error) => this.errorApi.post(error));\n          return () => {\n            this.subscribers.delete(subscriber);\n          };\n        }).filter(({ key: messageKey }) => messageKey === key)\n      );\n    }\n    return this.observables.get(key);\n  }\n  snapshot(key) {\n    return { key, presence: \"unknown\" };\n  }\n  async get(key) {\n    if (!await this.isSignedIn()) {\n      return this.fallback.snapshot(key);\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl);\n    if (response.status === 404) {\n      return { key, presence: \"absent\" };\n    }\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    try {\n      const { value: rawValue } = await response.json();\n      const value = JSON.parse(JSON.stringify(rawValue), (_key, val) => {\n        if (typeof val === \"object\" && val !== null) {\n          Object.freeze(val);\n        }\n        return val;\n      });\n      return { key, presence: \"present\", value };\n    } catch {\n      return { key, presence: \"absent\" };\n    }\n  }\n  async getFetchUrl(key) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"user-settings\");\n    const encodedNamespace = encodeURIComponent(this.namespace);\n    const encodedKey = encodeURIComponent(key);\n    return `${baseUrl}/buckets/${encodedNamespace}/keys/${encodedKey}`;\n  }\n  async notifyChanges(snapshot) {\n    for (const subscription of this.subscribers) {\n      try {\n        subscription.next(snapshot);\n      } catch {\n      }\n    }\n  }\n  async isSignedIn() {\n    try {\n      const credentials = await this.identityApi.getCredentials();\n      return (credentials == null ? void 0 : credentials.token) ? true : false;\n    } catch {\n      return false;\n    }\n  }\n}\n\nconst settingsRouteRef = createRouteRef({\n  id: \"user-settings\"\n});\nconst userSettingsPlugin = createPlugin({\n  id: \"user-settings\",\n  routes: {\n    settingsPage: settingsRouteRef\n  }\n});\nconst UserSettingsPage = userSettingsPlugin.provide(\n  createRoutableExtension({\n    name: \"UserSettingsPage\",\n    component: () => import('./esm/index-713b33bc.esm.js').then((m) => m.SettingsPage),\n    mountPoint: settingsRouteRef\n  })\n);\n\nconst Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return /* @__PURE__ */ React.createElement(SidebarItem, { text: \"Settings\", to: routePath(), icon: Icon });\n};\n\nconst EXAMPLE$1 = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\nconst EmptyProviders = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Authentication Providers\",\n    description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Open \", /* @__PURE__ */ React.createElement(\"code\", null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE$1,\n        language: \"yaml\",\n        showLineNumbers: true,\n        highlightedNumbers: [3, 4, 5, 6, 7, 8],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/auth/add-auth-provider\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst useStyles$2 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst ProviderSettingsAvatar = ({ size, picture }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$2(size ? { size } : { size: iconSize });\n  return /* @__PURE__ */ React.createElement(Avatar, { src: picture, className: classes.avatar });\n};\n\nconst emptyProfile = {};\nconst ProviderSettingsItem = (props) => {\n  const { title, description, icon: Icon, apiRef } = props;\n  const api = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const [signedIn, setSignedIn] = useState(false);\n  const [profile, setProfile] = useState(emptyProfile);\n  useEffect(() => {\n    let didCancel = false;\n    const subscription = api.sessionState$().subscribe((sessionState) => {\n      if (sessionState !== SessionState.SignedIn) {\n        setProfile(emptyProfile);\n        setSignedIn(false);\n      }\n      if (!didCancel) {\n        api.getProfile({ optional: true }).then((profileResponse) => {\n          if (!didCancel) {\n            if (sessionState === SessionState.SignedIn) {\n              setSignedIn(true);\n            }\n            if (profileResponse) {\n              setProfile(profileResponse);\n            }\n          }\n        });\n      }\n    });\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: title,\n      secondary: /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: description }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(ProviderSettingsAvatar, { size: 48, picture: profile.picture })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          variant: \"subtitle1\",\n          color: \"textPrimary\",\n          gutterBottom: true\n        },\n        profile.displayName\n      ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, description)))))),\n      secondaryTypographyProps: { noWrap: true, style: { width: \"80%\" } }\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`\n    },\n    /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: () => {\n          const action = signedIn ? api.signOut() : api.signIn();\n          action.catch((error) => errorApi.post(error));\n        }\n      },\n      signedIn ? `Sign out` : `Sign in`\n    )\n  )));\n};\n\nconst DefaultProviderSettings = (props) => {\n  const { configuredProviders } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, configuredProviders.includes(\"google\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Google\",\n      description: \"Provides authentication towards Google APIs and identities\",\n      apiRef: googleAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"microsoft\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Microsoft\",\n      description: \"Provides authentication towards Microsoft APIs and identities\",\n      apiRef: microsoftAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"github\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitHub\",\n      description: \"Provides authentication towards GitHub APIs\",\n      apiRef: githubAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"gitlab\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"GitLab\",\n      description: \"Provides authentication towards GitLab APIs\",\n      apiRef: gitlabAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"okta\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Okta\",\n      description: \"Provides authentication towards Okta APIs\",\n      apiRef: oktaAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucket\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket\",\n      description: \"Provides authentication towards Bitbucket APIs\",\n      apiRef: bitbucketAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"onelogin\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"OneLogin\",\n      description: \"Provides authentication towards OneLogin APIs\",\n      apiRef: oneloginAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"atlassian\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Atlassian\",\n      description: \"Provides authentication towards Atlassian APIs\",\n      apiRef: atlassianAuthApiRef,\n      icon: Star\n    }\n  ), configuredProviders.includes(\"bitbucketServer\") && /* @__PURE__ */ React.createElement(\n    ProviderSettingsItem,\n    {\n      title: \"Bitbucket Server\",\n      description: \"Provides authentication towards Bitbucket Server APIs\",\n      apiRef: bitbucketServerAuthApiRef,\n      icon: Star\n    }\n  ));\n};\n\nconst UserSettingsAuthProviders = (props) => {\n  const { providerSettings } = props;\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig(\"auth.providers\");\n  const configuredProviders = (providersConfig == null ? void 0 : providersConfig.keys()) || [];\n  const providers = providerSettings != null ? providerSettings : /* @__PURE__ */ React.createElement(DefaultProviderSettings, { configuredProviders });\n  if (!providerSettings && !(configuredProviders == null ? void 0 : configuredProviders.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyProviders, null);\n  }\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Available Providers\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, providers));\n};\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\nconst EmptyFlags = () => /* @__PURE__ */ React.createElement(\n  EmptyState,\n  {\n    missing: \"content\",\n    title: \"No Feature Flags\",\n    description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"An example for how to add a feature flag is highlighted below:\"), /* @__PURE__ */ React.createElement(\n      CodeSnippet,\n      {\n        text: EXAMPLE,\n        language: \"typescript\",\n        showLineNumbers: true,\n        highlightedNumbers: [6],\n        customStyle: { background: \"inherit\", fontSize: \"115%\" }\n      }\n    ), /* @__PURE__ */ React.createElement(\n      Button,\n      {\n        variant: \"contained\",\n        color: \"primary\",\n        href: \"https://backstage.io/docs/api/utility-apis\"\n      },\n      \"Read More\"\n    ))\n  }\n);\n\nconst getSecondaryText = (flag) => {\n  if (flag.description) {\n    return flag.description;\n  }\n  return flag.pluginId ? `Registered in ${flag.pluginId} plugin` : \"Registered in the application\";\n};\nconst FlagItem = ({ flag, enabled, toggleHandler }) => /* @__PURE__ */ React.createElement(ListItem, { divider: true, button: true, onClick: () => toggleHandler(flag.name) }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: enabled ? \"Disable\" : \"Enable\" }, /* @__PURE__ */ React.createElement(Switch, { color: \"primary\", checked: enabled, name: flag.name }))), /* @__PURE__ */ React.createElement(ListItemText, { primary: flag.name, secondary: getSecondaryText(flag) }));\n\nconst sortFlags = (flags, featureFlagsApi) => {\n  const activeFlags = flags.filter((flag) => featureFlagsApi.isActive(flag.name));\n  const idleFlags = flags.filter((flag) => !featureFlagsApi.isActive(flag.name));\n  return [...activeFlags, ...idleFlags];\n};\nconst UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const inputRef = React.useRef();\n  const initialFeatureFlags = featureFlagsApi.getRegisteredFlags();\n  const initialFeatureFlagsSorted = sortFlags(\n    initialFeatureFlags,\n    featureFlagsApi\n  );\n  const [featureFlags] = useState(initialFeatureFlagsSorted);\n  const initialFlagState = Object.fromEntries(\n    featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)])\n  );\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState(\"\");\n  const toggleFlag = useCallback(\n    (flagName) => {\n      const newState = featureFlagsApi.isActive(flagName) ? FeatureFlagState.None : FeatureFlagState.Active;\n      featureFlagsApi.save({\n        states: { [flagName]: newState },\n        merge: true\n      });\n      setState((prevState) => ({\n        ...prevState,\n        [flagName]: newState === FeatureFlagState.Active\n      }));\n    },\n    [featureFlagsApi]\n  );\n  if (!featureFlags.length) {\n    return /* @__PURE__ */ React.createElement(EmptyFlags, null);\n  }\n  const clearFilterInput = () => {\n    var _a;\n    setFilterInput(\"\");\n    (_a = inputRef == null ? void 0 : inputRef.current) == null ? void 0 : _a.focus();\n  };\n  const filteredFeatureFlags = featureFlags.filter((featureFlag) => {\n    const featureFlagName = featureFlag.name.toLocaleLowerCase(\"en-US\");\n    return featureFlagName.includes(filterInput.toLocaleLowerCase(\"en-US\"));\n  });\n  const Header = () => /* @__PURE__ */ React.createElement(Grid, { container: true, style: { justifyContent: \"space-between\" } }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 8 }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, \"Feature Flags\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, \"Please refresh the page when toggling feature flags\")), featureFlags.length >= 10 && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 6, md: 4 }, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      label: \"Filter\",\n      style: { display: \"flex\", justifyContent: \"flex-end\" },\n      inputRef: (ref) => ref && ref.focus(),\n      InputProps: {\n        ...filterInput.length && {\n          endAdornment: /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              \"aria-label\": \"Clear filter\",\n              onClick: clearFilterInput,\n              edge: \"end\"\n            },\n            /* @__PURE__ */ React.createElement(ClearIcon, null)\n          )\n        }\n      },\n      onChange: (e) => setFilterInput(e.target.value),\n      value: filterInput\n    }\n  )));\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: /* @__PURE__ */ React.createElement(Header, null) }, /* @__PURE__ */ React.createElement(List, { dense: true }, filteredFeatureFlags.map((featureFlag) => {\n    const enabled = Boolean(state[featureFlag.name]);\n    return /* @__PURE__ */ React.createElement(\n      FlagItem,\n      {\n        key: featureFlag.name,\n        flag: featureFlag,\n        enabled,\n        toggleHandler: toggleFlag\n      }\n    );\n  })));\n};\n\nconst useUserProfile = () => {\n  var _a;\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity()\n    };\n  }, []);\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (loading || error) {\n    return {\n      profile: {},\n      displayName: \"\",\n      loading\n    };\n  }\n  return {\n    profile: value.profile,\n    backstageIdentity: value.identity,\n    displayName: (_a = value.profile.displayName) != null ? _a : value.identity.userEntityRef,\n    loading\n  };\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst UserSettingsSignInAvatar = (props) => {\n  const { size } = props;\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$1(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(\n    Avatar,\n    {\n      src: profile.picture,\n      className: classes.avatar,\n      alt: \"Profile picture\"\n    }\n  );\n};\n\nconst UserSettingsMenu = () => {\n  const errorApi = useApi(errorApiRef);\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(\n    void 0\n  );\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setAnchorEl(void 0);\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      \"data-testid\": \"user-settings-menu\",\n      \"aria-label\": \"more\",\n      onClick: handleOpen\n    },\n    /* @__PURE__ */ React.createElement(MoreVertIcon, null)\n  ), /* @__PURE__ */ React.createElement(Menu, { anchorEl, open, onClose: handleClose }, /* @__PURE__ */ React.createElement(\n    MenuItem,\n    {\n      \"data-testid\": \"sign-out\",\n      onClick: () => identityApi.signOut().catch((error) => errorApi.post(error))\n    },\n    /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SignOutIcon, null)),\n    \"Sign Out\"\n  )));\n};\n\nconst UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Profile\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 6 }, /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsSignInAvatar, { size: 96 })), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: true, container: true }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, container: true, direction: \"column\", spacing: 2 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\", gutterBottom: true }, displayName), /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", color: \"textSecondary\" }, profile.email))), /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(UserSettingsMenu, null)))));\n};\n\nconst UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: \"Pin Sidebar\",\n      secondary: \"Prevent the sidebar from collapsing\"\n    }\n  ), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      placement: \"top\",\n      arrow: true,\n      title: `${isPinned ? \"Unpin\" : \"Pin\"} Sidebar`\n    },\n    /* @__PURE__ */ React.createElement(\n      Switch,\n      {\n        color: \"primary\",\n        checked: isPinned,\n        onChange: () => toggleSidebarPinState(),\n        name: \"pin\",\n        inputProps: { \"aria-label\": \"Pin Sidebar Switch\" }\n      }\n    )\n  )));\n};\n\nconst ThemeIcon = ({ id, activeId, icon }) => icon ? cloneElement(icon, {\n  color: activeId === id ? \"primary\" : void 0\n}) : /* @__PURE__ */ React.createElement(AutoIcon, { color: activeId === id ? \"primary\" : void 0 });\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title }, /* @__PURE__ */ React.createElement(ToggleButton, { value, ...props }, children));\nconst UserSettingsThemeToggle = () => {\n  const classes = useStyles();\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const themeIds = appThemeApi.getInstalledThemes();\n  const handleSetTheme = (_event, newThemeId) => {\n    if (themeIds.some((t) => t.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(void 0);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      className: classes.list,\n      classes: { container: classes.container }\n    },\n    /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        className: classes.listItemText,\n        primary: \"Theme\",\n        secondary: \"Change the theme mode\"\n      }\n    ),\n    /* @__PURE__ */ React.createElement(ListItemSecondaryAction, { className: classes.listItemSecondaryAction }, /* @__PURE__ */ React.createElement(\n      ToggleButtonGroup,\n      {\n        exclusive: true,\n        size: \"small\",\n        value: themeId != null ? themeId : \"auto\",\n        onChange: handleSetTheme\n      },\n      themeIds.map((theme) => {\n        var _a;\n        const themeIcon = (_a = themeIds.find((t) => t.id === theme.id)) == null ? void 0 : _a.icon;\n        return /* @__PURE__ */ React.createElement(\n          TooltipToggleButton,\n          {\n            key: theme.id,\n            title: `Select ${theme.title}`,\n            value: theme.id\n          },\n          /* @__PURE__ */ React.createElement(React.Fragment, null, theme.title, \"\\xA0\", /* @__PURE__ */ React.createElement(\n            ThemeIcon,\n            {\n              id: theme.id,\n              icon: themeIcon,\n              activeId: themeId\n            }\n          ))\n        );\n      }),\n      /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", arrow: true, title: \"Select auto theme\" }, /* @__PURE__ */ React.createElement(ToggleButton, { value: \"auto\", selected: themeId === void 0 }, \"Auto\\xA0\", /* @__PURE__ */ React.createElement(AutoIcon, { color: themeId === void 0 ? \"primary\" : void 0 })))\n    ))\n  );\n};\n\nconst UserSettingsAppearanceCard = () => {\n  const { isMobile } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(InfoCard, { title: \"Appearance\", variant: \"gridItem\" }, /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(UserSettingsThemeToggle, null), !isMobile && /* @__PURE__ */ React.createElement(UserSettingsPinToggle, null)));\n};\n\nconst Contents = () => {\n  const { backstageIdentity } = useUserProfile();\n  if (!backstageIdentity) {\n    return /* @__PURE__ */ React.createElement(Typography$1, null, \"No Backstage Identity\");\n  }\n  return /* @__PURE__ */ React.createElement(Grid$1, { container: true, spacing: 1 }, /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\", gutterBottom: true }, \"User Entity:\", \" \", /* @__PURE__ */ React.createElement(\n    EntityRefLinks,\n    {\n      entityRefs: [backstageIdentity.userEntityRef],\n      getTitle: (ref) => ref\n    }\n  ))), /* @__PURE__ */ React.createElement(Grid$1, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography$1, { variant: \"subtitle1\" }, \"Ownership Entities:\", \" \", /* @__PURE__ */ React.createElement(\n    EntityRefLinks,\n    {\n      entityRefs: backstageIdentity.ownershipEntityRefs,\n      getTitle: (ref) => ref\n    }\n  ))));\n};\nconst UserSettingsIdentityCard = () => /* @__PURE__ */ React.createElement(InfoCard, { title: \"Backstage Identity\" }, /* @__PURE__ */ React.createElement(Contents, null));\n\nconst UserSettingsGeneral = () => {\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"row\", spacing: 3 }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsProfileCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsAppearanceCard, null)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(UserSettingsIdentityCard, null)));\n};\n\nconst LAYOUT_DATA_KEY = \"plugin.user-settings.settingsLayout\";\nconst LAYOUT_ROUTE_DATA_KEY = \"plugin.user-settings.settingsLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, LAYOUT_ROUTE_DATA_KEY, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nconst SettingsLayout = (props) => {\n  const { title, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY,\n      withStrictError: \"Child of SettingsLayout must be an SettingsLayout.Route\"\n    }).getElements().map((child) => child.props)\n  );\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, !isMobile && /* @__PURE__ */ React.createElement(Header, { title: title != null ? title : \"Settings\" }), /* @__PURE__ */ React.createElement(RoutedTabs, { routes }));\n};\nattachComponentData(SettingsLayout, LAYOUT_DATA_KEY, true);\nSettingsLayout.Route = Route;\n\nconst DefaultSettingsPage = (props) => {\n  const { providerSettings, tabs } = props;\n  return /* @__PURE__ */ React.createElement(SettingsLayout, null, /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"general\", title: \"General\" }, /* @__PURE__ */ React.createElement(UserSettingsGeneral, null)), /* @__PURE__ */ React.createElement(\n    SettingsLayout.Route,\n    {\n      path: \"auth-providers\",\n      title: \"Authentication Providers\"\n    },\n    /* @__PURE__ */ React.createElement(UserSettingsAuthProviders, { providerSettings })\n  ), /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: \"feature-flags\", title: \"Feature Flags\" }, /* @__PURE__ */ React.createElement(UserSettingsFeatureFlags, null)), tabs);\n};\n\nconst SettingsPage = (props) => {\n  const { providerSettings } = props;\n  const outlet = useOutlet();\n  const layout = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_DATA_KEY\n    }).getElements()\n  );\n  const tabs = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: LAYOUT_ROUTE_DATA_KEY\n    }).getElements()\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, layout.length !== 0 && layout || /* @__PURE__ */ React.createElement(DefaultSettingsPage, { tabs, providerSettings }));\n};\n\nconst USER_SETTINGS_TAB_KEY = LAYOUT_ROUTE_DATA_KEY;\nconst UserSettingsTab = (props) => /* @__PURE__ */ React.createElement(SettingsLayout.Route, { path: props.path, title: props.title }, /* @__PURE__ */ React.createElement(React.Fragment, null, \"props.children\"));\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, \"UserSettingsTab\");\n\nexport { DefaultProviderSettings, ProviderSettingsItem, SettingsPage as Router, Settings, SettingsLayout, USER_SETTINGS_TAB_KEY, UserSettingsAppearanceCard, UserSettingsAuthProviders, UserSettingsFeatureFlags, UserSettingsGeneral, UserSettingsIdentityCard, UserSettingsMenu, UserSettingsPage, UserSettingsPinToggle, UserSettingsProfileCard, UserSettingsSignInAvatar, UserSettingsStorage, UserSettingsTab, UserSettingsThemeToggle, userSettingsPlugin as plugin, useUserProfile, userSettingsPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  const versionedValue = {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n  Object.defineProperty(versionedValue, \"$map\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return versions;\n    }\n  });\n  return versionedValue;\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(\n    key,\n    () => createContext(void 0)\n  );\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions)\n      );\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"names":["__v5Spacing","defaultSpacing","argsInput","args","transform","argument","themeSpacing","output","adaptV5CssBaselineOverride","theme","overrides","styles","adaptV5Override","_theme","className","style","stateStyleKeyPattern","extractV5StateOverrides","_styleKey","styleKey","match","state","stateStyles","restStyles","transformV5ComponentThemesToV4","components","props","name","component","shapes","colorVariants","genPageTheme","_a","colors","shape","options","gradient","backgroundImage","fontColor","pageTheme","DEFAULT_HTML_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_PAGE_THEME","createBaseThemeOptions","palette","htmlFontSize","fontFamily","defaultPageTheme","pageTheme$1","typography","defaultTypography","themeId","defaultComponentThemes","__accessCheck","obj","member","msg","__privateGet","getter","__privateAdd","value","__privateSet","setter","_themes","UnifiedThemeHolder","v4","v5","version","createUnifiedTheme","themeOptions","v5Theme","v4Overrides","v4Theme","createTheme","createUnifiedThemeFromV4","palettes","themes","componentName","generateV4ClassName","createGenerateClassName","UnifiedThemeProvider","children","noCssBaseline","cssBaseline","CssBaseline","result","StylesProvider","ThemeProvider","StyledEngineProvider","createThemeOptions","_b","_c","_d","createThemeOverrides","baseTheme","lightTheme","darkTheme","apis","configApi","alertApi","errorApi","identityApi","discoveryApi","oauthRequestApi","config","discovery","identity","OptionallyWrapInRouter","DefaultNotFoundPage","DefaultBootErrorPage","step","error","message","DefaultErrorBoundaryFallback","resetError","plugin","Button","icons","createApp","CATALOG_FILTER_EXISTS","isQueryEntitiesInitialRequest","request","__defProp","__defNormalProp","key","__publicField","CatalogClient","kind","namespace","id","filter","fields","order","offset","limit","after","params","directive","query","entities","refCompare","a","b","aRef","bRef","body","url","response","items","i","orderFields","fullTextFilter","field","normalizedFullTextFilterTerm","cursor","entityRef","compoundName","facets","facet","type","target","dryRun","location","exists","locationRef","r","l","uid","entity","errors","method","path","headers","filterItem","filterParts","v","ENTITY_STATUS_CATALOG_PROCESSING_TYPE","isApiEntity","isComponentEntity","isDomainEntity","isGroupEntity","isLocationEntity","isResourceEntity","isSystemEntity","isUserEntity","DEFAULT_NAMESPACE","ANNOTATION_VIEW_URL","ANNOTATION_EDIT_URL","ANNOTATION_KUBERNETES_API_SERVER","ANNOTATION_KUBERNETES_API_SERVER_CA","ANNOTATION_KUBERNETES_AUTH_PROVIDER","__defProp$4","__defNormalProp$4","__publicField$4","DefaultNamespaceEntityPolicy","parseRefString","ref","colonI","slashI","getCompoundEntityRef","parseEntityRef","context","defaultKind","defaultNamespace","parsed","textual","stringifyEntityRef","__defProp$3","__defNormalProp$3","__publicField$3","GroupDefaultParentEntityPolicy","parentEntityRef","group","CommonValidatorFunctions","separator","isValidPrefix","isValidSuffix","parts","$schema$b","$id$b","description$b","examples$a","type$3","required$2","additionalProperties$2","properties$2","entityEnvelopeSchema","$schema$a","$id$a","description$a","examples$9","type$2","required$1","additionalProperties$1","properties$1","entitySchema","$schema$9","$id$9","description$9","examples$8","type$1","required","additionalProperties","properties","entityMetaSchema","$schema$8","$id$8","description$8","definitions","commonSchema","compiledSchemaCache","refDependencyCandidates","throwAjvError","val","compileAjvSchema","schema","disableCache","cacheKey","cached","extraSchemas","getExtraSchemas","ajv","compiled","seen","selected","todo","current","getAllRefs","c","entityEnvelopeSchemaValidator","validate","data","entityKindSchemaValidator","softCandidates","e","entitySchemaValidator","KubernetesValidatorFunctions","n","defaultValidators","makeValidator","__defProp$2","__defNormalProp$2","__publicField$2","FieldFormatEntityPolicy","validators","_e","_f","_g","require2","validator","isValid","expectation","optional","k","tags","links","__defProp$1","__defNormalProp$1","__publicField$1","defaultKnownFields","NoForeignRootFieldsEntityPolicy","knownFields","SchemaValidEntityPolicy","AllEntityPolicies","policies","policy","AnyEntityPolicy","EntityPolicies","$schema$7","$id$7","description$7","examples$7","allOf$7","schema$7","ajvCompiledJsonSchemaValidator","apiEntityV1alpha1Validator","$schema$6","$id$6","description$6","examples$6","allOf$6","schema$6","componentEntityV1alpha1Validator","$schema$5","$id$5","description$5","examples$5","allOf$5","schema$5","domainEntityV1alpha1Validator","$schema$4","$id$4","description$4","examples$4","allOf$4","schema$4","groupEntityV1alpha1Validator","$schema$3","$id$3","description$3","examples$3","allOf$3","schema$3","locationEntityV1alpha1Validator","RELATION_OWNED_BY","RELATION_OWNER_OF","RELATION_CONSUMES_API","RELATION_API_CONSUMED_BY","RELATION_PROVIDES_API","RELATION_API_PROVIDED_BY","RELATION_DEPENDS_ON","RELATION_DEPENDENCY_OF","RELATION_PARENT_OF","RELATION_CHILD_OF","RELATION_MEMBER_OF","RELATION_HAS_MEMBER","RELATION_PART_OF","RELATION_HAS_PART","$schema$2","$id$2","description$2","examples$2","allOf$2","schema$2","resourceEntityV1alpha1Validator","$schema$1","$id$1","description$1","examples$1","allOf$1","schema$1","systemEntityV1alpha1Validator","$schema","$id","description","examples","allOf","userEntityV1alpha1Validator","ANNOTATION_LOCATION","ANNOTATION_ORIGIN_LOCATION","ANNOTATION_SOURCE_LOCATION","scriptProtocolPattern","parseLocationRef","splitIndex","stringifyLocationRef","getEntitySourceLocation","CONFIG_KEY_PART_PATTERN","isObject","typeOf","typeName","expected","ConfigReader","fallback","prefix","configs","previousReader","filteredKeys","deprecatedKeys","reader","localKeys","fallbackKeys","fallbackValue","into","from","fallbackConfig","values","index","number","valueString","keyName","theValue","part","badKey","__defProp$l","__defNormalProp$l","__publicField$l","ApiAggregator","holders","apiRef","holder","api","ApiContext","ApiProvider","parentHolder","__defProp$k","__defNormalProp$k","__publicField$k","ApiResolver","factories","heap","allDeps","factory","dep","loading","impl","deps","dependent","impls","__defProp$j","__defNormalProp$j","__publicField$j","ScopePriority","ScopePriority2","ApiFactoryRegistry","scope","priority","existing","tuple","refs","showLoginPopup","resolve","reject","width","height","left","top","popup","targetOrigin","messageListener","event","authResult","done","intervalId","errMessage","__defProp$i","__defNormalProp$i","__publicField$i","warned$1","defaultJoinScopes","scopes","DefaultAuthConnector","environment","provider","joinScopes","sessionTransform","popupOptions","res","authInfo","_h","popupUrl","payload","baseUrl","queryString","__defProp$h","__defNormalProp$h","__publicField$h","DirectAuthConnector","hasScopes$1","searched","searchFor","SessionScopeHelper","session","sessionScopes","newScope","__defProp$g","__defNormalProp$g","__publicField$g","PublishSubject","subscriber","onNext","onError","onComplete","observer","BehaviorSubject","__defProp$f","__defNormalProp$f","__publicField$f","SessionStateTracker","isSignedIn","__defProp$e","__defNormalProp$e","__publicField$e","RefreshingAuthSessionManager","connector","defaultScopes","sessionShouldRefresh","refreshedSession","currentScopes","refreshedScopes","newSession","__defProp$d","__defNormalProp$d","__publicField$d","StaticAuthSessionManager","__defProp$c","__defNormalProp$c","__publicField$c","AuthSessionStore","manager","storageKey","sessionJson","_key","__defProp$b","__defNormalProp$b","__publicField$b","DEFAULT_PROVIDER$a","OAuth2","scopeTransform","x","sessionManager","normalizedScopes","scopeList","DEFAULT_PROVIDER$9","GithubAuth","DEFAULT_PROVIDER$8","GitlabAuth","DEFAULT_PROVIDER$7","SCOPE_PREFIX$1","GoogleAuth","DEFAULT_PROVIDER$6","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","DEFAULT_PROVIDER$5","SamlAuth","authSessionStore","__defProp$a","__defNormalProp$a","__publicField$a","DEFAULT_PROVIDER$4","_MicrosoftAuth","audiences","aud","audience","groups","resourceURI","MicrosoftAuth","DEFAULT_PROVIDER$3","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$2","BitbucketAuth","DEFAULT_PROVIDER$1","BitbucketServerAuth","DEFAULT_PROVIDER","AtlassianAuth","__defProp$9","__defNormalProp$9","__publicField$9","AlertApiForwarder","alert","MultipleAnalyticsApi","actualApis","analyticsApi","NoOpAnalyticsApi","_event","__defProp$8","__defNormalProp$8","__publicField$8","STORAGE_KEY","AppThemeSelector","selector","initialThemeId","_a2","ERROR_PREFIX","UrlPatternDiscovery","pattern","urlStr","pluginId","FrontendHostDiscovery","endpoints","defaultEndpoint","endpoint","ErrorAlerter","__defProp$7","__defNormalProp$7","__publicField$7","ErrorApiForwarder","UnhandledErrorForwarder","errorContext","__defProp$6","__defNormalProp$6","__publicField$6","validateFlagName","LocalStorageFeatureFlags","flag","enabled","jsonStr","json","entries","createFetchApi","middleware","m","IdentityAuthInjectorFetchMiddleware","allowUrl","headerName","headerValue","matcher","buildMatcher","token","next","input","init","buildPrefixMatcher","prefixes","trimmedPrefixes","join","right","PluginProtocolResolverFetchMiddleware","hostname","pathname","search","hash","username","password","base","authority","isUrl","FetchMiddlewares","__defProp$5","__defNormalProp$5","__publicField$5","hasScopes","moreScopess","moreScopes","OAuthPendingRequests","acc","reason","OAuthRequestManager","handler","scopeRequest","newRequests","buckets","_WebStorage","bucketPath","webStorage","presence","item","messageKey","eventKey","trimmedKey","snapshot","subscription","WebStorage","InternalAppContext","isReactRouterBeta","getExtensionContext","routes","matches","routeMatch","routeObject","routeRef","TrackNavigation","attributes","analytics","RouteTracker","routeObjects","getBasePath","readBasePath","SignInPageWrapper","Component","appIdentityProxy","setIdentityApi","basePath","AppRouter","RouterComponent","SignInPageComponent","mountPath","internalAppContext","traverseElementTree","collectors","queue","node","parent","contexts","element","nextContexts","collector","discoverer","createCollector","accumulatorFactory","visit","childDiscoverer","routeElementDiscoverer","pluginCollector","FeatureFlagged","featureFlagApi","isEnabled","MATCH_ALL_ROUTE","stringifyNode","anyNode","pluginSet","set","collectSubTree","routingV2Collector","ctx","pathProp","mountPoint","parentChildren","elementProp","newObj","extension","others","mountPointPlugin","routingV1Collector","currentObj","currentParentRouteRef","sticky","caseSensitive","currentCtxPath","routePath","featureFlagCollector","routeRefType","isRouteRef","isSubRouteRef","isExternalRouteRef","joinPaths","paths","normalized","resolveTargetRef","anyRouteRef","routePaths","routeBindings","targetRef","subRoutePath","resolvedRoute","resolvedPath","targetPath","resolveBasePath","sourceLocation","routeParents","refDiffList","matchIndex","targetSearchRef","parentPath","diffPaths","RouteResolver","appBasePath","relativeSourceLocation","RoutingContext","RoutingProvider","resolver","versionedValue","validateRouteParameters","notLeafRoutes","route","currentRouteRef","fullPath","j","validateRouteBindings","plugins","externalRouteRef","AppContext","AppContextProvider","appContext","mkError","thing","logDeprecation","AppIdentityProxy","targetOptions","resolveTheme","shouldPreferDark","selectedTheme","useShouldPreferDarkTheme","mediaQuery","setPrefersDark","listener","AppThemeProvider","appThemeApi","useObservable","appTheme","defaultConfigLoader","runtimeConfigJson","appConfig","windowAppConfig","ApiRegistryBuilder","ApiRegistry","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","_getProviderCalled","createLocalBaseUrl","fullUrl","useConfigLoader","configLoader","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","configReader","urlConfigReader","appBaseUrl","backendBaseUrl","relativeResolverConfig","appOrigin","backendOrigin","newBackendBaseUrl","newAppBaseUrl","AppContextImpl","app","AppManager","AppProvider","routesHaveBeenValidated","needsFeatureFlagRegistrationRef","routing","featureFlags","loadedConfig","hasConfigApi","featureFlagsApi","registeredFlags","flagNames","f","pluginIds","createSpecializedApp","warned","FlatRoutes","NotFoundErrorPage","isBeta","withNotFound","elements","child","AlertDisplay","messages","setMessages","anchorOrigin","transientTimeoutMs","timeoutMs","msgs","firstMessage","timeout","newMsgs","handleClose","stringToColor","str","color","extractInitials","useStyles$O","Avatar","displayName","picture","customStyles","classes","fontStyles","useStyles$N","isExternalUri","uri","originalWindowOpen","newOpen","useBaseUrl","useBasePath","useResolvedPath","external","startsWithBasePath","getNodeText","Link","onClick","noTrack","to","linkText","newWindow","handleClick","LinkWrapper","LinkButton","CopyTextButton","text","tooltipDelay","tooltipText","ariaLabel","open","setOpen","copyToClipboard","handleCopyClick","CodeSnippet","language","showLineNumbers","highlightedNumbers","customStyle","showCopyCodeButton","mode","highlightColor","lineNumber","CreateButton","title","isXSScreen","DependencyGraphTypes","DependencyGraphTypes2","Direction2","Alignment2","Ranker2","LabelPosition2","useStyles$M","DefaultNode","setWidth","setHeight","idRef","renderedHeight","renderedWidth","padding","paddedWidth","paddedHeight","ARROW_MARKER_ID","NODE_TEST_ID","EDGE_TEST_ID","LABEL_TEST_ID","useStyles$L","renderDefault$1","Node","render","setNode","y","nodeProps","nodeRef","useStyles$K","DefaultLabel","label","useStyles$J","renderDefault","Edge","setEdge","edge","curve","points","labelProps","labelRef","createPath","d","finitePoints","point","WORKSPACE_ID","DependencyGraph","edges","nodes","renderNode","direction","align","nodeMargin","edgeMargin","rankMargin","paddingX","paddingY","acyclicer","ranker","labelPosition","labelOffset","edgeRanks","edgeWeight","renderLabel","defs","zoom","fit","svgProps","containerWidth","setContainerWidth","containerHeight","setContainerHeight","graph","graphWidth","setGraphWidth","graphHeight","setGraphHeight","graphNodes","setGraphNodes","graphEdges","setGraphEdges","maxWidth","maxHeight","minHeight","scalableHeight","containerRef","container","workspace","enableZoom","newContainerWidth","newContainerHeight","setNodesAndEdges","currentGraphNodes","currentGraphEdges","nodeId","existingNode","updateGraph","newHeight","newWidth","useStyles$I","DismissableBanner","variant","fixed","notificationsStore","rawDismissedBanners","dismissedBanners","setDismissedBanners","observedItems","currentValue","useStyles$H","EmptyStateImage","missing","useStyles$G","EmptyState","action","COMPONENT_YAML_TEMPLATE","ANNOTATION_REGEXP","ANNOTATION_YAML","ANNOTATION_LINE","line","useStyles$F","generateLineNumbers","lineCount","generateComponentYaml","annotations","annotationYaml","ann","generateDescription","isSingular","prev","curr","MissingAnnotationEmptyState","annotation","readMoreUrl","getWarningTextColor","severity","getWarningBackgroundColor","useErrorOutlineStyles","ErrorOutlineStyled","ExpandMoreIconStyled","useStyles$E","capitalize","s","WarningPanel","defaultExpanded","subTitle","useStyles$D","ErrorList","stack","ErrorPanel","useStyles$C","ResponseErrorPanel","cause","errorString","requestString","messageString","stackString","jsonString","createRootElement","rootContainer","addRootElement","rootElem","usePortal","rootElemRef","existingParent","parentElem","getRootElem","STATES_LOCAL_STORAGE_KEY","useCalloutStates","states","setStates","raw","setState","newStates","useCalloutHasBeenSeen","featureId","markSeen","useShowCallout","useStyles$B","FeatureCalloutCircular","show","hide","portalElement","wrapperRef","placement","setPlacement","update","wrapperBounds","longest","borderWidth","dotLeft","dotTop","dotSize","textWidth","textLeft","textTop","useIconStyles","IconLinkVertical","disabled","href","icon","useStyles$A","HeaderIconLinkRow","link","generateGradientStops","themeType","luminance","fadeSize","fadePadding","useStyles$z","useScrollDistance","scrollLeft","scrollRight","setScroll","el","handleUpdate","useSmoothScroll","speed","minDistance","scrollTarget","setScrollTarget","startTime","frameTime","frameDuration","scrollDistance","scrollAmount","newScrollTarget","HorizontalScrollGrid","scrollStep","scrollSpeed","minScrollDistance","otherProps","handleScrollClick","forwards","useStyles$y","Lifecycle","shorthand","alpha","RealLogViewer","LogViewer","useStyles$x","flatten","headingRenderer","level","slug","inline","MarkdownContent","content","dialect","linkTarget","transformLinkUri","transformImageUri","useItemStyles","LoginRequestListItem","busy","setBusy","setError","handleContinue","IconComponent","useStyles$w","OAuthRequestDialog","_props","authRedirect","requests","handleRejectAll","useStyles$v","OverflowTooltip","hover","setHover","isMounted","handleToggled","truncated","isVisible","setIsVisible","handle","useStyles$u","BottomLink","SlackLink","slackChannel","ErrorBoundary","errorInfo","useStyles$t","CardActionsTopRight","VARIANT_STYLES","InfoCard","subheader","divider","deepLink","errorBoundaryProps","headerStyle","headerProps","actionsClassName","actions","cardClassName","actionsTopRight","noPadding","titleTypographyProps","calculatedStyle","calculatedCardStyle","cardSubTitle","errProps","useStyles$s","defaultGaugeProps","getProgressColor","inverse","max","actualMax","actualValue","Gauge","hoverRef","setHoverRef","getColor","fractional","unit","asPercentage","asActual","isHovering","setIsHovering","handleMouseOver","handleMouseOut","useStyles$r","GaugeCard","progress","gaugeProps","LinearGauge","percent","lineWidth","strokeColor","useStyles$q","ClosedDropdown","useStyles$p","OpenedDropdown","BootstrapInput","useStyles$o","SelectComponent","multiple","placeholder","onChange","triggerReset","native","margin","setValue","isOpen","handleChange","handleOpen","previous","handleDelete","selectedValue","newValue","chip","noop","VerticalStepperContext","SimpleStepper","elevated","onStepChange","activeStep","stepIndex","setStepIndex","stepHistory","setStepHistory","steps","endStep","useStyles$n","RestartBtn","NextBtn","last","SkipBtn","BackBtn","SimpleStepperFooter","stepperLength","newIndex","callback","handleNext","handleBack","handleRestart","useStyles$m","SimpleStepperStep","end","muiProps","useStyles$l","StatusOK","StatusWarning","StatusError","StatusPending","StatusRunning","StatusAborted","tableTitleCellStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","ContentCell","MetadataTable","dense","MetadataTableItem","rest","MetadataList","MetadataListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","list","nested","toValue","renderMap","map","fmtKey","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","stringify","queryParams","parse","extractState","stateName","joinQueryString","useQueryParamState","debounceTime","searchParams","setSearchParams","searchParamsString","queryParamState","setQueryParamState","newState","oldState","DEFAULT_SUPPORT_CONFIG","useSupportConfig","supportConfig","itemConf","linkConf","useSystemIcon","Icon","BrokenImageIcon","CatalogIcon","ChatIcon","DashboardIcon","DocsIcon","EmailIcon","GitHubIcon","GroupIcon","HelpIcon","UserIcon","WarningIcon","useStyles$k","SupportIcon","SupportLink","SupportListItem","idx","SupportButton","configItems","popoverOpen","setPopoverOpen","anchorEl","setAnchorEl","isSmallScreen","onClickHandler","popoverCloseHandler","useStyles$j","Content","stretch","restProps","useStyles$i","HeaderTabs","tabs","selectedIndex","selectedTab","setSelectedTab","_","tab","useSelectedSubRoute","subRoutes","sortedRoutes","currentRoute","matchedRoute","foundIndex","t","RoutedTabs","navigate","headerTabs","onTabChange","tabIndex","Route","createSubRoutesFromChildren","childrenProps","routeType","tabProps","TabbedLayout","useSubvalueCellStyles","SubvalueCell","subvalue","useFilterStyles$1","Filters","onChangeFilters","selectedFilters","setSelectedFilters","reset","tableIcons","extractValueByField","StyledMTableHeader","StyledMTableToolbar","useFilterStyles","useTableStyles","convertColumns","columns","column","cellStyle","cellStyleFn","rowData","rowColumn","removeDefaultValues","defaultState","defaultInitialState","TableToolbar","toolbarProps","toolbarRef","setSearch","hasFilters","selectedFiltersLength","toggleFilters","filtersClasses","onSearchChanged","searchText","Table","subtitle","filters","initialState","emptyContent","onStateChange","tableClasses","calculatedInitialState","filtersOpen","setFiltersOpen","setSelectedFiltersLength","tableData","setTableData","MTColumns","defaultOptions","getFieldByTitle","titleValue","selectedFiltersArray","newData","filterValue","fieldValue","constructFilters","filterConfig","dataValue","extractDistinctValues","distinctValues","addValue","constructSelect","Toolbar","hasNoRows","columnCount","Body","bodyProps","lastNum","TrendLine","useStyles$h","ContentHeaderTitle","ContentHeader","TitleComponent","textAlign","renderedTitle","useStyles$g","MicDrop","useStyles$f","ErrorPage","status","statusMessage","additionalInfo","supportUrl","support","ClickableText","StyledBox","Breadcrumbs","childrenArray","firstPage","secondPage","expandablePages","currentPage","hasHiddenBreadcrumbs","pageLink","drawerWidthClosed","iconPadding","userBadgePadding","sidebarConfig","makeSidebarConfig","customSidebarConfig","submenuConfig","makeSidebarSubmenuConfig","customSubmenuConfig","SIDEBAR_INTRO_LOCAL_STORAGE","SidebarConfigContext","SidebarItemWithSubmenuContext","defaultSidebarOpenStateContext","LegacySidebarContext","VersionedSidebarContext","SidebarOpenStateProvider","useSidebarOpenState","versionedOpenStateContext","legacyOpenStateContext","openStateContext","defaultSidebarPinStateContext","LegacySidebarPinStateContext","VersionedSidebarPinStateContext","SidebarPinStateProvider","useSidebarPinState","versionedPinStateContext","legacyPinStateContext","pinStateContext","useStyles$e","MobileSidebarGroup","selectedMenuItemIndex","setSelectedMenuItemIndex","MobileSidebarContext","value2","SidebarGroup","isMobile","useStyles$d","sortSidebarGroupsForPriority","sidebarGroupType","OverlayMenu","onClose","MobileSidebar","sidebarGroups","shouldShowGroupChildren","LocalStorage","useStyles$c","PageContext","SidebarPage","isPinned","setIsPinned","contentRef","pageContext","toggleSidebarPinState","useContent","useStyles$b","DesktopSidebar","openDelayMs","closeDelayMs","disableExpandOnHover","hoverTimerRef","A11ySkipSidebar","Sidebar","focusContent","isLocationMatch","currentLocation","toLocation","exact","toDecodedSearch","toQueryParameters","currentDecodedSearch","currentQueryParameters","queryStringMatcher","useStyles$a","SidebarSubmenuItem","dropdownItems","setIsHoveredOn","closeSubmenu","isActive","showDropDown","setShowDropDown","handleClickDropdown","object","useStyles$9","SidebarSubmenu","isHoveredOn","isSubmenuOpen","setIsSubmenuOpen","useStyles$8","DoubleArrowLeft","useStyles$7","DoubleArrowRight","makeSidebarStyles","useMemoStyles","useLocationMatch","submenu","active","_to","isButtonItem","sidebarSubmenuType","WorkaroundNavLink","activeStyle","activeClassName","ariaCurrentProp","locationPathname","toPathname","ariaCurrent","SidebarItemBase","hasNotifications","hasSubmenu","disableHighlight","navLinkProps","divStyle","displayItemIcon","itemIcon","openContent","childProps","subject","SidebarItemWithSubmenu","handleMouseEnter","handleMouseLeave","arrowIcon","SidebarItem","SidebarSearchField","setInput","handleEnter","ev","handleInput","handleInputClick","handleItemClick","SidebarSpace","SidebarSpacer","SidebarDivider","styledScrollbar","SidebarScrollWrapper","scrollbarStyles","SidebarExpandButton","useStyles$6","IntroCard","SidebarIntroCard","onDismiss","collapsing","setCollapsing","startDismissing","starredIntroText","recentlyViewedIntroText","SidebarIntro","defaultValue","dismissedIntro","setDismissedIntro","starredItemsDismissed","recentlyViewedItemsDismissed","dismissStarred","dismissRecentlyViewed","useStyles$5","TypeFragment","typeLink","pageTitle","TitleFragment","tooltip","FinalTitle","SubtitleFragment","Header","pageTitleOverride","appTitle","documentTitle","titleTemplate","defaultTitle","ActionItem","secondaryLabel","HeaderActionMenu","white","actionItems","anchorElRef","actionItem","useStyles$4","HeaderLabelContent","HeaderLabel","styles$1","useStyles$3","ItemCardHeader","ItemCard","tag","useStyles$2","ItemCardGrid","useStyles$1","Page","PageWithHeader","proxiedSessionSchema","DEFAULTS","tokenToExpiry","jwtToken","_header","rawPayload","_signature","ProxiedSignInIdentity","backstageIdentity","promise","mergedHeaders","ProxiedSignInPage","execute","GuestUserIdentity","userEntityRef","parseJwtPayload","LegacyUserIdentity","sub","ent","UserIdentity","authApi","profile","ex","useStyles","GridItem","commonProvider","onSignInStarted","onSignInSuccess","onSignInFailure","handleLogin","identityResponse","guestProvider","ID_TOKEN_REGEX","useFormStyles","asInputRef","renderResult","customProvider","register","handleSubmit","formState","handleResult","userId","idToken","IdentityApiSignOutProxy","PROVIDER_STORAGE_KEY","signInProviders","validateIDs","providers","getSignInProviders","identityProviders","useSignInProviders","apiHolder","setLoading","handleWrappedResult","selectedProviderId","didCancel","handleSignInSuccess","handleSignInStarted","handleSignInFailure","MultiSignInPage","providerElements","SingleSignInPage","auto","showLoginPage","setShowLoginPage","login","checkExisting","showPopup","err","SignInPage","useTabsStyles","BoldHeader","TabbedCard","tabsClasses","selectIndex","_ev","newSelectedIndex","selectedTabContent","useCardTabStyles","CardTab","contextKey","PluginProvider","Provider","usePluginOptions","versionedHolder","AnalyticsReactContext","useAnalyticsContext","theContext","AnalyticsContext","combinedValue","versionedCombinedValue","useApiHolder","useApi","withApis","WrappedComponent","Hoc","ApiRefImpl","createApiRef","createApiFactory","instance","SessionState","SessionState2","googleAuthApiRef","githubAuthApiRef","oktaAuthApiRef","gitlabAuthApiRef","microsoftAuthApiRef","oneloginAuthApiRef","bitbucketAuthApiRef","bitbucketServerAuthApiRef","atlassianAuthApiRef","alertApiRef","analyticsApiRef","appThemeApiRef","configApiRef","discoveryApiRef","errorApiRef","FeatureFlagState","FeatureFlagState2","featureFlagsApiRef","fetchApiRef","identityApiRef","oauthRequestApiRef","storageApiRef","globalEvents","routableExtensionRenderedEvent","Tracker","_routeNodeType","useAnalyticsApi","useAnalytics","trackerRef","getTracker","tracker","useApp","versionedContext","globalStore","componentDataKey","attachComponentData","dataComponent","getComponentData","_a$2","RouteRefImpl","createRouteRef","_a$1","PARAM_PATTERN","SubRouteRefImpl","createSubRouteRef","pathParams","p","param","ExternalRouteRefImpl","createExternalRouteRef","useRouteRef","routeFunc","isOptional","useRouteRefParams","_routeRef","PluginErrorBoundary","ErrorBoundaryFallback","createRoutableExtension","createReactExtension","InnerComponent","RoutableExtensionWrapper","createComponentExtension","lazyLoader","Result","selectChildren","rootNode","strictError","Collection","selection","useElementFilter","filterFn","dependencies","PluginImpl","createPlugin","isError","maybe","assertError","serializeError","deserializeError","stringifyError","CustomErrorBase","fullMessage","causeStr","InputError","AuthenticationError","NotAllowedError","NotFoundError","ConflictError","NotModifiedError","NotImplementedError","ServiceUnavailableError","ForwardedError","parseErrorResponseBody","ResponseError","statusText","scmAuthApiRef","_providers","_api","_host","_scopeMapping","_providerName","ScmAuthMux","_ScmAuth","providerName","host","scopeMapping","github","gitlab","azure","bitbucket","githubAuthApi","gitlabAuthApi","microsoftAuthApi","bitbucketAuthApi","additionalScopes","additionalScope","restOptions","uniqueScopes","ScmAuth","ScmIntegrationsApi","scmIntegrationsApiRef","ScmIntegrationIcon","DefaultIcon","isValidHost","check","isValidUrl","basicIntegrations","integrations","getHost","defaultScmResolveUrl","updated","filepath","repoRootPath","AMAZON_AWS_HOST","readAwsS3IntegrationConfig","s3ForcePathStyle","accessKeyId","secretAccessKey","roleArn","externalId","readAwsS3IntegrationConfigs","_AwsS3Integration","integrationConfig","AwsS3Integration","_origin","_owner","_project","_repo","_path","_ref","_baseUrl","VERSION_PREFIX_GIT_BRANCH","_AzureUrl","origin","owner","project","repo","repoUrl","AzureUrl","AZURE_HOST","isAzureClientSecretCredential","credential","clientSecretCredential","isAzureManagedIdentityCredential","readAzureIntegrationConfig","readAzureIntegrationConfigs","_AzureIntegration","azureUrl","newUrl","mockBaseUrl","updatedPath","AzureIntegration","getAzureFileFetchUrl","getAzureDownloadUrl","getAzureCommitsUrl","getAzureRequestOptions","additionalHeaders","azureDevOpsScope","accessToken","buffer","Buffer","BITBUCKET_HOST","BITBUCKET_API_BASE_URL","readBitbucketIntegrationConfig","apiBaseUrl","appPassword","readBitbucketIntegrationConfigs","_BitbucketIntegration","resolved","urlData","editUrl","BitbucketIntegration","getBitbucketDefaultBranch","repoName","resource","isHosted","branchUrl","getBitbucketRequestOptions","defaultBranch","displayId","getBitbucketDownloadUrl","protocol","branch","getBitbucketFileFetchUrl","filepathtype","pathWithoutSlash","BITBUCKET_CLOUD_HOST","BITBUCKET_CLOUD_API_BASE_URL","readBitbucketCloudIntegrationConfig","readBitbucketCloudIntegrationConfigs","_BitbucketCloudIntegration","BitbucketCloudIntegration","getBitbucketCloudDefaultBranch","getBitbucketCloudRequestOptions","getBitbucketCloudDownloadUrl","getBitbucketCloudFileFetchUrl","readBitbucketServerIntegrationConfig","readBitbucketServerIntegrationConfigs","_BitbucketServerIntegration","BitbucketServerIntegration","getBitbucketServerDefaultBranch","getBitbucketServerRequestOptions","getBitbucketServerDownloadUrl","getBitbucketServerFileFetchUrl","readGerritIntegrationConfig","cloneUrl","gitilesBaseUrl","readGerritIntegrationConfigs","GERRIT_BODY_PREFIX","parseGerritGitilesUrl","projectEndIndex","branchIndex","filePath","buildGerritGitilesUrl","getAuthenticationPrefix","getGerritBranchApiUrl","getGerritCloneRepoUrl","getGerritFileContentsApiUrl","getGerritProjectsApiUrl","getGerritRequestOptions","parseGerritJsonResponse","responseBody","_GerritIntegration","GerritIntegration","readGiteaConfig","getGiteaEditContentsUrl","_blank","_src","_branch","getGiteaFileContentsUrl","getGiteaRequestOptions","_GiteaIntegration","giteaConfigs","gitea","GiteaIntegration","GITHUB_HOST","GITHUB_API_BASE_URL","GITHUB_RAW_BASE_URL","readGithubIntegrationConfig","rawBaseUrl","apps","readGithubIntegrationConfigs","getGithubFileFetchUrl","credentials","chooseEndpoint","getGitHubRequestOptions","Cache","date","supplier","existingInstallationData","tokenData","HEADERS","GithubAppManager","installationId","suspended","repositoryNames","installationClient","repos","repository","installation","inst","notFoundError","GithubAppCredentialsMux","ac","results","resultItem","notNotFoundError","_SingleInstanceGithubCredentialsProvider","githubAppCredentialsMux","opts","SingleInstanceGithubCredentialsProvider","DefaultGithubCredentialsProvider","credentialsProviders","integration","credentialsProvider","_GithubIntegration","replaceGithubUrlType","GithubIntegration","getGitHubFileFetchUrl","GitHubIntegration","readGitHubIntegrationConfig","readGitHubIntegrationConfigs","replaceGitHubUrlType","GITLAB_HOST","GITLAB_API_BASE_URL","readGitLabIntegrationConfig","readGitLabIntegrationConfigs","getGitLabIntegrationRelativePath","relativePath","getGitLabFileFetchUrl","projectID","getProjectId","buildProjectUrl","getGitLabRequestOptions","branchAndFilePath","repoIDLookup","_GitLabIntegration","replaceGitLabUrlType","GitLabIntegration","_SingleInstanceGitlabCredentialsProvider","_opts","SingleInstanceGitlabCredentialsProvider","DefaultGitlabCredentialsProvider","readGoogleGcsIntegrationConfig","privateKey","ScmIntegrations","integrationsByType","candidates","filteredCandidates","rootRoute","registerComponentRouteRef","defaultColumns","DefaultApiExplorerPage","initiallySelectedFilter","generatedSubtitle","registerComponentLink","ApiExplorerPage$1","apiDocsConfigRef","PlainApiDefinitionWidget","ApiDefinitionCard","getApiDefinitionWidget","definitionWidget","entityTitle","LazyAsyncApiDefinition","AsyncApiDefinitionWidget","LazyGraphQlDefinition","GraphQlDefinitionWidget","LazyOpenApiDefinition","OpenApiDefinitionWidget","GrpcApiDefinitionWidget","TrpcApiDefinitionWidget","definition","defaultDefinitionWidgets","ApiTypeTitle","apiEntity","TabPanel","other","a11yProps","ApiDefinitionDialog","activeTab","setActiveTab","tabPanelIndex","createSpecApiTypeColumn","ApiDefinitionButton","dialogOpen","setDialogOpen","createApiDefinitionColumn","apiEntityColumns","ConsumedApisCard","presetColumns","HasApisCard","ProvidedApisCard","ConsumingComponentsCard","ProvidingComponentsCard","apiDocsPlugin","definitionWidgets","ApiExplorerPage","EntityApiDefinitionCard","EntityConsumedApisCard","EntityConsumingComponentsCard","EntityProvidedApisCard","EntityProvidingComponentsCard","EntityHasApisCard","RESOURCE_TYPE_CATALOG_ENTITY","catalogEntityReadPermission","catalogEntityCreatePermission","catalogEntityDeletePermission","catalogEntityRefreshPermission","catalogLocationReadPermission","catalogLocationCreatePermission","catalogLocationDeletePermission","catalogPermissions","CustomLabel","relations","EntityKindIcon","CustomNode","focused","iconSize","paddedIconWidth","displayTitle","ALL_RELATION_PAIRS","Direction","limiter","useEntityStore","catalogClient","setEntities","updateEntities","cachedEntities","requestedEntities","filteredEntities","asyncState","fetch","outstandingEntities","requestEntities","entityRefs","useEntityRelationGraph","rootEntityRefs","maxDepth","kinds","expectedEntities","processedEntityRefs","nextDepthRefQueue","depth","entityRefQueue","rel","useEntityRelationNodesAndEdges","unidirectional","mergeRelations","onNodeClick","relationPairs","nodesAndEdges","visitedNodes","nodeQueue","pair","EntityRelationsGraph","rootEntityNames","catalogGraphRouteRef","catalogEntityRouteRef","catalogGraphPlugin","EntityCatalogGraphCard","CatalogGraphPage","catalogImportApiRef","getGithubIntegrationConfig","scmIntegrationsApi","getCatalogFilename","getBranchName","CatalogImportClient","catalogFilename","analyzation","locations","repositoryUrl","fileContent","ghConfig","githubIntegrationConfig","octo","branchName","fileName","repoData","formatHttpErrorMessage","parentRef","rootRouteRef","catalogImportPlugin","scmAuthApi","catalogApi","CatalogImportPage","useCatalogFilename","ImportInfoCard","exampleLocationUrl","exampleRepositoryUrl","catalogImportApi","hasGithubIntegration","initialUrl","reducer","activeState","previousStates","activeFlow","analysisUrl","analyzeResult","prepareResult","reviewResult","useImportState","dispatch","flow","NextButton","buttonProps","BackButton","ViewComponentButton","sortEntities","EntityListComponent","collapsed","locationListItemIcon","onItemClick","firstListItem","withLinks","expandedUrls","setExpandedUrls","urls","u","filterComponentEntity","newLocations","StepFinishImportLocation","onReset","entityRoute","existingLocations","newComponentEntity","StepInitAnalyzeUrl","onAnalysis","disablePullRequest","watch","submitted","setSubmitted","analysisResult","AutocompleteTextField","rules","loadingText","helperText","errorHelperText","textFieldProps","PreparePullRequestForm","defaultValues","onSubmit","methods","control","PreviewCatalogInfoComponent","PreviewPullRequestComponent","generateEntities","StepPrepareCreatePullRequest","onPrepare","onGoBack","renderFormFields","prDefaultsLoading","prDefaults","prDefaultsError","groupsLoading","pr","StepPrepareSelectLocations","selectedUrls","setSelectedUrls","onSelectAll","StepReviewLocation","onReview","refreshed","defaultGenerateStepper","defaults","defaultStepper","ImportStepper","generateStepper","DefaultImportPage","contentItems","isOwnerOf","possibleOwners","owners","ownerItem","useEntityPermission","permission","loadingEntity","entityError","allowed","loadingPermission","permissionError","getEntityRelations","relationType","entityNames","NewEntityContext","AsyncEntityProvider","refresh","EntityProvider","useEntity","useAsyncEntity","useMountEffect","effect","useSyncedRef","useUnmountEffect","effectRef","useDebouncedCallback","delay","maxWait","waitTimeout","lastCall","clear","wrapped","useDebouncedEffect","catalogApiRef","starredEntitiesApiRef","MockStarredEntitiesApi","isMidSizeScreen","useMediaQuery","theme2","useTheme","filterDrawerOpen","setFilterDrawerOpen","FilterList","Drawer","Grid","CatalogFilterLayout","reduceCatalogFilters","compoundFilter","reduceEntityFilters","sourceLocationRef","EntityKindFilter","EntityTypeFilter","EntityTagFilter","EntityTextFilter","words","exactMatch","partialMatch","word","EntityOwnerFilter","fullRefs","o","EntityLifecycleFilter","EntityNamespaceFilter","UserListFilter","isOwnedEntity","isStarredEntity","EntityOrphanFilter","orphan","EntityErrorFilter","EntityListContext","EntityListProvider","useMountedState","requestedFilters","setRequestedFilters","queryParameters","outputState","setOutputState","compacted","entityFilter","backendFilter","previousBackendFilter","oldParams","newParams","useDebounce","updateFilters","prevFilters","newFilters","useEntityList","useEntityTypeFilter","kindFilter","typeFilter","typeParameter","flattenedQueryTypes","selectedTypes","setSelectedTypes","availableTypes","setAvailableTypes","facetsRef","oldFacets","newTypes","stillValidTypes","useRelatedEntities","relationFilter","filterByTypeLower","filterByKindLower","getEntityRef$1","entityOrRef","useStarredEntities","starredEntitiesApi","starredEntities","toggleStarredEntity","getEntityRef","useStarredEntity","setIsStarredEntity","useEntityOwnership","ownershipEntityRefs","myOwnerRefs","entityOwnerRefs","useAllKinds","allKinds","filterKinds","allowedKinds","forcedKinds","availableKinds","useEntityKindFilter","kindParameter","queryParamKind","selectedKind","setSelectedKind","_b2","EntityKindPicker","hidden","initialFilter","icon$2","CheckBoxOutlineBlank","checkedIcon$2","CheckBox","OptionCheckbox","Checkbox","EntityAutocompletePickerOption","availableOptions","showCounts","FormControlLabel","makeStyles","EntityAutocompletePickerInput","TextField","EntityAutocompletePicker","Filter","InputProps","initialSelectedOptions","queryParameter","availableValues","count","selectedOptions","setSelectedOptions","shouldAddFilter","Autocomplete","option","ExpandMore","EntityLifecyclePicker","humanizeEntityRef","humanizeEntity","defaultName","useFacetsEntities","facetsPromise","start","decodeCursor","filteredRefs","filterEntity","encodeCursor","isFacetsResponse","normalizedText","useQueryEntities","initialRequest","cursorRequest","response2","useFetchEntities","initialSelectedOwnersRefs","isOwnersOnlyMode","queryEntitiesResponse","facetsEntitiesResponse","handleFetch","useSelectedOwners","allEntities","icon$1","checkedIcon$1","EntityOwnerPicker","ownersParameter","setText","queryParamOwners","selectedOwners","setSelectedOwners","cache","availableOwners","isGroup","Group","Person","entityRouteRef","entityRouteParams","EntityRefLink","linkProps","routeParams","formattedEntityRefTitle","FetchedEntityRefLinks","getTitle","pureEntities","EntityRefLinks","fetchEntities","EntityCardActions","EmailCardAction","GroupCardActions","email","UserCardActions","maxTagChips","EntityPeekAheadPopover","delayTime","popupState","isHovered","setIsHovered","debouncedHandleMouseEnter","load","retrievedEntity","handleOnMouseLeave","EntitySearchBar","FormControl","Input","InputAdornment","Search","Clear","columnFactories","formatContent","entity1","entity2","relation","getRelations","systemEntityColumns","componentEntityColumns","EntityTable","tableOptions","tableStyle","EntityTagPicker","EntityTypePicker","YellowStar","withStyles","Star","FavoriteEntity","StarBorder","DEFAULT_ICON","Work","getKind","useIcon","actualKind","useAncestry","root","currentRef","isRootNode","AncestryPage","DialogContentText","ListItemText","ListSubheader","Container","findLink","KeyValueListItem","ListItem","ListItemIcon","HelpOutline","useColocated","currentEntityRef","colocated","EntityList","List","Contents$1","originLocation","colocatedEntities","Alert","atLocation","atOrigin","ColocatedPage","sortKeys","JsonPage","OverviewPage","apiVersion","spec","groupedRelations","entry","groupRelations","YamlPage","InspectEntityDialog","Dialog","DialogTitle","DialogContent","Tabs","Tab","DialogActions","useUnregisterEntityDialogState","isBootstrap","prerequisites","locationPromise","colocatedEntitiesPromise","locationAnnotationFilter","location2","colocatedEntities2","unregisterLocation","deleteEntity","Contents","onConfirm","showDelete","setShowDelete","onUnregister","onDelete","DialogActionsPanel","Divider","UnregisterEntityDialog","getFilterGroups","orgName","Settings","UserListPicker","availableFilters","backendEntities","userParameter","loadingBackendEntities","userAndGroupFilterIds","filterGroups","filterGroup","loadingEntityOwnership","ownedFilter","starredFilter","queryParamUserFilter","selectedUserFilter","setSelectedUserFilter","entitiesWithoutUserFilter","filterCounts","MenuItem","ListItemSecondaryAction","checkedIcon","EntityProcessingStatusPicker","selectedAdvancedItems","setSelectedAdvancedItems","orphanChange","errorChange","availableAdvancedItems","EntityNamespacePicker","MockEntityListContextProvider","setFilters","resolvedValue","performMigrationToTheNewBucket","storageApi","source","oldStarredEntities","targetEntities","old","split","DefaultStarredEntitiesApi","createComponentRouteRef","viewTechDocRouteRef","createFromTemplateRouteRef","AboutField","gridSizes","childElements","IconLink","colDefaults","useDynamicColumns","cols","numOfCols","breakpoint","LinksGridList","getLocationTargetHref","entitySourceLocation","srcLocationUrl","AboutContent","isSystem","isResource","isComponent","isAPI","isTemplate","isLocation","partOfSystemRelations","partOfComponentRelations","partOfDomainRelations","ownedByRelations","AboutCard","viewTechdocLink","templateRoute","entityMetadataEditUrl","viewInSource","viewInTechDocs","subHeaderLinks","launchTemplate","cardClass","cardContentClass","entityLocation","allowRefresh","refreshEntity","CatalogKindHeader","labels","specifiedLabelValue","toRef","CatalogTable","createEntitySpecificColumns","_a3","baseColumns","showTypeColumn","titlePreamble","defaultActions","isStarred","rows","typeColumn","showPagination","currentKind","currentType","titleDisplay","UnregisterEntity","unregisterEntityOptions","isUnregisterAllowed","onUnregisterEntity","isBoolean","isDisabled","unregisterButton","EntityContextMenu","UNSTABLE_extraContextMenuItems","UNSTABLE_contextMenuOptions","onInspectEntity","isAllowed","onOpen","extraItems","dataKey","EntityLayoutTitle","paramKind","paramNamespace","paramName","EntityLabels","EntityLayout","NotFoundComponent","elementProps","headerTitle","headerType","confirmationDialogOpen","setConfirmationDialogOpen","inspectionDialogOpen","setInspectionDialogOpen","cleanUpAfterRemoval","DeleteEntityDialog","isOrphan","EntityOrphanWarning","catalogLink","getRelationWarnings","entityRefRelations","relatedEntities","hasRelationWarnings","EntityRelationWarning","errorFilter","getOwnAndAncestorsErrors","hasCatalogProcessingErrors","EntityProcessingErrorsPanel","ancestorError","ENTITY_SWITCH_KEY","EntitySwitchCaseComponent","EntitySwitch","collection","condition","elementsChildren","AsyncEntitySwitch","getDefaultChildren","renderMultipleMatches","promises","strCmp","strCmpAll","cmpValues","cmpVal","isKind","isEntityWith","isComponentType","types","isResourceType","predicate","isNamespace","namespaces","FilteredEntityLayout","FilterContainer","EntityListContainer","ENTITY_YAML","EntityLabelsEmptyState","EntityLabelsCard$1","row","labelKey","hasLabels","catalogPlugin","fetchApi","CatalogIndexPage","CatalogEntityPage","EntityAboutCard","EntityLinksCard","EntityLabelsCard","EntityHasSystemsCard","EntityHasComponentsCard","EntityHasSubcomponentsCard","EntityHasResourcesCard","EntityDependsOnComponentsCard","EntityDependencyOfComponentsCard","EntityDependsOnResourcesCard","RelatedEntitiesCard","CatalogSearchResultListItem","githubActionsApiRef","GithubActionsClient","runId","pageSize","page","BuildStatus","BuildStatus2","buildRouteRef","githubActionsPlugin","EntityGithubActionsContent","Router$1","EntityLatestGithubActionRunCard","EntityLatestGithubActionsForBranchCard","EntityRecentGithubActionsRunsCard","GITHUB_ACTIONS_ANNOTATION","getProjectNameFromEntity","WorkflowRunStatus","conclusion","useWorkflowRunJobs","jobs","job","_c2","useWorkflowRunsDetails","useDownloadWorkflowRunLogs","getHostnameFromEntity","WorkflowRunLogs","inProgress","projectName","jobLogs","logText","getElapsedTime","startDate","StepView","JobListItem","JobsList","WorkflowRunDetails","_i","_j","_k","_l","_m","_n","_o","details","useWorkflowRuns","initialPageSize","total","setTotal","setPage","setPageSize","runs","retry","workflowRunsData","run","generatedColumns","routeLink","WorkflowRunsTableView","onChangePage","onChangePageSize","WorkflowRunsTable","tableProps","githubHost","isGithubActionsAvailable","WidgetContent","lastRun","LatestWorkflowRunCard","LatestWorkflowsForBranchCard","firstLine","RecentWorkflowRunsCard","SettingsModal","close","createCardExtension","layout","settings","isCustomizable","componentParts","CardExtension","Renderer","Actions","ContextProvider","settingsOpen","setSettingsOpen","cardProps","innerContent","homePlugin","HomepageCompositionRoot","ComponentAccordion","ComponentTabs","ComponentTab","WelcomeTitle","HomePageCompanyLogo","HomePageRandomJoke","HomePageToolkit","HomePageStarredEntities","HeaderWorldClock","Form","WidgetSettingsOverlay","widget","handleRemove","handleSettingsSave","settingsDialogOpen","setSettingsDialogOpen","formData","AddWidgetDialog","widgets","handleAdd","CustomHomepageButtons","editMode","numWidgets","clearLayout","setAddWidgetDialogOpen","changeEditMode","defaultConfigAvailable","restoreDefault","RSJFTypeSchema","RSJFTypeUiSchema","ReactElementSchema","LayoutSchema","LayoutConfigurationSchema","WidgetSchema","GridWidgetSchema","CustomHomepageGridStateV1Schema","ResponsiveGrid","useHomeStorage","defaultWidgets","setWidgets","grid","homeSnapshot","convertConfigToDefaultWidgets","availableWidgets","ret","conf","w","widgetId","availableWidgetsFilter","elem","CustomHomepageGrid","defaultLayout","addWidgetDialogOpen","editModeOn","setEditMode","getWidgetByName","getWidgetNameFromKey","widgetSettings","handleLayoutChange","newLayout","newWidgets","handleRestoreDefaultConfig","widgetName","widgetProps","TemplateBackstageLogo","TemplateBackstageLogoIcon","jenkinsExecutePermission","jenkinsPermissions","jenkinsApiRef","JenkinsClient","jobFullName","buildNumber","jenkinsPlugin","EntityJenkinsContent","EntityLatestJenkinsRunCard","JenkinsRunStatus","ErrorType","ErrorType2","useBuilds","entityName","restartBuild","projects","build","errorType","latestRun","displayDate","displayDuration","JenkinsApiErrorPanel","LatestRunCard","JENKINS_ANNOTATION","LEGACY_JENKINS_ANNOTATION","FailCount","SkippedCount","FailSkippedWidget","skipped","failed","ActionWrapper","isLoadingRebuild","setIsLoadingRebuild","onRebuild","CITableView","projectsInPage","CITable","useAsyncPolling","pollingFn","interval","isPolling","INTERVAL_AMOUNT","useBuildWithSteps","getBuildWithSteps","startPolling","stopPolling","BuildWithStepsView","isJenkinsAvailable","catalogIndexRouteRef","orgPlugin","EntityGroupProfileCard","EntityMembersListCard","EntityOwnershipCard","EntityUserProfileCard","getMembersFromGroups","getDescendantGroupsFromGroup","alreadyQueuedOrExpandedGroupNames","groupQueue","resultantGroupRefs","activeGroupRef","activeGroup","childGroups","currentGroup","childGroup","getAllDesendantMembersForGroupEntity","groupEntity","removeDuplicateEntitiesFrom","entityArray","seenEntities","stringifiedEntity","isDuplicate","MemberComponent","metaName","MembersListCard","memberDisplayTitle","showAggregateMembersToggle","groupName","grpNamespace","groupNamespace","pageChange","pageIndex","showAggregateMembers","setShowAggregateMembers","loadingDescendantMembers","descendantMembers","directMembers","members","nbPages","paginationLabel","pagination","WebLink","LinksGroup","iconResolver","CardTitle$1","GroupProfileCard","childRelations","parentRelations","emailHref","infoCardAction","CardTitle","UserProfileCard","user","memberOfRelations","getQueryParams","ownersEntityRef","selectedEntity","getOwnersEntityRef","ownerGroupsName","ownerGroup","getAggregatedOwnersEntityRef","parentGroup","processedEntities","currentEntity","processedEntity","useGetEntities","relationsType","entityFilterKind","entityLimit","componentsWithCounters","ownedEntity","topOwnedEntity","EntityCountTile","counter","rawTitle","isLongText","ComponentsGrid","OwnershipCard","hideRelationsToggle","relationsToggle","getRelationsType","setRelationsType","MyGroupsSidebarItem","singularTitle","pluralTitle","catalogEntityRoute","AuthorizeResult","AuthorizeResult2","isPermission","comparedPermission","isResourcePermission","resourceType","isCreatePermission","isReadPermission","isUpdatePermission","isDeletePermission","toPermissionEvaluator","permissionAuthorizer","parsedRequests","createPermission","permissionCriteriaSchema","authorizePermissionResponseSchema","queryPermissionResponseSchema","responseSchema","itemSchema","ids","PermissionClient","queries","permissionApi","responsesById","permissionApiRef","IdentityPermissionApi","permissionClient","usePermission","PermissionedRoute","resourceRef","errorComponent","permissionResult","shownElement","RequirePermission","templateEntityV1beta3Validator","isTemplateEntityV1beta3","FIELD_EXTENSION_WRAPPER_KEY","FIELD_EXTENSION_KEY","SecretsContext","SecretsContextProvider","secrets","setSecrets","useTemplateSecrets","updateSecrets","currentSecrets","scaffolderApiRef","createScaffolderFieldExtension","FieldExtensionDataHolder","ScaffolderFieldExtensions","useCustomFieldExtensions","outlet","LAYOUTS_KEY","LAYOUTS_WRAPPER_KEY","useCustomLayouts","draft","logLine","currentStepLog","currentStep","useTaskEventStream","taskId","scaffolderApi","logPusher","retryCount","startStreamLogProcess","task","observable","collectedLogEvents","emitLogs","logs","createScaffolderLayout","LayoutDataHolder","ScaffolderLayouts","TaskErrors","TaskPageLinks","humanizeDuration","StepTimeTicker","time","setTime","startedAt","formatted","useStepIconStyles","TaskStepIconComponent","completed","getMiddle","TaskStatusStepper","currentStepId","onUserStepChange","isCancelled","isCompleted","isFailed","isSkipped","hasLinks","TaskPage","rootPath","userSelectedStepId","setUserSelectedStepId","clickedToCancel","setClickedToCancel","lastActiveStepId","setLastActiveStepId","taskStream","taskCancelled","mostRecentFailedOrActiveStep","logAsString","log","taskNotFound","handleStartOver","handleCancel","TemplateTypePicker","ScaffolderClient","templateRef","templatePath","processEvent","eventSource","inputAfter","makeFieldSchemaFromZod","returnSchema","uiOptionsSchema","entityQueryFilterExpressionSchema","EntityPickerSchema","EntityPicker","uiSchema","rawErrors","idSchema","catalogFilter","buildCatalogFilter","allowArbitraryValues","getLabel","onSelect","convertOpsValues","convertSchemaFiltersToQuery","schemaFilters","entityNamePickerValidation","validation","EntityNamePickerSchema","EntityNamePicker","autoFocus","OwnerPickerSchema","OwnerPicker","ownerUiSchema","RepoUrlPickerSchema","repoPickerValidation","integrationApi","GithubRepoPicker","allowedOwners","ownerItems","GitlabRepoPicker","AzureRepoPicker","allowedOrganizations","organizationItems","organization","BitbucketRepoPicker","allowedProjects","projectItems","GerritRepoPicker","RepoUrlPickerHost","hosts","hostsOptions","RepoUrlPickerRepoName","allowedRepos","repoItems","serializeRepoPickerUrl","parseRepoPickerUrl","RepoUrlPicker","allowedHosts","prevState","updateLocalState","requestUserCredentials","encodedHost","encodedRepoName","hostType","OwnedEntityPickerSchema","OwnedEntityPicker","identityRefs","EntityTagsPickerSchema","EntityTagsPicker","tagOptions","setTagOptions","inputValue","setInputValue","inputError","setInputError","tagValidator","existingTags","tagsRequest","tagFacets","setTags","hasError","addDuplicate","currentTags","newTag","legacySelectedTemplateRouteRef","selectedTemplateRouteRef","scaffolderTaskRouteRef","scaffolderListTaskRouteRef","actionsRouteRef","editRouteRef","MyGroupsPickerSchema","MyGroupsPicker","setGroups","selectedGroup","setSelectedGroup","groupValues","updateChange","scaffolderPlugin","EntityPickerFieldExtension","EntityNamePickerFieldExtension","RepoUrlPickerFieldExtension","OwnerPickerFieldExtension","MyGroupsPickerFieldExtension","ScaffolderPage","OwnedEntityPickerFieldExtension","EntityTagsPickerFieldExtension","NextScaffolderPage","global","setTimeout","clearTimeout","XMLHttpRequest","XDomainRequest","ActiveXObject","NativeEventSource","document","Promise","Response","TextDecoder","TextEncoder","AbortController","C","F","originalFetch2","signal","TextDecoderPolyfill","octets","valid","codePoint","shift","octetsCount","bitsNeeded","REPLACER","string","octet","supportsStreamOption","XHRWrapper","xhr","that","silent","onStart","contentType","onProgress","responseText","onFinish","onReadyStateChange","onTimeout","error1","toLowerCase","HeadersPolyfill","all","array","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","withCredentials","chunk","HeadersWrapper","FetchTransport","controller","textDecoder","readNextChunk","EventTarget","throwError","typeListeners","length","listeners","found","filtered","Event","MessageEvent","ConnectionEvent","ErrorEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","def","clampDuration","fire","EventSourcePolyfill","getBestXHRTransport","isFetchSupported","es","lastEventIdQueryParameterName","initialRetry","heartbeatTimeout","lastEventId","wasActivity","textLength","TransportOption","transport","abortController","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","textChunk","position","nextHeartbeat","requestURL","requestHeaders","R","module","exports","searchApiRef","MockSearchApi","mockedResults","HighlightedSearchResultText","preTag","postTag","terms","SearchContext","useSearch","useSearchContextCheck","searchInitialState","useSearchContextValue","initialValue","searchApi","term","setTerm","setTypes","pageLimit","setPageLimit","pageCursor","setPageCursor","prevTerm","hasNextPage","hasPreviousPage","fetchNextPage","fetchPreviousPage","LocalSearchContext","SearchContextProvider","inheritParentContextIfAvailable","TrackSearch","useHasChanged","numberOfResults","hasFinishedLoading","withContext$1","SearchBarBase","onKeyDown","onClear","clearButton","fullWidth","inputProps","endAdornment","prevValue","handleKeyDown","handleClear","inputPlaceholder","startAdornment","clearButtonEndAdornment","SearchBar","withContext","SearchAutocompleteLoadingAdornment","SearchAutocomplete","getOptionLabel","inputDebounceTime","freeSolo","clearOnBlur","dataTestId","getInputValue","renderInput","InputLabelProps","SearchAutocompleteDefaultOption","primaryText","primaryTextTypographyProps","secondaryText","secondaryTextTypographyProps","disableTextTypography","useAsyncFilterValues","fn","debounce","valuesMemo","definiteFn","possibleValue","useDefaultFilterValue","AutocompleteFilter","givenValues","valuesDebounceMs","filterSelectedOptions","limitTags","asyncValues","renderTags","tagValue","getTagProps","CheckboxFilter","checked","SelectFilter","SearchFilter","Element","encodePageCursor","decodePageCursor","SearchPaginationBase","onPageCursorChange","rowsPerPage","labelRowsPerPage","labelDisplayedRows","rowsPerPageOptions","onPageLimitChange","handlePageChange","handleRowsPerPageChange","SearchPagination","handlePageLimitChange","newPageLimit","SearchResultContext","SearchResultApi","SearchResultState","SearchResultComponent","noResultsComponent","SearchResultListItemExtensions","SearchResult","DefaultResultListItemComponent","highlight","secondaryAction","lineClamp","HigherOrderDefaultResultListItem","SearchResultListLayout","resultItems","renderResultItem","disableRenderingWithNoResults","SearchResultList","defaultRenderResultItem","useSearchResultListItemExtensions","SearchResultGroupFilterFieldLayout","NullIcon","useSearchResultGroupTextFilterStyles","SearchResultGroupTextFilterField","useSearchResultGroupSelectFilterStyles","SearchResultGroupSelectFilterField","SearchResultGroupLayout","titleProps","filterOptions","renderFilterOption","filterOption","filterFields","renderFilterField","filterField","SearchResultGroup","SearchResultPager","SEARCH_RESULT_LIST_ITEM_EXTENSION","findSearchResultListItemExtensionElement","SearchResultListItemExtension","rank","alignItems","handleClickCapture","createSearchResultListItemExtension","SearchClient","searchPlugin","SearchPage$1","SidebarSearchModal","HomePageSearchBar","Modal","toggleModal","transitions","searchRootRoute","searchBarRef","handleSearchResultClick","handleSearchBarSubmit","SearchModal","SearchModalContext","SearchModalProvider","useSearchModal","parentContext","parentContextValue","isParentContextPresent","locationKey","UrlUpdater","prevQueryParams","SearchPage","SearchTypeAccordion","expanded","setExpanded","givenTypes","toggleExpanded","definedTypes","resultCounts","counts","SearchTypeTabs","changeTab","newType","SearchType","SidebarSearch","searchRoute","handleSearch","techRadarApiRef","MovedState","MovedState2","RadarGrid","radius","rings","makeRingNode","ringIndex","ringRadius","axisNodes","ringNodes","WithLink","RadarTimeline","timeline","timeEntry","RadarDescription","showDialogActions","url2","links2","makeBlip","moved","blip","RadarEntry","onMouseEnter","onMouseLeave","handleClickOpen","toggle","RadarBubble","visible","textElem","svgElem","rectElem","pathElem","updatePosition","bbox","marginX","marginY","RadarFooter","RadarLegendLink","RadarLegendRing","ring","onEntryMouseEnter","onEntryMouseLeave","setupSegments","segments","quadrantIndex","quadrantData","ringData","getSegment","segmented","quadrant","ringOffset","segmentedData","RadarLegendQuadrant","RadarLegend","quadrants","RadarPlot","activeEntry","Segment","nextSeed","boundedBox","boundedRing","polar","cartesian","min","boundedInterval","low","high","polarValue","rMin","rMax","adjustQuadrants","xStops","yStops","legendParams","legendParam","adjustEntries","seed","adjustedEntries","q","segment","simulation","adjustRings","Radar","setActiveEntry","adjustedQuadrants","adjustedRings","useTechRadarLoader","techRadarApi","matchFilter","RadarComponent","mapToEntries","loaderResponse","RadarPage","componentProps","setSearchText","RadarPage$1","mock","SampleTechRadarApi","TechRadarPage","Router","NESTED_LIST_TOGGLE","EXPANDABLE_NAVIGATION_LOCAL_STORAGE","StyledButton","CollapsedIcon","ExpandedIcon","ExpandableNavigationAddon","hasNavSubLevels","setHasNavSubLevels","checkboxToggles","shouldToggle","isExpanded","shouldExpand","handleState","ADDON_FEEDBACK_CONTAINER_ID","ADDON_FEEDBACK_CONTAINER_SELECTOR","PAGE_EDIT_LINK_SELECTOR","PAGE_FEEDBACK_LINK_SELECTOR","PAGE_MAIN_CONTENT_SELECTOR","resolveBlobUrl","ellipsis","getBody","markdownUrl","subheading","commentHeading","commentPlaceholder","highlightedTextAsQuote","facts","useGitTemplate","initialTemplate","editLink","useGitRepository","getIcon","getName","getUrl","template","encodedTitle","encodedBody","encodedUrl","IssueLink","ReportIssueAddon","buildTemplate","setStyle","defaultTemplate","mainContent","feedbackLink","feedbackContainer","mainContentPosition","selectionPosition","boxShadow","StyledSlider","marks","TextSizeAddon","mark","getValueText","handleChangeCommitted","handleDecreaseClick","handleIncreaseClick","styleInject","css","insertAt","head","css_248z","LightBoxAddon","images","dataSourceImages","lightbox","image","dataSourceImage","techdocsModuleAddonsContribPlugin","ExpandableNavigation","ReportIssue","TextSize","LightBox","TECHDOCS_ADDONS_KEY","TECHDOCS_ADDONS_WRAPPER_KEY","TechDocsAddons","getDataKeyByName","createTechDocsAddonExtension","TechDocsAddon","getTechDocsAddonByName","getAllTechDocsAddons","getAllTechDocsAddonsData","useTechDocsAddons","findAddonByData","nameKey","renderComponentByName","renderComponentsByLocation","techdocsApiRef","techdocsStorageApiRef","toLowercaseEntityRefMaybe","areEntityRefsEqual","prevEntityRef","nextEntityRef","defaultTechDocsReaderPageValue","TechDocsReaderPageContext","TechDocsReaderPageProvider","techdocsApi","entityMetadata","setTitle","setSubtitle","shadowRoot","setShadowRoot","prevProps","nextProps","useTechDocsReaderPage","TechDocsAddonLocations","SHADOW_DOM_STYLE_LOAD_EVENT","useShadowDomStylesEvents","handleLoad","useShadowDomStylesLoading","TechDocsShadowDom","onAppend","jss","setJss","shadowHost","useShadowRoot","useShadowRootElements","selectors","nodeList","isValidSelection","newSelection","useShadowRootSelection","waitMillis","setSelection","handleSelectionChange","shadowDocument","TechDocsClient","entityId","requestUrl","TechDocsStorageClient","errorMessage","logHandler","oldBaseUrl","newBaseUrl","calculateDisplayState","contentLoading","activeSyncState","useReaderState","techdocsStorageApi","contentReload","entityDocs","buildingTimeout","TechDocsReaderContext","useTechDocsReader","TechDocsReaderProvider","withTechDocsReaderProvider","TechDocsSearchResultListItem$1","asListItem","asLink","TextItem","resultTitle","resultName","ListItemWrapper","TechDocsSearchResultListItem$2","isTechDocsSearchResult","TechDocsSearchBar","searchVal","setOptions","mounted","searchResults","handleSelection","TechDocsSearch","useDrawerStyles","TechDocsBuildLogsDrawerContent","buildLog","TechDocsBuildLogs","TechDocsNotFound","techdocsBuilder","TechDocsStateIndicator","StateAlert","contentErrorMessage","syncErrorMessage","MKDOCS_CSS","GOOGLE_FONTS","GSTATIC_FONTS","isLink","isSafe$1","isMkdocsCss","isGoogleFonts","isGstaticFonts","removeUnsafeLinks","isIframe","isSafe","src","removeUnsafeIframes","useSanitizerConfig","useSanitizerTransformer","dom","variables","SIDEBAR_WIDTH","sidebar","headings","typeset","heading","lineHeight","fontWeight","fontSize","calculate","factor","animations","extensions","useSidebar","useRuleStyles","rule","useStylesTransformer","isSvgNeedingInlining","attrName","attrVal","apiOrigin","isSrcToSvg","isRelativeUrl","pointsToOurBackend","addBaseUrl","updateDom","attributeName","elemAttribute","svgContent","addGitFeedbackLink","sourceAnchor","sourceURL","issueTitle","issueDesc","gitUrl","gitInfo","repoPath","addSidebarToggle","mkdocsToggleSidebar","article","toggleSidebar","rewriteDocLinks","normalizedWindowLocation","normalizeUrl","addLinkClickListener","CopyToClipboardTooltip","CopyToClipboardIcon","CopyToClipboardButton","copyToClipboard2","codes","code","removeMkdocsHeader","simplifyMkdocsFooter","onCssReady","onLoading","onLoaded","handleShadowDomStyleLoad","scrollIntoAnchor","scrollIntoNavigation","activeNavItems","activeNavItem","checkbox","html","transformers","transformer","resolveUrlToRelative","parsedAppUrl","appUrlPath","relativeUrl","parsedUrl","useNavigateUrl","MOBILE_MEDIA_QUERY","useTechDocsReaderDom","isMobileMedia","sanitizerTransformer","stylesTransformer","rawPage","setDom","isStyleLoading","updateSidebarPosition","pageTop","domTop","tabsHeight","updateFooterWidth","footer","preRender","rawContent","contentPath","postRender","transformedElement","modifierActive","shouldReplaceContent","preTransformedDomElement","postTransformedDomElement","TechDocsReaderPageContentAddons","addons","contentElement","primarySidebarElement","primarySidebarAddonLocation","secondarySidebarElement","secondarySidebarAddonLocation","TechDocsReaderPageContent","withSearch","onReady","entityMetadataLoading","handleAppend","newShadowRoot","Reader","rootDocsRouteRef","rootCatalogDocsRouteRef","skeleton","TechDocsReaderPageHeader","metadataLoading","site_description","tabTitle","locationMetadata","lifecycle","docsRootLink","TechDocsReaderPageSubheader","subheaderAddons","settingsAddons","TechDocsReaderLayout","withHeader","TechDocsReaderPage$1","grandChild","toLowerMaybe","DocsCardGrid","getRouteToReaderPageFor","allEntitiesGroup","EntityListDocsGridGroup","loadingOwnership","shownEntities","titleComponent","EntityListDocsGrid","actionFactories","customTitle","DocsTable","documents","EntityListDocsTable","TechDocsPageWrapper","TechDocsFilter","TechDocsPicker","DefaultTechDocsHome","techdocsPlugin","TechdocsPage","EntityTechdocsContent","TechDocsCustomHome","TechDocsIndexPage$2","TechDocsIndexPage$1","TechDocsReaderPage","TechDocsSearchResultListItem","EntityPageDocs","TechDocsIndexPage","TECHDOCS_ANNOTATION","JSON_HEADERS","UserSettingsStorage","fetchUrl","rawValue","encodedNamespace","encodedKey","settingsRouteRef","UserSettingsPage","EXAMPLE$1","EmptyProviders","size","ProviderSettingsAvatar","emptyProfile","ProviderSettingsItem","signedIn","setSignedIn","setProfile","sessionState","profileResponse","DefaultProviderSettings","configuredProviders","UserSettingsAuthProviders","providerSettings","providersConfig","EXAMPLE","EmptyFlags","getSecondaryText","FlagItem","toggleHandler","sortFlags","flags","activeFlags","idleFlags","UserSettingsFeatureFlags","inputRef","initialFeatureFlags","initialFeatureFlagsSorted","initialFlagState","filterInput","setFilterInput","toggleFlag","flagName","clearFilterInput","filteredFeatureFlags","featureFlag","useUserProfile","UserSettingsSignInAvatar","UserSettingsMenu","UserSettingsProfileCard","UserSettingsPinToggle","ThemeIcon","activeId","TooltipToggleButton","UserSettingsThemeToggle","themeIds","handleSetTheme","newThemeId","themeIcon","UserSettingsAppearanceCard","UserSettingsIdentityCard","UserSettingsGeneral","LAYOUT_DATA_KEY","LAYOUT_ROUTE_DATA_KEY","SettingsLayout","DefaultSettingsPage","SettingsPage","USER_SETTINGS_TAB_KEY","UserSettingsTab","getGlobalObject","globalObject","makeKey","getOrCreateGlobalSingleton","createVersionedValueMap","versions","createVersionedContext","useVersionedContext","createVersionedContextForTesting"],"sourceRoot":""}