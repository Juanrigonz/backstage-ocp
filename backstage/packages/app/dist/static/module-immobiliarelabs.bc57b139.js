"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1834],{43379:function(Me,Fe,c){c.d(Fe,{E:function(){return on},G:function(){return Ue},L:function(){return Pt},M:function(){return ut},P:function(){return hn},R:function(){return vn},a:function(){return Ye},b:function(){return He},c:function(){return qe},d:function(){return St},e:function(){return pa},f:function(){return Gt},g:function(){return zt}});var H=c(30705),Ke=c(28879),j=c.n(Ke),N=c(77491),Bt=c.n(N),o=c(64989),bt=c.n(o),h=c(2784),Ze=c(2204),de=c(70811),le=c(80030),_e=c(7089),nt=c(43434),ie=c(95544),we=c(60905),Dt=c(85256),ze=c(79692),fe=c(42494),Re=c(73698),at=c(12231),Be=c(74828),Mt=c(86689),Ct=c(15459),ae=c(99688),rt=c(23860),ua=c(49462),da=c(34520),an=c(27597),rn=c(8392),st=c(97699),ma=c.n(st);const Ue=(0,H.T0)({id:"plugin.gitlabci.service"});j().extend(Bt()),j().extend(bt());const St=R=>j()(R).fromNow(),pa=(R,_)=>{if(!_||!R)return"NA";const I=j()(_),L=j()(R),F=j().duration(I.diff(L,"seconds"),"seconds"),J=F.days(),pe=F.hours(),Y=F.minutes(),Q=F.seconds(),ne=`${J?J+"d ":""}${pe?pe+"h ":""}${Y?Y+"m ":""}${Q?Q+"s":""}`;return ne||"0s"},wn=R=>{try{const _=R.replace(/\r/g,"").split(`
`),I=[];for(const L of _)!L||L.startsWith("#")||I.push(Bn(L));return I}catch(_){throw console.log("failed to load codeowners",_),_}},Bn=R=>{const _=R.split(/\s+/),I=_[0];let L=[];if(_.length>1){L=_.slice(1,_.length);for(const F of L)if(!kt.test(F))throw new Error(`${F} is not a valid owner name in rule ${R}`)}return{rule:R,path:I,owners:L}},kt=/(^@[a-zA-Z0-9_\-/]*$)|(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;class Dn{constructor({discoveryApi:_,identityApi:I,codeOwnersPath:L,readmePath:F,gitlabInstance:J}){this.discoveryApi=_,this.codeOwnersPath=L||"CODEOWNERS",this.readmePath=F||"README.md",this.gitlabInstance=J,this.identityApi=I}static setupAPI({discoveryApi:_,identityApi:I,codeOwnersPath:L,readmePath:F}){return{build:J=>new this({discoveryApi:_,identityApi:I,codeOwnersPath:L,readmePath:F,gitlabInstance:J})}}async callApi(_,I){var L;const F=`${await this.discoveryApi.getBaseUrl("gitlab")}/${this.gitlabInstance}`,J=(await this.identityApi.getCredentials()).token,pe=J?{headers:{Authorization:`Bearer ${J}`}}:{},Y=await fetch(`${F}/${_}?${new URLSearchParams(I).toString()}`,pe);if(Y.status===200)return(L=Y.headers.get("content-type"))!=null&&L.includes("application/json")?await Y.json():Y.text()}async getPipelineSummary(_){const[I,L]=await Promise.all([this.callApi("projects/"+_+"/pipelines",{}),this.callApi("projects/"+_,{})]);return I&&L&&I.forEach(F=>{F.project_name=L.name}),I||void 0}async getIssuesSummary(_){const[I,L]=await Promise.all([this.callApi(`projects/${_}/issues`,{}),this.callApi("projects/"+_,{})]);return I&&L&&I.forEach(F=>{F.project_name=L.name}),I||void 0}async getProjectName(_){const I=await this.callApi("projects/"+_,{});return I==null?void 0:I.name}async getUserProfilesData(_){return Promise.all(_.map(async I=>{const L=await this.callApi("users",{search:I.email,without_project_bots:"true"}),F=L==null?void 0:L.find(J=>J.name===I.name);return F?{...I,...F}:I}))}async getUserDetail(_){var I;_.startsWith("@")&&(_=_.slice(1));const L=(I=await this.callApi("users",{username:_}))==null?void 0:I[0];if(!L)throw new Error(`user ${_} does not exist`);return L}async getGroupDetail(_){_.startsWith("@")&&(_=_.slice(1));const I=await this.callApi(`groups/${encodeURIComponent(_)}`,{with_projects:"false"});if(!I)throw new Error(`group ${_} does not exist`);return I}async getMergeRequestsSummary(_){return this.callApi("projects/"+_+"/merge_requests",{})}async getMergeRequestsStatusSummary(_,I){return this.callApi("projects/"+_+"/merge_requests",{per_page:(I!=null?I:20).toString(10)})}async getContributorsSummary(_){const I=await this.callApi("projects/"+_+"/repository/contributors",{sort:"desc"});return await this.getUserProfilesData(I)}async getLanguagesSummary(_){return this.callApi("projects/"+_+"/languages",{})}async getReleasesSummary(_){return this.callApi("projects/"+_+"/releases",{})}async getProjectDetails(_){if(_)return this.callApi("projects/"+encodeURIComponent(_),{})}async getCodeOwners(_,I="HEAD",L){L=L||this.codeOwnersPath,L.startsWith("./")&&(L=L.slice(2));const F=await this.callApi(`projects/${_}/repository/files/${encodeURI(L)}/raw`,{ref:I});if(!F)throw Error("Code owners file not found");const J=wn(F),pe=[...new Set(J.flatMap(ne=>ne.owners))];return(await Promise.allSettled(pe.map(async ne=>{try{return await this.getUserDetail(ne)}catch{return this.getGroupDetail(ne)}}))).filter(ne=>ne.status==="fulfilled").map(ne=>ne.value)}async getReadme(_,I="HEAD",L){L=L||this.readmePath,L.startsWith("./")&&(L=L.slice(2));const F=await this.callApi(`projects/${_}/repository/files/${encodeURI(L)}/raw`,{ref:I});if(!F)throw Error("README file not found");return F}getContributorsLink(_,I){return`${_}/-/graphs/${I}`}getOwnersLink(_,I,L){return`${_}/-/blob/${I}/${L||this.codeOwnersPath}`}}const ga=(0,H.NT)({id:"Gitlab"}),te=(0,H.rx)({id:"Gitlab",apis:[(0,H.ni)({api:Ue,deps:{configApi:H.Ds,discoveryApi:H.NW,identityApi:H.$4},factory:({configApi:R,discoveryApi:_,identityApi:I})=>Dn.setupAPI({discoveryApi:_,identityApi:I,codeOwnersPath:R.getOptionalString("gitlab.defaultCodeOwnersPath"),readmePath:R.getOptionalString("gitlab.defaultReadmePath")})})]}),on=te.provide((0,H.P4)({name:"EntityGitlabContent",component:()=>c.e(3784).then(c.bind(c,33784)).then(R=>R.GitlabCI),mountPoint:ga})),fa=te.provide((0,H.CO)({name:"EntityGitlabLanguageCard",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.LanguagesCard)}})),Ea=te.provide((0,H.CO)({name:"EntityGitlabPeopleCard",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.PeopleCard)}})),ln=te.provide((0,H.CO)({name:"EntityGitlabMergeRequestsTable",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.MergeRequestsTable)}})),Mn=te.provide((0,H.CO)({name:"EntityGitlabMergeRequestStatsCard",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.MergeRequestStats)}})),_t=te.provide((0,H.CO)({name:"EntityGitlabPipelinesTable",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.PipelinesTable)}})),Nt=te.provide((0,H.CO)({name:"EntityGitlabReleasesCard",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.ReleasesCard)}})),sn=te.provide((0,H.CO)({name:"EntityGitlabIssuesTable",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.IssuesTable)}})),cn=te.provide((0,H.CO)({name:"EntityGitlabReadmeCard",component:{lazy:()=>c.e(4743).then(c.bind(c,64743)).then(R=>R.ReadmeCard)}})),xt="gitlab.com/project-id",un="gitlab.com/project-slug",dn="gitlab.com/instance",Wt="gitlab.com/codeowners-path",kn="gitlab.com/readme-path",Ye=()=>{var R,_;const{entity:I}=(0,Ze.X2)();return(_=(R=I.metadata.annotations)==null?void 0:R[xt])!=null?_:""},He=()=>{var R,_;const{entity:I}=(0,Ze.X2)();return(_=(R=I.metadata.annotations)==null?void 0:R[un])!=null?_:""},qe=()=>{var R,_;const{entity:I}=(0,Ze.X2)();return(_=(R=I.metadata.annotations)==null?void 0:R[dn])!=null?_:""},mn=()=>{var R,_;const{entity:I}=(0,Ze.X2)();return(_=(R=I.metadata.annotations)==null?void 0:R[Wt])!=null?_:""},Ft=()=>{var R,_;const{entity:I}=(0,Ze.X2)();return(_=(R=I.metadata.annotations)==null?void 0:R[kn])!=null?_:""},Zt={"1C Enterprise":{color:"#814CCC"},"4D":{color:"inherit"},ABAP:{color:"#E8274B"},ActionScript:{color:"#882B0F"},Ada:{color:"#02f88c"},Agda:{color:"#315665"},"AGS Script":{color:"#B9D9FF"},AL:{color:"#3AA2B5"},Alloy:{color:"#64C800"},"Alpine Abuild":{color:"inherit"},AMPL:{color:"#E6EFBB"},AngelScript:{color:"#C7D7DC"},ANTLR:{color:"#9DC3FF"},Apex:{color:"#1797c0"},"API Blueprint":{color:"#2ACCA8"},APL:{color:"#5A8164"},"Apollo Guidance Computer":{color:"#0B3D91"},AppleScript:{color:"#101F1F"},Arc:{color:"#aa2afe"},ASL:{color:"inherit"},"ASP.NET":{color:"#9400ff"},AspectJ:{color:"#a957b0"},Assembly:{color:"#6E4C13"},Asymptote:{color:"#ff0000"},ATS:{color:"#1ac620"},Augeas:{color:"inherit"},AutoHotkey:{color:"#6594b9"},AutoIt:{color:"#1C3552"},Awk:{color:"inherit"},Ballerina:{color:"#FF5000"},Batchfile:{color:"#C1F12E"},Befunge:{color:"inherit"},Bison:{color:"#6A463F"},BitBake:{color:"inherit"},Blade:{color:"#f7523f"},BlitzBasic:{color:"inherit"},BlitzMax:{color:"#cd6400"},Bluespec:{color:"inherit"},Boo:{color:"#d4bec1"},Brainfuck:{color:"#2F2530"},Brightscript:{color:"inherit"},C:{color:"#555555"},"C#":{color:"#178600"},"C++":{color:"#f34b7d"},"C2hs Haskell":{color:"inherit"},"Cap'n Proto":{color:"inherit"},CartoCSS:{color:"inherit"},Ceylon:{color:"#dfa535"},Chapel:{color:"#8dc63f"},Charity:{color:"inherit"},ChucK:{color:"inherit"},Cirru:{color:"#ccccff"},Clarion:{color:"#db901e"},"Classic ASP":{color:"#6a40fd"},Clean:{color:"#3F85AF"},Click:{color:"#E4E6F3"},CLIPS:{color:"inherit"},Clojure:{color:"#db5855"},CMake:{color:"inherit"},COBOL:{color:"inherit"},CodeQL:{color:"inherit"},CoffeeScript:{color:"#244776"},ColdFusion:{color:"#ed2cd6"},"ColdFusion CFC":{color:"#ed2cd6"},"Common Lisp":{color:"#3fb68b"},"Common Workflow Language":{color:"#B5314C"},"Component Pascal":{color:"#B0CE4E"},Cool:{color:"inherit"},Coq:{color:"inherit"},Crystal:{color:"#000100"},CSON:{color:"#244776"},Csound:{color:"inherit"},"Csound Document":{color:"inherit"},"Csound Score":{color:"inherit"},CSS:{color:"#563d7c"},Cuda:{color:"#3A4E3A"},CWeb:{color:"inherit"},Cycript:{color:"inherit"},Cython:{color:"inherit"},D:{color:"#ba595e"},Dafny:{color:"#FFEC25"},Dart:{color:"#00B4AB"},Gnuplot:{color:"#f0a9f0"},DataWeave:{color:"#003a52"},Dhall:{color:"#dfafff"},"DIGITAL Command Language":{color:"inherit"},DM:{color:"#447265"},Dockerfile:{color:"#384d54"},Dogescript:{color:"#cca760"},DTrace:{color:"inherit"},Dylan:{color:"#6c616e"},E:{color:"#ccce35"},eC:{color:"#913960"},ECL:{color:"#8a1267"},ECLiPSe:{color:"inherit"},Eiffel:{color:"#4d6977"},EJS:{color:"#a91e50"},Elixir:{color:"#6e4a7e"},Elm:{color:"#60B5CC"},"Emacs Lisp":{color:"#c065db"},EmberScript:{color:"#FFF4F3"},EQ:{color:"#a78649"},Erlang:{color:"#B83998"},"F#":{color:"#b845fc"},"F*":{color:"#572e30"},Factor:{color:"#636746"},Fancy:{color:"#7b9db4"},Fantom:{color:"#14253c"},Faust:{color:"#c37240"},"Filebench WML":{color:"inherit"},Filterscript:{color:"inherit"},fish:{color:"inherit"},FLUX:{color:"#88ccff"},Forth:{color:"#341708"},Fortran:{color:"#4d41b1"},"Fortran Free Form":{color:"inherit"},FreeMarker:{color:"#0050b2"},Frege:{color:"#00cafe"},Futhark:{color:"#5f021f"},"G-code":{color:"#D08CF2"},"Game Maker Language":{color:"#71b417"},GAML:{color:"#FFC766"},GAMS:{color:"inherit"},GAP:{color:"inherit"},"GCC Machine Description":{color:"inherit"},GDB:{color:"inherit"},GDScript:{color:"#355570"},Genie:{color:"#fb855d"},Genshi:{color:"inherit"},"Gentoo Ebuild":{color:"inherit"},"Gentoo Eclass":{color:"inherit"},Gherkin:{color:"#5B2063"},GLSL:{color:"inherit"},Glyph:{color:"#c1ac7f"},Go:{color:"#00ADD8"},Golo:{color:"#88562A"},Gosu:{color:"#82937f"},Grace:{color:"inherit"},"Grammatical Framework":{color:"#ff0000"},GraphQL:{color:"#e10098"},Groovy:{color:"#e69f56"},"Groovy Server Pages":{color:"inherit"},Hack:{color:"#878787"},Haml:{color:"#ece2a9"},Handlebars:{color:"#f7931e"},Harbour:{color:"#0e60e3"},Haskell:{color:"#5e5086"},Haxe:{color:"#df7900"},HCL:{color:"#00dfd4"},HiveQL:{color:"#dce200"},HLSL:{color:"inherit"},HolyC:{color:"#ffefaf"},HTML:{color:"#e34c26"},Hy:{color:"#7790B2"},HyPhy:{color:"inherit"},IDL:{color:"#a3522f"},Idris:{color:"#b30000"},"IGOR Pro":{color:"#0000cc"},"Inform 7":{color:"inherit"},"Inno Setup":{color:"inherit"},Io:{color:"#a9188d"},Ioke:{color:"#078193"},Isabelle:{color:"#FEFE00"},"Isabelle ROOT":{color:"inherit"},J:{color:"#9EEDFF"},Jasmin:{color:"inherit"},Java:{color:"#b07219"},"Java Server Pages":{color:"inherit"},JavaScript:{color:"#f1e05a"},"JavaScript+ERB":{color:"inherit"},JFlex:{color:"#DBCA00"},Jison:{color:"inherit"},"Jison Lex":{color:"inherit"},Jolie:{color:"#843179"},JSONiq:{color:"#40d47e"},Jsonnet:{color:"#0064bd"},JSX:{color:"inherit"},Julia:{color:"#a270ba"},"Jupyter Notebook":{color:"#DA5B0B"},"Kaitai Struct":{color:"#773b37"},Kotlin:{color:"#F18E33"},KRL:{color:"#28430A"},LabVIEW:{color:"inherit"},Lasso:{color:"#999999"},Latte:{color:"#f2a542"},Lean:{color:"inherit"},Less:{color:"#1d365d"},Lex:{color:"#DBCA00"},LFE:{color:"#4C3023"},LilyPond:{color:"inherit"},Limbo:{color:"inherit"},"Literate Agda":{color:"inherit"},"Literate CoffeeScript":{color:"inherit"},"Literate Haskell":{color:"inherit"},LiveScript:{color:"#499886"},LLVM:{color:"#185619"},Logos:{color:"inherit"},Logtalk:{color:"inherit"},LOLCODE:{color:"#cc9900"},LookML:{color:"#652B81"},LoomScript:{color:"inherit"},LSL:{color:"#3d9970"},Lua:{color:"#000080"},M:{color:"inherit"},M4:{color:"inherit"},M4Sugar:{color:"inherit"},Macaulay2:{color:"#d8ffff"},Makefile:{color:"#427819"},Mako:{color:"inherit"},Markdown:{color:"#083fa1"},Marko:{color:"#42bff2"},Mask:{color:"#f97732"},Mathematica:{color:"inherit"},MATLAB:{color:"#e16737"},Max:{color:"#c4a79c"},MAXScript:{color:"#00a6a6"},mcfunction:{color:"#E22837"},Mercury:{color:"#ff2b2b"},Meson:{color:"#007800"},Metal:{color:"#8f14e9"},MiniD:{color:"inherit"},Mirah:{color:"#c7a938"},"mIRC Script":{color:"#3d57c3"},MLIR:{color:"#5EC8DB"},Modelica:{color:"inherit"},"Modula-2":{color:"inherit"},"Modula-3":{color:"#223388"},"Module Management System":{color:"inherit"},Monkey:{color:"inherit"},Moocode:{color:"inherit"},MoonScript:{color:"inherit"},"Motorola 68K Assembly":{color:"inherit"},MQL4:{color:"#62A8D6"},MQL5:{color:"#4A76B8"},MTML:{color:"#b7e1f4"},MUF:{color:"inherit"},mupad:{color:"inherit"},Myghty:{color:"inherit"},NASL:{color:"inherit"},NCL:{color:"#28431f"},Nearley:{color:"#990000"},Nemerle:{color:"#3d3c6e"},nesC:{color:"#94B0C7"},NetLinx:{color:"#0aa0ff"},"NetLinx+ERB":{color:"#747faa"},NetLogo:{color:"#ff6375"},NewLisp:{color:"#87AED7"},Nextflow:{color:"#3ac486"},Nim:{color:"#ffc200"},Nit:{color:"#009917"},Nix:{color:"#7e7eff"},NSIS:{color:"inherit"},Nu:{color:"#c9df40"},NumPy:{color:"#9C8AF9"},"Objective-C":{color:"#438eff"},"Objective-C++":{color:"#6866fb"},"Objective-J":{color:"#ff0c5a"},ObjectScript:{color:"#424893"},OCaml:{color:"#3be133"},Odin:{color:"#60AFFE"},Omgrofl:{color:"#cabbff"},ooc:{color:"#b0b77e"},Opa:{color:"inherit"},Opal:{color:"#f7ede0"},"Open Policy Agent":{color:"inherit"},OpenCL:{color:"inherit"},"OpenEdge ABL":{color:"inherit"},OpenQASM:{color:"#AA70FF"},"OpenRC runscript":{color:"inherit"},OpenSCAD:{color:"inherit"},Ox:{color:"inherit"},Oxygene:{color:"#cdd0e3"},Oz:{color:"#fab738"},P4:{color:"#7055b5"},Pan:{color:"#cc0000"},Papyrus:{color:"#6600cc"},Parrot:{color:"#f3ca0a"},"Parrot Assembly":{color:"inherit"},"Parrot Internal Representation":{color:"inherit"},Pascal:{color:"#E3F171"},Pawn:{color:"#dbb284"},Pep8:{color:"#C76F5B"},Perl:{color:"#0298c3"},PHP:{color:"#4F5D95"},PicoLisp:{color:"inherit"},PigLatin:{color:"#fcd7de"},Pike:{color:"#005390"},PLpgSQL:{color:"inherit"},PLSQL:{color:"#dad8d8"},PogoScript:{color:"#d80074"},Pony:{color:"inherit"},PostScript:{color:"#da291c"},"POV-Ray SDL":{color:"inherit"},PowerBuilder:{color:"#8f0f8d"},PowerShell:{color:"#012456"},Prisma:{color:"#0c344b"},Processing:{color:"#0096D8"},Prolog:{color:"#74283c"},"Propeller Spin":{color:"#7fa2a7"},Pug:{color:"#a86454"},Puppet:{color:"#302B6D"},PureBasic:{color:"#5a6986"},PureScript:{color:"#1D222D"},Python:{color:"#3572A5"},"Python console":{color:"inherit"},q:{color:"#0040cd"},"Q#":{color:"#fed659"},QMake:{color:"inherit"},QML:{color:"#44a51c"},"Qt Script":{color:"#00b841"},Quake:{color:"#882233"},R:{color:"#198CE7"},Racket:{color:"#3c5caa"},Ragel:{color:"#9d5200"},Raku:{color:"#0000fb"},RAML:{color:"#77d9fb"},Rascal:{color:"#fffaa0"},REALbasic:{color:"inherit"},Reason:{color:"#ff5847"},Rebol:{color:"#358a5b"},Red:{color:"#f50000"},Redcode:{color:"inherit"},"Ren'Py":{color:"#ff7f7f"},RenderScript:{color:"inherit"},REXX:{color:"inherit"},Ring:{color:"#2D54CB"},Riot:{color:"#A71E49"},RobotFramework:{color:"inherit"},Roff:{color:"#ecdebe"},Rouge:{color:"#cc0088"},RPC:{color:"inherit"},Ruby:{color:"#701516"},RUNOFF:{color:"#665a4e"},Rust:{color:"#dea584"},Sage:{color:"inherit"},SaltStack:{color:"#646464"},SAS:{color:"#B34936"},Sass:{color:"#a53b70"},Scala:{color:"#c22d40"},Scheme:{color:"#1e4aec"},Scilab:{color:"inherit"},SCSS:{color:"#c6538c"},sed:{color:"#64b970"},Self:{color:"#0579aa"},ShaderLab:{color:"inherit"},Shell:{color:"#89e051"},ShellSession:{color:"inherit"},Shen:{color:"#120F14"},Sieve:{color:"inherit"},Slash:{color:"#007eff"},Slice:{color:"#003fa2"},Slim:{color:"#2b2b2b"},Smali:{color:"inherit"},Smalltalk:{color:"#596706"},Smarty:{color:"#bedf00"},SmPL:{color:"#c94949"},SMT:{color:"inherit"},Solidity:{color:"#AA6746"},SourcePawn:{color:"#f69e1d"},SQF:{color:"#3F3F3F"},SQLPL:{color:"inherit"},Squirrel:{color:"#800000"},"SRecode Template":{color:"#348a34"},Stan:{color:"#b2011d"},"Standard ML":{color:"#dc566d"},Starlark:{color:"#76d275"},Stata:{color:"inherit"},Stylus:{color:"#ff6347"},SuperCollider:{color:"#46390b"},Svelte:{color:"#ff3e00"},SVG:{color:"#ff9900"},Swift:{color:"#ffac45"},SWIG:{color:"inherit"},SystemVerilog:{color:"#DAE1C2"},Tcl:{color:"#e4cc98"},Tcsh:{color:"inherit"},Terra:{color:"#00004c"},TeX:{color:"#3D6117"},Thrift:{color:"inherit"},"TI Program":{color:"#A0AA87"},TLA:{color:"inherit"},TSQL:{color:"inherit"},TSX:{color:"inherit"},Turing:{color:"#cf142b"},Twig:{color:"#c1d026"},TXL:{color:"inherit"},TypeScript:{color:"#2b7489"},"Unified Parallel C":{color:"#4e3617"},"Unix Assembly":{color:"inherit"},Uno:{color:"#9933cc"},UnrealScript:{color:"#a54c4d"},UrWeb:{color:"inherit"},V:{color:"#4f87c4"},Vala:{color:"#fbe5cd"},VBA:{color:"#867db1"},VBScript:{color:"#15dcdc"},VCL:{color:"#148AA8"},Verilog:{color:"#b2b7f8"},VHDL:{color:"#adb2cb"},"Vim script":{color:"#199f4b"},"Visual Basic .NET":{color:"#945db7"},Volt:{color:"#1F1F1F"},Vue:{color:"#2c3e50"},wdl:{color:"#42f1f4"},WebAssembly:{color:"#04133b"},WebIDL:{color:"inherit"},wisp:{color:"#7582D1"},Wollok:{color:"#a23738"},X10:{color:"#4B6BEF"},xBase:{color:"#403a40"},XC:{color:"#99DA07"},Xojo:{color:"inherit"},XProc:{color:"inherit"},XQuery:{color:"#5232e7"},XS:{color:"inherit"},XSLT:{color:"#EB8CEB"},Xtend:{color:"inherit"},Yacc:{color:"#4B6C4B"},YAML:{color:"#cb171e"},YARA:{color:"#220000"},YASnippet:{color:"#32AB90"},ZAP:{color:"#0d665e"},Zeek:{color:"inherit"},ZenScript:{color:"#00BCD1"},Zephir:{color:"#118f9e"},Zig:{color:"#ec915c"},ZIL:{color:"#dc75e5"},Zimpl:{color:"inherit"}},pn=(0,ze.Z)(R=>({infoCard:{marginBottom:R.spacing(3),"& + .MuiAlert-root":{marginTop:R.spacing(3)}},barContainer:{height:R.spacing(2),marginBottom:R.spacing(3),borderRadius:"4px",backgroundColor:"transparent",overflow:"hidden"},bar:{height:"100%",position:"relative"},languageDot:{width:"10px",height:"10px",borderRadius:"50%",marginRight:R.spacing(1),display:"inline-block"},label:{color:"inherit"}})),Pt=({})=>{const R=pn();let _=0,I=new String;const L=Ye(),F=He(),J=qe(),pe=(0,H.h_)(Ue).build(J||"gitlab.com"),{value:Y,loading:Q,error:ne}=(0,rt.Z)(async()=>{const V=await pe.getProjectDetails(F||L);if(!V)throw new Error("wrong project_slug or project_id");const re=await pe.getLanguagesSummary(V.id);if(!re)throw new Error("Languages summary is not defined!");return re});return Q?h.createElement(de.Ex,null):ne?h.createElement(ae.Z,{severity:"error",className:R.infoCard},ne.message):Y?h.createElement(de.rJ,{title:"Languages"},h.createElement("div",{className:R.barContainer},Object.entries(Y).map((V,re)=>{var Ee;return _=_+V[1],I=V[0]+" "+V[1]+"%",h.createElement(le.ZP,{title:I,placement:"bottom-end",key:V[0]},h.createElement("div",{className:R.bar,key:V[0],style:{marginTop:re===0?"0":"-16px",zIndex:Object.keys(Y).length-re,backgroundColor:((Ee=Zt[V[0]])==null?void 0:Ee.color)||"#333",width:`${_}%`}}))})),Object.entries(Y).map(V=>{var re;return h.createElement(_e.Z,{classes:{label:R.label},label:h.createElement(h.Fragment,null,h.createElement("span",{className:R.languageDot,style:{backgroundColor:((re=Zt[V[0]])==null?void 0:re.color)||"#333"}}),h.createElement("b",null,V[0])," - ",V[1],"%"),variant:"outlined",key:V[0]})})):h.createElement(de.rJ,{title:"Languages"})},gn=(0,Ct.Z)({tooltip:{backgroundColor:"white",border:"1px solid lightgrey",color:"#333",minWidth:"320px"}})(le.ZP),fn=({peopleCardEntity:R})=>h.createElement(gn,{title:R.name},h.createElement("a",{href:R.web_url,target:"_blank"},h.createElement(nt.Z,{key:R.name,alt:R.name,src:R.avatar_url}))),ct=(0,ze.Z)(R=>({link:{color:"inherit",textDecoration:"none",marginRight:R.spacing(1),marginTop:R.spacing(0)},box:{marginTop:R.spacing(0),marginBottom:R.spacing(1)},boxLink:{marginTop:R.spacing(0)},title:{marginTop:R.spacing(0),marginBottom:R.spacing(0)}})),En=({title:R,peopleObj:_,deepLink:I})=>{const L=ct();return h.createElement(h.Fragment,null,h.createElement(ie.Z,{className:L.box,display:"flex",alignItems:"center",justifyContent:"space-between"},h.createElement("h2",{className:L.title},R),I&&h.createElement(ie.Z,{className:L.boxLink,display:"flex",alignItems:"center"},h.createElement(de.rU,{className:L.link,to:I.link,onClick:I.onClick},I.title),h.createElement(an.Z,{fontSize:"small"}))),h.createElement(we.Z,{container:!0,spacing:1,justifyContent:"flex-start"},_==null?void 0:_.map(F=>h.createElement(we.Z,{key:F.email||F.name,item:!0},h.createElement(fn,{peopleCardEntity:F})))))},$e=(0,ze.Z)(R=>({infoCard:{marginBottom:R.spacing(3),"& + .MuiAlert-root":{marginTop:R.spacing(3)}},subTitle:{marginTop:R.spacing(0)},divider:{marginTop:R.spacing(2),marginBottom:R.spacing(2)}})),hn=({})=>{var R,_;const I=$e(),L=Ye(),F=He(),J=qe(),pe=mn(),Y=(0,H.h_)(Ue).build(J||"gitlab.com"),{value:Q,loading:ne,error:V}=(0,rt.Z)(async()=>{const Pe=await Y.getProjectDetails(F||L);if(!Pe)throw new Error("wrong project_slug or project_id");const et=await Y.getContributorsSummary(Pe.id);let ot=[];try{ot=await Y.getCodeOwners(Pe.id,Pe==null?void 0:Pe.default_branch,pe)}catch{ot=void 0}return{contributors:et,owners:ot,projectDetails:Pe}},[]),re=(R=Q==null?void 0:Q.projectDetails)==null?void 0:R.web_url,Ee=(_=Q==null?void 0:Q.projectDetails)==null?void 0:_.default_branch;let q,xe;if(re&&Ee){const Pe=Y.getContributorsLink(re,Ee);q={link:Pe,title:"go to Contributors",onClick:ot=>{ot.preventDefault(),window.open(Pe)}};const et=Y.getOwnersLink(re,Ee,pe);xe={link:et,title:"go to Owners File",onClick:ot=>{ot.preventDefault(),window.open(et)}}}return ne?h.createElement(de.Ex,null):V?h.createElement(ae.Z,{severity:"error",className:I.infoCard},V.message):h.createElement(de.rJ,{title:"People",className:I.infoCard},(Q==null?void 0:Q.owners)&&h.createElement(h.Fragment,null,h.createElement(En,{title:"Owners",peopleObj:Q==null?void 0:Q.owners,deepLink:xe}),h.createElement(Dt.Z,{className:I.divider})),h.createElement(En,{title:"Contributors",peopleObj:(Q==null?void 0:Q.contributors)||[],deepLink:q}))},ha=(0,ze.Z)(R=>({infoCard:{marginBottom:R.spacing(3),"& + .MuiAlert-root":{marginTop:R.spacing(3)},"& .MuiCardContent-root":{padding:R.spacing(2,1,2,2)},"& td":{whiteSpace:"normal"}}}));function Ut(R){let _=0,I=0,L=0;return R==null||R.forEach(J=>{_+=J.merged_at?new Date(J.merged_at).getTime()-new Date(J.created_at).getTime():0,L+=J.merged_at?1:0,I+=J.closed_at?1:0}),{avgTimeUntilMerge:j().duration(_/L),mergedCount:L,closedCount:I}}var ut=R=>{const[_,I]=(0,h.useState)(20),L=ha(),F=Ye(),J=He(),pe=qe(),Y=(0,H.h_)(Ue).build(pe||"gitlab.com"),{value:Q,loading:ne,error:V}=(0,rt.Z)(async()=>{const re=await Y.getProjectDetails(J||F);if(!re)throw new Error("wrong project_slug or project_id");const Ee=await Y.getMergeRequestsStatusSummary(re.id,_);if(!Ee)throw new Error("getMergeRequestsStatusSummary error");const q=Ut(Ee);return q.mergedCount===0?{avgTimeUntilMerge:"Never",mergedToTotalRatio:"0%"}:{avgTimeUntilMerge:q.avgTimeUntilMerge.humanize(),mergedToTotalRatio:`${Math.round(q.mergedCount/_*100)}%`}},[_]);return ne?h.createElement(de.Ex,null):V?h.createElement(ae.Z,{severity:"error"},V.message):Q?h.createElement(de.rJ,{title:"Merge requests statistics",className:L.infoCard,variant:R.variant},h.createElement(ie.Z,{position:"relative"},h.createElement(de.xT,{metadata:Q}),h.createElement(ie.Z,{display:"flex",justifyContent:"flex-end"},h.createElement(fe.Z,null,h.createElement(Re.Z,{value:_,onChange:re=>I(Number(re.target.value))},h.createElement(at.Z,{value:10},"10"),h.createElement(at.Z,{value:20},"20"),h.createElement(at.Z,{value:50},"50"),h.createElement(at.Z,{value:100},"100")),h.createElement(Be.Z,null,"Number of MRs"))))):h.createElement(de.rJ,{title:"Merge Request Statistics"})};const It=(0,ze.Z)(()=>({open:{fill:"#22863a"},closed:{fill:"#cb2431"},merged:{fill:"#6f42c1"},draft:{fill:"#6a737d"}})),$t=()=>{const R=It();return h.createElement("svg",{width:"16",height:"16",className:R.open,viewBox:"0 0 16 16"},h.createElement("path",{fillRule:"evenodd",d:"M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"}))},Kt=()=>{const R=It();return h.createElement("svg",{width:"16",height:"16",className:R.closed,viewBox:"0 0 16 16"},h.createElement("path",{fillRule:"evenodd",d:"M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"}))},yn=()=>{const R=It();return h.createElement("svg",{width:"16",height:"16",className:R.merged,viewBox:"0 0 16 16"},h.createElement("path",{fillRule:"evenodd",d:"M5 3.254V3.25v.005a.75.75 0 110-.005v.004zm.45 1.9a2.25 2.25 0 10-1.95.218v5.256a2.25 2.25 0 101.5 0V7.123A5.735 5.735 0 009.25 9h1.378a2.251 2.251 0 100-1.5H9.25a4.25 4.25 0 01-3.8-2.346zM12.75 9a.75.75 0 100-1.5.75.75 0 000 1.5zm-8.5 4.5a.75.75 0 100-1.5.75.75 0 000 1.5z"}))},zt=R=>{switch(!0){case R.state==="opened":return h.createElement(le.ZP,{title:"Open"},h.createElement("span",null,h.createElement($t,null)));case R.state==="locked":return h.createElement(le.ZP,{title:"Open"},h.createElement("span",null,h.createElement($t,null)));case R.state==="merged":return h.createElement(le.ZP,{title:"Merged"},h.createElement("span",null,h.createElement(yn,null)));case R.state==="closed":return h.createElement(le.ZP,{title:"Closed"},h.createElement("span",null,h.createElement(Kt,null)));default:return null}},Wn=(0,ze.Z)(R=>({infoCard:{marginBottom:R.spacing(3),"& + .MuiAlert-root":{marginTop:R.spacing(3)}},releaseTitle:{...R.typography.h6,margin:0,marginRight:"0.5rem"},releaseTagIcon:{verticalAlign:"middle"}}));function Ht(R){switch(R){case"patch":return _=>{try{return(0,st.prerelease)(_.tag_name)===null}catch{return!0}};case"all":default:return()=>!0}}const vn=R=>{const{show:_="all",limit:I=6}=R,L=Wn(),F=Ye(),J=He(),pe=qe(),Y=(0,H.h_)(Ue).build(pe||"gitlab.com"),{value:Q,loading:ne,error:V}=(0,rt.Z)(async()=>{const q=await Y.getProjectDetails(J||F);if(!q)throw new Error("wrong project_slug or project_id");const xe=await Y.getReleasesSummary(q.id);if(!xe)throw new Error("Release data are undefined!");return{releases:xe,projectDetails:q}},[]),re=Q==null?void 0:Q.projectDetails.web_url;if(ne)return h.createElement(de.Ex,null);if(V)return h.createElement(ae.Z,{severity:"error",className:L.infoCard},V.message);let Ee=[];return(Q==null?void 0:Q.releases)!=null&&(Q==null||Q.releases.filter(Ht(_)).sort((q,xe)=>{try{return(0,st.rcompare)(q.tag_name,xe.tag_name)}catch{return q.tag_name>xe.tag_name?1:-1}}).forEach(q=>{if(!(0,st.valid)(q.tag_name)){Ee.push(q);return}Ee.findIndex(Pe=>q.tag_name.startsWith(Pe.tag_name))<0&&Ee.push(q)})),Ee=Ee.sort((q,xe)=>{try{return(0,st.rcompare)(q.tag_name,xe.tag_name)}catch{return q.tag_name>xe.tag_name?-1:1}}).slice(0,I),Ee.length===0?h.createElement(h.Fragment,null):h.createElement(de.rJ,{title:"Releases",deepLink:{link:`${re}/-/releases`,title:"go to Releases",onClick:q=>{q.preventDefault(),window.open(`${re}/-/releases`)}},className:L.infoCard},h.createElement(we.Z,{container:!0,spacing:2,justifyContent:"flex-start"},Ee.map(q=>h.createElement(we.Z,{item:!0,key:q.tag_name},h.createElement(Mt.Z,{href:re+"/-/releases/"+q.tag_name,color:"inherit",target:"_blank",rel:"noopener noreferrer"},h.createElement("div",{className:L.releaseTitle},q.name),h.createElement(rn.Z,{fontSize:"inherit",className:L.releaseTagIcon}),q.tag_name)))))},Rn=(0,ze.Z)(R=>({infoCard:{marginBottom:R.spacing(3),"& + .MuiAlert-root":{marginTop:R.spacing(3)}}})),Gt=({})=>{const R=Rn(),_=Ye(),I=He(),L=qe(),F=Ft(),J=(0,H.h_)(Ue).build(L||"gitlab.com"),{value:pe,loading:Y,error:Q}=(0,rt.Z)(async()=>{const ne=await J.getProjectDetails(I||_);if(!ne)throw new Error("wrong project_slug or project_id");let V;try{V=await J.getReadme(ne.id,ne.default_branch,F)}catch{V=void 0}return{readme:V}},[]);return Y?h.createElement(de.Ex,null):Q?h.createElement(ae.Z,{severity:"error",className:R.infoCard},Q.message):h.createElement(de.rJ,{title:"README",className:R.infoCard},h.createElement(de.SA,{content:(pe==null?void 0:pe.readme)||"No README found",dialect:"gfm"}))},Fn=R=>bn(R)||dt(R),bn=R=>{var _;return Boolean((_=R.metadata.annotations)==null?void 0:_[xt])},dt=R=>{var _;return Boolean((_=R.metadata.annotations)==null?void 0:_[un])}},17826:function(Me,Fe,c){c.d(Fe,{Z2:function(){return H.E}});var H=c(43379),Ke=c(30705),j=c(28879),N=c.n(j),Bt=c(77491),o=c.n(Bt),bt=c(64989),h=c.n(bt),Ze=c(2784),de=c(2204),le=c(70811),_e=c(49462),nt=c(34520),ie=c(97699),we=c.n(ie)},70811:function(Me,Fe,c){c.d(Fe,{Ex:function(){return qn},Kq:function(){return Zo},Or:function(){return vo},SA:function(){return go},T3:function(){return la},VC:function(){return Ko},VY:function(){return ta},dh:function(){return zo},iA:function(){return Dr},qE:function(){return Sa},rJ:function(){return Xt},rU:function(){return Ae},vK:function(){return Uo},wA:function(){return $o},xT:function(){return ol},yu:function(){return P}});var H=c(30705),Ke=c(61837),j=c(90436),N=c(19928),Bt=c.n(N),o=c(2784),bt=c(43434),h=c(79692),Ze=c(60364),de=c(41128),le=c(15459),_e=c(12420),nt=c(76600),ie=c(41547),we=c(77277),Dt=c(86689),ze=c(72779),fe=c.n(ze),Re=c(76635),at=c.n(Re),Be=c(73557),Mt=c(39857),Ct=c(16060),ae=c(95544),rt=c(56553),ua=c(26639),da=c(39595),an=c(80030),rn=c(19353),st=c(95074),ma=c(41156),Ue=c(13725),St=c(46506),pa=c.n(St),wn=c(54073),Bn=c.n(wn),kt=c(10368),Dn=c(19574),ga=c.n(Dn),te=c(60905),on=c(16628),fa=c(30001),Ea=c(50576),ln=c(68095),Mn=c(11776),_t=c(38402),Nt=c(49378),sn=c(27616),cn=c(8284),xt=c(70660),un=c(91750),dn=c(38016),Wt=c(85256),kn=c(28316),Ye=c(48049),He=c(51209),qe=c(32407),mn=c(28156),Ft=c(32272),Zt=c(15277),pn=c.n(Zt),Pt=c(29862),gn=c(67358),fn=c(94339),ct=c(14503),En=c(24579),$e=c(32552),hn=c(27597),ha=c(39307),Ut=c(21324),Nn=c(7089),ut=c(42494),It=c(74603),$t=c(56939),Kt=c(12231),yn=c(73698),zt=c(72379),Wn=c(74600),Ht=c.n(Wn),vn=c(37390),Rn=c(97485),Gt=c(15584),Fn=c(89571),bn=c(19126),dt=c.n(bn),R=c(18671),_=c(6487),I=c(99152),L=c(67222),F=c(21070),J=c(90324),pe=c(98281),Y=c(33375),Q=c(44233),ne=c(27604),V=c(36444),re=c(37971),Ee=c(59709),q=c(17373),xe=c(3702),Pe=c(93111),et=c(44311),ot=c.n(et),mt=c(15703),Zn=c(18473),ya=c(57998),va=c(83543),Un=c(59797),Ra=c(26739),$n=c(86619),Kn=c(98989),Se=c(30195),ar=c(63955),zn=c(74828),rr=c(45455),ke=c.n(rr);function or(e){const[t,n]=useState([]),a=useApi(alertApiRef),{anchorOrigin:r={vertical:"top",horizontal:"center"},transientTimeoutMs:s}=e,u=s!=null?s:5e3;useEffect(()=>{const g=a.alert$().subscribe(S=>n(C=>C.concat(S)));return()=>{g.unsubscribe()}},[a]);const[p]=t;if(useEffect(()=>{if(p&&p.display==="transient"){const g=setTimeout(()=>{n(S=>{const C=S.filter(T=>T!==p);return C.length===S.length?S:C})},u);return()=>clearTimeout(g)}},[p,u]),t.length===0)return null;const E=()=>{n(g=>g.filter(S=>S!==p))};return React.createElement(Snackbar,{open:!0,anchorOrigin:r},React.createElement(Alert,{action:React.createElement(IconButton,{color:"inherit",size:"small",onClick:E,"data-testid":"error-button-close"},React.createElement(CloseIcon,null)),severity:p.severity},React.createElement(Typography,{component:"span"},String(p.message),t.length>1&&React.createElement("em",null,` (${t.length-1} older ${pluralize("message",t.length-1)})`))))}function ba(e){let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);let n="#";for(let a=0;a<3;a++){const r=t>>a*8&255;n+=`00${r.toString(16)}`.slice(-2)}return n}function Ca(e){var t;return(t=e.match(/(?<!\p{L})\p{L}/gu))==null?void 0:t.join("").slice(0,2)}const Cn=(0,h.Z)(e=>({avatar:{width:"4rem",height:"4rem",color:e.palette.common.white},avatarText:{fontWeight:e.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Sa(e){const{displayName:t,picture:n,customStyles:a}=e,r=Cn();let s={...a};const u={fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight};return n||(s={backgroundColor:ba(t||""),...a}),o.createElement(bt.Z,{alt:t,src:n,className:r.avatar,style:s},t&&o.createElement(j.Z,{variant:"h6",component:"span",className:r.avatarText,style:u},Ca(t)))}function lr(){const[e]=(0,Be.is)(o.createElement(Be.AW,{index:!0,element:o.createElement("div",null)}));return!e.index}const ir=(0,h.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Hn=e=>/^([a-z+.-]+):/.test(e),_a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,jt=window.open;if(jt&&!jt.__backstage){const e=function(...n){const a=String(n[0]);if(_a.test(a))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return jt.apply(this,n)};e.__backstage=!0,window.open=e}const xa=()=>{try{return(0,H.h_)(H.Ds).getOptionalString("app.baseUrl")}catch{return}},Pa=()=>{var e;const t="http://sample.dev",n=(e=xa())!=null?e:"/",{pathname:a}=new URL(n,t);return(0,Re.trimEnd)(a,"/")},Sn=e=>{let t=String(e);const n=Pa(),a=Hn(t),r=t.startsWith(n);return!a&&!r&&(t=n.concat(t)),t},_n=e=>{var t;return e instanceof Array?e.map(_n).join(" ").trim():typeof e=="object"&&e?_n((t=e==null?void 0:e.props)==null?void 0:t.children):["string","number"].includes(typeof e)?String(e):""},Ae=o.forwardRef(({onClick:e,noTrack:t,...n},a)=>{const r=ir(),s=(0,H.z$)(),u=lr()?Sn(n.to):n.to,p=_n(n.children)||u,E=Hn(u),g=E&&!!/^https?:/.exec(u);if(_a.test(u))throw new Error("Link component rejected javascript: URL as a security precaution");const S=C=>{e==null||e(C),t||s.captureEvent("click",p,{attributes:{to:u}})};return E?o.createElement(Dt.Z,{...g?{target:"_blank",rel:"noopener"}:{},...n,...n["aria-label"]?{"aria-label":`${n["aria-label"]}, Opens in a new window`}:{},ref:a,href:u,onClick:S,className:fe()(r.externalLink,n.className)},n.children,o.createElement(j.Z,{component:"span",className:r.visuallyHidden},", Opens in a new window")):o.createElement(Dt.Z,{...n,ref:a,component:Mt.rU,to:u,onClick:S})}),Ia=o.forwardRef((e,t)=>o.createElement(Ae,{ref:t,...e,color:"initial"})),xn=o.forwardRef((e,t)=>o.createElement(we.Z,{ref:t,component:Ia,...e})),Gn=null;function Oe(e){const{text:t,tooltipDelay:n=1e3,tooltipText:a="Text copied to clipboard","aria-label":r="Copy text"}=e,s=(0,H.h_)(H.VE),[u,p]=(0,o.useState)(!1),[{error:E},g]=(0,st.Z)();(0,o.useEffect)(()=>{E&&s.post(E)},[E,s]);const S=C=>{C.stopPropagation(),p(!0),g(t)};return o.createElement(o.Fragment,null,o.createElement(an.ZP,{id:"copy-test-tooltip",title:a,placement:"top",leaveDelay:n,onClose:()=>p(!1),open:u},o.createElement(Ke.Z,{onClick:S,"aria-label":r},o.createElement(rn.Z,null))))}function pt(e){const{text:t,language:n,showLineNumbers:a=!1,highlightedNumbers:r,customStyle:s,showCopyCodeButton:u=!1}=e,p=(0,Ze.Z)(),E=p.palette.type==="dark"?ua.Z:da.Z,g=p.palette.type==="dark"?"#256bf3":"#e6ffed";return o.createElement(ae.Z,{position:"relative"},o.createElement(rt.Z,{customStyle:s,language:n,style:E,showLineNumbers:a,wrapLines:!0,lineNumberStyle:{color:p.palette.textVerySubtle},lineProps:S=>r!=null&&r.includes(S)?{style:{backgroundColor:g}}:{}},t),u&&o.createElement(ae.Z,{position:"absolute",top:0,right:0},o.createElement(Oe,{text:t})))}function Pn(e){const{title:t,to:n}=e,a=useMediaQuery(r=>r.breakpoints.down("xs"));return n?a?React.createElement(IconButton,{component:Link$1,color:"primary",title:t,size:"small",to:n},React.createElement(AddCircleOutline,null)):React.createElement(Button$1,{component:Link$1,variant:"contained",color:"primary",to:n},t):null}var Tt;(e=>{(t=>{t.TOP_BOTTOM="TB",t.BOTTOM_TOP="BT",t.LEFT_RIGHT="LR",t.RIGHT_LEFT="RL"})(e.Direction||(e.Direction={})),(t=>{t.UP_LEFT="UL",t.UP_RIGHT="UR",t.DOWN_LEFT="DL",t.DOWN_RIGHT="DR"})(e.Alignment||(e.Alignment={})),(t=>{t.NETWORK_SIMPLEX="network-simplex",t.TIGHT_TREE="tight-tree",t.LONGEST_PATH="longest-path"})(e.Ranker||(e.Ranker={})),(t=>{t.LEFT="l",t.RIGHT="r",t.CENTER="c"})(e.LabelPosition||(e.LabelPosition={}))})(Tt||(Tt={}));const In=(0,h.Z)(e=>({node:{fill:e.palette.primary.light,stroke:e.palette.primary.light},text:{fill:e.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function jn({node:{id:e}}){const t=In(),[n,a]=React.useState(0),[r,s]=React.useState(0),u=React.useRef(null);React.useLayoutEffect(()=>{if(u.current){let{height:S,width:C}=u.current.getBBox();S=Math.round(S),C=Math.round(C),(S!==r||C!==n)&&(a(C),s(S))}},[n,r]);const p=10,E=n+p*2,g=r+p*2;return React.createElement("g",null,React.createElement("rect",{className:t.node,width:E,height:g,rx:10}),React.createElement("text",{ref:u,className:t.text,y:g/2,x:E/2,textAnchor:"middle",alignmentBaseline:"middle"},e))}const Ta="arrow-marker",Aa="node",Tn="edge",Oa="label",La=(0,kt.Z)(e=>({node:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Vn=e=>React.createElement(jn,{...e});function wa({render:e=Vn,setNode:t,node:n}){const{width:a,height:r,x:s=0,y:u=0}=n,p=n,E=La(),g=React.useRef(null);return React.useLayoutEffect(()=>{if(g.current){let{height:S,width:C}=g.current.getBBox();S=Math.round(S),C=Math.round(C),(S!==r||C!==a)&&t(n.id,{...n,height:S,width:C})}},[n,a,r,t]),React.createElement("g",{ref:g,"data-testid":Aa,className:E.node,transform:`translate(${s-a/2},${u-r/2})`},e({node:p}))}const Ba=(0,kt.Z)(e=>({text:{fill:e.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Da({edge:{label:e}}){const t=Ba();return React.createElement("text",{className:t.text,textAnchor:"middle"},e)}const Ma=(0,kt.Z)(e=>({path:{strokeWidth:1,stroke:e.palette.textSubtle,fill:"none",transition:`${e.transitions.duration.shortest}ms`},label:{transition:`${e.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Jn=e=>React.createElement(Da,{...e});function At({render:e=Jn,setEdge:t,id:n,edge:a,curve:r}){const{x:s=0,y:u=0,width:p,height:E,points:g}=a,S=a,C=Ma(),T=React.useRef(null);React.useLayoutEffect(()=>{if(T.current){let{height:W,width:K}=T.current.getBBox();W=Math.round(W),K=Math.round(K),(W!==E||K!==p)&&t(n,{...a,height:W,width:K})}},[a,E,p,t,n]);let x="";const B=React.useMemo(()=>d3Shape.line().x(W=>W.x).y(W=>W.y).curve(d3Shape[r]),[r]);if(g){const W=g.filter(K=>isFinite(K.x)&&isFinite(K.y));x=B(W)||""}return React.createElement(React.Fragment,null,x&&React.createElement("path",{"data-testid":Tn,className:C.path,d:x}),S.label?React.createElement("g",{ref:T,"data-testid":Oa,className:C.label,transform:`translate(${s},${u})`},e({edge:S})):null)}const gt="workspace";function oo(e){var t,n;const{edges:a,nodes:r,renderNode:s,direction:u=Tt.Direction.TOP_BOTTOM,align:p,nodeMargin:E=50,edgeMargin:g=10,rankMargin:S=50,paddingX:C=0,paddingY:T=0,acyclicer:x,ranker:B=Tt.Ranker.NETWORK_SIMPLEX,labelPosition:W=Tt.LabelPosition.RIGHT,labelOffset:K=10,edgeRanks:ce=1,edgeWeight:Ce=1,renderLabel:We,defs:z,zoom:me="enabled",curve:ue="curveMonotoneX",fit:je="grow",...tt}=e,Ve=useTheme$1(),[Je,An]=React.useState(100),[vt,tr]=React.useState(100),oe=React.useRef(new dagre.graphlib.Graph),[tn,sa]=React.useState(((t=oe.current.graph())==null?void 0:t.width)||0),[Rt,nr]=React.useState(((n=oe.current.graph())==null?void 0:n.height)||0),[Ie,lt]=React.useState([]),[Ot,Lt]=React.useState([]),he=Math.max(tn,Je),be=Math.max(Rt,vt),nn=Math.min(Rt,vt),wt=je==="grow"?be:nn,On=React.useMemo(()=>debounce(ve=>{if(!ve)return;const Te=d3Selection.select(ve),ye=d3Selection.select(ve.getElementById(gt));function Qe(){Te.call(d3Zoom.zoom().scaleExtent([1,1/0]).on("zoom",it=>{it.transform.x=Math.min(0,Math.max(it.transform.x,he-he*it.transform.k)),it.transform.y=Math.min(0,Math.max(it.transform.y,be-be*it.transform.k)),ye.attr("transform",it.transform)}))}me==="enabled"?Qe():me==="enable-on-click"&&Te.on("click",()=>Qe());const{width:Xe,height:ca}=ve.getBoundingClientRect();Je!==Xe&&An(Xe),vt!==ca&&tr(ca)},100),[vt,Je,he,be,me]),ro=React.useCallback(()=>{const ve=oe.current.nodes(),Te=oe.current.edges();ve.forEach(ye=>{r.some(Xe=>Xe.id===ye)||oe.current.removeNode(ye)}),Te.forEach(ye=>{a.some(Xe=>Xe.from===ye.v&&Xe.to===ye.w)||oe.current.removeEdge(ye.v,ye.w)}),r.forEach(ye=>{const Qe=oe.current.nodes().find(Xe=>ye.id===Xe);if(Qe&&oe.current.node(Qe)){const{width:Xe,height:ca,x:it,y:Xi}=oe.current.node(Qe);oe.current.setNode(Qe,{...ye,width:Xe,height:ca,x:it,y:Xi})}else oe.current.setNode(ye.id,{...ye,width:0,height:0})}),a.forEach(ye=>{oe.current.setEdge(ye.from,ye.to,{...ye,label:ye.label,width:0,height:0,labelpos:W,labeloffset:K,weight:Ce,minlen:ce})})},[a,r,W,K,Ce,ce]),Ln=React.useMemo(()=>debounce(()=>{dagre.layout(oe.current);const{height:ve,width:Te}=oe.current.graph(),ye=Math.max(0,ve||0),Qe=Math.max(0,Te||0);sa(Qe),nr(ye),lt(oe.current.nodes()),Lt(oe.current.edges())},250,{leading:!0}),[]);React.useEffect(()=>(oe.current.setGraph({rankdir:u,align:p,nodesep:E,edgesep:g,ranksep:S,marginx:C,marginy:T,acyclicer:x,ranker:B}),ro(),Ln(),Ln.cancel),[x,p,u,g,C,T,E,S,B,ro,Ln]);function Ji(ve,Te){return oe.current.setNode(ve,Te),Ln(),oe.current}function Qi(ve,Te){return oe.current.setEdge(ve,Te),Ln(),oe.current}return React.createElement("svg",{ref:On,...tt,width:"100%",height:wt,viewBox:`0 0 ${he} ${be}`},React.createElement("defs",null,React.createElement("marker",{id:Ta,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},React.createElement("path",{fill:Ve.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),z),React.createElement("g",{id:gt},React.createElement("svg",{width:tn,height:Rt,y:be/2-Rt/2,x:he/2-tn/2,viewBox:`0 0 ${tn} ${Rt}`},Ot.map(ve=>{const Te=oe.current.edge(ve);return Te?React.createElement(At,{key:`${ve.v}-${ve.w}`,id:ve,setEdge:Qi,render:We,edge:Te,curve:ue}):null}),Ie.map(ve=>{const Te=oe.current.node(ve);return Te?React.createElement(wa,{key:ve,setNode:Ji,render:s,node:Te}):null}))))}const ka=(0,h.Z)(e=>{var t,n;return{root:{padding:e.spacing(0),marginBottom:e.spacing(0),marginTop:e.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:e.spacing(6),marginTop:-e.spacing(3),zIndex:"unset"},icon:{fontSize:e.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:e.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:e.palette.banner.link}},button:{color:(t=e.palette.banner.closeButtonColor)!=null?t:"inherit"},info:{backgroundColor:e.palette.banner.info},error:{backgroundColor:e.palette.banner.error},warning:{backgroundColor:(n=e.palette.banner.warning)!=null?n:e.palette.banner.error}}},{name:"BackstageDismissableBanner"}),sr=e=>{var t;const{variant:n,message:a,id:r,fixed:s=!1}=e,u=ka(),E=useApi(storageApiRef).forBucket("notifications"),g=(t=E.snapshot("dismissedBanners").value)!=null?t:[],[S,C]=useState(new Set(g)),T=useObservable(E.observe$("dismissedBanners"));useEffect(()=>{var B;if(T!=null&&T.value){const W=(B=T==null?void 0:T.value)!=null?B:[];C(new Set(W))}},[T==null?void 0:T.value]);const x=()=>{E.set("dismissedBanners",[...S,r])};return React.createElement(Snackbar,{anchorOrigin:s?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!S.has(r),classes:{root:classNames(u.root,!s&&u.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(u.content,u[n]),message:u.message},message:a,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:u.button,onClick:x},React.createElement(CloseIcon,{className:u.icon}))]}))},Na=(0,h.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),cr=({missing:e})=>{const t=Na();switch(e){case"field":return React.createElement("img",{src:missingAnnotation,className:t.generalImg,alt:"annotation is missing"});case"info":return React.createElement("img",{src:noInformation,alt:"no Information",className:t.generalImg});case"content":return React.createElement("img",{src:createComponent,alt:"create Component",className:t.generalImg});case"data":return React.createElement("img",{src:noBuild,alt:"no Build",className:t.generalImg});default:return null}},Wa=(0,h.Z)(e=>({root:{backgroundColor:e.palette.background.default,padding:e.spacing(2,0,0,0)},action:{marginTop:e.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Fa(e){const{title:t,description:n,missing:a,action:r}=e,s=Wa();return React.createElement(Grid,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:s.root,spacing:2},React.createElement(Grid,{item:!0,xs:12,md:6},React.createElement(Grid,{container:!0,direction:"column"},React.createElement(Grid,{item:!0,xs:!0},React.createElement(Typography,{variant:"h5"},t)),React.createElement(Grid,{item:!0,xs:!0},React.createElement(Typography,{variant:"body1"},n)),React.createElement(Grid,{item:!0,xs:!0,className:s.action},r))),React.createElement(Grid,{item:!0,xs:12,md:6,className:s.imageContainer},typeof a=="string"?React.createElement(cr,{missing:a}):a.customImage))}const Qn=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Xn=/^.*ANNOTATION.*$/m,Yn=Qn.match(Xn)[0],Za=Qn.split(`
`).findIndex(e=>Xn.test(e)),ur=(0,h.Z)(e=>({code:{borderRadius:6,margin:e.spacing(2,0),background:e.palette.type==="dark"?"#444":e.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Ua(e){return Array.from(Array(e+1).keys(),t=>t+Za)}function dr(e){const t=e.map(n=>Yn.replace("ANNOTATION",n)).join(`
`);return Qn.replace(Yn,t)}function mr(e){const t=e.length<=1;return React.createElement(React.Fragment,null,"The ",t?"annotation":"annotations"," ",e.map(n=>React.createElement("code",null,n)).reduce((n,a)=>React.createElement(React.Fragment,null,n,", ",a))," ",t?"is":"are"," missing. You need to add the"," ",t?"annotation":"annotations"," to your component if you want to enable this tool.")}function l(e){const{annotation:t,readMoreUrl:n}=e,a=Array.isArray(t)?t:[t],r=n||"https://backstage.io/docs/features/software-catalog/well-known-annotations",s=ur();return React.createElement(Fa,{missing:"field",title:"Missing Annotation",description:mr(a),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:s.code},React.createElement(pt,{text:dr(a),language:"yaml",showLineNumbers:!0,highlightedNumbers:Ua(a.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Ae,to:r},"Read more"))})}const i=(e,t)=>(t.palette.type==="light"?de._j:de.$n)(t.palette[e].light,.6),d=(e,t)=>(t.palette.type==="light"?de.$n:de._j)(t.palette[e].light,.9),m=(0,h.Z)(e=>({root:{marginRight:e.spacing(1),fill:({severity:t})=>i(t,e)}})),f=({severity:e})=>{const t=m({severity:e});return o.createElement(un.Z,{classes:t})},y=({severity:e})=>{const t=m({severity:e});return o.createElement(dn.Z,{classes:t})},v=(0,h.Z)(e=>({panel:{backgroundColor:({severity:t})=>d(t,e),color:({severity:t})=>i(t,e),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:t})=>i(t,e),fontWeight:e.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:t})=>i(t,e),backgroundColor:({severity:t})=>d(t,e)},details:{width:"100%",display:"block",color:e.palette.textContrast,backgroundColor:e.palette.background.default,border:`1px solid ${e.palette.border}`,padding:e.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),b=e=>e.charAt(0).toLocaleUpperCase("en-US")+e.slice(1);function A(e){const{severity:t="warning",title:n,message:a,children:r,defaultExpanded:s}=e,u=v({severity:t}),p=b(t)+(n?`: ${n}`:"");return o.createElement(sn.Z,{defaultExpanded:s!=null?s:!1,className:u.panel,role:"alert"},o.createElement(cn.Z,{expandIcon:o.createElement(y,{severity:t}),className:u.summary},o.createElement(f,{severity:t}),o.createElement(j.Z,{className:u.summaryText,variant:"subtitle1"},p)),(a||r)&&o.createElement(xt.Z,null,o.createElement(te.Z,{container:!0},a&&o.createElement(te.Z,{item:!0,xs:12},o.createElement(j.Z,{className:u.message,variant:"body1"},a)),r&&o.createElement(te.Z,{item:!0,xs:12,className:u.details},r))))}const O=(0,h.Z)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageErrorPanel"}),w=({error:e,message:t,stack:n,children:a})=>{const r=O();return o.createElement(Mn.Z,{dense:!0},o.createElement(_t.Z,{alignItems:"flex-start"},o.createElement(Nt.Z,{classes:{secondary:r.text},primary:"Error",secondary:e}),o.createElement(Oe,{text:e})),o.createElement(_t.Z,{alignItems:"flex-start"},o.createElement(Nt.Z,{classes:{secondary:r.text},primary:"Message",secondary:t}),o.createElement(Oe,{text:t})),n&&o.createElement(_t.Z,{alignItems:"flex-start"},o.createElement(Nt.Z,{classes:{secondary:r.text},primary:"Stack Trace",secondary:n}),o.createElement(Oe,{text:n})),a)};function P(e){const{title:t,error:n,defaultExpanded:a,children:r}=e;return o.createElement(A,{severity:"error",title:t!=null?t:n.message,defaultExpanded:a},o.createElement(w,{error:n.name,message:n.message,stack:n.stack,children:r}))}const k=(0,h.Z)(e=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:e.spacing(2)},divider:{margin:e.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function U(e){var t;const{title:n,error:a,defaultExpanded:r}=e,s=k();if(a.name!=="ResponseError")return React.createElement(P,{title:n!=null?n:a.message,defaultExpanded:r,error:a});const{body:u,cause:p}=a,{request:E,response:g}=u,S=`${g.statusCode}: ${p.name}`,C=E&&`${E.method} ${E.url}`,T=p.message.replace(/\\n/g,`
`),x=(t=p.stack)==null?void 0:t.replace(/\\n/g,`
`),B=JSON.stringify(u,void 0,2);return React.createElement(P,{title:n!=null?n:a.message,defaultExpanded:r,error:{name:S,message:T,stack:x}},C&&React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:s.text},primary:"Request",secondary:E?`${C}`:void 0}),React.createElement(Oe,{text:C})),React.createElement(React.Fragment,null,React.createElement(Divider,{component:"li",className:s.divider}),React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:s.text},primary:"Full Error as JSON"})),React.createElement(pt,{language:"json",text:B,showCopyCodeButton:!0})))}function M(e){const t=document.createElement("div");return t.setAttribute("id",e),t}function D(e){document.body.insertBefore(e,document.body.lastElementChild.nextElementSibling)}function Z(e){const t=useRef(null);useEffect(function(){const r=document.querySelector(`#${e}`),s=r||M(e);return r||D(s),s.appendChild(t.current),function(){t.current.remove(),s.childNodes.length===-1&&s.remove()}},[e]);function n(){return t.current||(t.current=document.createElement("div")),t.current}return n()}const G="core.calloutSeen";function ge(){const[e,t]=useState(()=>{const a=localStorage.getItem(G);return a?JSON.parse(a):{}}),n=useCallback((a,r)=>{const s=localStorage.getItem(G),p={...s?JSON.parse(s):{},[a]:r};t(p),localStorage.setItem(G,JSON.stringify(p))},[]);return{states:e,setState:n}}function $(e){const{states:t,setState:n}=ge(),a=useCallback(()=>{n(e,!0)},[n,e]);return{seen:t[e]===!0,markSeen:a}}function X(e){const{seen:t,markSeen:n}=$(e);return{show:t===!1,hide:n}}const ee=(0,h.Z)(e=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${e.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:e.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function se(e){const{featureId:t,title:n,description:a,children:r}=e,{show:s,hide:u}=X(t),p=Z("core.callout"),E=useRef(null),[g,S]=useState(),C=ee(),T=useCallback(()=>{if(E.current){const x=E.current.getBoundingClientRect(),B=Math.max(x.width,x.height),W=800,K=x.x-(B-x.width)/2-W,ce=x.y-(B-x.height)/2-W,Ce=B+2*W,We=450,z=x.x+x.width/2-We,me=x.y-(B-x.height)/2+B+20;S({dotLeft:K,dotTop:ce,dotSize:Ce,borderWidth:W,textTop:me,textLeft:z,textWidth:We})}},[]);return useEffect(()=>(window.addEventListener("resize",T),window.addEventListener("scroll",T),()=>{window.removeEventListener("resize",T),window.removeEventListener("scroll",T)}),[T]),useLayoutEffect(T,[E.current,T]),s?React.createElement(React.Fragment,null,React.createElement(Box,{className:C.featureWrapper,ref:E},r),createPortal(React.createElement(Box,{className:C.backdrop},React.createElement(ClickAwayListener,{onClickAway:u},React.createElement(React.Fragment,null,React.createElement(Box,{className:C.dot,"data-testid":"dot",style:{left:g==null?void 0:g.dotLeft,top:g==null?void 0:g.dotTop,width:g==null?void 0:g.dotSize,height:g==null?void 0:g.dotSize,borderWidth:g==null?void 0:g.borderWidth},onClick:u,onKeyDown:u,role:"button",tabIndex:0},React.createElement(Box,{className:C.pulseCircle})),React.createElement(Box,{className:C.text,"data-testid":"text",style:{left:g==null?void 0:g.textLeft,top:g==null?void 0:g.textTop,width:g==null?void 0:g.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},n),React.createElement(Typography,null,a))))),p)):React.createElement(React.Fragment,null,r)}const ft=(0,h.Z)(e=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:e.palette.text.secondary,cursor:"default"},primary:{color:e.palette.primary.main},secondary:{color:e.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Et({color:e="primary",disabled:t=!1,href:n="#",icon:a=React.createElement(LinkIcon,null),label:r,onClick:s,title:u}){const p=ft();return t?React.createElement(Box,{title:u,className:classNames(p.link,p.disabled)},a,React.createElement(Typography,{variant:"caption",component:"span",className:p.label},r)):React.createElement(Ae,{title:u,className:classNames(p.link,p[e]),to:n,onClick:s},a,React.createElement(Typography,{variant:"caption",component:"span",className:p.label},r))}const ht=(0,h.Z)(e=>({links:{margin:e.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:e.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function De(e){const{links:t}=e,n=ht();return React.createElement("nav",{className:n.links},t.map((a,r)=>React.createElement(Et,{key:r+1,...a})))}const Le=e=>{const t=e==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${t}) 0%,
    hsla(0, 0%, ${t}, 0.987) 8.1%,
    hsla(0, 0%, ${t}, 0.951) 15.5%,
    hsla(0, 0%, ${t}, 0.896) 22.5%,
    hsla(0, 0%, ${t}, 0.825) 29%,
    hsla(0, 0%, ${t}, 0.741) 35.3%,
    hsla(0, 0%, ${t}, 0.648) 41.2%,
    hsla(0, 0%, ${t}, 0.55) 47.1%,
    hsla(0, 0%, ${t}, 0.45) 52.9%,
    hsla(0, 0%, ${t}, 0.352) 58.8%,
    hsla(0, 0%, ${t}, 0.259) 64.7%,
    hsla(0, 0%, ${t}, 0.175) 71%,
    hsla(0, 0%, ${t}, 0.104) 77.5%,
    hsla(0, 0%, ${t}, 0.049) 84.5%,
    hsla(0, 0%, ${t}, 0.013) 91.9%,
    hsla(0, 0%, ${t}, 0) 100%
  `},Vt=100,Jt=10,lo=(0,h.Z)(e=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Vt,height:`calc(100% + ${Jt}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Jt,background:`linear-gradient(90deg, ${Le(e.palette.type)})`},fadeRight:{right:-Jt,background:`linear-gradient(270deg, ${Le(e.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-e.spacing(2)},buttonRight:{right:-e.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function io(e){const[[t,n],a]=React.useState([0,0]);return React.useLayoutEffect(()=>{const r=e.current;if(!r){a([0,0]);return}const s=()=>{const u=r.scrollLeft,p=r.scrollWidth-r.offsetWidth-r.scrollLeft;a([u,p])};return s(),r.addEventListener("scroll",s),window.addEventListener("resize",s),()=>{r.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[e]),[t,n]}function so(e,t,n){const[a,r]=React.useState(0);return React.useLayoutEffect(()=>{if(a===0)return;const s=window.performance.now(),u=requestAnimationFrame(p=>{if(!e.current)return;const E=p-s,g=Math.abs(a)*E/t,C=Math.max(n,g)*Math.sign(a);e.current.scrollBy({left:C});const T=a-C;Math.sign(a)!==Math.sign(T)?r(0):r(T)});return()=>cancelAnimationFrame(u)},[e,a,t,n]),r}function Yi(e){const{scrollStep:t=100,scrollSpeed:n=50,minScrollDistance:a=5,children:r,...s}=e,u=lo(e),p=React.useRef(),[E,g]=io(p),S=so(p,n,a),C=T=>{p.current&&S(T?t:-t)};return React.createElement(Box,{...s,className:u.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:u.container,ref:p},r),React.createElement(Box,{className:classNames(u.fade,u.fadeLeft,{[u.fadeHidden]:E===0})}),React.createElement(Box,{className:classNames(u.fade,u.fadeRight,{[u.fadeHidden]:g===0})}),E>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>C(!1),className:classNames(u.button,u.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),g>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>C(!0),className:classNames(u.button,u.buttonRight,{})},React.createElement(ChevronRight,null)))}const co=(0,h.Z)(e=>({alpha:{color:e.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function qi(e){const t=co(e),{shorthand:n,alpha:a}=e;return n?React.createElement(Typography,{component:"span",className:t[a?"alpha":"beta"],style:{fontSize:"120%"}},a?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:t[a?"alpha":"beta"]},a?"Alpha":"Beta")}const uo=(0,o.lazy)(()=>Promise.all([c.e(7757),c.e(1639)]).then(c.bind(c,61639)).then(e=>({default:e.RealLogViewer})));function es(e){const{Progress:t}=useApp().getComponents();return React.createElement(Suspense,{fallback:React.createElement(t,null)},React.createElement(uo,{...e}))}const mo=(0,h.Z)(e=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${e.palette.border}`},"& th, & td":{border:`1px solid ${e.palette.border}`,padding:e.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:e.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:e.palette.background.paper},"& tr":{backgroundColor:e.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:e.palette.background.default},"& a":{color:e.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),pr=(e,t)=>t?typeof t=="string"?e+t:o.Children.toArray(t.props.children).reduce(pr,e):e,Qt=({level:e,children:t})=>{const r=o.Children.toArray(t).reduce(pr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return o.createElement(`h${e}`,{id:r},t)},po={code:({inline:e,className:t,children:n,...a})=>{const r=String(n).replace(/\n+$/,""),s=/language-(\w+)/.exec(t||"");return!e&&s?o.createElement(pt,{language:s[1],text:r}):o.createElement("code",{className:t,...a},n)},h1:Qt,h2:Qt,h3:Qt,h4:Qt,h5:Qt,h6:Qt};function go(e){const{content:t,dialect:n="gfm",linkTarget:a,transformLinkUri:r,transformImageUri:s,className:u}=e,p=mo();return o.createElement(qe.D,{remarkPlugins:n==="gfm"?[mn.Z]:[],className:`${p.markdown} ${u}`,children:t,components:po,linkTarget:a,transformLinkUri:r,transformImageUri:s})}const fo=(0,h.Z)(e=>({root:{paddingLeft:e.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Eo=({request:e,busy:t,setBusy:n})=>{const a=fo(),[r,s]=useState(),u=async()=>{n(!0);try{await e.trigger()}catch(E){s(isError(E)?E.message:"An unspecified error occurred")}finally{n(!1)}},p=e.provider.icon;return React.createElement(ListItem,{disabled:t,classes:{root:a.root}},React.createElement(ListItemAvatar,null,React.createElement(p,{fontSize:"large"})),React.createElement(ListItemText,{primary:e.provider.title,secondary:r&&React.createElement(Typography,{color:"error"},r)}),React.createElement(Button$1,{color:"primary",variant:"contained",onClick:u},"Log in"))},ho=(0,h.Z)(e=>({dialog:{paddingTop:e.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:e.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:e.spacing(2,0)}}),{name:"OAuthRequestDialog"});function ts(e){var t;const n=ho(),[a,r]=useState(!1),s=useApi(oauthRequestApiRef),p=(t=useApi(configApiRef).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?t:!1,E=useObservable(useMemo(()=>s.authRequest$(),[s]),[]),g=()=>{E.forEach(S=>S.reject())};return React.createElement(Dialog,{open:Boolean(E.length),fullWidth:!0,maxWidth:"xs",classes:{paper:n.dialog},"aria-labelledby":"oauth-req-dialog-title"},React.createElement("main",null,React.createElement(DialogTitle,{classes:{root:n.title},id:"oauth-req-dialog-title"},React.createElement(Typography,{className:n.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),p?React.createElement(Typography,null,"This will trigger a http redirect to OAuth Login."):null),React.createElement(DialogContent,{dividers:!0,classes:{root:n.contentList}},React.createElement(List,null,E.map(S=>React.createElement(Eo,{key:S.provider.title,request:S,busy:a,setBusy:r}))))),React.createElement(DialogActions,{classes:{root:n.actionButtons}},React.createElement(Button$1,{onClick:g},"Reject All")))}const yo=(0,h.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function vo(e){var t;const[n,a]=(0,o.useState)(!1),r=(0,Pt.t)(),s=yo(),u=p=>{r()&&a(p)};return o.createElement(an.ZP,{title:(t=e.title)!=null?t:e.text||"",placement:e.placement,disableHoverListener:!n},o.createElement(pn(),{text:e.text,line:e.line,onToggled:u,containerClassName:s.container}))}function qn(e){const t=(0,Ze.Z)(),[n,a]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const r=setTimeout(()=>a(!0),t.transitions.duration.short);return()=>clearTimeout(r)},[t.transitions.duration.short]),n?o.createElement(gn.Z,{...e,"data-testid":"progress"}):o.createElement(ae.Z,{display:"none"})}const Ro=(0,h.Z)(e=>({root:{maxWidth:"fit-content",padding:e.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:e.palette.textSubtle},arrow:{color:e.palette.textSubtle}}),{name:"BackstageBottomLink"});function gr(e){const{link:t,title:n,onClick:a}=e,r=Ro();return o.createElement(ae.Z,null,o.createElement(Wt.Z,null),o.createElement(Ae,{to:t,onClick:a,underline:"none"},o.createElement(ae.Z,{display:"flex",alignItems:"center",className:r.root},o.createElement(ae.Z,{className:r.boxTitle,fontWeight:"fontWeightBold",m:1},o.createElement(j.Z,null,o.createElement("strong",null,n))),o.createElement(hn.Z,{className:r.arrow}))))}const bo=e=>{const{slackChannel:t}=e;if(t){if(typeof t=="string")return o.createElement(j.Z,null,"Please contact ",t," for help.");if(!t.href)return o.createElement(j.Z,null,"Please contact ",t.name," for help.")}else return null;return o.createElement(xn,{to:t.href,variant:"contained"},t.name)},fr=class extends o.Component{constructor(t){super(t),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(t,n){console.error(`ErrorBoundary, error: ${t}, info: ${n}`),this.setState({error:t,errorInfo:n})}render(){const{slackChannel:t,children:n}=this.props,{error:a}=this.state;return a?o.createElement(P,{title:"Something Went Wrong",error:a},o.createElement(bo,{slackChannel:t})):n}},Co=(0,h.Z)(e=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:e.spacing(2,2,2,2.5)},headerTitle:{fontWeight:e.typography.fontWeightBold},headerSubheader:{paddingTop:e.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),So=(0,le.Z)(e=>({root:{display:"inline-block",padding:e.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(ct.Z),Er={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Xt(e){const{title:t,subheader:n,divider:a=!0,deepLink:r,slackChannel:s,errorBoundaryProps:u,variant:p,children:E,headerStyle:g,headerProps:S,icon:C,action:T,actionsClassName:x,actions:B,cardClassName:W,actionsTopRight:K,className:ce,noPadding:Ce,titleTypographyProps:We}=e,z=Co();let me={},ue={};p&&p.split(/[\s]+/g).forEach(Je=>{me={...me,...Er.card[Je]},ue={...ue,...Er.cardContent[Je]}});const je=()=>!n&&!C?null:o.createElement("div",{className:z.headerSubheader,"data-testid":"info-card-subheader"},n&&o.createElement("div",{className:z.subheader},n),C),tt=u||(s?{slackChannel:s}:{});return o.createElement(fn.Z,{style:me,className:ce},o.createElement(fr,{...tt},t&&o.createElement($e.Z,{classes:{root:z.header,title:z.headerTitle,subheader:z.headerSubheader,avatar:z.headerAvatar,action:z.headerAction,content:z.headerContent},title:t,subheader:je(),action:T,style:{...g},titleTypographyProps:We,...S}),K&&o.createElement(So,null,K),a&&o.createElement(Wt.Z,null),o.createElement(En.Z,{className:fe()(W,{[z.noPadding]:Ce}),style:ue},E),B&&o.createElement(ct.Z,{className:x},B),r&&o.createElement(gr,{...r})))}const _o=(0,h.Z)(e=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:e.typography.pxToRem(45),fontWeight:e.typography.fontWeightBold,color:e.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),hr={fractional:!0,inverse:!1,unit:"%",max:100},yr=({palette:e,value:t,inverse:n,max:a})=>{if(isNaN(t))return"#ddd";const r=a||hr.max,s=n?r-t:t;return s<r/3?e.status.error:s<r*(2/3)?e.status.warning:e.status.ok};function xo(e){const[t,n]=useState(null),{getColor:a=yr}=e,r=_o(e),{palette:s}=useTheme(),{value:u,fractional:p,inverse:E,unit:g,max:S,description:C}={...hr,...e},T=p?Math.round(u*S):u,x=S!==100?Math.round(u):T,[B,W]=useState(!1);return useEffect(()=>{const K=t,ce=()=>W(!0),Ce=()=>W(!1);return K&&C?(K.addEventListener("mouseenter",ce),K.addEventListener("mouseleave",Ce),()=>{K.removeEventListener("mouseenter",ce),K.removeEventListener("mouseleave",Ce)}):()=>{W(!1)}},[C,t]),React.createElement(Box,{ref:n,className:r.root},React.createElement(Circle,{strokeLinecap:"butt",percent:T,strokeWidth:12,trailWidth:12,strokeColor:a({palette:s,value:x,inverse:E,max:S}),className:r.circle}),C&&B?React.createElement(Box,{className:r.description},C):React.createElement(Box,{className:r.overlay},isNaN(u)?"N/A":`${x}${g}`))}const Po=(0,h.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function ns(e){const t=Po(e),{title:n,subheader:a,progress:r,inverse:s,deepLink:u,description:p,icon:E,variant:g,getColor:S}=e,C={inverse:s,description:p,getColor:S,value:r};return React.createElement(Box,{className:t.root},React.createElement(Xt,{title:n,subheader:a,deepLink:u,variant:g,icon:E},React.createElement(xo,{...C})))}function as(e){const{value:t,getColor:n=yr,width:a="thick"}=e,{palette:r}=useTheme();if(isNaN(t))return null;let s=Math.round(t*100*100)/100;s>100&&(s=100);const u=a==="thick"?4:1,p=n({palette:r,value:s,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${s}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:s,strokeWidth:u,trailWidth:u,strokeColor:p})))}const Io=(0,h.Z)(e=>(0,_e.Z)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),To=()=>{const e=Io();return o.createElement(zt.Z,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Ao=(0,h.Z)(e=>(0,_e.Z)({icon:{position:"absolute",right:e.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Oo=()=>{const e=Ao();return o.createElement(zt.Z,{className:e.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},Lo=(0,le.Z)(e=>(0,_e.Z)({root:{"label + &":{marginTop:e.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:e.palette.primary.main}},input:{borderRadius:e.shape.borderRadius,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:e.typography.body1.fontSize,padding:e.spacing(1.25,3.25,1.25,1.5),transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:e.palette.background.paper,borderRadius:e.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(It.Z),wo=(0,h.Z)(e=>(0,_e.Z)({formControl:{margin:e.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:e.typography.body2.fontSize,fontFamily:e.typography.fontFamily,color:e.palette.text.primary,"&.Mui-focused":{color:e.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Bo(e){const{multiple:t,items:n,label:a,placeholder:r,selected:s,onChange:u,triggerReset:p,native:E=!1,disabled:g=!1,margin:S}=e,C=wo(),[T,x]=(0,o.useState)(s||(t?[]:"")),[B,W]=(0,o.useState)(!1);(0,o.useEffect)(()=>{x(t?[]:"")},[p,t]),(0,o.useEffect)(()=>{x(s||(t?[]:""))},[s,t]);const K=z=>{x(z.target.value),u(z.target.value)},ce=z=>{if(g){z.preventDefault();return}W(me=>t&&!(z.target instanceof HTMLElement)?!0:!me)},Ce=()=>{W(!1)},We=z=>()=>{const me=T.filter(ue=>ue!==z);x(me),u(me)};return o.createElement(ae.Z,{className:C.root},o.createElement(ut.Z,{className:C.formControl},o.createElement($t.Z,{className:C.formLabel},a),o.createElement(yn.Z,{"aria-label":a,value:T,native:E,disabled:g,"data-testid":"select",displayEmpty:!0,multiple:t,margin:S,onChange:K,open:B,onOpen:ce,onClose:Ce,input:o.createElement(Lo,null),label:a,renderValue:z=>{var me;return t&&T.length!==0?o.createElement(ae.Z,{className:C.chips},z.map(ue=>{var je,tt;return o.createElement(Nn.Z,{key:(je=n.find(Ve=>Ve.value===ue))==null?void 0:je.value,label:(tt=n.find(Ve=>Ve.value===ue))==null?void 0:tt.label,clickable:!0,onDelete:We(ue),className:C.chip})})):o.createElement(j.Z,null,T.length===0?r||"":(me=n.find(ue=>ue.value===z))==null?void 0:me.label)},IconComponent:()=>B?o.createElement(Oo,null):o.createElement(To,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},r&&!t&&o.createElement(Kt.Z,{value:[]},r),E?n&&n.map(z=>o.createElement("option",{value:z.value,key:z.value},z.label)):n&&n.map(z=>o.createElement(Kt.Z,{key:z.value,value:z.value},t&&o.createElement(Ut.Z,{color:"primary",checked:T.includes(z.value)||!1,className:C.checkbox}),z.label)))))}const $a=()=>{},vr=o.createContext({stepperLength:0,stepIndex:0,setStepIndex:$a,stepHistory:[],setStepHistory:$a,onStepChange:$a});function rs(e){const{children:t,elevated:n,onStepChange:a,activeStep:r=0}=e,[s,u]=useState(r),[p,E]=useState([0]);useEffect(()=>{u(r)},[r]);const g=[];let S;return Children.forEach(t,C=>{isValidElement(C)&&(C.props.end?S=C:g.push(C))}),React.createElement(React.Fragment,null,React.createElement(vr.Provider,{value:{stepIndex:s,setStepIndex:u,stepHistory:p,setStepHistory:E,onStepChange:a,stepperLength:Children.count(t)}},React.createElement(MuiStepper,{activeStep:s,orientation:"vertical",elevation:n?2:0},g)),s>=Children.count(t)-1&&S)}const Do=(0,h.Z)(e=>({root:{marginTop:e.spacing(3),"& button":{marginRight:e.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Mo=({text:e,handleClick:t})=>React.createElement(Button$1,{onClick:t},e||"Reset"),ko=({text:e,handleClick:t,disabled:n,last:a,stepIndex:r})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:n,"data-testid":`nextButton-${r}`,onClick:t},e||(a?"Finish":"Next")),No=({text:e,handleClick:t,disabled:n,stepIndex:a})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:n,"data-testid":`skipButton-${a}`,onClick:t},e||"Skip"),Wo=({text:e,handleClick:t,disabled:n,stepIndex:a})=>React.createElement(Button$1,{onClick:t,"data-testid":`backButton-${a}`,disabled:n},e||"Back"),Rr=({actions:e={},children:t})=>{const n=Do(),{stepperLength:a,stepIndex:r,setStepIndex:s,stepHistory:u,setStepHistory:p,onStepChange:E}=useContext(vr),g=(x,B)=>{B&&B(),E&&E(r,x),s(x)},S=()=>{const x=e.nextStep?e.nextStep(r,a-1):r+1;g(x,e.onNext),p([...u,x])},C=()=>{u.pop(),g(u[u.length-1],e.onBack),p([...u])},T=()=>{g(0,e.onRestart),p([0])};return React.createElement(Box,{className:n.root},[void 0,!0].includes(e.showBack)&&r!==0&&React.createElement(Wo,{text:e.backText,handleClick:C,disabled:r===0,stepIndex:r}),e.showSkip&&React.createElement(No,{text:e.skipText,handleClick:S,disabled:!!a&&r>=a||!!e.canSkip&&!e.canSkip(),stepIndex:r}),[void 0,!0].includes(e.showNext)&&React.createElement(ko,{text:e.nextText,handleClick:S,disabled:!!a&&r>=a||!!e.canNext&&!e.canNext(),stepIndex:r}),e.showRestart&&r!==0&&React.createElement(Mo,{text:e.restartText,handleClick:T,stepIndex:r}),t)},Fo=(0,h.Z)(e=>({end:{padding:e.spacing(3)}}),{name:"SimpleStepperStep"});function os(e){const{title:t,children:n,end:a,actions:r,...s}=e,u=Fo();return a?React.createElement(Box,{className:u.end},React.createElement(Typography,{variant:"h6"},t),n,React.createElement(Rr,{actions:{...r||{},showNext:!1}})):React.createElement(MuiStep,{...s},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},t)),React.createElement(StepContent,null,n,React.createElement(Rr,{actions:r})))}const Yt=(0,h.Z)(e=>({status:{fontWeight:e.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:e.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:e.palette.status.ok}},warning:{"&::before":{backgroundColor:e.palette.status.warning}},error:{"&::before":{backgroundColor:e.palette.status.error}},pending:{"&::before":{backgroundColor:e.palette.status.pending}},running:{"&::before":{backgroundColor:e.palette.status.running}},aborted:{"&::before":{backgroundColor:e.palette.status.aborted}}}),{name:"BackstageStatus"});function Zo(e){const t=Yt(e);return o.createElement(j.Z,{component:"span",className:fe()(t.status,t.ok),"aria-label":"Status ok","aria-hidden":"true",...e})}function ls(e){const t=Yt(e);return React.createElement(Typography,{component:"span",className:classNames(t.status,t.warning),"aria-label":"Status warning","aria-hidden":"true",...e})}function Uo(e){const t=Yt(e);return o.createElement(j.Z,{component:"span",className:fe()(t.status,t.error),"aria-label":"Status error","aria-hidden":"true",...e})}function $o(e){const t=Yt(e);return o.createElement(j.Z,{component:"span",className:fe()(t.status,t.pending),"aria-label":"Status pending","aria-hidden":"true",...e})}function Ko(e){const t=Yt(e);return o.createElement(j.Z,{component:"span",className:fe()(t.status,t.running),"aria-label":"Status running","aria-hidden":"true",...e})}function zo(e){const t=Yt(e);return o.createElement(j.Z,{component:"span",className:fe()(t.status,t.aborted),"aria-label":"Status aborted","aria-hidden":"true",...e})}const Ho=e=>(0,_e.Z)({root:{fontWeight:e.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:e.spacing(4),border:"0",verticalAlign:"top"}}),Go={root:{border:"0",verticalAlign:"top"}},jo=e=>(0,_e.Z)({root:{margin:e.spacing(0,0,-1,0)}}),Vo=e=>(0,_e.Z)({root:{padding:e.spacing(0,0,1,0)},random:{}}),Jo=(0,le.Z)(Ho,{name:"BackstageMetadataTableTitleCell"})(Gt.Z),Qo=(0,le.Z)(Go,{name:"BackstageMetadataTableCell"})(Gt.Z),Xo=({dense:e,children:t})=>o.createElement(vn.Z,{size:e?"small":"medium"},o.createElement(Rn.Z,null,t)),Yo=({title:e,children:t,...n})=>o.createElement(Fn.Z,null,e&&o.createElement(Jo,null,e),o.createElement(Qo,{colSpan:e?1:2,...n},t)),br=(0,le.Z)(jo,{name:"BackstageMetadataTableList"})(({classes:e,children:t})=>o.createElement(Mn.Z,{disablePadding:!0,className:e.root},t)),Cr=(0,le.Z)(Vo,{name:"BackstageMetadataTableListItem"})(({classes:e,children:t})=>o.createElement(_t.Z,{className:e.root},t)),Sr=(0,_e.Z)({root:{margin:"0 0",listStyleType:"none"}}),qo=e=>(0,_e.Z)({root:{...Sr.root,paddingLeft:e.spacing(1)}}),_r=(0,le.Z)(Sr,{name:"BackstageStructuredMetadataTableList"})(({classes:e,children:t})=>o.createElement(br,{classes:e},t)),xr=(0,le.Z)(qo,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:e,children:t})=>o.createElement(br,{classes:e},t));function el(e,t){const n=e.map((a,r)=>o.createElement(Cr,{key:r},Ka(a)));return t?o.createElement(xr,null,n):o.createElement(_r,null,n)}function tl(e,t,n){const a=Object.keys(e).map(r=>{const s=Ka(e[r],!0),u=n&&n.titleFormat?n.titleFormat(r):Ht()(r);return o.createElement(Cr,{key:r},o.createElement(j.Z,{variant:"body2",component:"span"},`${u}: `),s)});return t?o.createElement(xr,null,a):o.createElement(_r,null,a)}function Ka(e,t,n){return o.isValidElement(e)?o.createElement(o.Fragment,null,e):typeof e=="object"&&!Array.isArray(e)?tl(e,t,n):Array.isArray(e)?el(e,n):typeof e=="boolean"?o.createElement(o.Fragment,null,e?"\u2705":"\u274C"):o.createElement(j.Z,{variant:"body2",component:"span"},e)}const nl=({value:e,options:t})=>o.createElement(o.Fragment,null,Ka(e,t)),al=({title:e,value:t,options:n})=>o.createElement(Yo,{title:n&&n.titleFormat?n.titleFormat(e):Ht()(e)},o.createElement(nl,{value:t,options:n}));function rl(e,t){return Object.keys(e).map(n=>o.createElement(al,{key:n,title:n,value:e[n],options:t}))}function ol(e){const{metadata:t,dense:n=!0,options:a}=e,r=rl(t,a||{});return o.createElement(Xo,{dense:n},r)}function ll(e){return qs.stringify(e,{strictNullHandling:!0})}function Pr(e){return qs.parse(e,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Ir(e,t){return Pr(e)[t]}function il(e,t,n){const a={...Pr(e),[t]:n};return ll(a)}function is(e,t=250){const[n,a]=useSearchParams(),r=n.toString(),[s,u]=useState(Ir(r,e));return useEffect(()=>{const p=Ir(r,e);u(E=>isEqual(p,E)?E:p)},[r,u,e]),useDebouncedEffect(()=>{const p=il(r,e,s);r!==p&&a(p,{replace:!0})},[a,s,r,e],t),[s,u]}const sl={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Tr(){const t=useApiHolder().get(configApiRef),n=t==null?void 0:t.getOptionalConfig("app.support");return n?{url:n.getString("url"),items:n.getConfigArray("items").flatMap(a=>{var r;return{title:a.getString("title"),icon:a.getOptionalString("icon"),links:((r=a.getOptionalConfigArray("links"))!=null?r:[]).flatMap(s=>({url:s.getString("url"),title:s.getString("title")}))}})}:sl}function Ge(e,t){const a=useApp().getSystemIcon(e);return a?React.createElement(a,{...t}):React.createElement(MuiBrokenImageIcon,{...t})}function ss(e){return Ge("brokenImage",e)}function cs(e){return Ge("catalog",e)}function us(e){return Ge("chat",e)}function ds(e){return Ge("dashboard",e)}function ms(e){return Ge("docs",e)}function ps(e){return Ge("email",e)}function gs(e){return Ge("github",e)}function fs(e){return Ge("group",e)}function ea(e){return Ge("help",e)}function Es(e){return Ge("user",e)}function hs(e){return Ge("warning",e)}const cl=(0,h.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),ul=({icon:e})=>{var t;const n=useApp(),a=e&&(t=n.getSystemIcon(e))!=null?t:ea;return React.createElement(a,null)},dl=({link:e})=>{var t;return React.createElement(Ae,{to:e.url},(t=e.title)!=null?t:e.url)},ml=({item:e})=>{var t;return React.createElement(MenuItem,null,React.createElement(ListItemIcon,null,React.createElement(ul,{icon:e.icon})),React.createElement(ListItemText,{primary:e.title,secondary:(t=e.links)==null?void 0:t.reduce((n,a,r)=>[...n,r>0&&React.createElement("br",{key:r}),React.createElement(dl,{link:a,key:a.url})],[])}))};function ys(e){const{title:t,items:n,children:a}=e,{items:r}=Tr(),[s,u]=useState(!1),[p,E]=useState(null),g=cl(),S=useMediaQuery(x=>x.breakpoints.down("sm")),C=x=>{E(x.currentTarget),u(!0)},T=()=>{u(!1)};return React.createElement(React.Fragment,null,React.createElement(Box,{display:"flex",ml:1},S?React.createElement(IconButton,{color:"primary",size:"small",onClick:C,"data-testid":"support-button","aria-label":"Support"},React.createElement(ea,null)):React.createElement(Button$1,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:C,startIcon:React.createElement(ea,null)},"Support")),React.createElement(Popover,{"data-testid":"support-button-popover",open:s,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:T},React.createElement(MenuList,{className:g.popoverList,autoFocusItem:Boolean(p)},t&&React.createElement(MenuItem,{alignItems:"flex-start"},React.createElement(Typography,{variant:"subtitle1"},t)),React.Children.map(a,(x,B)=>React.createElement(MenuItem,{alignItems:"flex-start",key:`child-${B}`},x)),(n!=null?n:r).map((x,B)=>React.createElement(ml,{item:x,key:`item-${B}`}))),React.createElement(DialogActions,null,React.createElement(Button$1,{color:"primary",onClick:T,"aria-label":"Close"},"Close"))))}const pl=(0,h.Z)(e=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function ta(e){const{className:t,stretch:n,noPadding:a,children:r,...s}=e,u=pl();return o.createElement("article",{...s,className:fe()(u.root,t,{[u.stretch]:n,[u.noPadding]:a})},r)}const gl=(0,h.Z)(e=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(3),minWidth:0},defaultTab:{...e.typography.caption,padding:e.spacing(3,3),textTransform:"uppercase",fontWeight:e.typography.fontWeightBold,color:e.palette.text.secondary},selected:{color:e.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:e.palette.background.default,color:e.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function fl(e){const{tabs:t,onChange:n,selectedIndex:a}=e,[r,s]=(0,o.useState)(a!=null?a:0),u=gl(),p=(0,o.useCallback)((E,g)=>{a===void 0&&s(g),n&&a!==g&&n(g)},[a,n]);return(0,o.useEffect)(()=>{a!==void 0&&s(a)},[a]),o.createElement(ae.Z,{className:u.tabsWrapper},o.createElement(I.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:p,value:r},t.map((E,g)=>o.createElement(_.Z,{...E.tabProps,"data-testid":`header-tab-${g}`,label:E.label,key:E.id,value:g,className:u.defaultTab,classes:{selected:u.selected,root:u.tabRoot}}))))}function El(e){var t,n,a,r;const s=(0,Be.UO)(),p=e.map(({path:T,children:x})=>({caseSensitive:!1,path:`${T}/*`,element:x})).sort((T,x)=>x.path.replace(/\/\*$/,"").localeCompare(T.path.replace(/\/\*$/,""))),E=(t=(0,Be.V$)(p))!=null?t:e[0].children;let g=(n=s["*"])!=null?n:"";g.startsWith("/")||(g=`/${g}`);const[S]=(a=(0,Ct.fp)(p,g))!=null?a:[],C=S?e.findIndex(T=>`${T.path}/*`===S.route.path):0;return{index:C===-1?0:C,element:E,route:(r=e[C])!=null?r:e[0]}}function hl(e){const{routes:t}=e,n=(0,Be.s0)(),{index:a,route:r,element:s}=El(t),u=(0,o.useMemo)(()=>t.map(E=>({id:E.path,label:E.title,tabProps:E.tabProps})),[t]),p=E=>{let{path:g}=t[E];g=g.replace(/\/\*$/,""),g=g.replace(/^\//,""),n(g)};return o.createElement(o.Fragment,null,o.createElement(fl,{tabs:u,selectedIndex:a,onChange:p}),o.createElement(ta,null,o.createElement(R.q,{title:r.title}),s))}const za=()=>null;(0,H.R5)(za,"core.gatherMountPoints",!0);function Ar(e){const t=o.createElement(za,{path:"",title:""},o.createElement("div",null)).type;return o.Children.toArray(e).flatMap(n=>{if(!(0,o.isValidElement)(n))return[];if(n.type===o.Fragment)return Ar(n.props.children);if(n.type!==t)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:a,title:r,children:s,tabProps:u}=n.props;return[{path:a,title:r,children:s,tabProps:u}]})}function yl(e){const t=Ar(e.children);return o.createElement(hl,{routes:t})}yl.Route=za;const vl=(0,h.Z)(e=>({value:{marginBottom:e.spacing(.75)},subvalue:{color:e.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function vs(e){const{value:t,subvalue:n}=e,a=vl();return React.createElement(React.Fragment,null,React.createElement(Box,{className:a.value},t),React.createElement(Box,{className:a.subvalue},n))}const Rl=(0,h.Z)(e=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:e.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:e.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${e.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:e.spacing(2)}}}),{name:"BackstageTableFilters"}),bl=e=>{var t;const n=Rl(),{onChangeFilters:a}=e,[r,s]=(0,o.useState)({...e.selectedFilters}),[u,p]=(0,o.useState)(!1),E=()=>{s({}),p(g=>!g)};return(0,o.useEffect)(()=>{a(r)},[r,a]),o.createElement(ae.Z,{className:n.root},o.createElement(ae.Z,{className:n.header},o.createElement(ae.Z,{className:n.value},"Filters"),o.createElement(we.Z,{color:"primary",onClick:E},"Clear all")),o.createElement(ae.Z,{className:n.filters},((t=e.filters)==null?void 0:t.length)&&e.filters.map(g=>o.createElement(Bo,{triggerReset:u,key:g.element.label,...g.element,selected:r[g.element.label],onChange:S=>s({...r,[g.element.label]:S})}))))},Or={Add:(0,o.forwardRef)((e,t)=>o.createElement(F.Z,{...e,ref:t})),Check:(0,o.forwardRef)((e,t)=>o.createElement(pe.Z,{...e,ref:t})),Clear:(0,o.forwardRef)((e,t)=>o.createElement(Y.Z,{...e,ref:t})),Delete:(0,o.forwardRef)((e,t)=>o.createElement(Q.Z,{...e,ref:t})),DetailPanel:(0,o.forwardRef)((e,t)=>o.createElement(He.Z,{...e,ref:t})),Edit:(0,o.forwardRef)((e,t)=>o.createElement(ne.Z,{...e,ref:t})),Export:(0,o.forwardRef)((e,t)=>o.createElement(xe.Z,{...e,ref:t})),Filter:(0,o.forwardRef)((e,t)=>o.createElement(V.Z,{...e,ref:t})),FirstPage:(0,o.forwardRef)((e,t)=>o.createElement(re.Z,{...e,ref:t})),LastPage:(0,o.forwardRef)((e,t)=>o.createElement(Ee.Z,{...e,ref:t})),NextPage:(0,o.forwardRef)((e,t)=>o.createElement(He.Z,{...e,ref:t})),PreviousPage:(0,o.forwardRef)((e,t)=>o.createElement(Ye.Z,{...e,ref:t})),ResetSearch:(0,o.forwardRef)((e,t)=>o.createElement(Y.Z,{...e,ref:t})),Search:(0,o.forwardRef)((e,t)=>o.createElement(V.Z,{...e,ref:t})),SortArrow:(0,o.forwardRef)((e,t)=>o.createElement(J.Z,{...e,ref:t})),ThirdStateCheck:(0,o.forwardRef)((e,t)=>o.createElement(q.Z,{...e,ref:t})),ViewColumn:(0,o.forwardRef)((e,t)=>o.createElement(Pe.Z,{...e,ref:t}))};function Lr(e,t){const n=t.split(".");let a=e[n[0]];for(let r=1;r<n.length;++r){if(a===void 0)return a;const s=n[r];a=a[s]}return a}const Cl=(0,le.Z)(e=>({header:{padding:e.spacing(1,2,1,2.5),borderTop:`1px solid ${e.palette.grey.A100}`,borderBottom:`1px solid ${e.palette.grey.A100}`,fontWeight:e.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(L.W$),wr=(0,le.Z)(e=>({root:{padding:e.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:e.typography.fontWeightBold}},searchField:{paddingRight:e.spacing(2)}}),{name:"BackstageTableToolbar"})(L.UW),Sl=(0,h.Z)(e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:e.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),_l=(0,h.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function xl(e,t){return e.map(n=>{var a;const r=(a=n.headerStyle)!=null?a:{};let s=n.cellStyle||{};if(n.highlight)if(r.color=t.palette.textContrast,typeof s=="object")s.fontWeight=t.typography.fontWeightBold;else{const u=s;s=(p,E,g)=>({...u(p,E,g),fontWeight:t.typography.fontWeightBold})}return{...n,headerStyle:r,cellStyle:s}})}function Pl(e,t){return(0,Re.transform)(e,(n,a,r)=>{(0,Re.isEqual)(a,t[r])||(n[r]=a)})}const Br={search:"",filtersOpen:!1,filters:{}};function Il(e){const{toolbarRef:t,setSearch:n,hasFilters:a,selectedFiltersLength:r,toggleFilters:s}=e,u=Sl(),p=(0,o.useCallback)(E=>{e.onSearchChanged(E),n(E)},[e,n]);return a?o.createElement(ae.Z,{className:u.root},o.createElement(ae.Z,{className:u.root},o.createElement(Ke.Z,{onClick:s,"aria-label":"filter list"},o.createElement(V.Z,null)),o.createElement(j.Z,{className:u.title},"Filters (",r,")")),o.createElement(wr,{...e,ref:t,onSearchChanged:p})):o.createElement(wr,{...e,ref:t,onSearchChanged:p})}function Dr(e){const{data:t,columns:n,options:a,title:r,subtitle:s,filters:u,initialState:p,emptyContent:E,onStateChange:g,components:S,...C}=e,T=_l(),x=(0,Ze.Z)(),B={...Br,...p},[W,K]=(0,o.useState)(B.filtersOpen),ce=(0,o.useCallback)(()=>K(Ie=>!Ie),[K]),[Ce,We]=(0,o.useState)(0),[z,me]=(0,o.useState)(t),[ue,je]=(0,o.useState)(B.filters),tt=xl(n,x),[Ve,Je]=(0,o.useState)(B.search);(0,o.useEffect)(()=>{if(g){const Ie=Pl({search:Ve,filtersOpen:W,filters:ue},Br);g(Ie)}},[Ve,W,ue,g]);const An={headerStyle:{textTransform:"uppercase"}},vt=(0,o.useCallback)(Ie=>{var lt;return(lt=n.find(Ot=>Ot.title===Ie))==null?void 0:lt.field},[n]);(0,o.useEffect)(()=>{if(typeof t=="function")return;if(!ue){me(t);return}const Ie=Object.values(ue);if(t&&Ie.flat().length){const lt=t.filter(Ot=>!!Object.entries(ue).filter(([,Lt])=>!!Lt.length).every(([Lt,he])=>{const be=Lr(Ot,vt(Lt));return Array.isArray(be)&&Array.isArray(he)?be.some(nn=>he.includes(nn)):Array.isArray(be)?be.includes(he):Array.isArray(he)?he.includes(be):be===he}));me(lt)}else me(t);We(Ie.flat().length)},[t,ue,vt]);const tr=(Ie,lt)=>{const Ot=he=>{const be=new Set,nn=wt=>{wt!=null&&be.add(wt)};return lt&&lt.forEach(wt=>{const On=Lr(wt,vt(he));Array.isArray(On)?On.forEach(nn):nn(On)}),be},Lt=he=>({placeholder:"All results",label:he.column,multiple:he.type==="multiple-select",items:[...Ot(he.column)].sort().map(be=>({label:be,value:be}))});return Ie.map(he=>({type:he.type,element:Lt(he)}))},oe=!!(u!=null&&u.length),tn=(0,o.useCallback)(Ie=>o.createElement(Il,{setSearch:Je,hasFilters:oe,selectedFiltersLength:Ce,toggleFilters:ce,...Ie}),[ce,oe,Ce,Je]),sa=typeof t!="function"&&t.length===0,Rt=n.length,nr=(0,o.useCallback)(Ie=>E&&sa?o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{colSpan:Rt},E))):o.createElement(L.os,{...Ie}),[sa,E,Rt]);return o.createElement(ae.Z,{className:T.root},W&&t&&typeof t!="function"&&(u==null?void 0:u.length)&&o.createElement(bl,{filters:tr(u,t),selectedFilters:ue,onChangeFilters:je}),o.createElement(L.ZP,{components:{Header:Cl,Toolbar:tn,Body:nr,...S},options:{...An,...a},columns:tt,icons:Or,title:o.createElement(o.Fragment,null,o.createElement(j.Z,{variant:"h5",component:"h2"},r),s&&o.createElement(j.Z,{color:"textSecondary",variant:"body1"},s)),data:typeof t=="function"?t:z,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...C}))}Dr.icons=Object.freeze(Or);function Tl(e,t){const n=e[e.length-1];if(n)return n>=.9?t.palette.status.ok:n>=.5?t.palette.status.warning:t.palette.status.error}function Rs(e){var t;const n=useTheme();return e.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...e},e.title&&React.createElement("title",null,e.title),React.createElement(SparklinesLine,{color:(t=e.color)!=null?t:Tl(e.data,n)})):null}const Al=e=>makeStyles(t=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:t.spacing(2),textAlign:e.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:t.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ol=({title:e="Unknown page",className:t})=>React.createElement(Typography,{variant:"h4",component:"h2",className:t,"data-testid":"header-title"},e);function Ll(e){const{description:t,title:n,titleComponent:a=void 0,children:r,textAlign:s="left"}=e,u=Al({textAlign:s})(),p=a||React.createElement(Ol,{title:n,className:u.title});return React.createElement(React.Fragment,null,React.createElement(Helmet,{title:n}),React.createElement(Box,{className:u.container},React.createElement(Box,{className:u.leftItemsBox},p,t&&React.createElement(Typography,{className:u.description,variant:"body2"},t)),React.createElement(Box,{className:u.rightItemsBox},r)))}const wl=(0,h.Z)(e=>({micDrop:{maxWidth:"60%",bottom:e.spacing(2),right:e.spacing(2),[e.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:e.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Bl=()=>{const e=wl();return React.createElement("img",{src:MicDropSvgUrl,className:e.micDrop,alt:"Girl dropping mic from her hands"})},Dl=(0,h.Z)(e=>({container:{padding:e.spacing(8),[e.breakpoints.down("xs")]:{padding:e.spacing(2)}},title:{paddingBottom:e.spacing(5),[e.breakpoints.down("xs")]:{paddingBottom:e.spacing(4),fontSize:e.typography.h3.fontSize}},subtitle:{color:e.palette.textSubtle}}),{name:"BackstageErrorPage"});function bs(e){const{status:t,statusMessage:n,additionalInfo:a,supportUrl:r}=e,s=Dl(),u=useNavigate(),p=Tr();return React.createElement(Grid,{container:!0,spacing:0,className:s.container},React.createElement(Grid,{item:!0,xs:12,sm:8,md:4},React.createElement(Typography,{"data-testid":"error",variant:"body1",className:s.subtitle},"ERROR ",t,": ",n),React.createElement(Typography,{variant:"body1",className:s.subtitle},a),React.createElement(Typography,{variant:"h2",className:s.title},"Looks like someone dropped the mic!"),React.createElement(Typography,{variant:"h6"},React.createElement(Ae,{to:"#","data-testid":"go-back-link",onClick:()=>u(-1)},"Go back"),"... or please"," ",React.createElement(Ae,{to:r||p.url},"contact support")," if you think this is a bug.")),React.createElement(Bl,null))}const Ml=(0,le.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(j.Z),Ha=(0,le.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(ae.Z);function kl(e){const{children:t,...n}=e,[a,r]=React.useState(null),s=React.Children.toArray(t),[u,p,...E]=s,g=E.length?E.pop():s[s.length-1],S=s.length>3,C=B=>{r(B.currentTarget)},T=()=>{r(null)},x=Boolean(a);return React.createElement(Fragment,null,React.createElement(MaterialBreadcrumbs,{"aria-label":"breadcrumb",...n},s.length>1&&React.createElement(Ha,{clone:!0},u),s.length>2&&React.createElement(Ha,{clone:!0},p),S&&React.createElement(Ml,{onClick:C},"..."),React.createElement(Box,{style:{fontStyle:"italic"}},g)),React.createElement(Popover,{open:x,anchorEl:a,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},React.createElement(List,null,E.map((B,W)=>React.createElement(ListItem,{key:W,button:!0},React.createElement(Ha,{clone:!0},B))))))}const na=72,Mr=24,kr=18,yt={drawerWidthClosed:na,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:na,iconSize:na-Mr*2,iconPadding:Mr,selectedIndicatorWidth:3,userBadgePadding:kr,userBadgeDiameter:na-kr*2,mobileSidebarHeight:56},Nl=e=>({...yt,...e,iconContainerWidth:yt.drawerWidthClosed,iconSize:yt.drawerWidthClosed-yt.iconPadding*2,userBadgeDiameter:yt.drawerWidthClosed-yt.userBadgePadding*2}),Nr={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:yt.defaultOpenDelayMs+200},Wl=e=>({...Nr,...e}),Fl="@backstage/core/sidebar-intro-dismissed",Ne=(0,o.createContext)({sidebarConfig:yt,submenuConfig:Nr}),Ga=(0,o.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Wr={isOpen:!1,setOpen:()=>{}},Fr=(0,o.createContext)(Wr),Zr=(0,Zn.CT)("sidebar-open-state-context");function Ur(e){const{children:t,value:n}=e;return React.createElement(Fr.Provider,{value:n},React.createElement(Zr.Provider,{value:createVersionedValueMap({1:n})},t))}const aa=()=>{const e=(0,o.useContext)(Zr),t=(0,o.useContext)(Fr);if(e===void 0)return t||Wr;const n=e.atVersion(1);if(n===void 0)throw new Error("No context found for version 1.");return n},$r={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Kr=(0,o.createContext)($r),zr=(0,Zn.CT)("sidebar-pin-state-context");function Zl(e){const{children:t,value:n}=e;return React.createElement(Kr.Provider,{value:n},React.createElement(zr.Provider,{value:createVersionedValueMap({1:n})},t))}const ja=()=>{const e=(0,o.useContext)(zr),t=(0,o.useContext)(Kr);if(e===void 0)return t||$r;const n=e.atVersion(1);if(n===void 0)throw new Error("No context found for version 1.");return n},Ul=(0,h.Z)(e=>({root:{flexGrow:0,margin:e.spacing(0,2),color:e.palette.navigation.color},selected:t=>({color:`${e.palette.navigation.selectedColor}!important`,borderTop:`solid ${t.sidebarConfig.selectedIndicatorWidth}px ${e.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),$l=e=>{const{to:t,label:n,icon:a,value:r}=e,{sidebarConfig:s}=(0,o.useContext)(Ne),u=Ul({sidebarConfig:s}),p=(0,Be.TH)(),{selectedMenuItemIndex:E,setSelectedMenuItemIndex:g}=(0,o.useContext)(jr),S=(T,x)=>{g(x===E?-1:x)},C=r===E&&E>=0||r!==E&&!(E>=0)&&t===p.pathname;return o.createElement(ya.Z,{"aria-label":n,label:n,icon:a,component:Ae,to:t||p.pathname,onChange:S,value:r,selected:C,classes:u})},Hr=e=>{const{children:t,to:n,label:a,icon:r,value:s}=e,{isMobile:u}=ja();return u?o.createElement($l,{to:n,label:a,icon:r,value:s}):o.createElement(o.Fragment,null,t)},Gr=(0,h.Z)(e=>({root:{position:"fixed",backgroundColor:e.palette.navigation.background,color:e.palette.navigation.color,bottom:0,left:0,right:0,zIndex:e.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:t=>({background:e.palette.navigation.background,width:"100%",bottom:`${t.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${t.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:e.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,3)},overlayHeaderClose:{color:e.palette.text.primary},marginMobileSidebar:t=>({marginBottom:`${t.sidebarConfig.mobileSidebarHeight}px`})})),Kl=e=>orderBy(e,({props:{priority:t}})=>Number.isInteger(t)?t:-1,"desc"),zl=o.createElement(Hr).type,Hl=({children:e,label:t="Menu",open:n,onClose:a})=>{const{sidebarConfig:r}=useContext(Ne),s=Gr({sidebarConfig:r});return React.createElement(Drawer,{anchor:"bottom",open:n,onClose:a,ModalProps:{BackdropProps:{classes:{root:s.marginMobileSidebar}}},classes:{root:s.marginMobileSidebar,paperAnchorBottom:s.overlay}},React.createElement(Box,{className:s.overlayHeader},React.createElement(Typography,{variant:"h3"},t),React.createElement(IconButton,{onClick:a,classes:{root:s.overlayHeaderClose}},React.createElement(CloseIcon,null))),React.createElement(Box,{component:"nav"},e))},jr=(0,o.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Gl=e=>{const{sidebarConfig:t}=useContext(Ne),{children:n}=e,a=Gr({sidebarConfig:t}),r=useLocation(),[s,u]=useState(-1);useEffect(()=>{u(-1)},[r.pathname]);let p=useElementFilter(n,g=>g.getElements().filter(S=>S.type===zl));if(n)p.length?p=Kl(p):p.push(React.createElement(Hr,{key:"default_menu",icon:React.createElement(MenuIcon,null)},n));else return null;const E=s>=0&&!p[s].props.to;return React.createElement(Ur,{value:{isOpen:!0,setOpen:()=>{}}},React.createElement(jr.Provider,{value:{selectedMenuItemIndex:s,setSelectedMenuItemIndex:u}},React.createElement(Hl,{label:p[s]&&p[s].props.label,open:E,onClose:()=>u(-1)},p[s]&&p[s].props.children),React.createElement(BottomNavigation,{className:a.root,"data-testid":"mobile-sidebar-root",component:"nav"},p)))},Vr={getSidebarPinState(){let e;try{e=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!e},setSidebarPinState(e){return window.localStorage.setItem("sidebarPinState",JSON.stringify(e))}},jl=(0,h.Z)(e=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[e.breakpoints.up("sm")]:{paddingLeft:t=>t.isPinned?t.sidebarConfig.drawerWidthOpen:t.sidebarConfig.drawerWidthClosed},[e.breakpoints.down("xs")]:{paddingBottom:t=>t.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Jr=(0,o.createContext)({content:{contentRef:void 0}});function Cs(e){const[t,n]=useState(()=>Vr.getSidebarPinState()),{sidebarConfig:a}=useContext(Ne),r=useRef(null),s=useMemo(()=>({content:{contentRef:r}}),[r]);useEffect(()=>{Vr.setSidebarPinState(t)},[t]);const u=useMediaQuery(g=>g.breakpoints.down("xs"),{noSsr:!0}),p=()=>n(!t),E=jl({isPinned:t,sidebarConfig:a});return React.createElement(Zl,{value:{isPinned:t,toggleSidebarPinState:p,isMobile:u}},React.createElement(Jr.Provider,{value:s},React.createElement(Box,{className:E.root},e.children)))}function Qr(){const{content:e}=useContext(Jr);return{focusContent:useCallback(()=>{var n,a;(a=(n=e==null?void 0:e.contentRef)==null?void 0:n.current)==null||a.focus()},[e]),contentRef:e==null?void 0:e.contentRef}}const Xr=(0,h.Z)(e=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:e.zIndex.appBar,background:e.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:t=>({width:t.sidebarConfig.drawerWidthClosed}),drawerOpen:t=>({width:t.sidebarConfig.drawerWidthOpen,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),Vl=e=>{const{sidebarConfig:t}=useContext(Ne),{openDelayMs:n=t.defaultOpenDelayMs,closeDelayMs:a=t.defaultCloseDelayMs,disableExpandOnHover:r,children:s}=e,u=Xr({sidebarConfig:t}),p=useMediaQuery(ce=>ce.breakpoints.down("md"),{noSsr:!0}),[E,g]=useState(0),S=useRef(),{isPinned:C,toggleSidebarPinState:T}=ja(),x=()=>{C||r||(S.current&&(clearTimeout(S.current),S.current=void 0),E!==2&&!p&&(S.current=window.setTimeout(()=>{S.current=void 0,g(2)},n),g(1)))},B=()=>{C||r||(S.current&&(clearTimeout(S.current),S.current=void 0),E===1?g(0):E===2&&(S.current=window.setTimeout(()=>{S.current=void 0,g(0)},a)))},W=E===2&&!p||C,K=ce=>{ce?(g(2),T()):(g(0),T())};return React.createElement("nav",{style:{},"aria-label":"sidebar nav"},React.createElement(Jl,null),React.createElement(Ur,{value:{isOpen:W,setOpen:K}},React.createElement(Box,{className:u.root,"data-testid":"sidebar-root",onMouseEnter:r?()=>{}:x,onFocus:r?()=>{}:x,onMouseLeave:r?()=>{}:B,onBlur:r?()=>{}:B},React.createElement(Box,{className:classNames(u.drawer,u.drawerWidth,{[u.drawerOpen]:W})},s))))},Ss=e=>{var t,n;const a=Nl((t=e.sidebarOptions)!=null?t:{}),r=Wl((n=e.submenuOptions)!=null?n:{}),{children:s,disableExpandOnHover:u,openDelayMs:p,closeDelayMs:E}=e,{isMobile:g}=ja();return g?React.createElement(Gl,null,s):React.createElement(Ne.Provider,{value:{sidebarConfig:a,submenuConfig:r}},React.createElement(Vl,{openDelayMs:p,closeDelayMs:E,disableExpandOnHover:u},s))};function Jl(){const{sidebarConfig:e}=useContext(Ne),{focusContent:t,contentRef:n}=Qr(),a=Xr({sidebarConfig:e});return n!=null&&n.current?React.createElement(Button$1,{onClick:t,variant:"contained",className:classNames(a.visuallyHidden)},"Skip to content"):null}function ra(e,t,n=!1){const a=new URLSearchParams(t.search).toString(),r=dt().parse(a),s=new URLSearchParams(e.search).toString(),u=dt().parse(s),p=n?Re.isEqual:Re.isMatch;return(0,Re.isEqual)(t.pathname,e.pathname)&&p(u,r)}const Ql=(0,h.Z)(e=>{var t,n;return{item:{height:48,width:"100%","&:hover":{background:((t=e.palette.navigation.navItem)==null?void 0:t.hoverBackground)||"#6f6f6f",color:e.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:e.palette.navigation.color,padding:e.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:e.palette.common.white},label:{margin:e.spacing(1.75),marginLeft:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((n=e.palette.navigation.navItem)==null?void 0:n.hoverBackground)||"#6f6f6f",color:e.palette.navigation.selectedColor}},textContent:{color:e.palette.navigation.color,paddingLeft:e.spacing(4),paddingRight:e.spacing(1),fontSize:e.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),_s=e=>{const{title:t,subtitle:n,to:a,icon:r,dropdownItems:s,exact:u}=e,p=Ql(),{setIsHoveredOn:E}=useContext(Ga),g=()=>{E(!1)},S=useResolvedPath$1(a!=null?a:""),C=useLocation();let T=ra(C,S,u);const[x,B]=useState(!1),W=()=>{B(!x)};return s!==void 0?(s.some(K=>{const ce=resolvePath(K.to);return T=ra(C,ce,u),T}),React.createElement(Box,{className:p.itemContainer},React.createElement(Tooltip,{title:t,enterDelay:500,enterNextDelay:500},React.createElement(Button$1,{role:"button",onClick:W,onTouchStart:K=>K.stopPropagation(),className:classNames(p.item,T?p.selected:void 0)},r&&React.createElement(r,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:p.label},t,React.createElement("br",null),n&&React.createElement(Typography,{variant:"caption",component:"span",className:p.subtitle},n)),x?React.createElement(ArrowDropUpIcon,{className:p.dropdownArrow}):React.createElement(ArrowDropDownIcon,{className:p.dropdownArrow}))),s&&x&&React.createElement(Box,{className:p.dropdown},s.map((K,ce)=>React.createElement(Tooltip,{key:ce,title:K.title,enterDelay:500,enterNextDelay:500},React.createElement(Ae,{to:K.to,underline:"none",className:p.dropdownItem,onClick:g,onTouchStart:Ce=>Ce.stopPropagation()},React.createElement(Typography,{component:"span",className:p.textContent},K.title))))))):React.createElement(Box,{className:p.itemContainer},React.createElement(Tooltip,{title:t,enterDelay:500,enterNextDelay:500},React.createElement(Ae,{to:a,underline:"none",className:classNames(p.item,T?p.selected:void 0),onClick:g,onTouchStart:K=>K.stopPropagation()},r&&React.createElement(r,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:p.label},t,React.createElement("br",null),n&&React.createElement(Typography,{variant:"caption",component:"span",className:p.subtitle},n)))))},Xl=(0,h.Z)(e=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:e.spacing(7)+1},drawer:t=>{var n,a;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[e.breakpoints.up("sm")]:{marginLeft:t.left,transition:e.transitions.create("margin-left",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(a=(n=e.palette.navigation.submenu)==null?void 0:n.background)!=null?a:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:t.submenuConfig.drawerWidthClosed,transitionDelay:`${t.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:t=>({width:t.submenuConfig.drawerWidthOpen,[e.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:e.spacing(3),left:0,top:0}}),title:{fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium,color:e.palette.common.white,padding:e.spacing(2.5),[e.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Yl=e=>{const{isOpen:t}=aa(),{sidebarConfig:n,submenuConfig:a}=(0,o.useContext)(Ne),r=t?n.drawerWidthOpen:n.drawerWidthClosed,s=Xl({left:r,submenuConfig:a}),{isHoveredOn:u}=(0,o.useContext)(Ga),[p,E]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{E(u)},[u]),o.createElement(ae.Z,{className:fe()(s.drawer,{[s.drawerOpen]:p})},o.createElement(j.Z,{variant:"h5",component:"span",className:s.title},e.title),e.children)},ql=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ei=()=>{const e=ql();return React.createElement(Box,{className:e.iconContainer},React.createElement(Box,{className:e.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ti=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ni=()=>{const e=ti();return React.createElement(Box,{className:e.iconContainer},React.createElement(Box,{className:e.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},ai=e=>(0,h.Z)(t=>{var n,a,r,s;return{root:{color:t.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:e.drawerWidthClosed,justifyContent:"center"},open:{[t.breakpoints.up("sm")]:{width:e.drawerWidthOpen}},highlightable:{"&:hover":{background:(a=(n=t.palette.navigation.navItem)==null?void 0:n.hoverBackground)!=null?a:"#404040"}},highlighted:{background:(s=(r=t.palette.navigation.navItem)==null?void 0:r.hoverBackground)!=null?s:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:e.iconContainerWidth,marginRight:-t.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:t.typography.fontWeightBold,fontSize:t.typography.fontSize},searchFieldHTMLInput:{padding:t.spacing(2,0,2)},searchContainer:{width:e.drawerWidthOpen-e.iconContainerWidth},secondaryAction:{width:t.spacing(6),textAlign:"center",marginRight:t.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:t.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${e.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,color:t.palette.navigation.selectedColor},"&$closed":{width:e.drawerWidthClosed},"& $closedItemIcon":{paddingRight:e.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-e.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function oa(e){return(0,o.useMemo)(()=>ai(e),[e])()}const ri=(e,t)=>(0,H.vJ)(e.props.children,n=>{let a=!1;return n.getElements().forEach(({props:{to:r,dropdownItems:s}})=>{if(!a){if(s!=null&&s.length){s.forEach(({to:u})=>a=a||ra(t,(0,Ct.i3)(u)));return}r&&(a=ra(t,(0,Ct.i3)(r)))}}),a},[t.pathname]);function Va(e){return e.to===void 0}const oi=o.createElement(Yl).type,li=o.forwardRef(function({to:t,end:n,style:a,className:r,activeStyle:s,caseSensitive:u,activeClassName:p="active","aria-current":E="page",...g},S){let{pathname:C}=(0,Be.TH)(),{pathname:T}=(0,Be.WU)(t);u||(C=C.toLocaleLowerCase("en-US"),T=T.toLocaleLowerCase("en-US"));let x=C===T;!x&&!n&&(x=C.startsWith(`${T}/`));const B=x?E:void 0;return o.createElement(Mt.rU,{...g,to:t,ref:S,"aria-current":B,style:{...a,...x?s:void 0},className:fe()([r,x?p:void 0])})}),Yr=(0,o.forwardRef)((e,t)=>{const{icon:n,text:a,hasNotifications:r=!1,hasSubmenu:s=!1,disableHighlight:u=!1,onClick:p,noTrack:E,children:g,className:S,...C}=e,{sidebarConfig:T}=(0,o.useContext)(Ne),x=oa(T),{isOpen:B}=aa(),W=!B&&s?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},K=o.createElement(ae.Z,{style:W},o.createElement(n,{fontSize:"small"}),!B&&s?o.createElement(Kn.Z,{fontSize:"small"}):o.createElement(o.Fragment,null)),ce=o.createElement(Ra.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!r,className:fe()({[x.closedItemIcon]:!B})},K),Ce=o.createElement(o.Fragment,null,o.createElement(ae.Z,{"data-testid":"login-button",className:x.iconContainer},ce),a&&o.createElement(j.Z,{variant:"subtitle2",component:"span",className:x.label},a),o.createElement("div",{className:x.secondaryAction},g)),We=B?Ce:ce,z={onClick:p,className:fe()(S,x.root,B?x.open:x.closed,Va(e)&&x.buttonItem,{[x.highlightable]:!u})},me=(0,H.z$)(),{pathname:ue}=(0,Be.WU)(!Va(e)&&e.to?e.to:""),je=(0,o.useCallback)(tt=>{if(!E){const Ve="click",Je=a!=null?a:"Sidebar Item",An=ue?{attributes:{to:ue}}:void 0;me.captureEvent(Ve,Je,An)}p==null||p(tt)},[me,a,ue,E,p]);return Va(e)?o.createElement(we.Z,{role:"button","aria-label":a,...z,ref:t,onClick:je},We):o.createElement(li,{...z,activeClassName:x.selected,to:e.to?e.to:"",ref:t,"aria-label":a||e.to,...C,onClick:je},We)}),ii=({children:e,...t})=>{const{sidebarConfig:n}=(0,o.useContext)(Ne),a=oa(n),[r,s]=(0,o.useState)(!1),u=(0,Be.TH)(),p=ri(e,u),E=(0,ma.Z)(T=>T.breakpoints.down("sm")),g=()=>{s(!0)},S=()=>{s(!1)},C=()=>E?r?o.createElement(Un.Z,{fontSize:"small",className:a.submenuArrow}):o.createElement(va.Z,{fontSize:"small",className:a.submenuArrow}):!r&&o.createElement(Kn.Z,{fontSize:"small",className:a.submenuArrow});return o.createElement(Ga.Provider,{value:{isHoveredOn:r,setIsHoveredOn:s}},o.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:S,onTouchStart:r?S:g,onMouseEnter:g,className:fe()(r&&a.highlighted)},o.createElement(Yr,{hasSubmenu:!0,className:p?a.selected:"",...t},C()),r&&e))},si=(0,o.forwardRef)((e,t)=>{const[n]=(0,H.vJ)(e.children,a=>a.getElements().filter(r=>r.type===oi));return n?o.createElement(ii,{...e},n):o.createElement(Yr,{...e,ref:t})});function xs(e){const{sidebarConfig:t}=useContext(Ne),[n,a]=useState(""),r=oa(t),s=e.icon?e.icon:SearchIcon,u=()=>{e.onSearch(n),a("")},p=C=>{C.key==="Enter"&&(C.preventDefault(),u())},E=C=>{a(C.target.value)},g=C=>{C.preventDefault(),C.stopPropagation()},S=C=>{u(),C.preventDefault()};return React.createElement(Box,{className:r.searchRoot},React.createElement(si,{icon:s,to:e.to,onClick:S,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:n,onClick:g,onChange:E,onKeyDown:p,className:r.searchContainer,InputProps:{disableUnderline:!0,className:r.searchField},inputProps:{className:r.searchFieldHTMLInput}})))}const Ps=(0,nt.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Is=(0,nt.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),ci=(0,nt.Z)("hr")(({theme:e})=>({height:1,width:"100%",background:"#383838",border:"none",margin:e.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),ui=e=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:e.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.palette.text.secondary,borderRadius:"5px"}}),Ts=(0,nt.Z)("div")(({theme:e})=>{const t=ui(e);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":t,"&:hover":t}}),As=()=>{const{sidebarConfig:e}=useContext(Ne),t=oa(e),{isOpen:n,setOpen:a}=aa();if(useMediaQuery(u=>u.breakpoints.down("md"),{noSsr:!0}))return null;const s=()=>{a(!n)};return React.createElement(Button$1,{role:"button",onClick:s,className:t.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:t.arrows},n?React.createElement(ei,null):React.createElement(ni,null)))},di=(0,h.Z)(e=>({introCard:t=>({color:"#b5b5b5",fontSize:12,width:t.sidebarConfig.drawerWidthOpen,marginTop:e.spacing(2.25),marginBottom:e.spacing(1.5),paddingLeft:t.sidebarConfig.iconPadding,paddingRight:t.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:e.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:e.spacing(.5),"&:hover":{color:e.palette.linkHover,transition:e.transitions.create("color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:e.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function mi(e){const{sidebarConfig:t}=useContext(Ne),n=di({sidebarConfig:t}),{text:a,onClose:r}=e,s=()=>r();return React.createElement(Box,{className:n.introCard},React.createElement(Typography,{variant:"subtitle2"},a),React.createElement(Box,{className:n.introDismiss},React.createElement(IconButton,{onClick:s,className:n.introDismissLink},React.createElement(CloseIcon,{className:n.introDismissIcon}),React.createElement(Typography,{component:"span",className:n.introDismissText},"Dismiss"))))}const qr=e=>{const{text:t,onDismiss:n}=e,[a,r]=useState(!1),s=()=>{r(!0)};return React.createElement(Collapse,{in:!a,onExited:n},React.createElement(mi,{text:t,onClose:s}))},pi=null,gi="And your recently viewed plugins will pop up here!";function Os(e){const{isOpen:t}=aa(),n={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:a,set:r}=useLocalStorageValue(Fl),{starredItemsDismissed:s,recentlyViewedItemsDismissed:u}=a!=null?a:{},p=()=>{r(g=>({...n,...g,starredItemsDismissed:!0}))},E=()=>{r(g=>({...n,...g,recentlyViewedItemsDismissed:!0}))};return t?React.createElement(React.Fragment,null,!s&&React.createElement(React.Fragment,null,React.createElement(qr,{text:pi,onDismiss:p}),React.createElement(ci,null)),!u&&React.createElement(qr,{text:gi,onDismiss:E})):null}const fi=(0,h.Z)(e=>({header:{gridArea:"pageHeader",padding:e.spacing(3),width:"100%",boxShadow:e.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:e.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[e.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:e.page.fontColor,wordBreak:"break-word",fontSize:e.typography.h3.fontSize,marginBottom:0},subtitle:{color:e.page.fontColor,opacity:.8,display:"inline-block",marginTop:e.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:e.spacing(1),color:e.page.fontColor},breadcrumb:{color:e.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-e.spacing(.3),marginBottom:e.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-e.spacing(.3),marginBottom:e.spacing(.3)}}),{name:"BackstageHeader"}),Ei=({type:e,typeLink:t,classes:n,pageTitle:a})=>e?t?React.createElement(kl,{className:n.breadcrumb},React.createElement(Ae,{to:t},e),React.createElement(Typography,null,a)):React.createElement(Typography,{className:n.type},e):null,hi=({pageTitle:e,classes:t,tooltip:n})=>{const{contentRef:a}=Qr(),r=React.createElement(Typography,{ref:a,tabIndex:-1,className:t.title,variant:"h1"},e);return n?React.createElement(Tooltip,{title:n,placement:"top-start"},r):r},yi=({classes:e,subtitle:t})=>t?typeof t!="string"?React.createElement(React.Fragment,null,t):React.createElement(Typography,{className:e.subtitle,variant:"subtitle2",component:"span"},t):null;function Ja(e){const{children:t,pageTitleOverride:n,style:a,subtitle:r,title:s,tooltip:u,type:p,typeLink:E}=e,g=fi(),C=useApi(configApiRef).getOptionalString("app.title")||"Backstage",T=n||s,x=s||n,B=`${T} | %s | ${C}`,W=`${T} | ${C}`;return React.createElement(React.Fragment,null,React.createElement(Helmet,{titleTemplate:B,defaultTitle:W}),React.createElement("header",{style:a,className:g.header},React.createElement(Box,{className:g.leftItemsBox},React.createElement(Ei,{classes:g,type:p,typeLink:E,pageTitle:x}),React.createElement(hi,{classes:g,pageTitle:x,tooltip:u}),React.createElement(yi,{classes:g,subtitle:r})),React.createElement(Grid,{container:!0,className:g.rightItemsBox,spacing:4},t)))}const vi=({label:e,secondaryLabel:t,icon:n,disabled:a=!1,onClick:r})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:a,button:!0,onClick:s=>{r&&r(s)}},n&&React.createElement(ListItemIcon,null,n),React.createElement(ListItemText,{primary:e,secondary:t})));function Ls(e){const{palette:{common:{white:t}}}=useTheme(),{actionItems:n}=e,[a,r]=React.useState(!1),s=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>r(!0),"data-testid":"header-action-menu",ref:s,style:{color:t,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:a,anchorEl:s.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>r(!1)},React.createElement(List,null,n.map((u,p)=>React.createElement(vi,{key:`header-action-menu-${p}`,...u})))))}const Ri=(0,h.Z)(e=>({root:{textAlign:"left"},label:{color:e.page.fontColor,fontWeight:e.typography.fontWeightBold,letterSpacing:0,fontSize:e.typography.fontSize,marginBottom:e.spacing(1)/2,lineHeight:1},value:{color:(0,de.Fq)(e.page.fontColor,.8),fontSize:e.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),bi=({value:e,className:t})=>React.createElement(Typography,{component:typeof e=="string"?"p":"span",className:t},e);function ws(e){const{label:t,value:n,url:a}=e,r=Ri(),s=React.createElement(bi,{className:r.value,value:n||"<Unknown>"});return React.createElement(Grid,{item:!0},React.createElement(Typography,{component:"span",className:r.root},React.createElement(Typography,{className:r.label},t),a?React.createElement(Ae,{to:a},s):s))}const Ci=e=>(0,_e.Z)({root:{color:e.palette.common.white,padding:e.spacing(2,2,3),backgroundImage:e.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Si=(0,h.Z)(Ci,{name:"BackstageItemCardHeader"});function _i(e){const{title:t,subtitle:n,children:a}=e,r=Si(e);return React.createElement(Box,{className:r.root},n&&React.createElement(Typography,{variant:"subtitle2",component:"h3"},n),t&&React.createElement(Typography,{variant:"h6",component:"h4"},t),a)}function Bs(e){const{description:t,tags:n,title:a,type:r,subtitle:s,label:u,onClick:p,href:E}=e;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(_i,{title:a,subtitle:s||r})),React.createElement(CardContent,null,n!=null&&n.length?React.createElement(Box,null,n.map((g,S)=>React.createElement(Chip,{size:"small",label:g,key:S}))):null,t),React.createElement(CardActions,null,!E&&React.createElement(xn,{to:"#",onClick:p,color:"primary"},u),E&&React.createElement(xn,{to:E,color:"primary"},u)))}const xi=e=>(0,_e.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:e.spacing(2)}}),Pi=(0,h.Z)(xi,{name:"BackstageItemCardGrid"});function Ds(e){const{children:t,...n}=e,a=Pi(n);return React.createElement(Box,{className:a.root,...n},t)}const Ii=(0,h.Z)(e=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[e.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function la(e){const{themeId:t,children:n}=e,a=Ii();return o.createElement(ie.Z,{theme:r=>({...r,page:r.getPageTheme({themeId:t})})},o.createElement("main",{className:a.root},n))}function Ms(e){const{themeId:t,children:n,...a}=e;return React.createElement(la,{themeId:t},React.createElement(Ja,{...a}),n)}const Ti=Se.z.object({providerInfo:Se.z.object({}).catchall(Se.z.unknown()).optional(),profile:Se.z.object({email:Se.z.string().optional(),displayName:Se.z.string().optional(),picture:Se.z.string().optional()}),backstageIdentity:Se.z.object({token:Se.z.string(),identity:Se.z.object({type:Se.z.literal("user"),userEntityRef:Se.z.string(),ownershipEntityRefs:Se.z.array(Se.z.string())})})});var Ai=Object.defineProperty,Oi=(e,t,n)=>t in e?Ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qa=(e,t,n)=>(Oi(e,typeof t!="symbol"?t+"":t,n),n);const eo={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Li(e){const t=new Date(Date.now()+eo.defaultTokenExpiryMillis);if(!e)return t;const[n,a,r]=e.split("."),s=JSON.parse(window.atob(a));return typeof s.exp!="number"?t:new Date(s.exp*1e3-eo.tokenExpiryMarginMillis)}class wi{constructor(t){Qa(this,"options"),Qa(this,"abortController"),Qa(this,"state"),this.options=t,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:t}=this.getSessionSync(),n=t.identity.userEntityRef,a=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(n);if(!a)throw new TypeError(`Invalid user entity reference "${n}"`);return a[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const t=this.state.type==="active"?this.state.session:void 0,n=this.fetchSession().then(a=>(this.state={type:"active",session:a,expiresAt:Li(a.backstageIdentity.token)},a),a=>{throw this.state={type:"failed",error:a},a});return this.state={type:"fetching",promise:n,previous:t},n}async fetchSession(){const t=await this.options.discoveryApi.getBaseUrl("auth"),n=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,a=new Headers(n);a.set("X-Requested-With","XMLHttpRequest");const r=await fetch(`${t}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:a,credentials:"include"});if(!r.ok)throw await ResponseError.fromResponse(r);return Ti.parse(await r.json())}}const ks=e=>{const t=useApi(discoveryApiRef),[{status:n,error:a},{execute:r}]=useAsync(async()=>{const s=new wi({provider:e.provider,discoveryApi:t,headers:e.headers});await s.start(),e.onSignInSuccess(s)});return useMountEffect(r),n==="loading"?React.createElement(qn,null):a?React.createElement(P,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:a}):null};class Xa{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const t="user:default/guest";return{type:"user",userEntityRef:t,ownershipEntityRefs:[t]}}async getCredentials(){return{}}async signOut(){}}function Bi(e){const[t,n,a]=e.split(".");return JSON.parse(window.atob(n))}class Ya{constructor(t){this.result=t}getUserId(){return this.result.userId}static fromResult(t){return new Ya(t)}async getIdToken(){var t,n;return(n=(t=this.result).getIdToken)==null?void 0:n.call(t)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const t=await this.getIdToken();if(!t){const r=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}const{sub:n,ent:a}=Bi(t);return{type:"user",userEntityRef:n,ownershipEntityRefs:a!=null?a:[]}}async getCredentials(){var t,n;return{token:await((n=(t=this.result).getIdToken)==null?void 0:n.call(t))}}async signOut(){var t,n;return(n=(t=this.result).signOut)==null?void 0:n.call(t)}}var Di=Object.defineProperty,Mi=(e,t,n)=>t in e?Di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ki=(e,t,n)=>(Mi(e,typeof t!="symbol"?t+"":t,n),n);class qt{constructor(t,n,a){this.identity=t,this.authApi=n,this.profile=a,ki(this,"profilePromise")}static createGuest(){return new Xa}static fromLegacy(t){return Ya.fromResult(t)}static create(t){return new qt(t.identity,t.authApi,t.profile)}getUserId(){const t=this.identity.userEntityRef,n=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(t);if(!n)throw new TypeError(`Invalid user entity reference "${t}"`);return n[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(t){throw this.profilePromise=void 0,t}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const qa=(0,h.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),ia=({children:e})=>{const t=qa();return o.createElement(te.Z,{component:"li",item:!0,classes:t},e)},Ni={Component:({config:e,onSignInStarted:t,onSignInSuccess:n,onSignInFailure:a})=>{const{apiRef:r,title:s,message:u}=e,p=(0,H.h_)(r),E=(0,H.h_)(H.VE),g=async()=>{try{t();const S=await p.getBackstageIdentity({instantPopup:!0});if(!S)throw a(),new Error(`The ${s} provider is not configured to support sign-in`);const C=await p.getProfile();n(qt.create({identity:S.identity,profile:C,authApi:p}))}catch(S){a(),E.post(new Ft.SP("Login failed",S))}};return o.createElement(ia,null,o.createElement(Xt,{variant:"fullHeight",title:s,actions:o.createElement(we.Z,{color:"primary",variant:"outlined",onClick:g},"Sign In")},o.createElement(j.Z,{variant:"body1"},u)))},loader:async(e,t)=>{const n=e.get(t),a=await n.getBackstageIdentity({optional:!0});if(!a)return;const r=await n.getProfile();return qt.create({identity:a.identity,profile:r,authApi:n})}},Wi={Component:({onSignInStarted:e,onSignInSuccess:t})=>o.createElement(ia,null,o.createElement(Xt,{title:"Guest",variant:"fullHeight",actions:o.createElement(we.Z,{color:"primary",variant:"outlined",onClick:()=>{e(),t(new Xa)}},"Enter")},o.createElement(j.Z,{variant:"body1"},"Enter as a Guest User.",o.createElement("br",null),"You will not have a verified identity,",o.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Xa},Fi=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Zi=(0,h.Z)(e=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:e.spacing(2)}}),{name:"BackstageCustomProvider"}),to=e=>{const{ref:t,...n}=e;return{inputRef:t,...n}},Ui={Component:({onSignInStarted:e,onSignInSuccess:t})=>{const n=Zi(),{register:a,handleSubmit:r,formState:s}=(0,ar.cI)({mode:"onChange"}),{errors:u}=s,p=({userId:E,idToken:g})=>{e(),t(qt.fromLegacy({userId:E,getIdToken:g!==void 0?async()=>g:void 0,profile:{email:`${E}@example.com`}}))};return o.createElement(ia,null,o.createElement(Xt,{title:"Custom User",variant:"fullHeight"},o.createElement(j.Z,{variant:"body1"},"Enter your own User ID and credentials.",o.createElement("br",null),"This selection will not be stored."),o.createElement("form",{className:n.form,onSubmit:r(p)},o.createElement(ut.Z,null,o.createElement($n.Z,{...to(a("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(u.userId)}),u.userId&&o.createElement(zn.Z,{error:!0},u.userId.message)),o.createElement(ut.Z,null,o.createElement($n.Z,{...to(a("idToken",{required:!1,validate:E=>!E||Fi.test(E)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(u.idToken)}),u.idToken&&o.createElement(zn.Z,{error:!0},u.idToken.message)),o.createElement(we.Z,{type:"submit",color:"primary",variant:"outlined",className:n.button,disabled:!(s!=null&&s.isDirty)||!ke()(u)},"Continue"))))},loader:async()=>{}};class er{constructor(t){this.config=t}static from(t){return new er(t)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const en="@backstage/core:SignInPage:provider",no={guest:Wi,custom:Ui,common:Ni};function ao(e,t){if(e in t)throw new Error(`"${e}" ID is duplicated. IDs of identity providers have to be unique.`)}function $i(e){return e.reduce((n,a)=>{if(typeof a=="string")return ao(a,n),n[a]={components:no[a],id:a},n;const{id:r}=a;return ao(r,n),n[r]={components:no.common,id:r,config:a},n},{})}const Ki=(e,t)=>{const n=useApi(errorApiRef),a=useApiHolder(),[r,s]=useState(!0),u=useCallback(E=>{t(er.from({identityApi:E,signOut:async()=>{var g;localStorage.removeItem(en),await((g=E.signOut)==null?void 0:g.call(E))}}))},[t]);useLayoutEffect(()=>{var E;if(!r)return;const g=localStorage.getItem(en);if(g===null){s(!1);return}const S=e[g];if(!S){s(!1);return}let C=!1;return S.components.loader(a,(E=S.config)==null?void 0:E.apiRef).then(T=>{if(C){localStorage.removeItem(en);return}T?u(T):s(!1)}).catch(T=>{localStorage.removeItem(en),!C&&(n.post(T),s(!1))}),()=>{C=!0}},[r,n,t,a,e,u]);const p=useMemo(()=>Object.keys(e).map(E=>{const g=e[E],{Component:S}=g.components,C=B=>{u(B)},T=()=>{var B;localStorage.setItem(en,((B=g==null?void 0:g.config)==null?void 0:B.id)||g.id)},x=()=>{localStorage.removeItem(en)};return React.createElement(S,{key:g.id,config:g.config,onSignInStarted:T,onSignInSuccess:C,onSignInFailure:x})}),[e,u]);return[r,p]},zi=({onSignInSuccess:e,providers:t=[],title:n,align:a="left"})=>{const r=useApi(configApiRef),s=qa(),u=$i(t),[p,E]=Ki(u,e);return p?React.createElement(qn,null):React.createElement(la,{themeId:"home"},React.createElement(Ja,{title:r.getString("app.title")}),React.createElement(ta,null,n&&React.createElement(Ll,{title:n,textAlign:a}),React.createElement(Grid,{container:!0,justifyContent:a==="center"?a:"flex-start",spacing:2,component:"ul",classes:s},E)))},Hi=({provider:e,auto:t,onSignInSuccess:n})=>{const a=qa(),r=useApi(e.apiRef),s=useApi(configApiRef),[u,p]=useState(),[E,g]=useState(!1),S=async({checkExisting:C,showPopup:T})=>{try{let x;if(C&&(x=await r.getBackstageIdentity({optional:!0})),!x&&(T||t)&&(g(!0),x=await r.getBackstageIdentity({instantPopup:!0}),!x))throw new Error(`The ${e.title} provider is not configured to support sign-in`);if(!x){g(!0);return}const B=await r.getProfile();n(qt.create({identity:x.identity,authApi:r,profile:B}))}catch(x){p(x),g(!0)}};return useMountEffect(()=>S({checkExisting:!0})),E?React.createElement(la,{themeId:"home"},React.createElement(Ja,{title:s.getString("app.title")}),React.createElement(ta,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:a},React.createElement(ia,null,React.createElement(Xt,{variant:"fullHeight",title:e.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{S({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},e.message),u&&u.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},u.message)))))):React.createElement(qn,null)};function Ks(e){return"provider"in e?React.createElement(Hi,{...e}):React.createElement(zi,{...e})}const Gi=(0,h.Z)(e=>({root:{padding:e.spacing(0,2,0,2.5),minHeight:e.spacing(3)},indicator:{backgroundColor:e.palette.info.main,height:e.spacing(.3)}}),{name:"BackstageTabbedCard"}),ji=(0,le.Z)(e=>({root:{padding:e.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:e.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})($e.Z);function zs(e){const{slackChannel:t,errorBoundaryProps:n,children:a,title:r,deepLink:s,value:u,onChange:p}=e,E=Gi(),[g,S]=useState(0),C=p||((B,W)=>S(W));let T;u?React.Children.map(a,B=>{React.isValidElement(B)&&(B==null?void 0:B.props.value)===u&&(T=B==null?void 0:B.props.children)}):React.Children.map(a,(B,W)=>{React.isValidElement(B)&&W===g&&(T=B==null?void 0:B.props.children)});const x=n||(t?{slackChannel:t}:{});return React.createElement(Card,null,React.createElement(fr,{...x},r&&React.createElement(ji,{title:r}),React.createElement(Tabs,{selectionFollowsFocus:!0,classes:E,value:u||g,onChange:C},a),React.createElement(Divider,null),React.createElement(CardContent,null,T),s&&React.createElement(gr,{...s})))}const Vi=(0,h.Z)(e=>({root:{minWidth:e.spacing(6),minHeight:e.spacing(3),margin:e.spacing(0,2,0,0),padding:e.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:e.palette.text.primary}},selected:{fontWeight:e.typography.fontWeightBold}}),{name:"BackstageCardTab"});function Hs(e){const{children:t,...n}=e,a=Vi();return React.createElement(TabUI,{disableRipple:!0,classes:a,...n})}},2204:function(Me,Fe,c){c.d(Fe,{X2:function(){return rt}});var H=c(88285),Ke=c(30705),j=c(82394),N=c(2784),Bt=c(41156),o=c(60364),bt=c(77277),h=c(4190),Ze=c(95544),de=c(90436),le=c(60905),_e=c(21324),nt=c(5806),ie=c(79692),we=c(80030),Dt=c(15459),ze=c(36444),fe=c(70811),Re=c(34520),at=c(18473);function Be(l,i,d){var m;let f=((m=l==null?void 0:l.relations)==null?void 0:m.filter(y=>y.type===i).map(y=>(0,Re.of)(y.targetRef)))||[];return d!=null&&d.kind&&(f=f.filter(y=>y.kind.toLocaleLowerCase("en-US")===d.kind.toLocaleLowerCase("en-US"))),f}const Mt=(0,at.CT)("entity-context"),Ct=l=>{const{children:i,entity:d,loading:m,error:f,refresh:y}=l,v={entity:d,loading:m,error:f,refresh:y};return React.createElement(Mt.Provider,{value:createVersionedValueMap({1:v})},React.createElement(AnalyticsContext,{attributes:{...d?{entityRef:stringifyEntityRef(d)}:void 0}},i))},ae=l=>React.createElement(Ct,{entity:l.entity,loading:!Boolean(l.entity),error:void 0,refresh:void 0,children:l.children});function rt(){const l=(0,at.Vt)("entity-context");if(!l)throw new Error("Entity context is not available");const i=l.atVersion(1);if(!i)throw new Error("EntityContext v1 not available");if(!i.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:i.entity}}function ua(){const l=useVersionedContext("entity-context");if(!l)throw new Error("Entity context is not available");const i=l.atVersion(1);if(!i)throw new Error("EntityContext v1 not available");const{entity:d,loading:m,error:f,refresh:y}=i;return{entity:d,loading:m,error:f,refresh:y}}var da=c(76635),an=c(19126),rn=c(64279),st=c(18149),ma=c(829),Ue=c(19996),St=c(25505),pa=c(72779),wn=c(72579),Bn=c(11640),kt=c(3440),Dn=c(10921),ga=c(32272);const te=(0,Ke.T0)({id:"plugin.catalog.service"}),on=(0,Ke.T0)({id:"catalog-react.starred-entities"});var fa=Object.defineProperty,Ea=(l,i,d)=>i in l?fa(l,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[i]=d,ln=(l,i,d)=>(Ea(l,typeof i!="symbol"?i+"":i,d),d);class Mn{constructor(){ln(this,"starredEntities",new Set),ln(this,"subscribers",new Set),ln(this,"observable",new ObservableImpl(i=>(i.next(new Set(this.starredEntities)),this.subscribers.add(i),()=>{this.subscribers.delete(i)})))}async toggleStarred(i){this.starredEntities.delete(i)||this.starredEntities.add(i);for(const d of this.subscribers)d.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const _t=l=>{var i,d;const m=(0,Bt.Z)(b=>{var A,O;return b.breakpoints.down((O=(A=l.options)==null?void 0:A.drawerBreakpoint)!=null?O:"md")}),f=(0,o.Z)(),[y,v]=(0,N.useState)(!1);return m?N.createElement(N.Fragment,null,N.createElement(bt.Z,{style:{marginTop:f.spacing(1),marginLeft:f.spacing(1)},onClick:()=>v(!0),startIcon:N.createElement(ze.Z,null)},"Filters"),N.createElement(h.ZP,{open:y,onClose:()=>v(!1),anchor:(d=(i=l.options)==null?void 0:i.drawerAnchor)!=null?d:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},N.createElement(Ze.Z,{m:2},N.createElement(de.Z,{variant:"h6",component:"h2",style:{marginBottom:f.spacing(1)}},"Filters"),l.children))):N.createElement(le.Z,{item:!0,lg:2},l.children)},Nt=l=>N.createElement(le.Z,{item:!0,xs:12,lg:10},l.children),sn=l=>N.createElement(le.Z,{container:!0,style:{position:"relative"}},l.children);sn.Filters=_t,sn.Content=Nt;function cn(l){return l.reduce((i,d)=>({...i,...d.getCatalogFilters?d.getCatalogFilters():{}}),{})}function xt(l){return i=>l.every(d=>!d.filterEntity||d.filterEntity(i))}function un(l,i){var d;const m=(d=l.metadata.annotations)==null?void 0:d[ANNOTATION_SOURCE_LOCATION];if(m)try{const f=parseLocationRef(m),y=i.byUrl(f.target);return{locationTargetUrl:f.target,integrationType:y==null?void 0:y.type}}catch{return}}var dn=Object.defineProperty,Wt=(l,i,d)=>i in l?dn(l,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[i]=d,kn=(l,i,d)=>(Wt(l,typeof i!="symbol"?i+"":i,d),d);class Ye{constructor(i){this.value=i}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class He{constructor(i){this.value=i}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class qe{constructor(i){this.values=i}filterEntity(i){return this.values.every(d=>{var m;return((m=i.metadata.tags)!=null?m:[]).includes(d)})}toQueryValue(){return this.values}}class mn{constructor(i){this.value=i}filterEntity(i){const d=this.toUpperArray(this.value.split(/\s/)),m=this.toUpperArray([i.metadata.tags]),f=this.toUpperArray([i.metadata.name,i.metadata.title]);for(const y of d)if(m.every(v=>v!==y)&&f.every(v=>!v.includes(y)))return!1;return!0}toUpperArray(i){return i.flat().filter(d=>Boolean(d)).map(d=>d.toLocaleUpperCase("en-US"))}}class Ft{constructor(i){kn(this,"values"),this.values=i.reduce((d,m)=>{try{return d.push(stringifyEntityRef(parseEntityRef(m,{defaultKind:"Group"}))),d}catch{return d}},[])}filterEntity(i){return this.values.some(d=>getEntityRelations(i,RELATION_OWNED_BY).some(m=>stringifyEntityRef(m)===d))}toQueryValue(){return this.values}}class Zt{constructor(i){this.values=i}filterEntity(i){return this.values.some(d=>{var m;return((m=i.spec)==null?void 0:m.lifecycle)===d})}toQueryValue(){return this.values}}class pn{constructor(i){this.values=i}filterEntity(i){return this.values.some(d=>i.metadata.namespace===d)}toQueryValue(){return this.values}}class Pt{constructor(i,d,m){this.value=i,this.isOwnedEntity=d,this.isStarredEntity=m}filterEntity(i){switch(this.value){case"owned":return this.isOwnedEntity(i);case"starred":return this.isStarredEntity(i);default:return!0}}toQueryValue(){return this.value}}class gn{constructor(i){this.value=i}filterEntity(i){var d;const m=(d=i.metadata.annotations)==null?void 0:d["backstage.io/orphan"];return m!==void 0&&this.value.toString()===m}}class fn{constructor(i){this.value=i}filterEntity(i){var d,m;const f=((m=(d=i==null?void 0:i.status)==null?void 0:d.items)==null?void 0:m.length)>0;return f!==void 0&&this.value===f}}const ct=(0,N.createContext)(void 0),En=l=>{const i=useMountedState(),d=useApi(te),[m,f]=useState({}),y=useLocation(),v=useMemo(()=>{var M;return(M=qs.parse(y.search,{ignoreQueryPrefix:!0}).filters)!=null?M:{}},[y]),[b,A]=useState(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:O,error:w},P]=useAsyncFn(async()=>{var M;const D=compact(Object.values(m)),Z=xt(D),G=cn(D),ge=cn(compact(Object.values(b.appliedFilters))),$=Object.keys(m).reduce((X,ee)=>{const se=m[ee];return se!=null&&se.toQueryValue&&(X[ee]=se.toQueryValue()),X},{});if(isEqual(ge,G))A({appliedFilters:m,backendEntities:b.backendEntities,entities:b.backendEntities.filter(Z)});else{const X=await d.getEntities({filter:G});A({appliedFilters:m,backendEntities:X.items,entities:X.items.filter(Z)})}if(i()){const X=qs.parse(y.search,{ignoreQueryPrefix:!0}),ee=qs.stringify({...X,filters:$},{addQueryPrefix:!0,arrayFormat:"repeat"}),se=`${window.location.pathname}${ee}`;(M=window.history)==null||M.replaceState(null,document.title,se)}},[d,v,m,b],{loading:!0});useDebounce(P,10,[m]);const k=useCallback(M=>{f(D=>{const Z=typeof M=="function"?M(D):M;return{...D,...Z}})},[]),U=useMemo(()=>({filters:b.appliedFilters,entities:b.entities,backendEntities:b.backendEntities,updateFilters:k,queryParameters:v,loading:O,error:w}),[b,k,v,O,w]);return React.createElement(ct.Provider,{value:U},l.children)};function $e(){const l=useContext(ct);if(!l)throw new Error("useEntityList must be used within EntityListProvider");return l}function hn(){var l;const i=useApi(te),{filters:{kind:d,type:m},queryParameters:{type:f},updateFilters:y}=$e(),v=useMemo(()=>[f].flat().filter(Boolean),[f]),[b,A]=useState(v.length?v:(l=m==null?void 0:m.getTypes())!=null?l:[]);useEffect(()=>{v.length&&A(v)},[v]);const[O,w]=useState([]),P=useMemo(()=>d==null?void 0:d.value,[d]),{error:k,loading:U,value:M}=useAsync(async()=>P?await i.getEntityFacets({filter:{kind:P},facets:["spec.type"]}).then(G=>G.facets["spec.type"]||[]):[],[P,i]),D=useRef(M);return useEffect(()=>{const Z=D.current;if(D.current=M,U||!P||Z===M||!M)return;const G=[...new Set(sortBy(M,$=>-$.count).map($=>$.value.toLocaleLowerCase("en-US")))];w(G);const ge=b.filter($=>G.includes($));isEqual$1(b,ge)||A(ge)},[U,P,b,A,M]),useEffect(()=>{y({type:b.length?new He(b):void 0})},[b,y]),{loading:U,error:k,availableTypes:O,selectedTypes:b,setSelectedTypes:A}}function ha(l,i){var d,m;const f=(d=i==null?void 0:i.type)==null?void 0:d.toLocaleLowerCase("en-US"),y=(m=i==null?void 0:i.kind)==null?void 0:m.toLocaleLowerCase("en-US"),v=useApi(te),{loading:b,value:A,error:O}=useAsync(async()=>{var w;const P=(w=l.relations)==null?void 0:w.filter(U=>(!f||U.type.toLocaleLowerCase("en-US")===f)&&(!y||parseEntityRef(U.targetRef).kind===y));if(!(P!=null&&P.length))return[];const{items:k}=await v.getEntitiesByRefs({entityRefs:P.map(U=>U.targetRef)});return k.filter(U=>Boolean(U))},[l,f,y]);return{entities:A,loading:b,error:O}}function Ut(l){return typeof l=="string"?l:stringifyEntityRef(l)}function Nn(){const l=useApi(on),i=useObservable(l.starredEntitie$(),new Set),d=useCallback(f=>i.has(Ut(f)),[i]),m=useCallback(f=>l.toggleStarred(Ut(f)).then(),[l]);return{starredEntities:i,toggleStarredEntity:m,isStarredEntity:d}}function ut(l){return typeof l=="string"?l:stringifyEntityRef(l)}function It(l){const i=useApi(on),[d,m]=useState(!1);return useEffect(()=>{const y=i.starredEntitie$().subscribe({next(v){m(v.has(ut(l)))}});return()=>{y.unsubscribe()}},[l,i]),{toggleStarredEntity:useCallback(()=>i.toggleStarred(ut(l)).then(),[l,i]),isStarredEntity:d}}function $t(){const l=useApi(identityApiRef),{loading:i,value:d}=useAsync(async()=>{const{ownershipEntityRefs:f}=await l.getBackstageIdentity();return f},[]),m=useMemo(()=>{const f=new Set(d!=null?d:[]);return y=>{const v=getEntityRelations(y,RELATION_OWNED_BY).map(stringifyEntityRef);for(const b of v)if(f.has(b))return!0;return!1}},[d]);return useMemo(()=>({loading:i,isOwnedEntity:m}),[i,m])}function Kt(){const l=useApi(te),{error:i,loading:d,value:m}=useAsync(async()=>await l.getEntityFacets({facets:["kind"]}).then(y=>{var v;return((v=y.facets.kind)==null?void 0:v.map(b=>b.value).sort())||[]}),[l]);return{loading:d,error:i,allKinds:m!=null?m:[]}}function yn(l,i,d){let m=l;return i&&(m=m.filter(y=>i.some(v=>v.toLocaleLowerCase("en-US")===y.toLocaleLowerCase("en-US")))),d&&!l.some(y=>y.toLocaleLowerCase("en-US")===d.toLocaleLowerCase("en-US"))&&(m=m.concat([d])),m.sort().reduce((y,v)=>(y[v.toLocaleLowerCase("en-US")]=v,y),{})}function zt(l){var i,d;const{filters:m,queryParameters:{kind:f},updateFilters:y}=$e(),v=useMemo(()=>[f].flat()[0],[f]),[b,A]=useState((d=v!=null?v:(i=m.kind)==null?void 0:i.value)!=null?d:l.initialFilter);useEffect(()=>{v&&A(v)},[v]),useEffect(()=>{var k,U;(k=m.kind)!=null&&k.value&&A((U=m.kind)==null?void 0:U.value)},[m.kind]),useEffect(()=>{y({kind:b?new Ye(b):void 0})},[b,y]);const{allKinds:O,loading:w,error:P}=Kt();return{loading:w,error:P,allKinds:O!=null?O:[],selectedKind:b,setSelectedKind:A}}const Wn=l=>{const{allowedKinds:i,hidden:d,initialFilter:m="component"}=l,f=useApi(alertApiRef),{error:y,allKinds:v,selectedKind:b,setSelectedKind:A}=zt({initialFilter:m});if(useEffect(()=>{y&&f.post({message:"Failed to load entity kinds",severity:"error"})},[y,f]),y)return null;const O=yn(v,i,b),w=Object.keys(O).map(P=>({value:P,label:O[P]}));return d?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Select,{label:"Kind",items:w,selected:b.toLocaleLowerCase("en-US"),onChange:P=>A(String(P))}))},Ht=N.createElement(St.Z,{fontSize:"small"}),vn=N.createElement(Ue.Z,{fontSize:"small"});function Rn({selected:l}){return N.createElement(_e.Z,{icon:Ht,checkedIcon:vn,checked:l})}const Gt=(0,N.memo)(l=>{const{selected:i,value:d,availableOptions:m,showCounts:f}=l,y=f?`${d} (${m==null?void 0:m[d]})`:d;return N.createElement(nt.Z,{control:N.createElement(Rn,{selected:i}),label:y,onClick:v=>v.preventDefault()})}),Fn=(0,ie.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function bn(l){const i=Fn();return React.createElement(TextField,{variant:"outlined",...l,className:classNames(i.input,l.className)})}function dt(l){var i,d;const{label:m,name:f,path:y,showCounts:v,Filter:b,InputProps:A,initialSelectedOptions:O=[]}=l,{updateFilters:w,filters:P,queryParameters:{[f]:k}}=$e(),U=useApi(te),{value:M}=useAsync(async()=>{var ee;const se=y,{facets:ft}=await U.getEntityFacets({facets:[se],filter:(ee=P.kind)==null?void 0:ee.getCatalogFilters()});return Object.fromEntries(ft[se].map(({value:Et,count:ht})=>[Et,ht]))},[P.kind]),D=useMemo(()=>[k].flat().filter(Boolean),[k]),[Z,G]=useState(D.length?D:(d=(i=P[f])==null?void 0:i.values)!=null?d:O);useEffect(()=>{D.length&&G(D)},[D]);const ge=Object.keys(M!=null?M:{}),$=Z.length&&ge.length;useEffect(()=>{w({[f]:$?new b(Z):void 0})},[f,$,Z,b,w]);const X=P[f];return X&&typeof X=="object"&&!("values"in X)||!ge.length||ge.length<=1?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},m,React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,options:ge,value:Z,onChange:(ee,se)=>G(se),renderOption:(ee,{selected:se})=>React.createElement(Gt,{selected:se,value:ee,availableOptions:M,showCounts:!!v}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":`${String(f)}-picker-expand`}),renderInput:ee=>React.createElement(bn,{...ee,...A})})))}const R=(0,ie.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),_=l=>{const{initialFilter:i=[]}=l,d=R();return React.createElement(dt,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Zt,InputProps:{className:d.input},initialSelectedOptions:i})};function I(l,i){const d=i==null?void 0:i.defaultKind;let m,f,y;return"metadata"in l?(m=l.kind,f=l.metadata.namespace,y=l.metadata.name):(m=l.kind,f=l.namespace,y=l.name),(f===void 0||f==="")&&(f=Re.zG),(i==null?void 0:i.defaultNamespace)!==void 0?(i==null?void 0:i.defaultNamespace)===f&&(f=void 0):f===Re.zG&&(f=void 0),m=m.toLocaleLowerCase("en-US"),m=d&&d.toLocaleLowerCase("en-US")===m?void 0:m,`${m?`${m}:`:""}${f?`${f}/`:""}${y}`}function L(l,i){for(const d of["spec.profile.displayName","metadata.title"]){const m=get(l,d);if(m&&typeof m=="string")return m}return i}function F({enabled:l}){const i=useApi(te),[d]=useState(async()=>{if(!l)return[];const m="relations.ownedBy";return i.getEntityFacets({facets:[m]}).then(f=>f.facets[m].map(y=>y.value).map(y=>{const{kind:v,name:b,namespace:A}=parseEntityRef(y);return{apiVersion:"backstage.io/v1beta1",kind:v,metadata:{name:b,namespace:A}}}).sort((y,v)=>(y.metadata.namespace||"").localeCompare(v.metadata.namespace||"","en-US")||y.metadata.name.localeCompare(v.metadata.name,"en-US")||y.kind.localeCompare(v.kind,"en-US"))).catch(()=>[])});return useAsyncFn(async(m,f)=>{var y;const v=await d;if(!v)return{items:[]};const b=(y=f==null?void 0:f.limit)!=null?y:20,{text:A,start:O}=J(m),w=v.filter(k=>Q(A,k)),P=O+b;return{items:w.slice(0,P),...Y({entities:w,limit:P,payload:{text:A,start:P}})}},[d],{loading:!0,value:{items:[]}})}function J(l){return pe(l)&&l.cursor?JSON.parse(atob(l.cursor)):{text:l.text||"",start:0}}function pe(l){return!!l.cursor}function Y({entities:l,limit:i,payload:d}){return l.length>i?{cursor:btoa(JSON.stringify(d))}:{}}function Q(l,i){var d;const m=l.trim();return i.kind.includes(m)||((d=i.metadata.namespace)==null?void 0:d.includes(m))||i.metadata.name.includes(m)}function ne(){const l=useApi(te);return useAsyncFn(async(i,d)=>{var m;const f=i,y=i,v=(m=d==null?void 0:d.limit)!=null?m:20;if(y.cursor){const A=await l.queryEntities({cursor:y.cursor,limit:v});return{cursor:A.pageInfo.nextCursor,items:[...y.items,...A.items]}}const b=await l.queryEntities({fullTextFilter:{term:f.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:v});return{cursor:b.pageInfo.nextCursor,items:b.items}},[],{loading:!0})}function V({mode:l,initialSelectedOwnersRefs:i}){const d=l==="owners-only",m=ne(),f=F({enabled:d}),[y,v]=d?f:m;return[y,v,re({enabled:!d,initialSelectedOwnersRefs:i})]}function re({enabled:l,initialSelectedOwnersRefs:i}){const d=useRef({}),m=useApi(te),[,f]=useAsyncFn(async()=>{(await m.getEntitiesByRefs({entityRefs:i})).items.forEach(v=>{v&&(d.current[stringifyEntityRef(v)]=v)})},[]);return useMountEffect(()=>{l&&i.length>0&&f()}),{getEntity:y=>d.current[y],setEntity:y=>{d.current[stringifyEntityRef(y)]=y}}}const Ee=(0,ie.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),q=N.createElement(St.Z,{fontSize:"small"}),xe=N.createElement(Ue.Z,{fontSize:"small"}),Pe=l=>{var i,d,m;const f=Ee(),{mode:y="owners-only"}=l||{},{updateFilters:v,filters:b,queryParameters:{owners:A}}=$e(),[O,w]=useState(""),P=useMemo(()=>[A].flat().filter(Boolean),[A]),[k,U]=useState(P.length?P:(d=(i=b.owners)==null?void 0:i.values)!=null?d:[]),[{value:M,loading:D},Z,G]=V({mode:y,initialSelectedOwnersRefs:k});useDebouncedEffect(()=>Z({text:O}),[O,Z],250);const ge=(M==null?void 0:M.items)||[];return useEffect(()=>{if(P.length){const $=new Ft(P);U($.values)}},[P]),useEffect(()=>{v({owners:k.length?new Ft(k):void 0})},[k,v]),["user","group"].includes(((m=b.kind)==null?void 0:m.value.toLocaleLowerCase("en-US"))||"")?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},"Owner",React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,loading:D,options:ge,value:k,getOptionSelected:($,X)=>typeof X=="string"?stringifyEntityRef($)===X:$===X,getOptionLabel:$=>{const X=typeof $=="string"?G.getEntity($)||parseEntityRef($,{defaultKind:"group",defaultNamespace:"default"}):$;return L(X,I(X))},onChange:($,X)=>{w(""),U(X.map(ee=>{const se=typeof ee=="string"?ee:stringifyEntityRef(ee);return typeof ee!="string"&&G.setEntity(ee),se}))},filterOptions:$=>$,renderOption:($,{selected:X})=>{const ee=$.kind.toLocaleLowerCase("en-US")==="group";return React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:q,checkedIcon:xe,checked:X}),onClick:se=>se.preventDefault(),label:React.createElement(Box,{display:"flex",flexWrap:"wrap",alignItems:"center"},ee?React.createElement(GroupIcon,{fontSize:"small"}):React.createElement(PersonIcon,{fontSize:"small"}),"\xA0",L($,I($,{defaultKind:$.kind})))})},size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"owner-picker-expand"}),renderInput:$=>React.createElement(TextField,{...$,className:f.input,onChange:X=>{w(X.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:$=>{const X=$.currentTarget;Math.abs(X.scrollHeight-X.clientHeight-X.scrollTop)<1&&(M!=null&&M.cursor)&&Z({items:M.items,cursor:M.cursor})},"data-testid":"owner-picker-listbox"}})))},et=(0,at.uW)("catalog:entity-route-ref",()=>(0,Ke.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function ot(l){var i,d;return{kind:l.kind.toLocaleLowerCase("en-US"),namespace:(d=(i=l.metadata.namespace)==null?void 0:i.toLocaleLowerCase("en-US"))!=null?d:DEFAULT_NAMESPACE,name:l.metadata.name}}const mt=(0,N.forwardRef)((l,i)=>{var d;const{entityRef:m,defaultKind:f,title:y,children:v,...b}=l,A=(0,Ke.tg)(et);let O,w,P;if(typeof m=="string"){const D=(0,Re.of)(m);O=D.kind,w=D.namespace,P=D.name}else"metadata"in m?(O=m.kind,w=m.metadata.namespace,P=m.metadata.name):(O=m.kind,w=m.namespace,P=m.name);O=O.toLocaleLowerCase("en-US"),w=(d=w==null?void 0:w.toLocaleLowerCase("en-US"))!=null?d:Re.zG;const k={kind:O,namespace:w,name:P},U=I({kind:O,namespace:w,name:P},{defaultKind:f}),M=N.createElement(fe.rU,{...b,ref:i,to:A(k)},v,!v&&(y!=null?y:U));return y?N.createElement(we.ZP,{title:U},M):M});function Zn(l){const{entityRefs:i,defaultKind:d,getTitle:m,...f}=l,y=(0,Ke.h_)(te),{value:v=new Array,loading:b,error:A}=(0,rn.default)(async()=>{const O=i.reduce((P,k)=>typeof k=="object"&&"metadata"in k?P:[...P,(0,Re.of)(k)],new Array),w=i.filter(P=>typeof P=="object"&&"metadata"in P);return O.length>0?[...(await y.getEntities({filter:O.map(P=>({kind:P.kind,"metadata.namespace":P.namespace,"metadata.name":P.name}))})).items,...w]:w},[i]);return b?N.createElement(fe.Ex,null):A?N.createElement(fe.yu,{error:A}):N.createElement(N.Fragment,null,v.map((O,w)=>N.createElement(N.Fragment,{key:w},w>0&&", ",N.createElement(mt,{...f,defaultKind:d,entityRef:O,title:m(O)}))))}function ya(l){const{entityRefs:i,defaultKind:d,fetchEntities:m,getTitle:f,...y}=l;return m?N.createElement(Zn,{...y,defaultKind:d,entityRefs:i,getTitle:f}):N.createElement(N.Fragment,null,i.map((v,b)=>N.createElement(N.Fragment,{key:b},b>0&&", ",N.createElement(mt,{...y,defaultKind:d,entityRef:v,title:f?f(v):void 0}))))}const va=l=>{const i=useRouteRef(et);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:i(getCompoundEntityRef(l.entity))},React.createElement(InfoIcon,null))},Un=l=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${l.email}`,to:`mailto:${l.email}`},React.createElement(EmailIcon,null)),Ra=l=>{var i;const d=(i=l.entity.spec.profile)==null?void 0:i.email;return d?React.createElement(Un,{email:d}):null},$n=l=>{var i;const d=(i=l.entity.spec.profile)==null?void 0:i.email;return d?React.createElement(Un,{email:d}):null},Kn=(0,ie.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Se=4,ar=l=>{var i,d,m;const{entityRef:f,children:y,delayTime:v=500}=l,b=Kn(),A=useApiHolder(),O=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[w,P]=useState(!1),k=useMemo(()=>debounce(()=>P(!0),v),[v]),[{loading:U,error:M,value:D},Z]=useAsyncFn(async()=>{const ge=A.get(te);if(ge){const $=await ge.getEntityByRef(f);if(!$)throw new Error(`${f} not found`);return $}},[A,f]),G=()=>{P(!1),k.cancel()};return useEffect(()=>{O.isOpen&&!D&&!M&&!U&&Z()},[O.isOpen,Z,D,M,U]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:k},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(O)},y)),w&&React.createElement(HoverPopover,{PaperProps:{className:b.popoverPaper},...bindPopover(O),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:G},React.createElement(Card,null,React.createElement(CardContent,null,M&&React.createElement(ResponseErrorPanel,{error:M}),U&&React.createElement(Progress,null),D&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},D.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},D.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},D.kind),D.metadata.description&&React.createElement(Typography,{className:b.descriptionTypography,paragraph:!0},D.metadata.description),React.createElement(Typography,null,(i=D.spec)==null?void 0:i.type),React.createElement(Box,{marginTop:"0.5em"},(D.metadata.tags||[]).slice(0,Se).map(ge=>React.createElement(Chip,{key:ge,size:"small",label:ge})),((d=D.metadata.tags)==null?void 0:d.length)&&((m=D.metadata.tags)==null?void 0:m.length)>Se&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!M&&D&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(D)&&React.createElement($n,{entity:D}),isGroupEntity(D)&&React.createElement(Ra,{entity:D}),React.createElement(va,{entity:D}))))))},zn=(0,ie.Z)(l=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),rr=()=>{var l,i;const d=zn(),{filters:m,updateFilters:f}=$e(),[y,v]=useState((i=(l=m.text)==null?void 0:l.value)!=null?i:"");return useDebounce(()=>{f({text:y.length?new mn(y):void 0})},250,[y,f]),React.createElement(Toolbar,{className:d.searchToolbar},React.createElement(FormControl,null,React.createElement(Input,{"aria-label":"search",id:"input-with-icon-adornment",className:d.input,placeholder:"Search",autoComplete:"off",onChange:b=>v(b.target.value),value:y,startAdornment:React.createElement(InputAdornment,{position:"start"},React.createElement(Search,null)),endAdornment:React.createElement(InputAdornment,{position:"end"},React.createElement(IconButton,{"aria-label":"clear search",onClick:()=>v(""),edge:"end",disabled:y.length===0},React.createElement(Clear,null)))})))},ke=Object.freeze({createEntityRefColumn(l){const{defaultKind:i}=l;function d(m){var f;return((f=m.metadata)==null?void 0:f.title)||I(m,{defaultKind:i})}return{title:"Name",highlight:!0,customFilterAndSearch(m,f){return d(f).includes(m)},customSort(m,f){return d(m).localeCompare(d(f))},render:m=>{var f;return N.createElement(mt,{entityRef:m,defaultKind:i,title:(f=m.metadata)==null?void 0:f.title})}}},createEntityRelationColumn(l){const{title:i,relation:d,defaultKind:m,filter:f}=l;function y(b){return Be(b,d,f)}function v(b){return y(b).map(A=>I(A,{defaultKind:m})).join(", ")}return{title:i,customFilterAndSearch(b,A){return v(A).includes(b)},customSort(b,A){return v(b).localeCompare(v(A))},render:b=>N.createElement(ya,{entityRefs:y(b),defaultKind:m})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Re.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Re.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Re.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:l=>N.createElement(fe.Or,{text:l.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),or=[ke.createEntityRefColumn({defaultKind:"system"}),ke.createDomainColumn(),ke.createOwnerColumn(),ke.createMetadataDescriptionColumn()],ba=[ke.createEntityRefColumn({defaultKind:"component"}),ke.createSystemColumn(),ke.createOwnerColumn(),ke.createSpecTypeColumn(),ke.createSpecLifecycleColumn(),ke.createMetadataDescriptionColumn()],Ca=(0,ie.Z)(l=>({empty:{padding:l.spacing(2),display:"flex",justifyContent:"center"}})),Cn=l=>{const{entities:i,title:d,emptyContent:m,variant:f="gridItem",columns:y,tableOptions:v={}}=l,b=Ca(),A={minWidth:"0",width:"100%"};return f==="gridItem"&&(A.height="calc(100% - 10px)"),N.createElement(fe.iA,{columns:y,title:d,style:A,emptyContent:m&&N.createElement("div",{className:b.empty},m),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...v},data:i})};Cn.columns=ke,Cn.systemEntityColumns=or,Cn.componentEntityColumns=ba;const Sa=(0,ie.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),lr=l=>{const i=Sa();return React.createElement(dt,{label:"Tags",name:"tags",path:"metadata.tags",Filter:qe,showCounts:l.showCounts,InputProps:{className:i.input}})},ir=l=>{var i;const{hidden:d,initialFilter:m}=l,f=useApi(alertApiRef),{error:y,availableTypes:v,selectedTypes:b,setSelectedTypes:A}=hn();if(useEffect(()=>{y&&f.post({message:"Failed to load entity types",severity:"error"}),m&&A([m])},[y,f,m,A]),v.length===0||y)return null;const O=[{value:"all",label:"all"},...v.map(w=>({value:w,label:w}))];return d?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Select,{label:"Type",items:O,selected:(i=O.length>1?b[0]:void 0)!=null?i:"all",onChange:w=>A(w==="all"?[]:[String(w)])}))},Hn=(0,Dt.Z)({root:{color:"#f3ba37"}})(Bn.Z),_a=l=>{const{toggleStarredEntity:i,isStarredEntity:d}=It(l.entity);return React.createElement(IconButton,{"aria-label":"favorite",color:"inherit",...l,onClick:()=>i()},React.createElement(Tooltip,{title:d?"Remove from favorites":"Add to favorites"},d?React.createElement(Hn,null):React.createElement(StarBorder,null)))},jt=null;function xa(l,i){if(l)return l.toLocaleLowerCase("en-US");if(i)try{return parseEntityRef(i).kind.toLocaleLowerCase("en-US")}catch{return}}function Pa(l,i){const d=useApp(),m=xa(l,i);return m&&d.getSystemIcon(`kind:${m}`)||jt}function Sn(l){const{kind:i,entityRef:d,...m}=l,f=Pa(i,d);return React.createElement(f,{...m})}const _n=(0,ie.Z)(l=>({node:{fill:l.palette.grey[300],stroke:l.palette.grey[300],"&.primary":{fill:l.palette.primary.light,stroke:l.palette.primary.light},"&.secondary":{fill:l.palette.secondary.light,stroke:l.palette.secondary.light}},text:{fill:l.palette.getContrastText(l.palette.grey[300]),"&.primary":{fill:l.palette.primary.contrastText},"&.secondary":{fill:l.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Ae(l){const i=useApi(te),d=stringifyEntityRef(l),{loading:m,error:f,value:y}=useAsync(async()=>{const v=await i.getEntityAncestors({entityRef:d}),b=new Array,A=new Array;for(const O of v.items){const w=stringifyEntityRef(O.entity),P=w===v.rootEntityRef;b.push({id:w,root:P,...O.entity});for(const k of O.parentEntityRefs)A.push({from:w,to:k})}return{nodes:b,edges:A}},[d]);return{loading:m,error:f,nodes:(y==null?void 0:y.nodes)||[],edges:(y==null?void 0:y.edges)||[]}}function Ia({node:l}){const i=_n(),d=useNavigate(),m=useRouteRef(et),[f,y]=useState(0),[v,b]=useState(0),A=useRef(null);useLayoutEffect(()=>{if(A.current){let{height:Z,width:G}=A.current.getBBox();Z=Math.round(Z),G=Math.round(G),(Z!==v||G!==f)&&(y(G),b(Z))}},[f,v]);const O=10,w=v,P=w+O,k=P+f+O*2,U=v+O*2,M=l.metadata.title||(l.kind&&l.metadata.name&&l.metadata.namespace?I({kind:l.kind,name:l.metadata.name,namespace:l.metadata.namespace||""}):l.id),D=()=>{d(m({kind:l.kind,namespace:l.metadata.namespace||DEFAULT_NAMESPACE,name:l.metadata.name}))};return React.createElement("g",{onClick:D,className:i.clickable},React.createElement("rect",{className:classNames(i.node,l.root?"secondary":"primary"),width:k,height:U,rx:10}),React.createElement(Sn,{kind:l.kind,y:O,x:O,width:w,height:w,className:classNames(i.text,l.root?"secondary":"primary")}),React.createElement("text",{ref:A,className:classNames(i.text,l.root?"secondary":"primary"),y:U/2,x:P+(f+O*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},M))}function xn(l){const{loading:i,error:d,nodes:m,edges:f}=Ae(l.entity);return i?React.createElement(Progress,null):d?React.createElement(ResponseErrorPanel,{error:d}):React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Ancestry"),React.createElement(DialogContentText,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),React.createElement(Box,{mt:4},React.createElement(DependencyGraph,{nodes:m,edges:f,renderNode:Ia,direction:DependencyGraphTypes.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Gn=(0,ie.Z)(l=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:l.spacing(2)},helpIcon:{marginLeft:l.spacing(1),color:l.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Oe(l){const i=Gn();return React.createElement(ListItemText$1,{...l,primaryTypographyProps:{className:i.monospace},secondaryTypographyProps:{className:i.monospace}})}function pt(l){const i=Gn();return React.createElement(ListSubheader$1,{className:i.monospace},l.children)}function Pn(l){return React.createElement(Box,{mt:2},React.createElement(Card,{variant:"outlined"},React.createElement(CardContent,null,React.createElement(Typography,{variant:"h6",gutterBottom:!0},l.title,l.helpLink&&React.createElement(jn,{to:l.helpLink})),l.children)))}function Tt(l){if(l.match(/^url:https?:\/\//))return l.slice(4);if(l.match(/^https?:\/\//))return l}function In(l){const[i,d]=l.entry,m=Tt(d);return React.createElement(ListItem,null,l.indent&&React.createElement(ListItemIcon,null),React.createElement(Oe,{primary:i,secondary:m?React.createElement(Link,{to:m},d):d}))}function jn(l){const i=Gn();return React.createElement(Link,{to:l.to,className:i.helpIcon},React.createElement(HelpOutlineIcon,{fontSize:"inherit"}))}const Ta=(0,ie.Z)({root:{display:"flex",flexDirection:"column"}});function Aa(l){var i,d;const m=useApi(te),f=stringifyEntityRef(l),y=(i=l.metadata.annotations)==null?void 0:i[ANNOTATION_LOCATION],v=(d=l.metadata.annotations)==null?void 0:d[ANNOTATION_ORIGIN_LOCATION],{loading:b,error:A,value:O}=useAsync(async()=>!y&&!v?[]:(await m.getEntities({filter:[...y?[{[`metadata.annotations.${ANNOTATION_LOCATION}`]:y}]:[],...v?[{[`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]:v}]:[]]})).items,[y,v]);return{loading:b,error:A,location:y,originLocation:v,colocatedEntities:O==null?void 0:O.filter(w=>stringifyEntityRef(w)!==f)}}function Tn(l){return React.createElement(List,{dense:!0},l.header&&React.createElement(In,{key:"header",entry:l.header}),l.entities.map(i=>React.createElement(ListItem,{key:stringifyEntityRef(i)},React.createElement(ListItemIcon,null,React.createElement(Sn,{kind:i.kind})),React.createElement(Oe,{primary:React.createElement(mt,{entityRef:i})}))))}function Oa(l){const{entity:i}=l,{loading:d,error:m,location:f,originLocation:y,colocatedEntities:v}=Aa(i);if(d)return React.createElement(Progress,null);if(m)return React.createElement(ResponseErrorPanel,{error:m});if(!f&&!y)return React.createElement(Alert,{severity:"warning"},"Entity had no location information.");if(!(v!=null&&v.length))return React.createElement(Alert,{severity:"info"},"There were no other entities on this location.");if(f===y)return React.createElement(Tn,{entities:v});const b=v.filter(O=>{var w;return((w=O.metadata.annotations)==null?void 0:w[ANNOTATION_LOCATION])===f}),A=v.filter(O=>{var w;return((w=O.metadata.annotations)==null?void 0:w[ANNOTATION_ORIGIN_LOCATION])===y});return React.createElement(React.Fragment,null,b.length>0&&React.createElement(Tn,{entities:b,header:["At the same location",f]}),A.length>0&&React.createElement(Tn,{entities:A,header:["At the same origin",y]}))}function La(l){const i=Ta();return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Colocated"),React.createElement(DialogContentText,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),React.createElement("div",{className:i.root},React.createElement(Oa,{entity:l.entity})))}function Vn(l){return Object.fromEntries([...Object.entries(l)].sort((i,d)=>i[0]<d[0]?-1:1))}function wa(l){return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Entity as JSON"),React.createElement(DialogContentText,null,"This is the raw entity data as received from the catalog, on JSON form."),React.createElement(DialogContentText,null,React.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},React.createElement(CodeSnippet,{text:JSON.stringify(Vn(l.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Ba=(0,ie.Z)({root:{display:"flex",flexDirection:"column"}});function Da(l){var i,d;const m=Ba(),{apiVersion:f,kind:y,metadata:v,spec:b,relations:A=[],status:O={}}=l.entity,w=groupBy(sortBy(A,P=>P.targetRef),"type");return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Overview"),React.createElement("div",{className:m.root},React.createElement(Pn,{title:"Identity"},React.createElement(List,{dense:!0},React.createElement(ListItem,null,React.createElement(Oe,{primary:"apiVersion",secondary:f})),React.createElement(ListItem,null,React.createElement(Oe,{primary:"kind",secondary:y})),(b==null?void 0:b.type)&&React.createElement(ListItem,null,React.createElement(Oe,{primary:"spec.type",secondary:b.type})),v.uid&&React.createElement(ListItem,null,React.createElement(Oe,{primary:"uid",secondary:v.uid})),v.etag&&React.createElement(ListItem,null,React.createElement(Oe,{primary:"etag",secondary:v.etag})))),React.createElement(Pn,{title:"Metadata"},!!Object.keys(v.annotations||{}).length&&React.createElement(List,{dense:!0,subheader:React.createElement(pt,null,"Annotations",React.createElement(jn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(v.annotations).map(P=>React.createElement(In,{key:P[0],indent:!0,entry:P}))),!!Object.keys(v.labels||{}).length&&React.createElement(List,{dense:!0,subheader:React.createElement(pt,null,"Labels")},Object.entries(v.labels).map(P=>React.createElement(In,{key:P[0],indent:!0,entry:P}))),!!((i=v.tags)!=null&&i.length)&&React.createElement(List,{dense:!0,subheader:React.createElement(pt,null,"Tags")},v.tags.map((P,k)=>React.createElement(ListItem,{key:`${P}-${k}`},React.createElement(ListItemIcon,null),React.createElement(Oe,{primary:P}))))),!!A.length&&React.createElement(Pn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(w).map(([P,k],U)=>React.createElement("div",{key:U},React.createElement(List,{dense:!0,subheader:React.createElement(pt,null,P)},k.map(M=>React.createElement(ListItem,{key:M.targetRef},React.createElement(ListItemIcon,null,React.createElement(Sn,{entityRef:M.targetRef})),React.createElement(Oe,{primary:React.createElement(mt,{entityRef:M.targetRef})}))))))),!!((d=O.items)!=null&&d.length)&&React.createElement(Pn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},O.items.map((P,k)=>React.createElement("div",{key:k},React.createElement(Typography,null,P.level,": ",P.type),React.createElement(Box,{ml:2},P.message))))))}function Ma(l){return React.createElement(React.Fragment,null,React.createElement(DialogContentText$1,{variant:"h2"},"Entity as YAML"),React.createElement(DialogContentText$1,null,"This is the raw entity data as received from the catalog, on YAML form."),React.createElement(DialogContentText$1,null,React.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},React.createElement(CodeSnippet,{text:YAML.stringify(Vn(l.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Jn=(0,ie.Z)(l=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:l.palette.background.paper},tabs:{borderRight:`1px solid ${l.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function At(l){const{children:i,value:d,index:m,...f}=l,y=Jn();return React.createElement("div",{role:"tabpanel",hidden:d!==m,id:`vertical-tabpanel-${m}`,"aria-labelledby":`vertical-tab-${m}`,className:y.tabContents,...f},d===m&&React.createElement(Box,{pl:3,pr:3},i))}function gt(l){return{id:`vertical-tab-${l}`,"aria-controls":`vertical-tabpanel-${l}`}}function oo(l){const i=Jn(),[d,m]=React.useState(0);return useEffect(()=>{m(0)},[l.open]),l.entity?React.createElement(Dialog,{fullWidth:!0,maxWidth:"xl",open:l.open,onClose:l.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:i.fullHeightDialog}},React.createElement(DialogTitle,{id:"entity-inspector-dialog-title"},"Entity Inspector"),React.createElement(DialogContent,{dividers:!0},React.createElement("div",{className:i.root},React.createElement(Tabs,{orientation:"vertical",variant:"scrollable",value:d,onChange:(f,y)=>m(y),"aria-label":"Inspector options",className:i.tabs},React.createElement(Tab,{label:"Overview",...gt(0)}),React.createElement(Tab,{label:"Ancestry",...gt(1)}),React.createElement(Tab,{label:"Colocated",...gt(2)}),React.createElement(Tab,{label:"Raw JSON",...gt(3)}),React.createElement(Tab,{label:"Raw YAML",...gt(4)})),React.createElement(At,{value:d,index:0},React.createElement(Da,{entity:l.entity})),React.createElement(At,{value:d,index:1},React.createElement(xn,{entity:l.entity})),React.createElement(At,{value:d,index:2},React.createElement(La,{entity:l.entity})),React.createElement(At,{value:d,index:3},React.createElement(wa,{entity:l.entity})),React.createElement(At,{value:d,index:4},React.createElement(Ma,{entity:l.entity})))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:l.onClose,color:"primary"},"Close"))):null}function ka(l){var i;const d=useApi(te),m=(i=l.metadata.annotations)==null?void 0:i[ANNOTATION_ORIGIN_LOCATION],f=l.metadata.uid,y=m==="bootstrap:bootstrap",v=useAsync(async()=>{const M=d.getLocationByRef(m);let D;if(!m)D=Promise.resolve([]);else{const Z=`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;D=d.getEntities({filter:{[Z]:m},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(G=>G.items)}return Promise.all([M,D]).then(([Z,G])=>({location:Z,colocatedEntities:G}))},[d,l]),b=useCallback(async function(){const{location:D}=v.value;await d.removeLocationById(D.id)},[d,v]),A=useCallback(async function(){await d.removeEntityByUid(f)},[d,f]);if(y)return{type:"bootstrap",location:m,deleteEntity:A};const{loading:O,error:w,value:P}=v;if(O)return{type:"loading"};if(w)return{type:"error",error:w};const{location:k,colocatedEntities:U}=P;return k?{type:"unregister",location:m,colocatedEntities:U.map(getCompoundEntityRef),unregisterLocation:b,deleteEntity:A}:{type:"only-delete",deleteEntity:A}}const sr=(0,ie.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Na=({entity:l,onConfirm:i,onClose:d})=>{var m;const f=useApi(alertApiRef),y=useApi(configApiRef),v=sr(),b=ka(l),[A,O]=useState(!1),[w,P]=useState(!1),k=(m=y.getOptionalString("app.title"))!=null?m:"Backstage",U=useCallback(async function(){if("unregisterLocation"in b){P(!0);try{await b.unregisterLocation(),i()}catch(G){assertError(G),f.post({message:G.message})}finally{P(!1)}}},[f,i,b]),M=useCallback(async function(){if("deleteEntity"in b){P(!0);try{await b.deleteEntity(),i()}catch(G){assertError(G),f.post({message:G.message})}finally{P(!1)}}},[f,i,b]),D=()=>React.createElement(DialogActions,{className:v.dialogActions},React.createElement(Button,{onClick:d,color:"primary"},"Cancel"));return b.type==="loading"?React.createElement(Progress,null):b.type==="error"?React.createElement(ResponseErrorPanel,{error:b.error}):b.type==="bootstrap"?React.createElement(React.Fragment,null,React.createElement(Alert$1,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',b.location,'"). If you believe this is in error, please contact the ',k," ","integrator."),React.createElement(Box,{marginTop:2},!A&&React.createElement(React.Fragment,null,React.createElement(Button,{variant:"text",size:"small",color:"primary",className:v.advancedButton,onClick:()=>O(!0)},"Advanced Options"),React.createElement(D,null)),A&&React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:w,onClick:M},"Delete Entity"),React.createElement(D,null)))):b.type==="only-delete"?React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:w,onClick:M},"Delete Entity"),React.createElement(D,null)):b.type==="unregister"?React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"This action will unregister the following entities:"),React.createElement(DialogContentText,{component:"ul"},b.colocatedEntities.map(Z=>React.createElement("li",{key:`${Z.kind}:${Z.namespace}/${Z.name}`},React.createElement(mt,{entityRef:Z})))),React.createElement(DialogContentText,null,"Located at the following location:"),React.createElement(DialogContentText,{component:"ul"},React.createElement("li",null,b.location)),React.createElement(DialogContentText,null,"To undo, just re-register the entity in ",k,"."),React.createElement(Box,{marginTop:2},React.createElement(Button,{variant:"contained",color:"secondary",disabled:w,onClick:U},"Unregister Location"),!A&&React.createElement(Box,{component:"span",marginLeft:2},React.createElement(Button,{variant:"text",size:"small",color:"primary",className:v.advancedButton,onClick:()=>O(!0)},"Advanced Options"))),A&&React.createElement(React.Fragment,null,React.createElement(Box,{paddingTop:4,paddingBottom:4},React.createElement(Divider,null)),React.createElement(DialogContentText,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:w,onClick:M},"Delete Entity"))):React.createElement(Alert$1,{severity:"error"},"Internal error: Unknown state")},cr=l=>{const{open:i,onConfirm:d,onClose:m,entity:f}=l;return React.createElement(Dialog,{open:i,onClose:m},React.createElement(DialogTitle,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),React.createElement(DialogContent,null,React.createElement(Na,{entity:f,onConfirm:d,onClose:m})))},Wa=(0,ie.Z)(l=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:l.spacing(1,0,1,0)},title:{margin:l.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:l.palette.text.primary},menuItem:{minHeight:l.spacing(6)},groupWrapper:{margin:l.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Fa(l){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:SettingsIcon},{id:"starred",label:"Starred",icon:Star}]},{name:l!=null?l:"Company",items:[{id:"all",label:"All"}]}]}const Qn=l=>{var i;const{initialFilter:d,availableFilters:m}=l,f=Wa(),v=(i=useApi(configApiRef).getOptionalString("organization.name"))!=null?i:"Company",{filters:b,updateFilters:A,backendEntities:O,queryParameters:{kind:w,user:P},loading:k}=$e(),U=["starred","all"],M=Fa(v).map(De=>({...De,items:De.items.filter(({id:Le})=>["group","user"].some(Vt=>Vt===w)?U.includes(Le):!m||m.includes(Le))})).filter(({items:De})=>!!De.length),{isStarredEntity:D}=Nn(),{isOwnedEntity:Z,loading:G}=$t(),ge=k||G,$=useMemo(()=>new Pt("owned",Z,D),[Z,D]),X=useMemo(()=>new Pt("starred",Z,D),[Z,D]),ee=useMemo(()=>[P].flat()[0],[P]),[se,ft]=useState(ee!=null?ee:d),Et=useMemo(()=>O.filter(xt(compact(Object.values({...b,user:void 0})))),[b,O]),ht=useMemo(()=>({all:Et.length,starred:Et.filter(De=>X.filterEntity(De)).length,owned:Et.filter(De=>$.filterEntity(De)).length}),[Et,X,$]);return useEffect(()=>{ee&&ft(ee)},[ee]),useEffect(()=>{!ge&&se&&se!=="all"&&ht[se]===0&&ft("all")},[ge,ht,se,ft]),useEffect(()=>{A({user:se?new Pt(se,Z,D):void 0})},[se,Z,D,A]),React.createElement(Card,{className:f.root},M.map(De=>React.createElement(Fragment,{key:De.name},React.createElement(Typography,{variant:"subtitle2",component:"span",className:f.title},De.name),React.createElement(Card,{className:f.groupWrapper},React.createElement(List,{disablePadding:!0,dense:!0,role:"menu","aria-label":De.name},De.items.map(Le=>{var Vt,Jt;return React.createElement(MenuItem,{role:"none presentation",key:Le.id,button:!0,divider:!0,onClick:()=>ft(Le.id),selected:Le.id===((Vt=b.user)==null?void 0:Vt.value),className:f.menuItem,disabled:ht[Le.id]===0,"data-testid":`user-picker-${Le.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Le.icon&&React.createElement(ListItemIcon,{className:f.listIcon},React.createElement(Le.icon,{fontSize:"small"})),React.createElement(ListItemText$1,null,React.createElement(Typography,{variant:"body1"},Le.label," ")),React.createElement(ListItemSecondaryAction,null,(Jt=ht[Le.id])!=null?Jt:"-"))}))))))},Xn=(0,ie.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Yn=N.createElement(St.Z,{fontSize:"small"}),Za=N.createElement(Ue.Z,{fontSize:"small"}),ur=()=>{const l=Xn(),{updateFilters:i}=$e(),[d,m]=useState([]);function f(b){i({orphan:b?new gn(b):void 0})}function y(b){i({error:b?new fn(b):void 0})}const v=["Is Orphan","Has Error"];return React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},"Processing Status",React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,options:v,value:d,onChange:(b,A)=>{m(A),f(A.includes("Is Orphan")),y(A.includes("Has Error"))},renderOption:(b,{selected:A})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:Yn,checkedIcon:Za,checked:A}),onClick:O=>O.preventDefault(),label:b}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"processing-status-picker-expand"}),renderInput:b=>React.createElement(TextField,{...b,className:l.input,variant:"outlined"})})))},Ua=(0,ie.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),dr=()=>{const l=Ua();return React.createElement(dt,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:pn,InputProps:{className:l.input}})};function mr(l){var i;const{children:d,value:m}=l,[f,y]=useState((i=m==null?void 0:m.filters)!=null?i:{}),v=useCallback(O=>{y(w=>{const P=typeof O=="function"?O(w):O;return{...w,...P}})},[]),b=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),A=useMemo(()=>{var O,w,P,k,U;return{entities:(O=m==null?void 0:m.entities)!=null?O:b.entities,backendEntities:(w=m==null?void 0:m.backendEntities)!=null?w:b.backendEntities,updateFilters:(P=m==null?void 0:m.updateFilters)!=null?P:v,filters:f,loading:(k=m==null?void 0:m.loading)!=null?k:!1,queryParameters:(U=m==null?void 0:m.queryParameters)!=null?U:b.queryParameters,error:m==null?void 0:m.error}},[m,b,f,v]);return React.createElement(ct.Provider,{value:A},d)}},50576:function(Me,Fe,c){Me.exports=c.p+"static/createComponent.975d1e1e..svg"},16628:function(Me,Fe,c){Me.exports=c.p+"static/missingAnnotation.67f79e98..svg"},68095:function(Me,Fe,c){Me.exports=c.p+"static/noBuild.1715fa71..svg"},30001:function(Me,Fe,c){Me.exports=c.p+"static/noInformation.4b426325..svg"},15703:function(Me,Fe,c){Me.exports=c.p+"static/mic-drop.fe3ef4d0..svg"}}]);})();

//# sourceMappingURL=module-immobiliarelabs.bc57b139.js.map